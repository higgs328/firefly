import{a as _}from"./chunk-PMIZEMLB.js";import"./chunk-CCSZEQ2U.js";import{a as A}from"./chunk-YX7N6YV7.js";import{a as f}from"./chunk-FY4QM6AV.js";import"./chunk-456M7HFK.js";import"./chunk-JQAW4OB5.js";import"./chunk-D3CUKSGS.js";import"./chunk-K75TK42V.js";import"./chunk-PEW2PLAN.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-4N4D2YQX.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as u,k as m}from"./chunk-TG45K3WR.js";import{f as p}from"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as r}from"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import{e as l}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as V}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import{b as w,e as h,o as d,r as c}from"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import{b as y}from"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{f as n}from"./chunk-VTHXE323.js";var v="analysis-view-handles",i=class extends _(A(f)){constructor(s){super(s),this.type="viewshed-3d",this._analysisModule=null}initialize(){this.addHandles(u(()=>this.layer.source,s=>{this._destroyAnalysisView(),s!=null&&this._createAnalysisView(s)},m),v)}destroy(){this.removeHandles(v),this._destroyAnalysisView()}whenAnalysisView(){return n(this,null,function*(){if(this.analysisView!=null)return this.analysisView;if(this._createAnalysisViewTask!=null)return this._createAnalysisViewTask.promise;throw new y("layerview:no-analysisview-for-analysis","The analysis has not been set on the ViewshedLayer of this layer view")})}isUpdating(){return this._createAnalysisViewTask!=null||this.analysisView!=null&&this.analysisView.updating}_createAnalysisView(s){let e=p(a=>n(this,null,function*(){return this.analysisView=yield this._createAnalysisViewPromise(s,a),this._createAnalysisViewTask===e&&(this._createAnalysisViewTask=null),this.analysisView}));this.addResolvingPromise(e.promise),this._createAnalysisViewTask=e}_destroyAnalysisView(){this.analysisView=w(this.analysisView),this._createAnalysisViewTask=h(this._createAnalysisViewTask)}_createAnalysisViewPromise(s,e){return n(this,null,function*(){let a=this._analysisModule;if(a==null){let t=yield this._loadAnalysisModule();this._analysisModule=t,a=t}let o=new a.default({analysis:s,view:this.view,parent:this});if(yield o.when(),c(e)){o.destroy();let t=this.layer.source;throw t!=null&&s!==t?d("Source has changed during creation."):new y("layerview:no-analysisview-for-analysis","The analysis has not been added to the ViewshedLayer of this layer view",{analysis:s})}return o})}_loadAnalysisModule(){return import("./chunk-6CFARMT7.js")}};r([l()],i.prototype,"type",void 0),r([l()],i.prototype,"analysisView",void 0),r([l()],i.prototype,"_createAnalysisViewTask",void 0),i=r([V("esri.views.3d.layers.ViewshedLayerView3D")],i);var E=i;export{E as default};
