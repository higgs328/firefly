import{a as g}from"./chunk-6ZXO4WLE.js";import{b as R}from"./chunk-NSUARQNU.js";import{b as w,e as d}from"./chunk-HD5Z6MAY.js";import{b as f}from"./chunk-2HYVVLKS.js";import{c as l}from"./chunk-VIEK2X23.js";import{a as t}from"./chunk-QGVBCWUY.js";import{e as o}from"./chunk-NFIPKH6V.js";import{l as y}from"./chunk-5QEXLALV.js";import{p as h}from"./chunk-4PTIEWMT.js";import{b as c}from"./chunk-YOFFGXOB.js";import{f as m}from"./chunk-VTHXE323.js";var C=v=>{let e=class extends v{constructor(){super(...arguments),this.view=null}get timeExtent(){return g(this.layer,this.view?.timeExtent,this._get("timeExtent"))}fetchPopupFeaturesAtLocation(a,n){return m(this,null,function*(){let{layer:s}=this;if(!a)throw new c("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:s});let{popupEnabled:x}=s,p=R(s,n);if(!x||p==null)return[];let E=yield p.getRequiredFields();h(n);let r=new f;r.timeExtent=this.timeExtent,r.geometry=a,r.outFields=E,r.outSpatialReference=a.spatialReference;let{resolution:i,spatialReference:u}=this.view,S=this.view.type==="2d"?new l(i,i,u):new l(.5*i,.5*i,u),{returnTopmostRaster:b,showNoDataRecords:F}=p.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},T={returnDomainValues:!0,returnTopmostRaster:b,pixelSize:S,showNoDataRecords:F,signal:n?.signal};return s.queryVisibleRasters(r,T).then(D=>D)})}getSourceScale(){return m(this,null,function*(){return yield w(),yield this.layer.load(),d(this.layer.serviceRasterInfo,this.view.spatialReference)})}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return t([o()],e.prototype,"layer",void 0),t([o()],e.prototype,"suspended",void 0),t([o({readOnly:!0})],e.prototype,"timeExtent",null),t([o()],e.prototype,"view",void 0),e=t([y("esri.views.layers.ImageryLayerView")],e),e};export{C as a};
