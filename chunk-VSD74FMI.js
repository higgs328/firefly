import{a as m}from"./chunk-VYZHOYXV.js";import{e as T,n as o,o as e,q as u,z as i}from"./chunk-HM5RIVQC.js";import{b as I}from"./chunk-YOFFGXOB.js";import{g as d}from"./chunk-XRGPJ3QY.js";import{a as b}from"./chunk-QBWJMFH5.js";var O=()=>d.getLogger("esri.views.webgl.checkWebGLError");function D(t,s){switch(s){case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}var B=!!b("enable-feature:webgl-debug");function G(){return B}function L(){return B}function p(t){if(G()){let s=t.getError();if(s){let R=D(t,s),E=new Error().stack;O().error(new I("webgl-error","WebGL error occurred",{message:R,stack:E}))}}}function N(t){let s=t.gl;switch(s.getError()){case s.NO_ERROR:return null;case s.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case s.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case s.INVALID_OPERATION:return"The specified command is not allowed for the current state";case s.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case s.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case s.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function y(t,s){return(t.vertexBuffers.get(s)?.usedMemory??0)/C(t.layout.get(s))}function C(t){return t[0].stride}function H(t,s,R,E,f=0){let n=t.gl;t.bindBuffer(R);for(let r of E){let a=s.get(r.name);if(a==null){console.warn(`There is no location for vertex attribute '${r.name}' defined.`);continue}let _=f*r.stride;if(r.count<=4)n.vertexAttribPointer(a,r.count,r.type,r.normalized,r.stride,r.offset+_),n.enableVertexAttribArray(a),r.divisor>0&&t.gl.vertexAttribDivisor(a,r.divisor);else if(r.count===9)for(let c=0;c<3;c++)n.vertexAttribPointer(a+c,3,r.type,r.normalized,r.stride,r.offset+12*c+_),n.enableVertexAttribArray(a+c),r.divisor>0&&t.gl.vertexAttribDivisor(a+c,r.divisor);else if(r.count===16)for(let c=0;c<4;c++)n.vertexAttribPointer(a+c,4,r.type,r.normalized,r.stride,r.offset+16*c+_),n.enableVertexAttribArray(a+c),r.divisor>0&&t.gl?.vertexAttribDivisor(a+c,r.divisor);else console.error("Unsupported vertex attribute element count: "+r.count);if(G()){let c=N(t),A=m(r.type),l=r.offset,S=Math.round(A/l)!==A/l?`. Offset not a multiple of stride. DataType requires ${A} bytes, but descriptor has an offset of ${l}`:"";c&&console.error(`Unable to bind vertex attribute "${r.name}" with baseInstanceOffset ${_}${S}:`,c,r)}}}function V(t,s,R,E){let f=t.gl;t.bindBuffer(R);for(let n of E){let r=s.get(n.name);if(n.count<=4)f.disableVertexAttribArray(r),n.divisor&&n.divisor>0&&t.gl?.vertexAttribDivisor(r,0);else if(n.count===9)for(let a=0;a<3;a++)f.disableVertexAttribArray(r+a),n.divisor&&n.divisor>0&&t.gl?.vertexAttribDivisor(r+a,0);else if(n.count===16)for(let a=0;a<4;a++)f.disableVertexAttribArray(r+a),n.divisor&&n.divisor>0&&t.gl?.vertexAttribDivisor(r+a,0);else console.error("Unsupported vertex attribute element count: "+n.count)}t.unbindBuffer(T.ARRAY_BUFFER)}function w(t){switch(t){case o.ALPHA:case o.LUMINANCE:case o.RED:case o.RED_INTEGER:case e.R8:case e.R8I:case e.R8UI:case e.R8_SNORM:case u.STENCIL_INDEX8:return 1;case o.LUMINANCE_ALPHA:case o.RG:case o.RG_INTEGER:case e.RGBA4:case e.R16F:case e.R16I:case e.R16UI:case e.RG8:case e.RG8I:case e.RG8UI:case e.RG8_SNORM:case e.RGB565:case e.RGB5_A1:case u.DEPTH_COMPONENT16:return 2;case o.DEPTH_COMPONENT:case o.RGB:case o.RGB_INTEGER:case e.RGB8:case e.RGB8I:case e.RGB8UI:case e.RGB8_SNORM:case e.SRGB8:case u.DEPTH_COMPONENT24:return 3;case o.DEPTH_STENCIL:case o.DEPTH24_STENCIL8:case o.RGBA:case o.RGBA_INTEGER:case e.RGBA8:case e.R32F:case e.R11F_G11F_B10F:case e.RG16F:case e.R32I:case e.R32UI:case e.RG16I:case e.RG16UI:case e.RGBA8I:case e.RGBA8UI:case e.RGBA8_SNORM:case e.SRGB8_ALPHA8:case e.RGB9_E5:case e.RGB10_A2UI:case e.RGB10_A2:case u.DEPTH_STENCIL:case u.DEPTH_COMPONENT32F:case u.DEPTH24_STENCIL8:return 4;case u.DEPTH32F_STENCIL8:return 5;case e.RGB16F:case e.RGB16I:case e.RGB16UI:return 6;case e.RG32F:case e.RG32I:case e.RG32UI:case e.RGBA16F:case e.RGBA16I:case e.RGBA16UI:return 8;case e.RGB32F:case e.RGB32I:case e.RGB32UI:return 12;case e.RGBA32F:case e.RGBA32I:case e.RGBA32UI:return 16;case i.COMPRESSED_RGB_S3TC_DXT1_EXT:case i.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case i.COMPRESSED_RGBA_S3TC_DXT3_EXT:case i.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case i.COMPRESSED_R11_EAC:case i.COMPRESSED_SIGNED_R11_EAC:case i.COMPRESSED_RGB8_ETC2:case i.COMPRESSED_SRGB8_ETC2:case i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case i.COMPRESSED_RG11_EAC:case i.COMPRESSED_SIGNED_RG11_EAC:case i.COMPRESSED_RGBA8_ETC2_EAC:case i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}export{B as a,G as b,L as c,p as d,N as e,y as f,H as g,V as h,w as i};
