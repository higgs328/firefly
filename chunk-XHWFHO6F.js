import{a as z}from"./chunk-M2Q5RQV4.js";import"./chunk-UU4VF4Z7.js";import"./chunk-LQ4BYGTC.js";import"./chunk-WB62I5UH.js";import"./chunk-JUJYL7GW.js";import{a as A}from"./chunk-CMN7PIBX.js";import{b as H}from"./chunk-UPZXQSRZ.js";import"./chunk-7GIEDGLP.js";import"./chunk-WKJYYP4U.js";import"./chunk-VP2YX4L2.js";import"./chunk-IDSQ2YJ4.js";import"./chunk-FPCHE4I2.js";import"./chunk-SJAM4JSC.js";import"./chunk-2UKYPYIL.js";import"./chunk-5C7K2G4S.js";import"./chunk-3HZYMAA2.js";import"./chunk-4A4DMQSS.js";import"./chunk-MBAHJKAN.js";import"./chunk-M3BFYJNF.js";import"./chunk-QYEHKB5C.js";import"./chunk-PT2T74VZ.js";import"./chunk-GTCK26BQ.js";import"./chunk-AC55GQHL.js";import"./chunk-HB42CTAY.js";import"./chunk-PKVI3POI.js";import"./chunk-NQ53MXMB.js";import"./chunk-4RK2B3SZ.js";import"./chunk-F5M4APKY.js";import"./chunk-55O4EG62.js";import"./chunk-ZQ2SHTTW.js";import{a as R}from"./chunk-EPKVBNFW.js";import"./chunk-TGSXSDDB.js";import"./chunk-B3VPRADQ.js";import"./chunk-HJQNAAJT.js";import"./chunk-KP75LCOH.js";import"./chunk-ES4WUTEM.js";import"./chunk-QWX4TI27.js";import"./chunk-JJ3DE5DS.js";import"./chunk-OBYF3P4E.js";import{a as V}from"./chunk-FHBFWDFD.js";import"./chunk-KGCPVVBF.js";import"./chunk-AT3LJJPR.js";import"./chunk-NYVW6BKJ.js";import"./chunk-6OWZRPJO.js";import"./chunk-67GIWMYL.js";import"./chunk-5AFOYCWC.js";import"./chunk-Z3MWEX65.js";import"./chunk-YB6RTOHR.js";import"./chunk-H2NTHPNN.js";import"./chunk-EJ2UYJJS.js";import"./chunk-CVKHXVTW.js";import"./chunk-456M7HFK.js";import"./chunk-4D3QHJI2.js";import"./chunk-E2J2V7JN.js";import"./chunk-7U52UAO2.js";import"./chunk-2WYOVBUR.js";import"./chunk-GPQCYR3E.js";import"./chunk-WDTJILD4.js";import"./chunk-P7HHUOEW.js";import"./chunk-Z6CDEQPZ.js";import"./chunk-DKNG2DCF.js";import"./chunk-RZU6EEB3.js";import"./chunk-NIRJWS2D.js";import"./chunk-H3ZWZZ2B.js";import"./chunk-VRIRKZGO.js";import"./chunk-U7BD7DJH.js";import"./chunk-LBB4AU7W.js";import"./chunk-E3OE5HRA.js";import"./chunk-TSG4MDJV.js";import"./chunk-HCW4M77K.js";import"./chunk-H4IF7PQO.js";import"./chunk-QKVTMI24.js";import"./chunk-GGYZRKBV.js";import"./chunk-I76R3PW5.js";import"./chunk-4KM76TSJ.js";import"./chunk-6RE36L2Q.js";import"./chunk-37PSR6DC.js";import"./chunk-6ZSLG6BI.js";import"./chunk-LC44KLTN.js";import"./chunk-A66JV4A6.js";import"./chunk-JBFXTI45.js";import"./chunk-Y4PJQPM4.js";import"./chunk-GNPXNHTO.js";import"./chunk-7P56QMT7.js";import"./chunk-P4JHTV62.js";import"./chunk-H25DKJGS.js";import"./chunk-QTO4E4UZ.js";import"./chunk-SO3JGF64.js";import"./chunk-TIWKONVC.js";import"./chunk-PRJOIHPH.js";import"./chunk-6DALCDDU.js";import"./chunk-RK6C6D6K.js";import"./chunk-CHCKIOZR.js";import"./chunk-TUF2Y2FX.js";import"./chunk-4QHB56M5.js";import"./chunk-KN5AJ2NM.js";import"./chunk-5A7AFZJT.js";import"./chunk-Z5EURZKA.js";import"./chunk-OVX6BGGA.js";import"./chunk-PBAMEKFE.js";import"./chunk-XIZ7IH6M.js";import"./chunk-JD66UCS7.js";import"./chunk-FU7RO3AR.js";import"./chunk-4YRY3D3A.js";import"./chunk-ZZ5UYT7M.js";import"./chunk-U4XVPHQU.js";import"./chunk-KLZGQ7M6.js";import"./chunk-N36GL6VL.js";import"./chunk-UX3QUEDM.js";import"./chunk-YZJDOXQC.js";import"./chunk-6ZY36ZHO.js";import"./chunk-6RHGQ4Z5.js";import"./chunk-G23ELQMS.js";import"./chunk-PZOK2JKH.js";import"./chunk-FJUYECJ6.js";import"./chunk-2SJBRRT6.js";import"./chunk-2SXWYVJN.js";import"./chunk-ELUASJOG.js";import"./chunk-KQZGMGWR.js";import"./chunk-66BPZDMW.js";import"./chunk-GAVFKWSK.js";import"./chunk-DK4DGLAO.js";import"./chunk-ZM24RY22.js";import"./chunk-7Y6S2GNA.js";import"./chunk-VOB6IBIW.js";import"./chunk-63B3IOWG.js";import"./chunk-PE276TWH.js";import"./chunk-BMZ3PE5Y.js";import"./chunk-EHG7JRYJ.js";import"./chunk-FNY6LFKI.js";import"./chunk-IBVI7JQ7.js";import"./chunk-2DFFQEIV.js";import"./chunk-4JY7PCV4.js";import"./chunk-BBB7KLHV.js";import"./chunk-JPC2A6ML.js";import"./chunk-OGFDJ67M.js";import"./chunk-5K6CB5PS.js";import"./chunk-J2AEVBSH.js";import"./chunk-5ODXFRPI.js";import"./chunk-E5QCV5LT.js";import"./chunk-QS3EYJPF.js";import"./chunk-HJJZ2AXH.js";import"./chunk-TPNSUEHH.js";import"./chunk-SMVNQSZ4.js";import"./chunk-Z2QGLRDB.js";import"./chunk-7IDFDPA3.js";import"./chunk-VL2YL74P.js";import"./chunk-P2AJD2R2.js";import"./chunk-UMJIJLDA.js";import"./chunk-E5NFS3KN.js";import"./chunk-HQHD6BMN.js";import"./chunk-AIKKGGPG.js";import"./chunk-RDGG4TVD.js";import"./chunk-3IQFPOUU.js";import"./chunk-I4CY6X6S.js";import"./chunk-VQ4QGNRX.js";import"./chunk-LLWQ5E4P.js";import"./chunk-GNEAU6X4.js";import"./chunk-5RH7OPHX.js";import"./chunk-JFB3F3BC.js";import"./chunk-J4JQLN5L.js";import"./chunk-4KXJ537H.js";import"./chunk-JIRULGDT.js";import"./chunk-QJGOWIJD.js";import"./chunk-DAEIFJ76.js";import"./chunk-YHWE4TIZ.js";import"./chunk-B2QMHWYJ.js";import"./chunk-QML26MQC.js";import"./chunk-RNZY2XUD.js";import"./chunk-JXPUHKCT.js";import"./chunk-XR5FT7TQ.js";import"./chunk-4YTM754S.js";import"./chunk-LAX5536Z.js";import"./chunk-N3HRYLNW.js";import"./chunk-4DBMALZW.js";import"./chunk-CVWWHM2V.js";import"./chunk-6OQYVEQJ.js";import"./chunk-XNHRPKJK.js";import"./chunk-YOXOWGT6.js";import"./chunk-EFZOSMYP.js";import"./chunk-WI7F4ZKJ.js";import"./chunk-MJ7M24NH.js";import"./chunk-GJH4QFRX.js";import"./chunk-T63F7663.js";import"./chunk-O4V2VBSK.js";import"./chunk-5TKRKB5E.js";import"./chunk-XAGMDNNR.js";import"./chunk-OP2TLIUN.js";import"./chunk-T2THIR6K.js";import"./chunk-LORHDXEB.js";import"./chunk-BBBPJI4H.js";import"./chunk-45BTW5EG.js";import"./chunk-TPFBHGDM.js";import"./chunk-73NLRHJD.js";import"./chunk-PNFEUBDF.js";import"./chunk-6RCCEJDL.js";import"./chunk-PQ2TNDUX.js";import"./chunk-6X6MKRQ3.js";import"./chunk-FQFHMHYU.js";import"./chunk-SZMEI3WL.js";import"./chunk-KKVGD67U.js";import"./chunk-MYOJWRDU.js";import"./chunk-L7UKJKHG.js";import"./chunk-V2IENAEU.js";import"./chunk-QAGQFNF2.js";import"./chunk-SY7JS2VW.js";import"./chunk-WK57SDN6.js";import"./chunk-AG4V3ZUO.js";import"./chunk-YWLMJ26A.js";import"./chunk-QAWNU3UJ.js";import"./chunk-HRQT4R6X.js";import"./chunk-44BHLWQ4.js";import"./chunk-5BPM64SU.js";import"./chunk-7PAP5DT2.js";import"./chunk-OY5GEC5R.js";import"./chunk-CZAUQJCN.js";import"./chunk-5GYPON2V.js";import"./chunk-TC4RVDI6.js";import"./chunk-WDY6ALC6.js";import"./chunk-KGFXFSTP.js";import"./chunk-PMVHHMQJ.js";import"./chunk-NAFOM5UA.js";import"./chunk-B526OXED.js";import"./chunk-XPTKDFYS.js";import"./chunk-ZYTQ7T5Q.js";import"./chunk-MZC42HHY.js";import"./chunk-DREO3ZIC.js";import"./chunk-L7OBQ2MX.js";import"./chunk-2SEACSJ7.js";import"./chunk-FTMCRRWI.js";import"./chunk-L54EYG5G.js";import"./chunk-DH7A4UPK.js";import"./chunk-JLE3XOUQ.js";import"./chunk-ERHGRSXY.js";import"./chunk-AMEUMZLJ.js";import"./chunk-VU2QHSDR.js";import"./chunk-QHZWU2K5.js";import"./chunk-JMNB6CKE.js";import"./chunk-L3RS33Q4.js";import"./chunk-ZUPR4L6O.js";import"./chunk-DO7UF2F2.js";import{a as S}from"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-MROWXKZJ.js";import"./chunk-4TAYW5IF.js";import"./chunk-AR2JEA37.js";import"./chunk-IPLEDIX4.js";import"./chunk-RB3POJ2P.js";import"./chunk-HV62ZNCD.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import"./chunk-K57Z4J34.js";import"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-YW3L7OMP.js";import"./chunk-72MRWGPJ.js";import"./chunk-2GF6YDKP.js";import"./chunk-DDZ3KR2Q.js";import"./chunk-TC77DYTW.js";import"./chunk-F2BQ2GD6.js";import"./chunk-R3XLNYYB.js";import"./chunk-2HYVVLKS.js";import"./chunk-XRTA5GHC.js";import"./chunk-Y6XW36QP.js";import"./chunk-ZXKU6WBY.js";import"./chunk-RBVFFAW6.js";import"./chunk-XQOE7Z4Q.js";import"./chunk-BMYVPMAK.js";import"./chunk-6F25LG6O.js";import"./chunk-6KRFVLII.js";import"./chunk-7QY3BMVN.js";import"./chunk-Y7GY5YIF.js";import"./chunk-LMGYHZE3.js";import"./chunk-5LG2P6MT.js";import"./chunk-GJ2QRXGN.js";import"./chunk-TJ6P6NLD.js";import"./chunk-NX5B6XBR.js";import"./chunk-2JABY6DU.js";import"./chunk-MPRKSQLC.js";import"./chunk-57TARQ4F.js";import"./chunk-6RBQSBA2.js";import"./chunk-CSNRCIB5.js";import"./chunk-3JGYBNJA.js";import"./chunk-DA3SDKGO.js";import"./chunk-ZOEPYNM4.js";import"./chunk-57VFBGF3.js";import"./chunk-GWBRHLNH.js";import"./chunk-BJH4F4SM.js";import"./chunk-Z3RBZHAK.js";import"./chunk-F5AJITOA.js";import"./chunk-IHATPE6U.js";import"./chunk-PU4AK46X.js";import"./chunk-73K3NWCV.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-ZC6EBRE4.js";import"./chunk-ZAZJB7CV.js";import"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-E7AX56GD.js";import"./chunk-IDVLLREH.js";import"./chunk-DWLSVYOY.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-D3CUKSGS.js";import"./chunk-2TX472ZB.js";import"./chunk-7QNKS2X6.js";import"./chunk-VCCMJ6BV.js";import"./chunk-QK56OQGR.js";import"./chunk-FXCL7YYQ.js";import"./chunk-QKO56XO6.js";import"./chunk-JRGT3GTH.js";import"./chunk-K75TK42V.js";import"./chunk-CELWVZPW.js";import"./chunk-VV5G7VY5.js";import"./chunk-OLOKUDVI.js";import"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-KVM6SHDX.js";import"./chunk-POX73EYJ.js";import"./chunk-NKUXRYJG.js";import"./chunk-P33JWG3G.js";import"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-2GJBUR2F.js";import"./chunk-DKGGDYJI.js";import"./chunk-5LA3PVK5.js";import"./chunk-IR6XCBC4.js";import"./chunk-C6JPAW54.js";import"./chunk-WD3OPXCN.js";import"./chunk-FA3WGIU4.js";import"./chunk-WWVPA6PE.js";import"./chunk-YPMM52MU.js";import"./chunk-BBR7CJCO.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-O3EGNJTY.js";import"./chunk-GHKL3NOH.js";import"./chunk-MDSLION2.js";import{a as I}from"./chunk-AXYQJCCX.js";import{a as _}from"./chunk-5XCFNEYX.js";import{a as $}from"./chunk-GQL2MBZT.js";import"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import{g as P}from"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as h,c as F,e as x,j as g}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as n}from"./chunk-QGVBCWUY.js";import{H as W}from"./chunk-MYO4NP2N.js";import{e as s}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as M}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import{j as T}from"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import{F as B,z as D}from"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import{d as N,g as C}from"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{a as f,f as O}from"./chunk-VTHXE323.js";var m="esri-popup",b=`${m}--is-docked`,c={base:m,baseHidden:`${m}--hidden`,main:`${m}__main-container`,shadow:`${m}--shadow`,isDocked:b,isDockedTopLeft:`${b}-top-left`,isDockedTopCenter:`${b}-top-center`,isDockedTopRight:`${b}-top-right`,isDockedBottomLeft:`${b}-bottom-left`,isDockedBottomCenter:`${b}-bottom-center`,isDockedBottomRight:`${b}-bottom-right`,alignTopCenter:`${m}--aligned-top-center`,alignBottomCenter:`${m}--aligned-bottom-center`,alignTopLeft:`${m}--aligned-top-left`,alignBottomLeft:`${m}--aligned-bottom-left`,alignTopRight:`${m}--aligned-top-right`,alignBottomRight:`${m}--aligned-bottom-right`,pointer:`${m}__pointer`,pointerDirection:`${m}__pointer-direction`};var v=class extends W{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!0,this.featureMenuHeading=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.heading=!0,this.spinner=!0}};n([s({type:Boolean,nonNullable:!0})],v.prototype,"actionBar",void 0),n([s({type:Boolean,nonNullable:!0})],v.prototype,"closeButton",void 0),n([s({type:Boolean,nonNullable:!0})],v.prototype,"collapseButton",void 0),n([s({type:Boolean,nonNullable:!0})],v.prototype,"featureMenuHeading",void 0),n([s({type:Boolean,nonNullable:!0})],v.prototype,"featureNavigation",void 0),n([s({type:Boolean,nonNullable:!0})],v.prototype,"featureListLayerTitle",void 0),n([s({type:Boolean,nonNullable:!0})],v.prototype,"heading",void 0),n([s({type:Boolean,nonNullable:!0})],v.prototype,"spinner",void 0),v=n([M("esri.widgets.Popup.PopupVisibleElements")],v);var L=v;var Y=200,U={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},a=class extends ${constructor(t,e){super(t,e),this._dockAction=new S({id:"popup-dock-action"}),this._featuresWidget=new z({responsiveActionsEnabled:!0}),this._containerNode=null,this._mainContainerNode=null,this._pointerOffsetInPx=16,this._focusAbortController=null,this.alignment="auto",this.dockEnabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new A,this.visibleElements=new L}initialize(){this.addHandles([h(()=>[this.viewModel?.view?.widthBreakpoint,this.dockEnabled],()=>this._handleDockIcon(),g),h(()=>[this.dockEnabled,this.messages?.undock,this.messages?.dock],()=>this._handleDockEnabled(),g),h(()=>this.dockOptions,t=>{let{_dockAction:e}=this,i=this._featuresWidget.headerActions;i.remove(e),t.buttonEnabled&&i.add(e)},g),h(()=>this.viewModel?.screenLocation,()=>this._positionContainer()),h(()=>[this.viewModel?.active,this.dockEnabled],()=>this._toggleScreenLocationEnabled()),h(()=>[this.viewModel?.screenLocation,this.viewModel?.view?.padding,this.viewModel?.view?.size,this.viewModel?.active,this.viewModel?.location,this.alignment],()=>this.reposition()),h(()=>this.viewModel?.view?.size,(t,e)=>this._updateDockEnabledForViewSize(t,e)),h(()=>this.viewModel?.view,(t,e)=>this._viewChange(t,e)),h(()=>this.viewModel?.view?.ready,(t,e)=>this._viewReadyChange(t??!1,e??!1)),h(()=>this.viewModel,()=>this._featuresWidget.viewModel=this.viewModel,g),h(()=>this._featureNavigationTop,t=>this._featuresWidget.featureNavigationTop=t,g),h(()=>this.headingLevel,t=>this._featuresWidget.headingLevel=t,g),h(()=>this.visibleElements.actionBar,t=>this._featuresWidget.visibleElements.actionBar=!!t,g),h(()=>this.visibleElements.closeButton,t=>this._featuresWidget.visibleElements.closeButton=!!t,g),h(()=>this.visibleElements.collapseButton,t=>this._featuresWidget.visibleElements.collapseButton=!!t,g),h(()=>this.visibleElements.heading,t=>this._featuresWidget.visibleElements.heading=!!t,g),h(()=>this.visibleElements.spinner,t=>this._featuresWidget.visibleElements.spinner=!!t,g),h(()=>this.visibleElements.featureNavigation,t=>this._featuresWidget.visibleElements.featureNavigation=!!t,g),h(()=>this.visibleElements.featureMenuHeading,t=>this._featuresWidget.visibleElements.featureMenuHeading=!!t,g),h(()=>this.visibleElements.featureListLayerTitle,t=>this._featuresWidget.visibleElements.featureListLayerTitle=!!t,g),F(()=>this._featuresWidget,"trigger-header-action",t=>{t.action===this._dockAction&&(this.dockEnabled=!this.dockEnabled)})])}destroy(){this._dockAction.destroy(),this._featuresWidget&&(this._featuresWidget.viewModel=new H,this._featuresWidget.destroy()),this._focusAbortController?.abort()}get _featureNavigationTop(){let{currentAlignment:t,currentDockPosition:e}=this;return t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||e==="top-left"||e==="top-center"||e==="top-right"}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}get active(){return this.viewModel.active}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(t){this.viewModel.autoCloseEnabled=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get collapsed(){return this._featuresWidget.collapsed}set collapsed(t){this._featuresWidget.collapsed=t}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||U}set dockOptions(t){let e=f({},U),i=this.viewModel?.view?.breakpoints,l={};i&&(l.width=i.xsmall,l.height=i.xsmall);let d=f(f({},e),t),o=f(f({},e.breakpoint),l),{breakpoint:r}=d;typeof r=="object"?d.breakpoint=f(f({},o),r):r&&(d.breakpoint=o),this._set("dockOptions",d),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get icon(){return"popup"}set icon(t){this._overrideIfSome("icon",t)}get initialDisplayMode(){return this.viewModel.initialDisplayMode}set initialDisplayMode(t){this.viewModel.initialDisplayMode=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){return this._featuresWidget.selectedDrillInFeature??null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){return this._featuresWidget.selectedFeatureWidget}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}blur(){let{active:t}=this.viewModel;t||C.getLogger(this).warn("Popup can only be blurred when currently active."),this._featuresWidget.blur()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(t,e){return this.viewModel.fetchFeatures(t,e)}focus(){let{active:t}=this.viewModel;t||C.getLogger(this).warn("Popup can only be focused when currently active."),this._handleFocus()}next(){return this.viewModel.next()}open(t){let e=!!t&&!!t.featureMenuOpen,i={collapsed:!!t&&!!t.collapsed,featureMenuOpen:e};this.set(i),this.viewModel.open(t),t?.shouldFocus&&this._handleFocus(!0)}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){let{dockEnabled:t,currentAlignment:e,currentDockPosition:i}=this,{active:l,screenLocation:d}=this.viewModel,o=l&&t,r=l&&!t,u=this.selectedFeature?.layer?.title,p=this.selectedFeature?.layer?.id,w={[c.alignTopCenter]:e==="top-center",[c.alignBottomCenter]:e==="bottom-center",[c.alignTopLeft]:e==="top-left",[c.alignBottomLeft]:e==="bottom-left",[c.alignTopRight]:e==="top-right",[c.alignBottomRight]:e==="bottom-right",[c.isDocked]:o,[c.shadow]:r,[c.isDockedTopLeft]:i==="top-left",[c.isDockedTopCenter]:i==="top-center",[c.isDockedTopRight]:i==="top-right",[c.isDockedBottomLeft]:i==="bottom-left",[c.isDockedBottomCenter]:i==="bottom-center",[c.isDockedBottomRight]:i==="bottom-right"};return _("div",{afterCreate:this._positionContainer,afterUpdate:this._positionContainer,"aria-hidden":(!l).toString(),"aria-label":N(this.title??""),"aria-modal":"false",bind:this,class:this.classes(c.base,w,{[c.baseHidden]:!d&&!t}),"data-layer-id":p,"data-layer-title":u,role:"dialog"},l?[this._renderMainContainer(),this._renderPointer()]:null)}_renderPointer(){return this.dockEnabled?null:_("div",{class:c.pointer,key:"popup-pointer",role:"presentation"},_("div",{class:this.classes(c.pointerDirection,c.shadow)}))}_renderMainContainer(){let{dockEnabled:t}=this,e={[c.shadow]:t};return _("div",{afterCreate:this._setMainContainerNode,afterUpdate:this._setMainContainerNode,bind:this,class:this.classes(c.main,V.widget,e)},this._featuresWidget.render())}_getAnimationDurationMS(){let{_containerNode:t}=this;return t?1e3*parseFloat(window.getComputedStyle(t).animationDuration):Y}_handleFocus(t=!1){return O(this,null,function*(){this._focusAbortController?.abort(),this._focusAbortController=new AbortController;let e=this._focusAbortController.signal;t&&(yield x(()=>this.viewModel?.active===!0,{signal:e})),yield D(T(e)),yield D(B(this._getAnimationDurationMS(),e)),this._featuresWidget.focus()})}_isOutsideView(t){let{popupHeight:e,popupWidth:i,screenLocation:l,side:d,view:o}=t;if(isNaN(i)||isNaN(e)||!o||!l)return!1;let r=o.padding;return d==="right"&&l.x+i/2>o.width-r.right||d==="left"&&l.x-i/2<r.left||d==="top"&&l.y-e<r.top||d==="bottom"&&l.y+e>o.height-r.bottom}_calculateAutoAlignment(t){if(t!=="auto")return t;let{_pointerOffsetInPx:e,_containerNode:i,_mainContainerNode:l,viewModel:d}=this,{screenLocation:o,view:r}=d;if(o==null||!r||!i)return"top-center";function u(X){return parseInt(X.replaceAll(/[^-\d.]/g,""),10)}let p=l?window.getComputedStyle(l,null):null,w=p?u(p.getPropertyValue("max-height")):0,j=p?u(p.getPropertyValue("height")):0,{height:q,width:G}=i.getBoundingClientRect(),y=G+e,k=Math.max(q,w,j)+e,J=this._isOutsideView({popupHeight:k,popupWidth:y,screenLocation:o,side:"right",view:r}),K=this._isOutsideView({popupHeight:k,popupWidth:y,screenLocation:o,side:"left",view:r}),E=this._isOutsideView({popupHeight:k,popupWidth:y,screenLocation:o,side:"top",view:r}),Q=this._isOutsideView({popupHeight:k,popupWidth:y,screenLocation:o,side:"bottom",view:r});return K?E?"bottom-right":"top-right":J?E?"bottom-left":"top-left":E?Q?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return typeof t=="function"?t.call(this):t}_getCurrentAlignment(){let{alignment:t,dockEnabled:e}=this;return e||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(t){let e=["left","right"];return P(this.container)&&e.reverse(),t?.replace(/leading/gi,e[0]).replaceAll(/trailing/gi,e[1])}_callDockPosition(t){return typeof t=="function"?t.call(this):t}_getDockPosition(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_calculateAutoDockPosition(t){if(t!=="auto")return t;let e=this.viewModel?.view,i=P(this.container)?"top-left":"top-right";if(!e)return i;let l=e.padding||{left:0,right:0,top:0,bottom:0},d=e.width-l.left-l.right,{breakpoints:o}=e;return o&&d<=o.xsmall?"bottom-center":i}_getDockIcon(){let t=this._getDockPosition();if(this.dockEnabled)return"minimize";switch(t){case"top-left":case"bottom-left":return"dock-left";case"top-center":return"maximize";case"bottom-center":return"dock-bottom";default:return"dock-right"}}_handleDockIcon(){this._dockAction.icon=this._getDockIcon()}_handleDockEnabled(){this._dockAction.title=this.dockEnabled?this.messages?.undock:this.messages?.dock}_setMainContainerNode(t){this._mainContainerNode=t}_positionContainer(t=this._containerNode){if(t&&(this._containerNode=t),!this._containerNode)return;let{screenLocation:e}=this.viewModel,{width:i}=this._containerNode.getBoundingClientRect(),l=this._calculatePositionStyle(e,i);l&&Object.assign(this._containerNode.style,l)}_calculateFullWidth(t){let{currentAlignment:e,_pointerOffsetInPx:i}=this;return e==="top-left"||e==="bottom-left"||e==="top-right"||e==="bottom-right"?t+i:t}_calculateAlignmentPosition(t,e,i,l){let{currentAlignment:d,_pointerOffsetInPx:o}=this;if(!i)return;let{padding:r}=i,u=l/2,p=i.height-e,w=i.width-t;return d==="bottom-center"?{top:e+o-r.top,left:t-u-r.left}:d==="top-left"?{bottom:p+o-r.bottom,right:w+o-r.right}:d==="bottom-left"?{top:e+o-r.top,right:w+o-r.right}:d==="top-right"?{bottom:p+o-r.bottom,left:t+o-r.left}:d==="bottom-right"?{top:e+o-r.top,left:t+o-r.left}:d==="top-center"?{bottom:p+o-r.bottom,left:t-u-r.left}:void 0}_calculatePositionStyle(t,e){let{dockEnabled:i,view:l}=this;if(!l)return;if(i)return{left:"",top:"",right:"",bottom:""};if(t==null||!e)return;let d=this._calculateFullWidth(e),o=this._calculateAlignmentPosition(t.x,t.y,l,d);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(t,e){t&&e&&(this.close(),this.clear())}_viewReadyChange(t,e){t?this._wireUpView():e&&(this.close(),this.clear())}_wireUpView(){this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(t,e,i){let[l,d]=t,[o,r]=e,{width:u=0,height:p=0}=i??{};return l<=u&&o>u||l>u&&o<=u||d<=p&&r>p||d>p&&r<=p}_updateDockEnabledForViewSize(t,e){if(!t||!e)return;let i=this.viewModel?.view?.padding||{left:0,right:0,top:0,bottom:0},l=i.left+i.right,d=i.top+i.bottom,o=[],r=[];o[0]=t[0]-l,o[1]=t[1]-d,r[0]=e[0]-l,r[1]=e[1]-d;let{dockOptions:u}=this,p=u.breakpoint;this._dockingThresholdCrossed(o,r,p)&&this._setDockEnabledForViewSize(u),this._setCurrentDockPosition()}_toggleScreenLocationEnabled(){let{dockEnabled:t,viewModel:e}=this;if(!e)return;let i=e.active&&!t;e.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(t){let e=t.breakpoint,i=this.viewModel?.view?.ui;if(!i)return!1;let{width:l,height:d}=i;if(isNaN(l)||isNaN(d)||!e)return!1;let o=e.hasOwnProperty("width")&&l<=(e.width??0),r=e.hasOwnProperty("height")&&d<=(e.height??0);return o||r}_setDockEnabledForViewSize(t){t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}};n([s({readOnly:!0})],a.prototype,"_featureNavigationTop",null),n([s()],a.prototype,"actions",null),n([s({readOnly:!0})],a.prototype,"active",null),n([s()],a.prototype,"alignment",void 0),n([s()],a.prototype,"autoCloseEnabled",null),n([s()],a.prototype,"defaultPopupTemplateEnabled",null),n([s()],a.prototype,"content",null),n([s()],a.prototype,"collapsed",null),n([s({readOnly:!0})],a.prototype,"currentAlignment",null),n([s({readOnly:!0})],a.prototype,"currentDockPosition",null),n([s()],a.prototype,"dockOptions",null),n([s()],a.prototype,"dockEnabled",void 0),n([s({readOnly:!0})],a.prototype,"featureCount",null),n([s()],a.prototype,"featureMenuOpen",null),n([s()],a.prototype,"features",null),n([s()],a.prototype,"goToOverride",null),n([s()],a.prototype,"headingLevel",void 0),n([s()],a.prototype,"highlightEnabled",null),n([s()],a.prototype,"icon",null),n([s()],a.prototype,"initialDisplayMode",null),n([s()],a.prototype,"location",null),n([s()],a.prototype,"label",null),n([s(),I("esri/widgets/Popup/t9n/Popup")],a.prototype,"messages",void 0),n([s()],a.prototype,"promises",null),n([s({readOnly:!0})],a.prototype,"selectedFeature",null),n([s({readOnly:!0})],a.prototype,"selectedDrillInFeature",null),n([s()],a.prototype,"selectedFeatureIndex",null),n([s({readOnly:!0})],a.prototype,"selectedFeatureWidget",null),n([s()],a.prototype,"title",null),n([s()],a.prototype,"updateLocationEnabled",null),n([s()],a.prototype,"view",null),n([s({type:A}),R(["triggerAction","trigger-action"])],a.prototype,"viewModel",void 0),n([s()],a.prototype,"visible",null),n([s({type:L,nonNullable:!0})],a.prototype,"visibleElements",void 0),a=n([M("esri.widgets.Popup")],a);var Nt=a;export{Nt as default};
