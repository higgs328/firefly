import{a as m}from"./chunk-54VKSMWS.js";import{a as u,b as f,c as k}from"./chunk-6RBQSBA2.js";import{o as p}from"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import{b as v}from"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{a,b as r,f as c}from"./chunk-VTHXE323.js";function b(t,e,d){return c(this,null,function*(){let i=f(t),s=e.toJSON();e.validationSet&&(s.validationSet=JSON.stringify(e.validationSet));let n=r(a({},s),{returnEdits:!0,f:"json"}),l=k(a(a({},i.query),n)),o=u(l,r(a({},d),{method:"post"})),w=`${i.path}/validateNetworkTopology`,{data:y}=yield p(w,o);return m.fromJSON(g(y))})}function h(t,e,d){return c(this,null,function*(){if(!e.gdbVersion)throw new v("submit-validate-network-topology-job:missing-gdb-version","version is missing");let i=f(t),s=e.toJSON();e.validationSet&&(s.validationSet=JSON.stringify(e.validationSet));let n=u(i.query,r(a({query:k(r(a({},s),{returnEdits:!0,async:!0,f:"json"}))},d),{method:"post"})),l=`${i.path}/validateNetworkTopology`,{data:o}=yield p(l,n);return o?o.statusUrl:null})}function g(t){return t.serviceEdits&&(t.serviceEdits=t.serviceEdits.map(e=>(e.editedFeatures.spatialReference&&(e.editedFeatures.spatialReference={wkid:e.editedFeatures.spatialReference.wkid,wkt:e.editedFeatures.spatialReference.wkt,wkt2:e.editedFeatures.spatialReference.wkt2,latestWkid:e.editedFeatures.spatialReference.latestWkid,latestVcsWkid:e.editedFeatures.spatialReference.latestVcsWkid,vcsWkid:e.editedFeatures.spatialReference.vcsWkid}),e={layerId:e.id,editedFeatures:e.editedFeatures}))),t}export{g as handleValidateNetworkTopologyResult,h as submitValidateNetworkTopologyJob,b as validateNetworkTopology};
