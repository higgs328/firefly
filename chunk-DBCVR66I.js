import{a as l}from"./chunk-JQAW4OB5.js";import{a as c}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as e}from"./chunk-QGVBCWUY.js";import{H as u}from"./chunk-MYO4NP2N.js";import{e as i}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as d}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import{b as s}from"./chunk-YOFFGXOB.js";import{g as n}from"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{f as a}from"./chunk-VTHXE323.js";var t=class extends u{constructor(r){super(r),this._updatingHandlesLoad=new l,this._updatingHandlesExecute=new l}initialize(){this.addHandles([c(()=>[this.utilityNetwork,this.view],()=>{this._setUp()},{initial:!0})])}destroy(){this._updatingHandlesLoad.destroy(),this._updatingHandlesExecute.destroy()}get executionError(){return this._executionError}get loadError(){return this._loadError}get state(){return this._updatingHandlesLoad.updating?"loading":this.loadError?"disabled":this._updatingHandlesExecute.updating?"executing":this.executionError?"failed":"ready"}get utilityNetwork(){return this.utilityNetwork}set utilityNetwork(r){this._get("utilityNetwork")!==r&&this._set("utilityNetwork",r)}get view(){return this.view}set view(r){this._get("view")!==r&&this._set("view",r)}executeNamedTraceConfiguration(r){return a(this,null,function*(){return this._updatingHandlesExecute.addPromise(this._executeNamedTraceConfiguration(r))})}executeTraceConfiguration(r){return a(this,null,function*(){return this._updatingHandlesExecute.addPromise(this._executeTraceConfiguration(r))})}_executeNamedTraceConfiguration(r){return a(this,null,function*(){if(this.state==="disabled")throw this._logError("trace-analysis-view-model:load-error",this.loadError),new s("trace-analysis-view-model:load-error",this.loadError);return this._executionError=null,yield this.utilityNetwork.trace(r).catch(o=>{throw this._executionError="trace-error",this._logError("trace-analysis-view-model:execution-error",this._executionError),o})})}_executeTraceConfiguration(r){return a(this,null,function*(){if(this.state==="disabled")throw this._logError("trace-analysis-view-model:load-error",this.loadError),new s("trace-analysis-view-model:load-error",this.loadError);return this._executionError=null,yield this.utilityNetwork.trace(r).catch(o=>{throw this._executionError="trace-error",this._logError("trace-analysis-view-model:execution-error",this._executionError),o})})}_logError(r,o){n.getLogger(this).error(new s(r,o))}_setUp(){return a(this,null,function*(){let{utilityNetwork:r,view:o}=this;this._updatingHandlesLoad.addPromise(a(this,null,function*(){return this._loadError=null,o?o.type!=="2d"?(this._loadError="sceneView-not-supported",void this._logError("trace-analysis-view-model:load-error",this._loadError)):r?void 0:(this._loadError="no-utility-network",void this._logError("trace-analysis-view-model:load-error",this._loadError)):(this._loadError="no-view",void this._logError("trace-analysis-view-model:load-error",this._loadError))}))})}};e([i()],t.prototype,"_executionError",void 0),e([i()],t.prototype,"_loadError",void 0),e([i()],t.prototype,"executionError",null),e([i()],t.prototype,"loadError",null),e([i({readOnly:!0})],t.prototype,"state",null),e([i()],t.prototype,"utilityNetwork",null),e([i()],t.prototype,"view",null),t=e([d("esri.widgets.UtilityNetworkTraceAnalysis.UtilityNetworkTraceAnalysisViewModel")],t);var f=t;export{f as default};
