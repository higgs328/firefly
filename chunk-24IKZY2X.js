import{a as C}from"./chunk-PPHTKWTO.js";import{a as x}from"./chunk-C6GAOMLO.js";import{a as v}from"./chunk-5XCFNEYX.js";import{b as F}from"./chunk-EBIFNV2H.js";import{a as b,j as M}from"./chunk-TG45K3WR.js";import{a as e}from"./chunk-QGVBCWUY.js";import{H as w}from"./chunk-MYO4NP2N.js";import{e as i}from"./chunk-NFIPKH6V.js";import{l as c}from"./chunk-5QEXLALV.js";import{K as g}from"./chunk-4PTIEWMT.js";import{f as T}from"./chunk-VTHXE323.js";var d=class extends w{constructor(t){super(t),this.steps=!1,this.thumbTooltip=!1}};e([i({nonNullable:!0})],d.prototype,"steps",void 0),e([i({nonNullable:!0})],d.prototype,"thumbTooltip",void 0),d=e([c("esri.widgets.ValuePicker.ValuePickerSliderVisibleElements")],d);var f=d;var h="esri-value-picker__slider",_={minorTick:`${h}__tick-minor`,majorTick:`${h}__tick-major`,stepsTick:`${h}__tick-steps`,tooltip:`${h}__tooltip`};function k(t){return(l,s)=>{s?.classList.add(t)}}var o=class extends C{constructor(t,l){super(t,l),this._majorTickCreatedFunction=k(_.majorTick),this._minorTickCreatedFunction=k(_.minorTick),this._stepsTickCreatedFunction=k(_.stepsTick),this._thumbNode=null,this._tooltip=null,this._slider=new x({thumbCreatedFunction:(s,r,a)=>{this._thumbNode=a}}),this.labelFormatFunction=null,this.labels=null,this.min=null,this.minorTicks=null,this.majorTicks=null,this.max=null,this.reversed=!1,this.steps=null,this.type="slider",this.visibleElements=new f,this._thumbDragDebounced=g(s=>T(this,null,function*(){yield this._tooltip?.reposition(!1)}))}initialize(){this.addHandles([b(()=>this.viewModel?.values,t=>{this._slider.values=t},M),b(()=>this._slider.values,t=>{this.viewModel&&this.viewModel.values!==t&&(this.viewModel.values=t)}),this._slider.on("thumb-drag",this._thumbDragDebounced)])}destroy(){this._slider.destroy()}loadDependencies(){return F({tooltip:()=>import("./chunk-24BDRL23.js")})}get _ascending(){let{reversed:t,viewModel:l}=this;if(!l)return null;let{layout:s}=l;return s==="horizontal"&&!t||s==="vertical"&&t}get canNext(){let{_ascending:t,min:l,max:s,steps:r,viewModel:a}=this;if(t==null||l==null||s==null||!r?.length||!a)return!1;let{values:u}=a,n=u?.[0];return n==null||(t?n!==r[r.length-1]:n!==r[0])}get canPlay(){return this.viewModel!=null&&!!this.steps?.length&&this.min!=null&&this.max!=null}get canPrevious(){let{_ascending:t,min:l,max:s,steps:r,viewModel:a}=this;if(t==null||l==null||s==null||!r?.length||!a)return!1;let{values:u}=a,n=u?.[0];return n==null||(t?n!==r[0]:n!==r[r.length-1])}render(){let{labels:t,labelFormatFunction:l,min:s,max:r,steps:a,minorTicks:u,majorTicks:n,reversed:N,viewModel:y}=this;if(!y)return v("div",null);let{disabled:j,layout:P}=y,V=`${P}${N?"-reversed":""}`,m="position",p=[];return s!=null&&r!=null&&(u&&p.push({mode:m,values:u,tickCreatedFunction:this._minorTickCreatedFunction}),n&&p.push({mode:m,values:n,tickCreatedFunction:this._majorTickCreatedFunction}),t&&p.push({mode:m,values:t,labelsVisible:!0}),this.visibleElements.steps&&this.steps&&p.push({mode:m,values:this.steps,tickCreatedFunction:this._stepsTickCreatedFunction})),this._slider.set({disabled:j,labelFormatFunction:l,layout:V,min:s,max:r,steps:a,tickConfigs:p}),v("div",{class:h},this._slider.render(),this._renderToolTip())}animate(t){this._step(1,t)}next(){this._step(this._ascending?1:-1)}previous(){this._step(this._ascending?-1:1)}_onTooltipAfterCreate(t){this._tooltip=t}_renderToolTip(){if(!this.visibleElements.thumbTooltip||!this._thumbNode||!this._slider.values)return null;let t=this._slider.viewModel.getLabelForValue(this._slider.values[0],"value");return t?v("calcite-tooltip",{afterCreate:this._onTooltipAfterCreate,class:_.tooltip,referenceElement:this._thumbNode},t):null}_step(t,l=!1){if(!this.viewModel||!this.steps?.length)return;if(!this.viewModel.values||!this.steps.includes(this.viewModel.values[0]))return void(this.viewModel.values=[this.steps[0]]);let s=this.steps.indexOf(this.viewModel.values[0])+t;s<0||s>=this.steps.length?this.viewModel.loop||l?this.viewModel.values=[this.steps[t===1?0:this.steps.length-1]]:this.viewModel.state==="playing"&&this.viewModel.pause():this.viewModel.values=[this.steps[s]]}};e([i()],o.prototype,"_ascending",null),e([i()],o.prototype,"canNext",null),e([i()],o.prototype,"canPlay",null),e([i()],o.prototype,"canPrevious",null),e([i()],o.prototype,"labelFormatFunction",void 0),e([i()],o.prototype,"labels",void 0),e([i()],o.prototype,"min",void 0),e([i()],o.prototype,"minorTicks",void 0),e([i()],o.prototype,"majorTicks",void 0),e([i()],o.prototype,"max",void 0),e([i({nonNullable:!0})],o.prototype,"reversed",void 0),e([i()],o.prototype,"steps",void 0),e([i()],o.prototype,"type",void 0),e([i({type:f,nonNullable:!0})],o.prototype,"visibleElements",void 0),o=e([c("esri.widgets.ValuePicker.ValuePickerSlider")],o);var et=o;export{et as a};
