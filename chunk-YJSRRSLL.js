import{a as h,b as S,c as a,d as x,e as m}from"./chunk-57VN6HUT.js";import{a as R}from"./chunk-WEBXJZFZ.js";import"./chunk-FPCHE4I2.js";import{a as p}from"./chunk-FHBFWDFD.js";import"./chunk-EQZWYK27.js";import{a as M}from"./chunk-AXYQJCCX.js";import{a as n}from"./chunk-5XCFNEYX.js";import{a as B}from"./chunk-GQL2MBZT.js";import{b as C}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import{n as f,o as y}from"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as w}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as i}from"./chunk-QGVBCWUY.js";import{H as g,a as _}from"./chunk-MYO4NP2N.js";import{e as o}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as u}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import{g as b}from"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import"./chunk-VTHXE323.js";var d=class extends g{constructor(t){super(t),this.directionalButtons=!0,this.rotationSlider=!1,this.rotationResetButton=!1}};i([o({type:Boolean,nonNullable:!0})],d.prototype,"directionalButtons",void 0),i([o({type:Boolean,nonNullable:!0})],d.prototype,"rotationSlider",void 0),i([o({type:Boolean,nonNullable:!0})],d.prototype,"rotationResetButton",void 0),d=i([u("esri.widgets.DirectionalPad.VisibleElements")],d);var v=d;var s=class extends B{constructor(t,l){super(t,l),this._buttonsContainer=null,this._buttons={},this.messages=null,this.visibleElements=new v,this.viewModel=new m,this.visualScale="s",this._rotateIcon=e=>({"--rotation":`rotate(${e}deg)`}),this._afterButtonContainerCreate=e=>{this._buttonsContainer=e,this._buttonsContainer.addEventListener("contextmenu",this._onContextMenu,{capture:!0})},this._afterButtonContainerRemoved=()=>{this._buttonsContainer?.removeEventListener("contextmenu",this._onContextMenu,{capture:!0}),this._buttonsContainer=null},this._afterButtonCreate=(e,r)=>{this._buttons[e]=r},this._afterButtonRemoved=e=>{this._buttons[e]=void 0},this._onContextMenu=e=>e.preventDefault(),this._onButtonPointerDown=e=>{if(this._buttonsContainer===null)return;let r=e.target,c=r?.shadowRoot?.querySelector("button");c?.hasPointerCapture(e.pointerId)&&c.releasePointerCapture(e.pointerId);let E=x(this._buttonsContainer);this.viewModel.beginFollowingPointer(e,E)},this._onKeyDown=(e,{key:r})=>{f(r)&&this.viewModel.moveOnce(e)},this._onSliderInput=({currentTarget:e})=>{typeof e.value=="number"&&(this.viewModel.rotation=e.value)},this._onRotationReset=()=>{this.viewModel.rotation=0},_(b.getLogger(this),"Directional Pad","arcgis-directional-pad",{version:"4.32"})}loadDependencies(){return C({action:()=>import("./chunk-X23M5IZ6.js"),"action-group":()=>import("./chunk-WQ2GF3MJ.js"),"action-pad":()=>import("./chunk-D2QBOSYD.js"),icon:()=>import("./chunk-7Z2RNQA3.js"),slider:()=>import("./chunk-WZXNPN5A.js")})}initialize(){this.addHandles(w(()=>this.viewModel.angle,()=>{this._buttonsContainer?.contains(document.activeElement)&&(this.viewModel.angle==null?this.container?.focus():y(this._buttons[this.viewModel.angle]))}))}get disabled(){return this.viewModel.disabled}set disabled(t){this.viewModel.disabled=t}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get speed(){return this.viewModel.speed}set speed(t){this.viewModel.speed=t}get _rotationEnabled(){return!this.view?.ready||this.view.constraints.rotationEnabled}render(){let{label:t,disabled:l,viewModel:e}=this,r=this.classes(a.base,p.widget,l?p.disabled:null);return n("div",{"aria-label":t,class:r,tabIndex:-1},e.supported?this._renderContent():this._renderUnsupportedMessage())}_renderUnsupportedMessage(){return n("section",{class:a.error,key:"unsupported"},n("p",null,this.messages.unsupported))}_renderContent(){return[this.visibleElements.directionalButtons?this._renderDirectionalButtons():void 0,this.visibleElements.rotationSlider?this._renderRotation():void 0]}_renderDirectionalButtons(){return n("calcite-action-pad",{expandDisabled:!0,key:"directional-buttons-container",layout:"grid"},n("calcite-action-group",{afterCreate:this._afterButtonContainerCreate,afterRemoved:this._afterButtonContainerRemoved,class:a.buttonsContainer,dir:"ltr"},h.slice(0,4).map(t=>this._renderButton(t)),this._renderCompass(),h.slice(4).map(t=>this._renderButton(t))))}_renderButton(t){let{label:l,iconName:e}=S[t],r=this.messages[l];return n("calcite-action",{active:this.viewModel.angle===t,afterCreate:c=>this._afterButtonCreate(t,c),afterRemoved:()=>this._afterButtonRemoved(t),alignment:"center",class:a.button,"data-angle":t.toString(),disabled:this.disabled,key:t,onkeydown:this._onKeyDown.bind(void 0,t),onpointerdown:this._onButtonPointerDown,scale:this.visualScale,text:r,title:r},n("calcite-icon",{icon:e,scale:this.visualScale}))}_renderCompass(){let t=this.disabled||R(this.view)?"compass-needle":"arrow-up",l=this.viewModel.rotation===0,e=this.messages.resetHeading;return n("calcite-action",{alignment:"center",class:a.compassButton,disabled:this.disabled||!this._rotationEnabled||l,key:"compass",onclick:this._onRotationReset,scale:this.visualScale,styles:this._rotateIcon(this.viewModel.rotation),text:e,title:e},!l&&n("calcite-icon",{icon:t,scale:this.visualScale}))}_renderRotation(){return n("calcite-action-pad",{expandDisabled:!0,key:"slider-container",layout:"horizontal"},n("calcite-action-group",{class:a.rotationContainer},this.visibleElements.rotationResetButton?this._renderRotationResetButton():null,this._renderRotationSlider()))}_renderRotationResetButton(){let t=this.messages.resetHeading;return n("calcite-action",{alignment:"center",class:a.rotationReset,disabled:this.disabled||!this._rotationEnabled,onclick:this._onRotationReset,scale:this.visualScale,text:t,title:t},n("calcite-icon",{flipRtl:!0,icon:"rotate",scale:this.visualScale}))}_renderRotationSlider(){return n("div",{class:a.rotationSliderContainer},n("calcite-slider",{"aria-label":this.messages.heading,disabled:this.disabled||!this._rotationEnabled,labelHandles:!0,max:360,min:0,required:!0,scale:this.visualScale,value:Math.round(this.viewModel.rotation),onCalciteSliderInput:this._onSliderInput}))}};i([o()],s.prototype,"_buttonsContainer",void 0),i([o()],s.prototype,"_buttons",void 0),i([o()],s.prototype,"disabled",null),i([o()],s.prototype,"icon",null),i([o()],s.prototype,"label",null),i([o(),M("esri/widgets/DirectionalPad/t9n/DirectionalPad")],s.prototype,"messages",void 0),i([o({type:v,nonNullable:!0})],s.prototype,"visibleElements",void 0),i([o()],s.prototype,"view",null),i([o({type:m})],s.prototype,"viewModel",void 0),i([o()],s.prototype,"visualScale",void 0),i([o()],s.prototype,"speed",null),i([o({readOnly:!0})],s.prototype,"_rotationEnabled",null),s=i([u("esri.widgets.DirectionalPad")],s);var nt=s;export{nt as default};
