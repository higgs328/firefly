import{f as p,g as n,h as c,i as l,j as C,k as f}from"./chunk-7Y6S2GNA.js";import{a as M}from"./chunk-6F25LG6O.js";import{a as u,b as k}from"./chunk-VTHXE323.js";function d(e){let o=n(e);if(o?.type==="CIMTextSymbol")return o.height??0;let s=0;if(o?.symbolLayers)for(let t of o.symbolLayers)c(t)&&t.size!=null&&t.size>s?s=t.size:l(t)&&t.width!=null&&t.width>s?s=t.width:C(t);return s}function G(e,o,s){if(!e)return;let t=n(e),a=d(e);if(a===0)return void P(t,o);b(t,o/a,!1,s)}function P(e,o){if(e)if(e.type!=="CIMTextSymbol"){if(e.symbolLayers)for(let s of e.symbolLayers)switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":s.size=o;break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":s.width=o}}else e.height=o}function b(e,o,s,t){if(e)if(e.type!=="CIMTextSymbol"){if(s&&e.effects)for(let a of e.effects)h(a,o);if(e.symbolLayers)for(let a of e.symbolLayers){switch(a.type){case"CIMPictureMarker":case"CIMVectorMarker":g(a,o,t);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!t?.preserveOutlineWidth&&a.width&&(a.width*=o);break;case"CIMPictureFill":a.height&&(a.height*=o),a.offsetX&&(a.offsetX*=o),a.offsetY&&(a.offsetY*=o);break;case"CIMHatchFill":b(a.lineSymbol,o,!0,k(u({},t),{preserveOutlineWidth:!1})),a.offsetX&&(a.offsetX*=o),a.offsetY&&(a.offsetY*=o),a.separation&&(a.separation*=o)}if(a.effects)for(let r of a.effects)h(r,o)}}else e.height!=null&&(e.height*=o)}function g(e,o,s){if(e&&(e.markerPlacement&&L(e.markerPlacement,o),e.offsetX&&(e.offsetX*=o),e.offsetY&&(e.offsetY*=o),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*o,y:e.anchorPoint.y*o}),e.size=e.size!=null?e.size*o:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(let t of e.markerGraphics)e.scaleSymbolsProportionally||b(t.symbol,o,!0,s)}function L(e,o){switch(f(e)&&e.offset&&(e.offset*=o),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=o),e.offsetAlongLine&&(e.offsetAlongLine*=o),e.placementTemplate&&e.placementTemplate.length){let s=e.placementTemplate.map(t=>t*o);e.placementTemplate=s}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=o),e.placementTemplate&&e.placementTemplate.length){let s=e.placementTemplate.map(t=>t*o);e.placementTemplate=s}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=o);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=o);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=o),e.endPosition&&(e.endPosition*=o);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=o),e.offsetY&&(e.offsetY*=o);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=o),e.offsetY&&(e.offsetY*=o),e.stepX&&(e.stepX*=o),e.stepY&&(e.stepY*=o)}}function h(e,o){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=o);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=o);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=o),e.endCut&&(e.endCut*=o),e.middleCut&&(e.middleCut*=o);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=o),e.offsetAlongLine&&(e.offsetAlongLine*=o),e.dashTemplate&&e.dashTemplate.length){let s=e.dashTemplate.map(t=>t*o);e.dashTemplate=s}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=o);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=o),e.offsetY&&(e.offsetY*=o);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=o);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=o);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=o),e.length&&(e.length*=o),e.toWidth&&(e.toWidth*=o);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=o),e.period&&(e.period*=o)}}function w(e){let o=[];return y(n(e),o),o.length?new M(p(o[0])):null}function y(e,o){if(!e)return;let s;s=e.type==="CIMTextSymbol"?e.symbol:e;let t=e.type==="CIMPolygonSymbol";if(s?.symbolLayers){for(let a of s.symbolLayers)if(!(a.colorLocked||t&&(l(a)||c(a)&&a.markerPlacement&&f(a.markerPlacement))))switch(a.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":a.tintColor&&S(o,a.tintColor);break;case"CIMVectorMarker":a.markerGraphics?.forEach(r=>{y(r.symbol,o)});break;case"CIMSolidStroke":case"CIMSolidFill":S(o,a.color);break;case"CIMHatchFill":y(a.lineSymbol,o)}}}function S(e,o){for(let s of e)if(s.join(".")===o.join("."))return;e.push(o)}function x(e,o,s){o instanceof M||(o=new M(o));let t=n(e);t&&I(t,o,s)}function I(e,o,s){if(!e)return;let t;t=e.type==="CIMTextSymbol"?e.symbol:e;let a=t?.type==="CIMPolygonSymbol";if(t?.symbolLayers)for(let r of t.symbolLayers){if(r.colorLocked)continue;if(a){if(s){let{layersToColor:m}=s;if((l(r)||c(r)&&r.markerPlacement&&f(r.markerPlacement))&&m==="fill"||C(r)&&m==="outline")continue}else if(l(r)||c(r)&&r.markerPlacement&&f(r.markerPlacement))continue}let i=o.toArray();switch(r.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":r.tintColor=i;break;case"CIMVectorMarker":r.markerGraphics?.forEach(m=>{I(m.symbol,o,s)});break;case"CIMSolidStroke":case"CIMSolidFill":r.color=i;break;case"CIMHatchFill":I(r.lineSymbol,o,s)}}}function A(e,o=!1){let s=n(e);if(s?.type==="CIMTextSymbol"||s?.type==="CIMPointSymbol"){let t=s.angle;return t!=null&&o?360-t:t??0}return 0}function O(e,o,s=!1){let t=n(e);if(s&&(o=360-o),t?.type!=="CIMTextSymbol"){if(t?.type==="CIMPointSymbol"&&t.symbolLayers){let a=o-(t.angle||0);for(let r of t.symbolLayers)if(c(r)){let i=r.rotation||0;r.rotateClockwise?i-=a:i+=a,r.rotation=i}t.angle=o}}else t.angle=o}function z(e){let o=n(e);if(!o)return null;switch(o.type){case"CIMPointSymbol":return"CIMPointSymbol";case"CIMLineSymbol":return"CIMLineSymbol";case"CIMPolygonSymbol":return"CIMPolygonSymbol";case"CIMTextSymbol":return"CIMTextSymbol";case"CIMMeshSymbol":return"CIMMeshSymbol";default:return null}}export{d as a,G as b,b as c,g as d,w as e,x as f,A as g,O as h,z as i};
