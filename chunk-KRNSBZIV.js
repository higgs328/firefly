import{b as k,c as O}from"./chunk-GO6KX2QB.js";import{a as G,c as S}from"./chunk-PLVVXHQB.js";import{N as te}from"./chunk-XXEY6HOD.js";import{g as U,k as ee}from"./chunk-WSDIUTRN.js";import{b as Q,c as $}from"./chunk-67GIWMYL.js";import{a as K,b as N,c as C}from"./chunk-CISTQZ5X.js";import{F as Z,G as Y,H as B,I as _,J,o as H}from"./chunk-3WNFY6Z5.js";import{i as P}from"./chunk-QXXXCEV5.js";import{g as q,p as V}from"./chunk-DA3SDKGO.js";import{h as F}from"./chunk-RNC4P66O.js";import{a as T}from"./chunk-U4QEPZJ3.js";import{c as W}from"./chunk-VIEK2X23.js";import{a as D}from"./chunk-7F5DJLJT.js";import{p as v}from"./chunk-4PTIEWMT.js";import{a as A,b as j,c as R,f as d}from"./chunk-VTHXE323.js";var ae=1e5;function ne(e,t){let a=180*Math.atan2(-e.y+t.y,e.x-t.x)/Math.PI;return a<0&&(a+=180),a*Math.PI/180}function Te(e,t){let a=180*Math.atan2(-e.y+t.y,e.x-t.x)/Math.PI;return a<0&&(a+=180),a*Math.PI/180}function re(e,t,a){if(!e?.length||!t?.length||!a)return;let[n,r]=e,[,o]=t,s=o-r;return[n+s*Math.cos(a),r+s*Math.sin(a)]}function oe(e,t,a){if(K(e)){let i=C([t],"meters")[0];return{area:N([a],"square-meters")[0],perimeter:i}}let n=D.WGS84,r=q(t,n),o=q(a,n),s=Z(o,ae);if(s=H(s),!s)return null;let c=C([r],"meters")[0];return{area:N([s],"square-meters")[0],perimeter:c}}function qe(e,t,a,n,r=!1,o){return d(this,null,function*(){if(t.length<2||!n||!a||!e)return null;let s=he(a,e);if(!s)return null;let c=t.map(p=>[p.x,p.y]),i=c.at(0),u=c.at(-1);if(!i||!u)return null;let l=s.map(p=>xe([i,u],p,e,r,!1)),m=yield Promise.all(l);v(o);let h=0;for(let p of m){if(!p)return null;let f=Math.abs(p-n);h=Math.max(f,h)}return h})}function He(e,t,a,n,r,o=!1,s){return d(this,null,function*(){if(t.length<2||!n||!a||!e)throw new Error("Missing parameters");let c=ye(a,e),i=t.map(f=>[f.x,f.y]),u=i.at(0),l=i.at(-1),m=c.map(f=>we([u,l],f,e,r,o,!1)),h=yield Promise.all(m);v(s);let p=0;for(let f of h){if(!f)return 0;let y=Math.abs(f-n);p=Math.max(y,p)}return p})}function Ge(e,t){let a=L(e,!1);if(a?.length)return 20*P([a[0].x,a[0].y],[a.at(-1).x,a.at(-1).y])/t}function se(e){let t=e.spatialReference;if(t.isGeographic){if(K(t))return C([e],"meters")[0];let a=q(e,D.WGS84);return C([a],"meters")[0]}return t.isWebMercator?J(e,"meters"):B(e,"meters")}function ce(e,t){let a=H(t);if(!a)return null;let n=B(e,"meters");return{area:Y(a,"square-meters"),perimeter:n}}function ie(e,t){let a=Z(t,ae,"meters");if(a=H(a),!a)return null;let n=J(e,"meters");return{area:_(a,"square-meters"),perimeter:n}}function Se(e,t,a){return d(this,null,function*(){if(!t||!e)throw new Error("Missing required parameters");let n=yield k(e,t);v(a);let r=n.clone();r.z?r.z+=20:r.z=20;let l=t,{averageElevation:o,cameraPitch:s,cameraRoll:c,farDistance:i}=l,u=R(l,["averageElevation","cameraPitch","cameraRoll","farDistance"]);return G(r,u)})}function ke(e,t,a,n){return d(this,null,function*(){let{attributes:r}=a,{location:o}=r,m=t,{updateElevationProps:s}=m,c=R(m,["updateElevationProps"]);if(!e||!t)throw new Error("Missing parameters");let i=o.clone();i.spatialReference.isGeographic&&(i=yield V(i,D.WebMercator));let u=yield O(e,j(A({},c),{cameraLocation:i}),s);v(n);let l=u.clone();return l.z?l.z+=20:l.z=20,S(l,c)})}function ue(e,t,a,n,r=0,o=1,s){let x=n,{averageElevation:c,cameraPitch:i,cameraRoll:u,farDistance:l}=x,m=R(x,["averageElevation","cameraPitch","cameraRoll","farDistance"]);if(r>=5||o<=.1)return{value:e};let h=new W({x:t.x,y:t.y,z:t.z?t.z+e:e,spatialReference:n.cameraLocation.spatialReference}),p=G(h,m),f=P([a[0].x,a[0].y],[p.x,p.y]),y=a.at(0),w=a.at(-1);if(!y||!w)return null;let g=P([y.x,y.y],[w.x,w.y])*e/f;return ue(g,t,a,n,r+1,Math.abs(e-g))}function le(e,t,a,n,r=0,o=1,s){let x=n,{averageElevation:c,horizontalFieldOfView:i,verticalFieldOfView:u,farDistance:l}=x,m=R(x,["averageElevation","horizontalFieldOfView","verticalFieldOfView","farDistance"]);if(r>=5||o<=.1)return{value:e};let h=new W({x:t.x,y:t.y,z:t.z?t.z+e:e,spatialReference:n.cameraLocation.spatialReference}),p=S(h,m),f=P([a[0].x,a[0].y],[p.x,p.y]),y=a.at(0),w=a.at(-1);if(!y||!w)return null;let g=P([y.x,y.y],[w.x,w.y])*e/f;return le(g,t,a,n,r+1,Math.abs(e-g))}function fe(e,t){return d(this,null,function*(){let r=t,{updateElevationProps:a}=r,n=R(r,["updateElevationProps"]);return yield k(e,n,a)})}function me(e,t){return d(this,null,function*(){let r=t,{updateElevationProps:a}=r,n=R(r,["updateElevationProps"]);return O(e,n,a)})}function Oe(e){navigator.clipboard.writeText(e).catch(t=>{throw t})}function pe(e){let t=e.map(n=>[n.x,n.y]),a=e[0].spatialReference;return new T({paths:[t],spatialReference:a})}function L(e,t){return e.map(a=>({x:t?.5+a[0]:a[0],y:t?.5-a[1]:a[1]}))}function je(e,t,a,n,r){let o=e==="measurement"?t:a;if(r&&o)return U(n,Q(o,"meters"),r,3)||null}function he(e,t){let{cameraPitch:a,cameraRoll:n,cameraLocation:r}=e,{x:o,y:s,z:c,spatialReference:i}=r;if(t.every(x=>x===0)||!t||!t.length)return null;let[u,l,,m,h]=t,p=[-m,0,m],f=[-h,0,h],y=[-u,0,u],w=[-l,0,l],g=[];for(let x of p)for(let M of f)for(let z of y)for(let E of y)for(let I of w){let b=A({},e);b.cameraPitch=a+x,b.cameraRoll=n+M,b.cameraLocation=new W({x:o+z,y:s+E,z:c?c+I:0,spatialReference:{wkid:i.wkid}}),g.push(b)}return g}function ye(e,t){let{cameraHeading:a,cameraLocation:n}=e,{x:r,y:o,z:s,spatialReference:c}=n;if(t.every(y=>y===0)||!t||!t.length)throw new Error("Invalid parameters");let[i,u,l]=t,m=l>0?[-l,0,l]:[],h=i>0?[-i,0,i]:[],p=u>0?[-u,0,u]:[],f=[];for(let y of m)for(let w of h)for(let g of h)for(let x of p){let M=A({},e);M.cameraHeading=a+y,M.cameraLocation=new W({x:r+w,y:o+g,z:s?s+x:0,spatialReference:{wkid:c.wkid}}),f.push(M)}return f}function Fe(e,t,a,n,r){let o=e==="measurement"?t:ge(a);if(r&&o)return U(n,Q(o,"meters"),r,3)||null}function Ve(e,t,a,n,r){let o=e==="measurement"?t:a;if(r&&o)return ee(n,$(o,"square-meters"),r,3)||null}function ge(e){return Math.sqrt(e.reduce((t,a)=>t+a**2,0))}function Ze(e,t,a){if(t==="default")return e;let n={x:e[0],y:e[1],z:e[2]},r=te(n,a[0],a[1]);return[r.x,r.y]}function xe(e,t,a,n=!1,r=!1,o){return d(this,null,function*(){if(!e||!t||e.length<2)return null;let s=L(e,n);if(!s||s.length<2)return null;let[c,i]=[s[0],s.at(-1)];if(!i)return null;let u=[c],l=yield k(c,t);v(o);let m=l.clone();m.z?m.z+=20:m.z=20;let b=t,{averageElevation:h,cameraPitch:p,cameraRoll:f,farDistance:y}=b,w=R(b,["averageElevation","cameraPitch","cameraRoll","farDistance"]),g=G(m,w),x=P([c.x,c.y],[g.x,g.y]),M=ne(c,g);if(!M)return;let z=re([c.x,c.y],[i.x,i.y],M);if(!z?.length)return;u.push({x:z[0],y:z[1]});let E=20*P([u[0].x,u[0].y],[u[1].x,u[1].y])/x;return r?ue(E,l,u,t,0,1)?.value:E})}function we(e,t,a,n,r=!1,o=!1,s){return d(this,null,function*(){let{attributes:c}=n,{location:i}=c,X=t,{updateElevationProps:u}=X,l=R(X,["updateElevationProps"]);if(!e||!t||e.length<2)throw new Error("Invalid parameters");let m=L(e,r),[h,p]=[m[0],m.at(-1)],f=[h],y=i.clone();y.spatialReference.isGeographic&&(y=yield V(y,D.WebMercator));let w=yield O(h,j(A({},l),{cameraLocation:y}),u);v(s);let g=w.clone();g.z?g.z+=20:g.z=20;let x=S(g,l),M=P([h.x,h.y],[x.x,x.y]),z=ne(h,x);if(!z)return;let E=re([h.x,h.y],[p.x,p.y],z);if(!E?.length)return;f.push({x:E[0],y:E[1]});let I=20*P([f[0].x,f[0].y],[f[1].x,f[1].y])/M;return o?le(I,w,f,t,0,1)?.value:I})}function Be(e,t,a=!1){return d(this,null,function*(){if(e.length<3)return null;let n=L(e,a),r=yield fe(n,t),o=r.map(({x:u,y:l})=>[u,l]);e.push(e[0]),o.push(o[0]);let s=r[0].spatialReference,c=new T({paths:[o],spatialReference:s}),i=new F({rings:[o],spatialReference:s});return s.isGeographic?oe(s,c,i):s.isWebMercator?ie(c,i):ce(c,i)})}function Je(e,t,a=!1,n){return d(this,null,function*(){if(e.length<3)return null;let r=L(e,a),o=yield me(r,t);v(n);let s=o.map(({x:l,y:m})=>[l,m]);e.push(e[0]),s.push(s[0]);let c=o[0].spatialReference,i=new T({paths:[s],spatialReference:c}),u=new F({rings:[s],spatialReference:c});return c.isGeographic?oe(c,i,u):c.isWebMercator?ie(i,u):ce(i,u)})}function Ke(e,t,a=!1){return d(this,null,function*(){let n=L(e,a);return se(pe(yield fe(n,t)))})}function Ne(e,t,a=!1,n){return d(this,null,function*(){let r=L(e,a),o=yield me(r,t);return v(n),se(pe(o))})}export{ne as a,Te as b,re as c,qe as d,He as e,Ge as f,Se as g,ke as h,Oe as i,L as j,je as k,he as l,ye as m,Fe as n,Ve as o,ge as p,Ze as q,xe as r,we as s,Be as t,Je as u,Ke as v,Ne as w};
