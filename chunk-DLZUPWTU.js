import{a as w}from"./chunk-426GDO7D.js";import{a as T}from"./chunk-MIS6QMFE.js";import{b as y}from"./chunk-BAEF3CT6.js";import{o as b}from"./chunk-AUAZP44J.js";import{a as i}from"./chunk-QGVBCWUY.js";import{e as a}from"./chunk-NFIPKH6V.js";import{l as d}from"./chunk-5QEXLALV.js";import{o as h}from"./chunk-4PTIEWMT.js";import{a as o,b as u,f as c}from"./chunk-VTHXE323.js";var _=y()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"}),r=class extends w{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}checkJobStatus(t){return c(this,null,function*(){let e=u(o({},t),{query:{f:"json"}}),{data:s}=yield b(this.statusUrl,e),m=s.traceResults?o(o({},s.traceResults),s):s;return this.read(m),this})}waitForJobCompletion(){return c(this,arguments,function*(t={}){let{interval:e=1e3,statusCallback:s}=t;return new Promise((m,l)=>{this._clearTimer();let f=setInterval(()=>{this._timer||l(h()),this.checkJobStatus().then(n=>{let{status:p}=n;switch(this.status=p,p){case"job-succeeded":this._clearTimer(),m(this);break;case"job-waiting":case"job-executing":s&&s(this)}},n=>{this._clearTimer(),l(n)})},e);this._timer=f})})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};i([a({type:String,json:{write:!0}})],r.prototype,"statusUrl",void 0),i([T(_)],r.prototype,"status",void 0),i([a({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],r.prototype,"submissionTime",void 0),i([a({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],r.prototype,"lastUpdatedTime",void 0),r=i([d("esri.networks.support.TraceJobInfo")],r);var D=r;export{D as a};
