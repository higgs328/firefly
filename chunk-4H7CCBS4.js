import{a as i}from"./chunk-KTGZLV6S.js";import{a,j as o}from"./chunk-TG45K3WR.js";import{a as l}from"./chunk-QGVBCWUY.js";import{H as d}from"./chunk-MYO4NP2N.js";import{e as r}from"./chunk-NFIPKH6V.js";import{l as h}from"./chunk-5QEXLALV.js";function m(e,n){let s={};for(let p of n){let y=e.get(p);y&&(s[y.name]=y.value)}return s}var t=class extends d{constructor(e){super(e),this.followingMode="follow-both",this.layer=null,this.seekLength=10,this.view=null}initialize(){this.addHandles([a(()=>this.layer,e=>{e&&e.load().then(()=>this._followTelemetry()).catch(()=>{})},o),a(()=>[this.followingMode],()=>this._followTelemetry(),o)])}get _layerView(){return this.layer&&this.view?this.view.allLayerViews.find(e=>e.layer===this.layer)??null:null}get buffered(){return this.layer?.buffered||0}get currentTime(){return this.layer?.currentTime||0}get duration(){return this.layer?.duration||0}get ended(){return this.layer?.ended??!0}get metadata(){let e=this.layer?.metadata;return e?{missionInfo:m(e,[i.MissionId,i.PrecisionTimeStamp]),platformInfo:m(e,[i.PlatformTailNumber,i.PlatformTrueAirspeed,i.PlatformCallSign,i.PlatformDesignation,i.PlatformGroundRange]),frameInfo:m(e,[i.FrameCenterElevation,i.FrameCenterLatitude,i.FrameCenterLongitude])}:null}get playing(){return this.layer?.playing??!1}get state(){return this.layer?.loadError?"error":this.layer?.state}play(){this.layer?.play()}pause(){this.layer?.pause()}seekBackward(){if(this.layer){let e=this.layer.currentTime-this.seekLength;e<=0?this.layer.reset():this.layer.setCurrentTime(e)}}seekForward(){if(this.layer){let e=this.layer.currentTime+this.seekLength;e>=this.layer.duration?this.layer.reset():this.layer.setCurrentTime(e)}}seekToBeginning(){this.layer?.setCurrentTime(0)}seekToEnding(){this.layer?.setCurrentTime(this.layer.duration)}seekTo(e){this.layer?.setCurrentTime(e)}toggleSensorDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.sensorLocation=!this._layerView.visibleTelemetryElements.sensorLocation)}toggleSensorSightLineDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.lineOfSight=!this._layerView.visibleTelemetryElements.lineOfSight)}toggleFrameDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.frame=!this._layerView.visibleTelemetryElements.frame)}toggleSensorTrailDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.sensorTrail=!this._layerView.visibleTelemetryElements.sensorTrail)}toggleFrameCenterDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.frameCenter=!this._layerView.visibleTelemetryElements.frameCenter)}toggleFrameOutlineDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.frameOutline=!this._layerView.visibleTelemetryElements.frameOutline)}changePlaybackSpeed(e){this.layer&&(this.layer.playbackRate=e)}changeGraphicsColor(e){this._layerView&&(this._layerView.symbolColor=e)}_followTelemetry(){this.removeHandles("follow"),this.view&&this.layer&&this.addHandles(a(()=>this.layer?.telemetry,()=>{let e=[],n=this.followingMode==="follow-sensor"||this.followingMode==="follow-both",s=this.followingMode==="follow-frame"||this.followingMode==="follow-both";n&&this.layer?.telemetry.sensorLocation&&e.push(this.layer.telemetry.sensorLocation),s&&this.layer?.telemetry.frameCenter&&e.push(this.layer.telemetry.frameCenter),e.length&&this.view?.goTo(e).catch(()=>{})},o),"follow")}};l([r()],t.prototype,"_layerView",null),l([r({readOnly:!0})],t.prototype,"buffered",null),l([r({readOnly:!0})],t.prototype,"currentTime",null),l([r({readOnly:!0})],t.prototype,"duration",null),l([r({readOnly:!0})],t.prototype,"ended",null),l([r()],t.prototype,"followingMode",void 0),l([r()],t.prototype,"layer",void 0),l([r({readOnly:!0})],t.prototype,"metadata",null),l([r({readOnly:!0})],t.prototype,"playing",null),l([r()],t.prototype,"seekLength",void 0),l([r({readOnly:!0})],t.prototype,"state",null),l([r()],t.prototype,"view",void 0),t=l([h("esri.widgets.VideoPlayer.VideoPlayerViewModel")],t);var _=t;export{_ as a};
