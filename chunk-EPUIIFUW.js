import{a as z}from"./chunk-4H7CCBS4.js";import{a as me}from"./chunk-C6GAOMLO.js";import"./chunk-BNOCJUWF.js";import{a as ie,b as oe,c as ae,d as se,e as P}from"./chunk-F33AQILK.js";import{a as ee}from"./chunk-SSPYZF7P.js";import{a as ce}from"./chunk-XX3XW27Y.js";import"./chunk-QYAHQCHR.js";import"./chunk-K6RUHK3C.js";import"./chunk-WEBXJZFZ.js";import"./chunk-UA2FXFX4.js";import"./chunk-5WOZ3ZUE.js";import"./chunk-WYDITUTG.js";import"./chunk-OBHZ6OKG.js";import"./chunk-AODMECLB.js";import"./chunk-ED4S7J2Z.js";import"./chunk-MU2TPF5V.js";import"./chunk-ZA2DRI5X.js";import{a as le}from"./chunk-K7FP3D45.js";import{a as ne}from"./chunk-HC5QILEZ.js";import"./chunk-X7RYWL2M.js";import"./chunk-W2RZ3RCQ.js";import{i as re}from"./chunk-QCDICAJZ.js";import"./chunk-FTOXUUBK.js";import"./chunk-IN6M775Z.js";import"./chunk-5BGVMDAM.js";import"./chunk-4ZJLEUS2.js";import"./chunk-V4TTZ7GK.js";import"./chunk-BRWCNPJU.js";import{a as V}from"./chunk-AGCOSXCD.js";import"./chunk-TB5NB3BG.js";import"./chunk-EXNBPOL5.js";import"./chunk-MFVOVHMW.js";import"./chunk-FPCHE4I2.js";import"./chunk-TGSXSDDB.js";import{a as te}from"./chunk-FHBFWDFD.js";import"./chunk-AT3LJJPR.js";import"./chunk-YCST6SCG.js";import"./chunk-6GAANBZQ.js";import"./chunk-2TGLTRKB.js";import"./chunk-4JIR4MZV.js";import"./chunk-ZO3S2OWI.js";import"./chunk-63BBKXWS.js";import"./chunk-GKDCA3IZ.js";import"./chunk-F6K2Z5NW.js";import"./chunk-M2NVZA7C.js";import"./chunk-PXFHIN7R.js";import"./chunk-MTYOPLNE.js";import"./chunk-FLXA3YE2.js";import"./chunk-LV6YLDIT.js";import"./chunk-OY7XUXBB.js";import"./chunk-YAO42OFM.js";import"./chunk-WGJAGR3G.js";import"./chunk-ASWKMS6K.js";import"./chunk-JTSFFT34.js";import"./chunk-J4NXMDBD.js";import"./chunk-YEGIAUQF.js";import"./chunk-42A4XARZ.js";import"./chunk-AXZXNRJJ.js";import"./chunk-PGB3OOVZ.js";import"./chunk-BC7GBJHB.js";import"./chunk-WBPLJNRU.js";import{a as Y}from"./chunk-EBLTZITF.js";import"./chunk-4TIUXNXO.js";import"./chunk-GUIIGAD3.js";import"./chunk-SFSN6ZUK.js";import"./chunk-HUWVQAJL.js";import"./chunk-KTGZLV6S.js";import"./chunk-V5NOEZNM.js";import"./chunk-VAJSJAV3.js";import{a as U}from"./chunk-2ARQOMI2.js";import{a as X}from"./chunk-RGY7NTLL.js";import"./chunk-GY62SD4Z.js";import"./chunk-IAG3AFVL.js";import{a as K}from"./chunk-H5YAFDFO.js";import"./chunk-JYGVIFB2.js";import"./chunk-EMABSAM2.js";import"./chunk-5BRKCXYS.js";import"./chunk-LQEFWCY6.js";import"./chunk-H2NTHPNN.js";import"./chunk-CX3G2QWN.js";import"./chunk-YTAJKLRN.js";import"./chunk-DA3NC6W4.js";import"./chunk-CZMBPC27.js";import"./chunk-VANM5A4M.js";import"./chunk-VSD74FMI.js";import"./chunk-7G56KLCZ.js";import"./chunk-47NSYSFY.js";import"./chunk-QXNVQZT7.js";import"./chunk-BYXBJQAS.js";import"./chunk-THX6XNHV.js";import"./chunk-AKKUUEQK.js";import"./chunk-JLWYDAJB.js";import"./chunk-65AU7AAM.js";import"./chunk-WCP2EMZH.js";import"./chunk-KW4MDY3Q.js";import"./chunk-N5YFWV2V.js";import"./chunk-ZVY5IAEF.js";import"./chunk-3QCWBHPT.js";import"./chunk-KZUZOO74.js";import"./chunk-2WNZJ23W.js";import"./chunk-DKSX4JEA.js";import"./chunk-7QGCXTHL.js";import"./chunk-NGZE6C3L.js";import"./chunk-5GIG46ID.js";import"./chunk-WH5SLVE3.js";import"./chunk-GJRFI4S3.js";import"./chunk-JXEAVWUK.js";import"./chunk-4D3QHJI2.js";import"./chunk-E2J2V7JN.js";import"./chunk-B7PAC3NI.js";import"./chunk-R3ABULTC.js";import"./chunk-4JEZ6E3P.js";import"./chunk-37H4LYIE.js";import"./chunk-VYZHOYXV.js";import"./chunk-ECA5I2I7.js";import"./chunk-UCLAGAF3.js";import"./chunk-T3DGHEVR.js";import"./chunk-ZOOQQO74.js";import"./chunk-THNS5WQE.js";import"./chunk-3KUXZU2N.js";import"./chunk-X7BNFUFQ.js";import"./chunk-XAHD7XBV.js";import"./chunk-HBZAOVHW.js";import"./chunk-ONYJLWAD.js";import"./chunk-H25DKJGS.js";import"./chunk-66BPZDMW.js";import"./chunk-HO3QN3PC.js";import"./chunk-ZM24RY22.js";import"./chunk-7Y6S2GNA.js";import"./chunk-VOB6IBIW.js";import"./chunk-63B3IOWG.js";import"./chunk-EGNFRNEH.js";import"./chunk-BMZ3PE5Y.js";import"./chunk-JXPUHKCT.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-JQAW4OB5.js";import"./chunk-R3XLNYYB.js";import"./chunk-2HYVVLKS.js";import"./chunk-XRTA5GHC.js";import"./chunk-Y6XW36QP.js";import"./chunk-ZXKU6WBY.js";import"./chunk-36M5A2TS.js";import"./chunk-U2ZO6WN5.js";import"./chunk-XQOE7Z4Q.js";import"./chunk-BMYVPMAK.js";import{a as M}from"./chunk-6F25LG6O.js";import"./chunk-6KRFVLII.js";import"./chunk-ZGHRJMZW.js";import"./chunk-XLL67PCY.js";import"./chunk-MCO7DSFO.js";import"./chunk-IIROCMOY.js";import"./chunk-EDZQZA57.js";import"./chunk-V6AA2XHK.js";import"./chunk-25WBXAEY.js";import"./chunk-7QY3BMVN.js";import"./chunk-Y7GY5YIF.js";import"./chunk-LMGYHZE3.js";import"./chunk-5LG2P6MT.js";import"./chunk-GJ2QRXGN.js";import"./chunk-W5OI4BJ2.js";import"./chunk-EM35R6FY.js";import"./chunk-HM5RIVQC.js";import"./chunk-DJW5LMRG.js";import"./chunk-DEH76MSI.js";import"./chunk-DQOFEB5P.js";import"./chunk-QXXXCEV5.js";import"./chunk-6B5XFA6F.js";import"./chunk-TJ6P6NLD.js";import"./chunk-NX5B6XBR.js";import"./chunk-2JABY6DU.js";import"./chunk-MPRKSQLC.js";import"./chunk-57TARQ4F.js";import"./chunk-6RBQSBA2.js";import"./chunk-3JGYBNJA.js";import"./chunk-DA3SDKGO.js";import"./chunk-ZOEPYNM4.js";import"./chunk-57VFBGF3.js";import"./chunk-GWBRHLNH.js";import"./chunk-BJH4F4SM.js";import"./chunk-Z3RBZHAK.js";import"./chunk-SP2CO3KX.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-FYZRIMPP.js";import"./chunk-ZC6EBRE4.js";import"./chunk-ZAZJB7CV.js";import"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-E7AX56GD.js";import"./chunk-IDVLLREH.js";import"./chunk-DWLSVYOY.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-JRGT3GTH.js";import"./chunk-K75TK42V.js";import"./chunk-CELWVZPW.js";import"./chunk-VV5G7VY5.js";import"./chunk-OLOKUDVI.js";import"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import{a as J}from"./chunk-DZFUQCB6.js";import"./chunk-V2JYXY4D.js";import"./chunk-KVM6SHDX.js";import"./chunk-PIHANKUA.js";import"./chunk-P33JWG3G.js";import"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-IR6XCBC4.js";import{m as Q}from"./chunk-ZQIC5NFT.js";import{c as Z}from"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import{a as N}from"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-LXK2YRMG.js";import"./chunk-O3EGNJTY.js";import"./chunk-GHKL3NOH.js";import"./chunk-WGAOVKGR.js";import"./chunk-MDSLION2.js";import{a as W}from"./chunk-AXYQJCCX.js";import{a as i}from"./chunk-5XCFNEYX.js";import{a as j}from"./chunk-GQL2MBZT.js";import{b as y}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import{a as L}from"./chunk-4N4D2YQX.js";import{a as H}from"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import{d as F}from"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as f,e as S,j as x,k}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import{a as B}from"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as s}from"./chunk-QGVBCWUY.js";import{H as A}from"./chunk-MYO4NP2N.js";import{e as l}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as _}from"./chunk-5QEXLALV.js";import{i as q}from"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import{b as I}from"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import{b as R}from"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{f as G}from"./chunk-VTHXE323.js";var Se=new M("#000"),pe;function Ve(){return G(this,null,function*(){let[,{Stage:t}]=yield Promise.all([import("./chunk-GBQUOJ3C.js"),import("./chunk-4THIOL43.js")]);pe=t})}var E=.01,D=class extends A{};D=s([_("esri.views.VideoView.Base")],D);var n=class extends ae(ee(B.EventedMixin(L.EsriPromiseMixin(D)))){constructor(t){super(t),this._isValid=!1,this.stage=null,this.layer=null,this.navigation=new V,this.ready=!1,this.stateManager=new oe({constraints:new ie({view:this,minScale:1,maxScale:E})}),this.spatialReference=new N({wkid:0}),this.type="2d",this.ui=new P,this.addHandles([f(()=>this.preconditionsReady,e=>e?this._startup():this._teardown()),f(()=>this.layer,()=>this.addResolvingPromise(S(()=>this.ready)),x),f(()=>[this.layer?.effect,this._overlayContainer,this.effect],()=>{this._overlayContainer&&(this._overlayContainer.effect=this.effect??this.layer?.effect??null)},k),f(()=>this.videoSize,([e,o])=>{this._extent&&e&&o&&(this._extent.xmax=e,this._extent.ymax=o)})])}initialize(){this.addResolvingPromise(Ve().then(()=>(this._isValid=!0,S(()=>this.ready))))}destroy(){this._teardown()}get constraintsInfo(){return{lods:null,spatialReference:this.spatialReference}}get effect(){return this.layer?.effect}set effect(t){this._override("effect",t)}get preconditionsReady(){return!(!this._isValid||this.width===0||this.height===0||this.videoSize[0]===0||this.videoSize[1]===0)}get rendering(){return this.stage?.renderRequested??!1}get videoSize(){if(!this.layer?.videoWidth||!this.layer?.videoHeight)return[0,0];let[t,e]=this.size,o=(this.layer?.videoWidth||0)/(this.layer?.videoHeight||0),a=e*o,r=t/o;return t/e>=1?o>=1?a<=t?[a,e]:[t,r]:r<=e?[t,r]:[a,e]:o>=1?r<=e?[t,r]:[a,e]:a<=t?[a,e]:[t,r]}get scale(){return this.stateManager?.scale??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}_startup(){if(!this.layer)return;let t=this._getViewpoint();this.stateManager.startup(t,this.size,t.targetGeometry.spatialReference),this.stage=new pe(this.surface,{renderingOptions:this.renderingOptions,backgroundColor:Se}),this._prepareStage(this.stage);let e=new se({view:this});this._set("animationManager",e);let o=new re({view:this,animationManager:e});this._set("mapViewNavigation",o),this._updateConstraints(),this.frameTask.start(),this._set("ready",!0)}_teardown(){this.stage.destroy(),this.stage=null,this._videoElementView=null,this._overlayContainer.removeAllChildren(),this._overlayContainer=null,this.removeAllHandles(),this._set("ready",!1),this.stateManager.teardown(),this.frameTask.stop(),this.stationaryManager.clear(),this.frameTask=I(this.frameTask),this.goToManager.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}_getViewpoint(){return new Y({targetGeometry:new Z({x:this.videoSize[0]/2,y:this.videoSize[1]/2,spatialReference:this.spatialReference}),scale:1})}_prepareStage(t){this.addHandles([f(()=>this.stationary,o=>t.stationary=o,k),f(()=>this.state.id,()=>t.state=this.state,k),f(()=>this.renderingOptions,o=>t.renderingOptions=o,k)],"video-view"),this._extent=new Q({xmin:0,ymin:0,xmax:this.videoSize[0],ymax:this.videoSize[1],spatialReference:{wkid:0}}),this._videoElementView=new U({element:new X({video:this.layer?.videoElement,georeference:new K({extent:this._extent}),autoplay:!1}),spatialReference:this.spatialReference});let e=new le(this._videoElementView);this._overlayContainer=new ne,this._overlayContainer.addChild(e),this.stage.addChild(this._overlayContainer)}_updateConstraints(){this._updateZoomConstraints(),this._updatePanConstraints()}_updateZoomConstraints(){let t=this.videoSize,e=Math.max(t[0]/this.size[0],t[1]/this.size[1]),o=[];for(let r=e;r>E;r/=2)o.push(r);o.push(E);let{lods:a}=J.create({scales:o});this.constraints.set({lods:a,minScale:e})}_updatePanConstraints(){let t=e=>{if(!e.targetGeometry)return e;let[o,a]=this.videoSize,r=o*e.scale/2,p=a*e.scale/2,g=e.targetGeometry.clone();return g.x=Math.max(r,Math.min(o-r,g.x)),g.y=Math.max(p,Math.min(a-p,g.y)),e.targetGeometry=g,e};this.constraints.customConstraints.add({constrain:t,applyPanConstraint:t})}};s([l()],n.prototype,"_overlayContainer",void 0),s([l()],n.prototype,"_isValid",void 0),s([l()],n.prototype,"constraintsInfo",null),s([l()],n.prototype,"effect",null),s([l()],n.prototype,"layer",void 0),s([l({type:V,nonNullable:!0})],n.prototype,"navigation",void 0),s([l({readOnly:!0})],n.prototype,"preconditionsReady",null),s([l({readOnly:!0})],n.prototype,"ready",void 0),s([l({readOnly:!0})],n.prototype,"rendering",null),s([l()],n.prototype,"stateManager",void 0),s([l({readOnly:!0})],n.prototype,"videoSize",null),s([l()],n.prototype,"scale",null),s([l()],n.prototype,"spatialReference",void 0),s([l()],n.prototype,"type",void 0),s([l(),H(t=>t instanceof ce?t:q(P,t))],n.prototype,"ui",void 0),n=s([_("esri.views.VideoView")],n);var de=n;var c="esri-video-player",m={base:c,color:`${c}__color-block`,colorActive:`${c}__color-block__active`,colorPicker:`${c}__color-picker`,playerActions:`${c}__actions`,playerControls:`${c}__controls`,playerTimecode:`${c}__timecode`,playerToolbar:`${c}__toolbar`,progress:`${c}__progress`,rangeSlider:`${c}__range-slider`,settings:`${c}__settings`,settingsFlow:`${c}__settings-flow`,slider:`${c}__slider`,sliderProgressContainer:`${c}__slider-progress-container`,videoView:`${c}__video-view`};var $="esri-metadata-table",u={table:$,data:`${$}__data`,emptyState:`${$}__empty-state`},he=()=>y({accordion:()=>import("./chunk-RXJP33NW.js"),"accordion-item":()=>import("./chunk-VBK5XNI6.js"),block:()=>import("./chunk-LVVNNI43.js"),tile:()=>import("./chunk-32XGCXMV.js")});function ge({viewModel:t,messages:e}){let{metadata:o}=t;return o?i("calcite-block",{heading:e.metadata,open:!0},i("calcite-accordion",{appearance:"solid",selectionMode:"single"},i("calcite-accordion-item",{heading:e.missionInfo},i("div",{class:u.table},Object.keys(o.missionInfo).map(a=>[i("div",{class:u.data},a),i("div",{class:u.data},o.missionInfo[a])]))),i("calcite-accordion-item",{heading:e.platformInfo},i("div",{class:u.table},Object.keys(o.platformInfo).map(a=>[i("div",{class:u.data},a),i("div",{class:u.data},o.platformInfo[a])]))),i("calcite-accordion-item",{heading:e.frameInfo},i("div",{class:u.table},Object.keys(o.frameInfo).map(a=>[i("div",{class:u.data},a),i("div",{class:u.data},o.frameInfo[a])]))))):i("calcite-tile",{class:u.emptyState,description:e.metadataDescription,heading:e.metadataNotLoaded})}var fe=()=>y({action:()=>import("./chunk-X23M5IZ6.js"),"action-bar":()=>import("./chunk-ZZCREW2O.js")});function ye({viewModel:t,messages:e}){let{state:o,playing:a}=t,r=o==="not-ready"||o==="waiting",p=a?e.pause:e.play,g=i("calcite-action",{active:a,alignment:"center",bind:t,disabled:r,icon:a?"pause-f":"play-f",key:"play",onclick:a?t.pause:t.play,scale:"s",text:p,title:p}),v=e.reverse,b=i("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"reverse-f",key:"reverse",onclick:t.seekBackward,scale:"s",text:v,title:v}),w=e.forward,d=i("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"forward-f",key:"forward",onclick:t.seekForward,scale:"s",text:w,title:w}),C=e.beginning,Ce=i("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"beginning-f",key:"beginning",onclick:t.seekToBeginning,scale:"s",text:C,title:C}),O=e.end,xe=i("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"end-f",key:"end",onclick:t.seekToEnding,scale:"s",text:O,title:O});return i("calcite-action-bar",{class:m.playerActions,expandDisabled:!0,layout:"horizontal",scale:"s"},[Ce,b,g,d,xe])}var ve={active:null,speed:"1x",quality:"Auto",color:null},ue=new M([255,127,0]),T=null,we=()=>y({action:()=>import("./chunk-X23M5IZ6.js"),flow:()=>import("./chunk-5V3M627Q.js"),"flow-item":()=>import("./chunk-OQ4LXJHQ.js"),icon:()=>import("./chunk-7Z2RNQA3.js"),list:()=>import("./chunk-4MPCQ5DO.js"),"list-item":()=>import("./chunk-MRM6JRFU.js"),popover:()=>import("./chunk-J5HY7FQ5.js"),block:()=>import("./chunk-LVVNNI43.js"),"color-picker":()=>import("./chunk-6MTEQTDK.js"),chip:()=>import("./chunk-YJHYFSU4.js"),"color-picker-swatch":()=>import("./chunk-47XB5ZDY.js")});function be({viewModel:t,settings:e,messages:o}){let{state:a}=t,r=a==="not-ready"||a==="waiting",p=["Auto"],g=[{label:"0.25x",value:.25},{label:"0.5x",value:.5},{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}],v=i("calcite-flow-item",{heading:o.playbackSpeed,key:"playback-speed",selected:e.active==="speed",onCalciteFlowItemBack:()=>{e.active=null}},i("calcite-list",{label:o.playbackSpeed,selectionMode:"single-persist"},g.map(({label:d,value:C})=>i("calcite-list-item",{key:d,label:d,onclick:()=>{e.speed=d,t.changePlaybackSpeed(C)},selected:d===e.speed})))),b=i("calcite-flow-item",{heading:o.quality,key:`Quality (${e.quality})`,selected:e.active==="quality",onCalciteFlowItemBack:()=>{e.active=null}},i("calcite-list",{label:o.quality,selectionMode:"single-persist"},p.map(d=>i("calcite-list-item",{key:d,label:d,onclick:()=>{e.quality=d},selected:d===e.quality})))),w=i("calcite-flow-item",{heading:o.graphics,key:`Graphics (${e.color})`,selected:e.active==="color",onCalciteFlowItemBack:()=>{e.active=null,e.color=T?new M(T):null,e.color&&t.changeGraphicsColor(e.color)}},i("calcite-block",{heading:o.color,open:!0},i("calcite-color-picker",{channelsDisabled:!0,format:"hex",savedDisabled:!0,scale:"s",value:e.color?.toHex()??ue.toHex(),onCalciteColorPickerChange:d=>{T=d.currentTarget.value?.toString()}})));return i("div",{class:m.settings},i("calcite-popover",{autoClose:!0,label:o.settings,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"settings-action",scale:"s"},i("calcite-flow",{class:m.settingsFlow,key:"root-flow"},i("calcite-flow-item",{closable:!1,heading:"Settings",key:"root-flow-item",selected:!e.active},i("calcite-list",{label:o.settings},i("calcite-list-item",{key:`Speed (${e.speed})`,label:o.speed,onclick:()=>{e.active="speed"}},i("div",{slot:"content-end"},i("calcite-chip",{label:e.speed,scale:"s"},e.speed)),i("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),i("calcite-list-item",{key:`Quality (${e.quality})`,label:o.quality,onclick:()=>{e.active="quality"}},i("div",{slot:"content-end"},i("calcite-chip",{label:e.quality,scale:"s"},e.quality)),i("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),i("calcite-list-item",{key:`Graphics (${e.color})`,label:o.graphics,onclick:()=>{e.active="color"}},i("calcite-color-picker-swatch",{color:e.color?.toString()??ue.toString(),scale:"s",slot:"content-end"}),i("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})))),e.active==="speed"?v:null,e.active==="quality"?b:null,e.active==="color"?w:null)),i("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"sliders",id:"settings-action",key:"settings",scale:"s",slot:"trigger",text:o.settings}))}var _e=()=>Promise.all([y({action:()=>import("./chunk-X23M5IZ6.js"),"action-bar":()=>import("./chunk-ZZCREW2O.js"),panel:()=>import("./chunk-GS5FRZ5P.js"),popover:()=>import("./chunk-J5HY7FQ5.js"),list:()=>import("./chunk-4MPCQ5DO.js"),"list-item":()=>import("./chunk-MRM6JRFU.js"),icon:()=>import("./chunk-7Z2RNQA3.js")}),we()]);function Pe(t){return t.followingMode==="none"?"circle-disallowed":t.followingMode==="follow-sensor"?"zoom-to-object":t.followingMode==="follow-frame"?"follow":"video"}function ke({viewModel:t,messages:e,settings:o,toggleMetadata:a}){let{state:r}=t,p=r==="not-ready"||r==="waiting",g=i("div",null,i("calcite-popover",{autoClose:!0,label:e.layers,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"layers-action",scale:"s"},i("calcite-panel",{heading:e.layers},i("calcite-list",{label:e.layers,selectionMode:"multiple"},i("calcite-list-item",{label:e.sensor,onclick:()=>{t.toggleSensorDisplay()},selected:!!t.layer?.telemetryDisplay?.sensorLocation}),i("calcite-list-item",{label:e.sightLine,onclick:()=>{t.toggleSensorSightLineDisplay()},selected:!!t.layer?.telemetryDisplay?.lineOfSight}),i("calcite-list-item",{label:e.sensorTrail,onclick:()=>{t.toggleSensorTrailDisplay()},selected:!!t.layer?.telemetryDisplay?.sensorTrail}),i("calcite-list-item",{label:e.frameCenter,onclick:()=>{t.toggleFrameCenterDisplay()},selected:!!t.layer?.telemetryDisplay?.frameCenter}),i("calcite-list-item",{label:e.frameOutline,onclick:()=>{t.toggleFrameOutlineDisplay()},selected:!!t.layer?.telemetryDisplay?.frameOutline}),i("calcite-list-item",{label:e.frame,onclick:()=>{t.toggleFrameDisplay()},selected:!!t.layer?.telemetryDisplay?.frame})))),i("calcite-action",{alignment:"center",bind:t,disabled:p,icon:"layers",id:"layers-action",key:"layers",scale:"s",slot:"trigger",text:e.layers})),v=i("div",null,i("calcite-popover",{autoClose:!0,label:e.follow,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"follow-action",scale:"s"},i("calcite-panel",{heading:e.follow},i("calcite-list",{label:e.follow,selectionMode:"single-persist"},i("calcite-list-item",{label:e.none,onclick:()=>{t.followingMode="none"}},i("calcite-icon",{icon:"circle-disallowed",scale:"s",slot:"content-start"})),i("calcite-list-item",{label:e.sensor,onclick:()=>{t.followingMode="follow-sensor"}},i("calcite-icon",{icon:"zoom-to-object",scale:"s",slot:"content-start"})),i("calcite-list-item",{label:e.frame,onclick:()=>{t.followingMode="follow-frame"}},i("calcite-icon",{icon:"follow",scale:"s",slot:"content-start"})),i("calcite-list-item",{label:e.video,onclick:()=>{t.followingMode="follow-both"},selected:!0},i("calcite-icon",{icon:"video",scale:"s",slot:"content-start"}))))),i("calcite-action",{alignment:"center",bind:t,disabled:p,icon:Pe(t),id:"follow-action",key:"follow",scale:"s",slot:"trigger",text:e.follow})),b=i(be,{messages:e,settings:o,viewModel:t}),w=i("calcite-action",{alignment:"center",bind:t,disabled:p,icon:"feature-details",key:"metadata",onclick:a,scale:"s",text:e.metadata});return i("calcite-action-bar",{class:m.playerControls,expandDisabled:!0,layout:"horizontal",scale:"s"},[g,v,b,w])}var h=class extends j{constructor(t,e){super(t,e),this._settings=R(ve),this._metadataVisible=!1,this._slider=new me({visibleElements:{labels:!1,rangeLabels:!1},min:0,max:100,values:[0],thumbsConstrained:!1}),this.videoView=new de({container:document.createElement("div"),constraints:{rotationEnabled:!1},ui:{components:["zoom"]}}),this.viewModel=new z}initialize(){this.addHandles([f(()=>this.viewModel.layer,()=>{this.videoView.layer=this.viewModel.layer},x),this._slider.on(["thumb-change","thumb-drag"],({value:t})=>{let e=t*this.viewModel.duration/100;this.viewModel.seekTo(e)})])}loadDependencies(){return Promise.all([fe(),_e(),he(),y({progress:()=>import("./chunk-5ONAAT6N.js"),panel:()=>import("./chunk-GS5FRZ5P.js"),scrim:()=>import("./chunk-R5U5AYSV.js")})])}get effect(){return this.videoView.effect}set effect(t){this.videoView.effect=t}get icon(){return"video-web"}set icon(t){this._overrideIfSome("icon",t)}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get rotationEnabled(){return this.videoView.constraints.rotationEnabled}set rotationEnabled(t){this.videoView.constraints.rotationEnabled=t,this.videoView.ui.components=t?[...this.videoView.ui.components,"compass"]:this.videoView.ui.components.filter(e=>e!=="compass")}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get zoomEnabled(){return this.videoView.navigation.mouseWheelZoomEnabled}set zoomEnabled(t){this.videoView.navigation.mouseWheelZoomEnabled=t,this.videoView.ui.components=t?[...this.videoView.ui.components,"zoom"]:this.videoView.ui.components.filter(e=>e!=="zoom")}render(){return i("div",{class:this.classes(m.base,te.widget)},i("calcite-panel",{heading:this.layer?.title||"Video Player"},this._renderLoadingScrim(),this._renderBuffering(),this._renderVideoSection(),this._renderActionBar(),this._renderMetadataSection()))}_renderLoadingScrim(){let{state:t}=this.viewModel;return this.videoView.ready?null:i("calcite-scrim",{loading:t!=="error"},t==="error"?this.messages.errorLoadingLayer:null)}_renderBuffering(){let{currentTime:t,buffered:e,duration:o}=this.viewModel,a=e/(o||1),r=t/(o||1);return this.viewModel.ended||a>r?null:i("calcite-progress",{type:"indeterminate"})}_renderVideoSection(){let{buffered:t,currentTime:e,duration:o}=this.viewModel,a=this.videoView.container;if(!a)return null;a.className=m.videoView;let r=t/(o||1),p=e/(o||1);return this._slider.values=[100*p],i("section",{afterCreate:ze,bind:a},i("div",{class:m.sliderProgressContainer},i("progress",{class:m.progress,max:"1",value:`${r}`}),i("div",{class:m.slider},this._slider.render())))}_renderActionBar(){return i("div",{class:m.playerToolbar},i(ye,{messages:this.messages,viewModel:this.viewModel}),i("div",{class:m.playerTimecode},Me(this.viewModel.currentTime)," / ",Me(this.viewModel.duration)),i(ke,{messages:this.messages,settings:this._settings,toggleMetadata:()=>this._metadataVisible=!this._metadataVisible,viewModel:this.viewModel}))}_renderMetadataSection(){return this._metadataVisible?i(ge,{messages:this.messages,viewModel:this.viewModel}):null}};function Me(t){return F(1e3*Math.round(t),{minute:"2-digit",second:"2-digit"})}function ze(t){let e=this;t.prepend(e)}s([l()],h.prototype,"_settings",void 0),s([l()],h.prototype,"effect",null),s([l()],h.prototype,"icon",null),s([l()],h.prototype,"layer",null),s([l(),W("esri/widgets/VideoPlayer/t9n/VideoPlayer")],h.prototype,"messages",void 0),s([l()],h.prototype,"rotationEnabled",null),s([l()],h.prototype,"videoView",void 0),s([l({type:z})],h.prototype,"viewModel",void 0),s([l()],h.prototype,"view",null),s([l()],h.prototype,"zoomEnabled",null),h=s([_("esri.widgets.VideoPlayer")],h);var ma=h;export{ma as default};
