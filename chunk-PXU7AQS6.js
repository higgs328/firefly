import{a as w}from"./chunk-O3DP7PW7.js";import{a as O}from"./chunk-AKI7NWXQ.js";import{a as z}from"./chunk-EIFP2BIJ.js";import{c as _}from"./chunk-Z7TBAZRW.js";import{a as h,b as y}from"./chunk-LORHDXEB.js";import{e as v,i as x,l as b}from"./chunk-GJ2QRXGN.js";import{i as E}from"./chunk-DA3SDKGO.js";import{a as d,k as g}from"./chunk-TG45K3WR.js";import{b as c}from"./chunk-ACP3S2CH.js";import{a as r}from"./chunk-QGVBCWUY.js";import{e as o}from"./chunk-NFIPKH6V.js";import{l as f}from"./chunk-5QEXLALV.js";import{f as m}from"./chunk-VTHXE323.js";var p=c.ofType(O),e=class extends z{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles(d(()=>this._computeExtent(),t=>{t?.pending==null&&this._set("extent",t!=null?t.extent:null)},g))}get targets(){return this._get("targets")||new p}set targets(t){this._set("targets",h(t,this.targets,p))}get spatialReference(){return this.observer?.position!=null?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[this.observer?.position]}waitComputeExtent(){return m(this,null,function*(){let t=this._computeExtent();return t!=null?t.pending:Promise.resolve()})}_computeExtent(){let t=this.spatialReference;if(this.observer?.position==null||t==null)return null;let a=i=>_(i.position,i.elevationInfo)==="absolute-height",s=this.observer.position,u=v(s.x,s.y,s.z,s.x,s.y,s.z);for(let i of this.targets)if(i.position!=null){let n=E(i.position,t);if(n.pending!=null)return{pending:n.pending,extent:null};if(n.geometry!=null){let{x:R,y:j,z:A}=n.geometry;b(u,[R,j,A])}}let l=x(u,t);return a(this.observer)&&this.targets.every(a)||(l.zmin=void 0,l.zmax=void 0),{pending:null,extent:l}}clear(){this.observer=null,this.targets.removeAll()}};r([o({type:["line-of-sight"]})],e.prototype,"type",void 0),r([o({type:w,json:{read:!0,write:!0}})],e.prototype,"observer",void 0),r([o({cast:y,type:p,nonNullable:!0,json:{read:!0,write:!0}})],e.prototype,"targets",null),r([o({value:null,readOnly:!0})],e.prototype,"extent",void 0),r([o({readOnly:!0})],e.prototype,"spatialReference",null),r([o({readOnly:!0})],e.prototype,"requiredPropertiesForEditing",null),e=r([f("esri.analysis.LineOfSightAnalysis")],e);var B=e;export{B as a};
