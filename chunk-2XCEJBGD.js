import{a as f}from"./chunk-UZ6PRO67.js";import{a as d}from"./chunk-ESAKNWVF.js";import{b as l}from"./chunk-ACP3S2CH.js";import{a as t}from"./chunk-QGVBCWUY.js";import{H as v}from"./chunk-MYO4NP2N.js";import{e as r}from"./chunk-NFIPKH6V.js";import{l as b}from"./chunk-5QEXLALV.js";import{g as y}from"./chunk-XRGPJ3QY.js";import{l as c}from"./chunk-QBWJMFH5.js";var e=class extends v{constructor(o){super(o),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new l,this.distance=d.distance,this.touchSensitivityMultiplier=d.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){let o=this.featureSources;o.some(h)&&y.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");let p=o.filter(O),a=this._get("_effectiveFeatureSources")?.filter(h)??new l;for(let i of p){let s=a.find(n=>n.layer===i.layer.parent);if(s)s.sublayerSources.includes(i)||s.sublayerSources.add(i);else if(i.layer.parent){let n=new f({layer:i.layer.parent});n.sublayerSources.add(i),a.add(n)}}for(let i of a){let s=i.sublayerSources.filter(n=>!p.includes(n));i.sublayerSources.removeMany(s)}a.removeMany(a.filter(i=>i.sublayerSources.length===0));let g=o.filter(E),u=this._get("_effectiveFeatureSources")??new l,{added:S,removed:m}=c(u.toArray(),[...g,...a]);return u.removeMany(m),u.addMany(S),u}};t([r()],e.prototype,"enabled",void 0),t([r()],e.prototype,"enabledToggled",void 0),t([r()],e.prototype,"forceDisabled",void 0),t([r()],e.prototype,"selfEnabled",void 0),t([r()],e.prototype,"featureEnabled",void 0),t([r()],e.prototype,"gridEnabled",void 0),t([r()],e.prototype,"attributeRulesEnabled",void 0),t([r({type:l.ofType(f)})],e.prototype,"featureSources",void 0),t([r()],e.prototype,"distance",void 0),t([r()],e.prototype,"touchSensitivityMultiplier",void 0),t([r({readOnly:!0})],e.prototype,"effectiveEnabled",null),t([r({readOnly:!0})],e.prototype,"effectiveGridEnabled",null),t([r({readOnly:!0})],e.prototype,"effectiveSelfEnabled",null),t([r({readOnly:!0})],e.prototype,"effectiveFeatureEnabled",null),t([r({readOnly:!0})],e.prototype,"_effectiveFeatureSources",null),e=t([b("esri.views.interactive.snapping.SnappingOptions")],e);var A=e;function h(o){return o.layer.type==="subtype-group"}function E(o){return o.layer.type!=="subtype-group"}function O(o){return o.layer.type==="subtype-sublayer"}export{A as a};
