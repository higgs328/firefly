import{a as w}from"./chunk-7ECGJFJY.js";import{a as g}from"./chunk-4OC4J3KU.js";import{b as E}from"./chunk-QRRKH6UX.js";import{f as d}from"./chunk-Z7TBAZRW.js";import{a as u}from"./chunk-6F25LG6O.js";import{a as h,c as y}from"./chunk-TG45K3WR.js";import{a as i}from"./chunk-QGVBCWUY.js";import{e as n}from"./chunk-NFIPKH6V.js";import{l as f}from"./chunk-5QEXLALV.js";import{d as m}from"./chunk-TG2UTNEO.js";import{f as c}from"./chunk-VTHXE323.js";var o=class extends w{constructor(e){super(e),this.type="input",this.color=new u("#00c8c8"),this.viewVisualizationEnabled=!1,this.numSamplesForPreview=50,this.numSamplesPerChunk=500,this.chartFillEnabled=!1,this.chartStrokeOffsetY=-1,this._getQueryElevationDependencies=g((t,a,_,b,r)=>t?{elevationInfo:t,visibleLayers:a,view:_,stationary:b,spatialReference:r}:null)}get queryElevationDependencies(){let e=this._viewModel?.view;return e==null?null:this._getQueryElevationDependencies(this._elevationInfo,this._visibleLayers,e,e.stationary,e.spatialReference)}get available(){return!this._viewModel?.inputIsSketched}get _elevationInfo(){let e=this._viewModel?.input;return e?d(e):null}get _visibleLayers(){return this._viewModel?.view?.map?.allLayers?.filter(e=>e.visible).toArray()??[]}queryElevation(_,b){return c(this,arguments,function*(e,{noDataValue:t,signal:a}){let r=this.queryElevationDependencies;if(r==null)throw new Error("ElevationProfileLineInput: no dependencies");let{view:v,elevationInfo:D,spatialReference:l}=r;if(D.mode==="on-the-ground"&&v.type==="3d"&&l){let s=yield E.fromGeometry(e).project(l,a);if(!s)return{geometry:e,noDataValue:t};let I=v.elevationProvider;return s.coordinates.forEach(p=>{p.z=I.getElevation(p.x,p.y,0,l,"ground")??0}),{geometry:s.export(),noDataValue:t}}return{geometry:e,noDataValue:t}})}attach(e){let t=()=>this._onChange();return m([super.attach(e),h(()=>this.queryElevationDependencies,t),y(()=>e.elevationProvider,"elevation-change",t,{onListenerAdd:t,onListenerRemove:t})])}};i([n({type:u,nonNullable:!0})],o.prototype,"color",void 0),i([n()],o.prototype,"viewVisualizationEnabled",void 0),i([n()],o.prototype,"queryElevationDependencies",null),i([n()],o.prototype,"available",null),i([n()],o.prototype,"_elevationInfo",null),i([n()],o.prototype,"_visibleLayers",null),o=i([f("esri.widgets.ElevationProfile.ElevationProfileLineInput")],o);var F=o;export{F as a};
