import{b as i,e as o,g as a}from"./chunk-F6K2Z5NW.js";import{c as t}from"./chunk-42A4XARZ.js";import{a as l}from"./chunk-QBWJMFH5.js";var h=(s,e)=>s.key.level-e.key.level!=0?s.key.level-e.key.level:s.key.row-e.key.row!=0?s.key.row-e.key.row:s.key.col-e.key.col,c=class extends a{constructor(e){super(),this.tileInfoView=e,this.sortFunction=h}renderChildren(e){this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){let{state:r}=e,n=super.createRenderParams(e);return n.requiredLevel=this.tileInfoView.getClosestInfoForScale(r.scale).level,n.displayLevel=this.tileInfoView.tileInfo.scaleToZoom(r.scale),n}prepareRenderPasses(e){let r=super.prepareRenderPasses(e);return r.push(e.registerRenderPass({name:"stencil",brushes:[i],drawPhase:t.DEBUG|t.MAP|t.HIGHLIGHT|t.LABEL,target:()=>this.getStencilTarget()})),l("esri-tiles-debug")&&r.push(e.registerRenderPass({name:"tileInfo",brushes:[o],drawPhase:t.DEBUG,target:()=>this.children})),r}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(let n of this.children)n.stencilRef=r++}};export{c as a};
