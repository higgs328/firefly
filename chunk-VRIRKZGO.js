import{c as Q}from"./chunk-I76R3PW5.js";import{A as F,D as B,G as h,a as U,p as D,q as T,r as M}from"./chunk-5A7AFZJT.js";import{d as G,f as P,l as V,m as z}from"./chunk-PBAMEKFE.js";import{a as Z}from"./chunk-2SJBRRT6.js";import{a as C}from"./chunk-JPC2A6ML.js";import{a as R}from"./chunk-OGFDJ67M.js";import{a as A}from"./chunk-5K6CB5PS.js";import{a as f}from"./chunk-3JGYBNJA.js";import{a as j}from"./chunk-D3CUKSGS.js";import{a as w}from"./chunk-FXCL7YYQ.js";import{m as O}from"./chunk-ZQIC5NFT.js";import{a as p}from"./chunk-PEW2PLAN.js";import{a as I}from"./chunk-7F5DJLJT.js";import{a as E}from"./chunk-CX5IFQZJ.js";import{f as y}from"./chunk-MVHHPJM7.js";import{h as x,i as S}from"./chunk-AUAZP44J.js";import{f as m}from"./chunk-CCJU4DSH.js";import{b as g}from"./chunk-ACP3S2CH.js";import{a as e}from"./chunk-QGVBCWUY.js";import{e as t}from"./chunk-NFIPKH6V.js";import{l as d}from"./chunk-5QEXLALV.js";import{g as b}from"./chunk-XRGPJ3QY.js";import{b as v}from"./chunk-2LI2GKBQ.js";var l=class extends f.ClonableMixin(m){constructor(u){super(u),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};e([t()],l.prototype,"creatorField",void 0),e([t()],l.prototype,"creationDateField",void 0),e([t()],l.prototype,"editorField",void 0),e([t()],l.prototype,"editDateField",void 0),e([t()],l.prototype,"realm",void 0),e([t(y("dateFieldsTimeReference",!0))],l.prototype,"timeZone",void 0),l=e([d("esri.layers.support.EditFieldsInfo")],l);var L=l;var n=class extends f.ClonableMixin(m){constructor(u){super(u)}};e([t({constructOnly:!0,json:{write:!0}})],n.prototype,"name",void 0),e([t({constructOnly:!0,json:{write:!0}})],n.prototype,"fields",void 0),e([t({constructOnly:!0,json:{write:!0}})],n.prototype,"isAscending",void 0),e([t({constructOnly:!0,json:{write:!0}})],n.prototype,"indexType",void 0),e([t({constructOnly:!0,json:{write:!0}})],n.prototype,"isUnique",void 0),e([t({constructOnly:!0,json:{write:!0}})],n.prototype,"description",void 0),n=e([d("esri.layers.support.FeatureIndex")],n);var Re=u=>{let i=class extends u{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(g.ofType(n)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=I.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}getFieldDomain(){throw new Error("Not implemented")}getField(o){return this.fieldsIndex.get(o)}get authenticationTriggerEvent(){if(!this.url)return null;let{capabilities:o}=this;if(o){let{query:s,operations:a,editing:c}=o;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||a.supportsEditing&&!(c.supportsUpdateByOthers&&c.supportsUpdateByAnonymous&&c.supportsDeleteByOthers&&c.supportsDeleteByAnonymous))return"load"}if(F(this.serviceDefinitionExpression)||F(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(B(this))return"load";if(this.hasUpdateItemRestrictions)return o.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";let r=this.editFieldsInfo;return(r?.creatorField||r?.editorField)&&o?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(o,r){return Q(r,this.url)}readEditingInfo(o,r){let{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){let o=this.capabilities;if(!o)return null;let r=v(o),{operations:s,editing:a}=r;return h(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=a.supportsDeleteByOthers=a.supportsGeometryUpdate=a.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=a.supportsGeometryUpdate=!0),r)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(o,r){return D(r)}get hasFullEditingRestrictions(){let o=this.capabilities;if(!o||h(this))return!1;let{operations:r,editing:s}=o;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){let o=this.capabilities;if(!o)return!1;let{operations:r,editing:s}=o;return h(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(o,r){return r.type==="Table"}readMaxScale(o,r){return r.effectiveMaxScale||o||0}readMinScale(o,r){return r.effectiveMinScale||o||0}readObjectIdFieldFromService(o,r){return T(r)}readServiceDefinitionExpression(o,r){return r.definitionQuery||r.definitionExpression}set url(o){if(o==null)return void this._set("url",o);let r=x({layer:this,url:o,nonStandardUrlAllowed:!0,logger:b.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(o,r,s,a){S(this,o,null,r,a)}readVersion(o,r){return M(r)}};return e([t({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),e([t({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),e([t({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),e([p("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),e([t(y("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),e([t({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),e([t({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),e([t({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),e([t({readOnly:!0,type:L})],i.prototype,"editFieldsInfo",void 0),e([t({readOnly:!0})],i.prototype,"editingInfo",void 0),e([p("editingInfo")],i.prototype,"readEditingInfo",null),e([t({readOnly:!0})],i.prototype,"effectiveCapabilities",null),e([t()],i.prototype,"effectiveEditingEnabled",null),e([t((()=>{let o=v(P),r=o.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},o})())],i.prototype,"elevationInfo",void 0),e([t()],i.prototype,"fieldsIndex",void 0),e([t({type:R,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:w}}})],i.prototype,"floorInfo",void 0),e([t({type:O,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),e([t()],i.prototype,"gdbVersion",void 0),e([t({readOnly:!0,type:C,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),e([t({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:U.read}}}})],i.prototype,"geometryType",void 0),e([t({type:String})],i.prototype,"globalIdField",void 0),e([p("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),e([t({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),e([t({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),e([t({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),e([t({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),e([t({readOnly:!0,type:j})],i.prototype,"heightModelInfo",void 0),e([t({type:Date})],i.prototype,"historicMoment",void 0),e([t({type:g.ofType(n),readOnly:!0})],i.prototype,"indexes",void 0),e([t({readOnly:!0})],i.prototype,"isTable",void 0),e([p("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),e([t({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),e([t(z)],i.prototype,"maxScale",void 0),e([p("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),e([t(V)],i.prototype,"minScale",void 0),e([p("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),e([t({type:String})],i.prototype,"objectIdField",void 0),e([p("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),e([t(y("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),e([t({type:[A],readOnly:!0})],i.prototype,"relationships",void 0),e([t({type:Boolean})],i.prototype,"returnM",void 0),e([t({type:Boolean})],i.prototype,"returnZ",void 0),e([t({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),e([t({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),e([p("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),e([t({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),e([t()],i.prototype,"sourceJSON",void 0),e([t({type:I,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),e([t({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),e([t({type:[Z],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),e([t({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),e([t(G)],i.prototype,"url",null),e([E("url")],i.prototype,"writeUrl",null),e([t({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),e([p("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),i=e([d("esri.layers.mixins.FeatureLayerBase")],i),i};export{Re as a};
