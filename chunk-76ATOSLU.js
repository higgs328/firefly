import{f as B}from"./chunk-CCJU4DSH.js";import{b as G}from"./chunk-YOFFGXOB.js";import{g as E}from"./chunk-XRGPJ3QY.js";import{e as S}from"./chunk-6MRUJ2UW.js";import{y as D}from"./chunk-QBWJMFH5.js";import{a as A,f as R}from"./chunk-VTHXE323.js";var re=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,te={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function x(e){let r=e?.match(re);if(!r)return null;let[,n,t,s]=r;if(!n)return null;let o=null,a=null,l=null,{devext:u,qaext:f,www:g}=te;if(t)if(o=n,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:l}=u);break;case"qa":({customBaseUrl:a,portalHostname:l}=f);break;default:return null}else({customBaseUrl:a,portalHostname:l}=g);else switch(n.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:l}=u);break;case"qaext":({customBaseUrl:a,portalHostname:l}=f);break;case"www":({customBaseUrl:a,portalHostname:l}=g);break;default:return null}return{customBaseUrl:a,isPortal:!1,portalHostname:l,urlKey:o}}function Be(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function Te(e){let r=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,t=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return r.test(e)?e=e.replace(r,"https://www.arcgis.com"):n.test(e)?e=e.replace(n,"https://devext.arcgis.com"):t.test(e)&&(e=e.replace(t,"https://qaext.arcgis.com")),e}function Q(e){let r=atob(e),n=new Uint8Array(r.length);for(let t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n.buffer}function F(e){let r=new Uint8Array(e),n="";for(let t=0;t<r.length;t++)n+=String.fromCharCode(r[t]);return btoa(n)}var se=()=>E.getLogger("esri.core.urlUtils"),d=S.request,W="esri/config: esriConfig.request.proxyUrl is not set.",J=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,K=/^\s*http:/i,N=/^\s*https:/i,oe=/^\s*file:/i,ae=/:\d+$/,ie=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,le=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ue=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$"),p=class{constructor(r=""){this.uri=r,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let n=this.uri.match(le);this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),this.authority!=null&&(n=this.authority.match(ue),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}toString(){return this.uri}},b={},M=new p(S.applicationUrl),i=M,V=ce(),$=V,Qe=()=>i,Fe=()=>$;function ce(){let e=i.path,r=e.slice(0,e.lastIndexOf("/")+1);return`${`${i.scheme}://${i.host}${i.port!=null?`:${i.port}`:""}`}${r}`}var We={setAppUrl:e=>i=e,setAppBaseUrl:e=>$=e,restoreUrls:()=>{i=M,$=V}};function h(e){if(!e)return null;let r={path:null,query:null},n=new p(e),t=e.indexOf("?");return n.query===null?r.path=e:(r.path=e.slice(0,t),r.query=_(n.query)),n.fragment&&(r.hash=n.fragment,n.query===null&&(r.path=r.path.slice(0,r.path.length-(n.fragment.length+1)))),r}function _(e){let r=e.split("&"),n={};for(let t of r){if(!t)continue;let s=t.indexOf("="),o,a;s<0?(o=decodeURIComponent(t),a=""):(o=decodeURIComponent(t.slice(0,s)),a=decodeURIComponent(t.slice(s+1)));let l=n[o];typeof l=="string"&&(l=n[o]=[l]),Array.isArray(l)?l.push(a):n[o]=a}return n}function P(e,r){return e?r&&typeof r=="function"?Object.keys(e).map(n=>encodeURIComponent(n)+"="+encodeURIComponent(r(n,e[n]))).join("&"):Object.keys(e).map(n=>{let t=e[n];if(t==null)return"";let s=encodeURIComponent(n)+"=",o=r?.[n];return o?s+encodeURIComponent(o(t)):Array.isArray(t)?t.map(a=>B.isSerializable(a)?s+encodeURIComponent(JSON.stringify(a)):s+encodeURIComponent(a)).join("&"):B.isSerializable(t)?s+encodeURIComponent(JSON.stringify(t)):s+encodeURIComponent(t)}).filter(n=>n).join("&"):""}function fe(e=!1){let r,n=d.proxyUrl;if(typeof e=="string"){r=Ue(e);let t=j(e);t&&(n=t.proxyUrl)}else r=!!e;if(!n)throw se().warn(W),new G("urlUtils:proxy-not-set",W);return r&&I()&&(n=Z(n)),h(n)}function Je(e,r=!1){let n=j(e),t,s;if(n){let o=L(n.proxyUrl);t=o.path,s=o.query?_(o.query):null}else if(r){let o=fe(e);t=o.path,s=o.query}if(t){let o=h(e);e=t+"?"+o.path;let a=P(A(A({},s),o.query));a&&(e=`${e}?${a}`)}return e}var w={path:"",query:""};function L(e){let r=e.indexOf("?");return r!==-1?(w.path=e.slice(0,r),w.query=e.slice(r+1)):(w.path=e,w.query=null),w}function X(e){return e=(e=C(e=Pe(e=L(e).path),!0)).toLowerCase()}function Ke(e){let r={proxyUrl:e.proxyUrl,urlPrefix:X(e.urlPrefix)},n=d.proxyRules,t=r.urlPrefix,s=n.length;for(let o=0;o<n.length;o++){let a=n[o].urlPrefix;if(t.indexOf(a)===0){if(t.length===a.length)return-1;s=o;break}a.indexOf(t)===0&&(s=o+1)}return n.splice(s,0,r),s}function j(e){let r=d.proxyRules,n=X(e);for(let t=0;t<r.length;t++)if(n.indexOf(r[t].urlPrefix)===0)return r[t]}function Ne(e,r){if(!e||!r)return!1;e=m(e),r=m(r);let n=x(e),t=x(r);return n!=null&&t!=null?n.portalHostname===t.portalHostname:n==null&&t==null&&T(e,r,!0)}function Me(e,r){if(!e||!r)return!1;e=m(e),r=m(r);let n=x(e),t=x(r);return n!=null&&t!=null&&n.portalHostname===t.portalHostname}function Ve(e,r){return e=m(e),r=m(r),C(e)===C(r)}function m(e){let r=(e=O(e)).indexOf("/sharing");return r>0?e.slice(0,r):e.replace(/\/+$/,"")}function _e(e,r=d.interceptors){let n=t=>t==null||t instanceof RegExp&&t.test(e)||typeof t=="string"&&e.startsWith(t);if(r){for(let t of r)if(Array.isArray(t.urls)){if(t.urls.some(n))return t}else if(n(t.urls))return t}return null}function T(e,r,n=!1){if(!e||!r)return!1;let t=H(e),s=H(r);return!(!n&&t.scheme!==s.scheme)&&t.host!=null&&s.host!=null&&t.host.toLowerCase()===s.host.toLowerCase()&&t.port===s.port}function Xe(e){if(typeof e=="string"){if(!U(e))return!0;e=H(e)}if(T(e,i))return!0;let r=d.trustedServers||[];for(let n=0;n<r.length;n++){let t=pe(r[n]);for(let s=0;s<t.length;s++)if(T(e,t[s]))return!0}return!1}function pe(e){return b[e]||(z(e)||c(e)?b[e]=[new p(k(e))]:b[e]=[new p(`http://${e}`),new p(`https://${e}`)]),b[e]}function k(e,r=$,n){return c(e)?n?.preserveProtocolRelative?e:i.scheme==="http"&&i.authority===me(e).slice(2)?`http:${e}`:`https:${e}`:z(e)?e:he(e[0]==="/"?Ce(r):r,e)}function Ye(e,r=$,n){if(e==null||!U(e))return e;let t=O(e),s=t.toLowerCase(),o=O(r).toLowerCase().replace(/\/+$/,""),a=n?O(n).toLowerCase().replace(/\/+$/,""):null;if(a&&o.indexOf(a)!==0)return e;let l=(y,ne,v)=>(v=y.indexOf(ne,v))===-1?y.length:v,u=l(s,"/",s.indexOf("//")+2),f=-1;for(;s.slice(0,u+1)===o.slice(0,u)+"/"&&(f=u+1,u!==s.length);)u=l(s,"/",u+1);if(f===-1||a&&f<a.length)return e;e=t.slice(f);let g=o.slice(f-1).replaceAll(/[^/]+/g,"").length;if(g>0)for(let y=0;y<g;y++)e=`../${e}`;else e=`./${e}`;return e}function O(e){return e=Re(e=Ae(e=ve(e=k(e=e.trim()))))}function he(...e){let r=e.filter(D);if(!r?.length)return;let n=[];if(U(r[0])){let s=r[0],o=s.indexOf("//");o!==-1&&(n.push(s.slice(0,o+1)),Oe(r[0])&&(n[0]+="/"),r[0]=s.slice(o+2))}else r[0][0]==="/"&&n.push("");let t=r.reduce((s,o)=>o?s.concat(o.split("/")):s,[]);for(let s=0;s<t.length;s++){let o=t[s];o===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():(!o&&s===t.length-1||o&&(o!=="."||n.length===0))&&n.push(o)}return n.join("/")}function me(e,r=!1){if(e==null||de(e)||ge(e))return null;let n=e.indexOf("://");if(n===-1&&c(e))n=2;else{if(n===-1)return null;n+=3}let t=e.indexOf("/",n);return t!==-1&&(e=e.slice(0,t)),r&&(e=C(e,!0)),e}function U(e){return c(e)||z(e)}function de(e){return e!=null&&e.slice(0,5)==="blob:"}function ge(e){return e!=null&&e.slice(0,5)==="data:"}function ye(e){let r=q(e);return r?.isBase64?Q(r.data):null}function Ze(e){return F(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}var xe=/^data:(.*?)(;base64)?,(.*)$/;function q(e){let r=e.match(xe);if(!r)return null;let[,n,t,s]=r;return{mediaType:n,isBase64:!!t,data:s}}function en(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function nn(e){return R(this,null,function*(){return(yield fetch(e)).blob()})}function we(e){let r=ye(e);if(!r)return null;let n=q(e);return new Blob([r],{type:n.mediaType})}function rn(e,r){$e(e,r)}function tn(e,r){Y(e,r)}function $e(e,r){let n=we(e);return!!n&&Y(n,r)}function Y(e,r){if(!e)return!1;let n=document.createElement("a");if(!("download"in n))return!1;let t=URL.createObjectURL(e);return n.download=r,n.href=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),!0}function c(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function z(e){return e!=null&&J.test(e)}function Ue(e){return e!=null&&N.test(e)||i.scheme==="https"&&c(e)}function be(e){return e!=null&&K.test(e)||i.scheme==="http"&&c(e)}function Oe(e){return e!=null&&oe.test(e)}function sn(e){return c(e)?`http:${e}`:e.replace(N,"http:")}function Z(e){return c(e)?`https:${e}`:e.replace(K,"https:")}function qe(){return i.scheme==="http"}function I(){return i.scheme==="https"}function C(e,r=!1){return c(e)?e.slice(2):(e=e.replace(J,""),r&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Ce(e){let r=e.indexOf("//"),n=e.indexOf("/",r+2);return n===-1?e:e.slice(0,n)}function on(e){let r=0;if(U(e)){let t=e.indexOf("//");t!==-1&&(r=t+2)}let n=e.lastIndexOf("/");return n<r?e:e.slice(0,n+1)}function an(e,r){if(!e)return"";let n=h(e).path.replace(/\/+$/,""),t=n.slice(n.lastIndexOf("/")+1);if(!r?.length)return t;let s=new RegExp(`\\.(${r.join("|")})$`,"i");return t.replace(s,"")}function Pe(e){return e.endsWith("/")?e:`${e}/`}function ln(e){return e.replace(/\/+$/,"")}function ve(e){if(/^https?:\/\//i.test(e)){let r=L(e);e=(e=r.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),r.query&&(e+=`?${r.query}`)}return e}function Ae(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Re(e){let r=d.httpsDomains;if(!be(e))return e;let n=e.indexOf("/",7),t;if(t=n===-1?e:e.slice(0,n),t=t.toLowerCase().slice(7),ae.test(t)){if(!t.endsWith(":80"))return e;t=t.slice(0,-3),e=e.replace(":80","")}return qe()&&t===i.authority&&!ie.test(e)||(I()&&t===i.authority||r&&r.some(s=>t===s||t.endsWith(`.${s}`))||I()&&!j(e))&&(e=Z(e)),e}function un(e,r,n){if(!(r&&n&&e&&U(e)))return e;let t=e.indexOf("//"),s=e.indexOf("/",t+2),o=e.indexOf(":",t+2),a=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(t+2,a).toLowerCase()!==r.toLowerCase()?e:`${e.slice(0,t+2)}${n}${e.slice(a)}`}function H(e){return typeof e=="string"?new p(k(e)):(e.scheme||(e.scheme=i.scheme),e)}function cn(e){return Se.test(e)}function fn(e,r){let n=h(e),t=Object.keys(n.query||{});return t.length>0&&r&&r.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${t.join(", ")}.`),n.path}function pn(e,r,n){let t=h(e),s=t.query||{};return s[r]=String(n),`${t.path}?${P(s)}`}function hn(e,r){if(!r)return e;let n=h(e),t=n.query||{};for(let[o,a]of Object.entries(r))a!=null&&(t[o]=a);let s=P(t);return s?`${n.path}?${s}`:n.path}function mn(e,r){let{path:n,query:t}=h(e);if(!t)return e;delete t[r];let s=P(t);return s?`${n}?${s}`:n}function dn(e){if(e==null)return null;let r=e.match(ee);return r?r[2]:null}function gn(e){if(e==null)return null;let r=e.match(ee);return r?{path:r[1],extension:r[2]}:{path:e,extension:null}}function yn(e){return R(this,null,function*(){return typeof e=="string"?q(e)??{data:e}:new Promise((r,n)=>{let t=new FileReader;t.readAsDataURL(e),t.onload=()=>r(q(t.result)),t.onerror=s=>n(s)})})}var ee=/([^.]*)\.([^/]*)$/,Se=/(^data:image\/svg|\.svg$)/i;export{re as a,x as b,Be as c,Te as d,Q as e,p as f,b as g,Qe as h,Fe as i,We as j,h as k,_ as l,P as m,fe as n,Je as o,Ke as p,j as q,Ne as r,Me as s,Ve as t,_e as u,T as v,Xe as w,k as x,Ye as y,O as z,he as A,me as B,U as C,de as D,ge as E,ye as F,Ze as G,q as H,en as I,nn as J,we as K,rn as L,tn as M,c as N,z as O,Ue as P,sn as Q,Z as R,I as S,on as T,an as U,Pe as V,ln as W,un as X,cn as Y,fn as Z,pn as _,hn as $,mn as aa,dn as ba,gn as ca,yn as da};
