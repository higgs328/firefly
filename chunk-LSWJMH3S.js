import{e as X,f as Y,j as q}from"./chunk-JIBAIND2.js";import{a as H,c as x}from"./chunk-SU2NZAJW.js";import{h as b,i as G}from"./chunk-QCN4VUQF.js";import{c as U}from"./chunk-2JW3DUYT.js";import{a as O,d as P,f as z}from"./chunk-67GIWMYL.js";import{a as L}from"./chunk-JANRGUJ7.js";import{b as h}from"./chunk-DMO5HQM3.js";import{E as y,n as V,s as R}from"./chunk-6B5XFA6F.js";import{a as v,b as M,j as D,m as g}from"./chunk-BOVYXYHK.js";import{r as f}from"./chunk-EQZWYK27.js";import{g as c}from"./chunk-Q6Y4JG7Q.js";import{ha as E,m as A}from"./chunk-NJWTSROP.js";import{a as w}from"./chunk-TG45K3WR.js";import{f as d}from"./chunk-RAI4DTMT.js";import{a as s}from"./chunk-QGVBCWUY.js";import{H as k}from"./chunk-MYO4NP2N.js";import{e as u}from"./chunk-NFIPKH6V.js";import{l as F}from"./chunk-5QEXLALV.js";import{a as I,d as T}from"./chunk-TG2UTNEO.js";import{f as m}from"./chunk-VTHXE323.js";function vt(t){let e=new q(t());return e.addHandles(w(()=>t(),({view:a,options:o,info:n})=>{e.view=a,o!==void 0&&(e.options=o),n!==void 0&&(e.info=n)})),e}function gt(t,e){let a=h(e.vertexSpace),{scale:o,orientation:n}=t,{transform:l}=e,i=C(l);a&&i!=null?(n.actual=P(i,"degrees","arithmetic"),n.visible=!0):(n.actual=null,n.visible=!1),a?(o.actual=O(N(l)),o.visible=!0):(o.actual=null,o.visible=!1)}function yt(t,e,a){if(!e||!h(e.vertexSpace))return;let o=e.transform??=new L;Z(t,o,a),_(t,o,a)}function Z(t,e,a){let o=G(t.orientation.actual),n=B(e.rotationAxis);if(o==null||n==null)return;let l=e.rotationAngle,i=o*n,r=(o-l)*n;l!==i&&(a?.onRotateStart(0),e.rotationAngle=i,a?.onRotate(r),a?.onRotateStop(r))}function _(t,e,a){let o=t.scale.actual?.value,n=N(e);if(o==null||o===n)return;let{scale:l}=e,i;if(n===0)i=M(D);else{let r=o/n;i=V(v(),l,r)}a?.onScaleStart(l[0],l[1],l[2]),e.scale=i,a?.onScale(i[0],i[1],i[2]),a?.onScaleStop(i[0],i[1],i[2])}function ht(t,e){let{x:a,y:o,z:n}=e,{x:l,y:i,z:r}=j(t,e.spatialReference);return{dx:l==null||f(l,a)?0:l-a,dy:i==null||f(i,o)?0:i-o,dz:r==null||n==null||f(r,n)?0:r-n}}function j(t,e){let a,o;t.geographic?(a=b(t.longitude.actual),o=b(t.latitude.actual),A(e)&&(a!=null&&o!=null?[a,o]=c(a,o,S):a!=null?a=c(a,0,S)[0]:o!=null&&(o=c(0,o,S)[1]))):(a=t.x.actual?.value,o=t.y.actual?.value);let n=t.elevation.actual,l=E(e);return{x:a,y:o,z:l!=null&&n!=null?z(n,l):void 0}}var S=[0,0];function C(t){if(!t)return 0;let e=B(t.rotationAxis);return e!=null?e*t.rotationAngle:null}function B(t){return y(t,g)?1:y(t,J)?-1:null}var J=R(v(),g);function N(t){return t?Math.max(...t.scale):1}function bt(t,e){return!(t.type!=="key-down"||t.key!==U.enterInputMode||!e||!K(e.info))&&(e.enterInputMode(),t.preventDefault(),t.stopPropagation(),!0)}function K(t){let e=t?.sketchOptions;if(!e)return!1;let{inputEnabled:a,visibleElements:o}=e.tooltips;return a&&t.editableFields.some(({name:n})=>n==="x"||n==="y"?o.coordinates:o[n])===!0}function xt(t,e){let a=null;return T([t.on("paste",o=>m(this,null,function*(){a?.abort(),a=d(()=>m(this,null,function*(){H()||(yield x()),W(o,t.info,e)}))})),d(()=>x()),I(()=>a?.abort())])}function W(t,e,a){if(!e||!("geographic"in e))return;let o=t.clipboardData?.getData("text");if(!o)return;let n=l=>{t.stopPropagation(),t.preventDefault(),a?.onBeforePaste(),l(),a?.onAfterPaste()};if(e.geographic){let l=Y(o);l&&n(()=>{e.longitude.applyValue(l.longitude),e.latitude.applyValue(l.latitude)})}else{let l=X(o);l&&n(()=>{e.x.applyValue(l.x),e.y.applyValue(l.y)})}}var p=class extends k{constructor(t){super(t),this.helpMessage=void 0,this.viewType=void 0}get visibleElements(){return this.sketchOptions.tooltips.visibleElements}get allFields(){return[]}get editableFields(){return this.allFields.filter(t=>t.visible&&!t.readOnly)}clearInputValues(){this.allFields.forEach(t=>t.clearInputValue())}};s([u()],p.prototype,"sketchOptions",void 0),s([u()],p.prototype,"visibleElements",null),s([u()],p.prototype,"helpMessage",void 0),s([u()],p.prototype,"viewType",void 0),s([u()],p.prototype,"allFields",null),s([u()],p.prototype,"editableFields",null),p=s([F("esri.views.interactive.tooltip.infos.SketchTooltipInfo")],p);export{vt as a,gt as b,yt as c,ht as d,bt as e,xt as f,W as g,p as h};
