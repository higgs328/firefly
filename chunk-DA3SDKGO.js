import{a as rn}from"./chunk-ZOEPYNM4.js";import{c as on,k as j}from"./chunk-57VFBGF3.js";import{a as Z}from"./chunk-BJH4F4SM.js";import{a as nn}from"./chunk-MDZTV2VL.js";import{h as en}from"./chunk-RNC4P66O.js";import{a as tn}from"./chunk-U4QEPZJ3.js";import{a as A}from"./chunk-BOVYXYHK.js";import{m as D}from"./chunk-ZQIC5NFT.js";import{c as $}from"./chunk-VIEK2X23.js";import{a as Q,b as U}from"./chunk-Q6Y4JG7Q.js";import{a as v}from"./chunk-7F5DJLJT.js";import{D as F,E as y,d as M,j as _,l as B,m as q,t as d}from"./chunk-NJWTSROP.js";import{a as K,c as H,m as J}from"./chunk-D3R25AF2.js";import{a as I}from"./chunk-TYYVNQUR.js";import{h as b}from"./chunk-LI2SX4T6.js";import{O,p as Y}from"./chunk-4PTIEWMT.js";import{b as X}from"./chunk-YOFFGXOB.js";import{f as C}from"./chunk-VTHXE323.js";function V(e,t,n,o,r,i){return G[0]=e,G[1]=t,G[2]=n,j(G,o,0,r,i,0)}var G=A();var h=null,g=null,z=null,W={},N=new I;function T(){return!!h&&K()}function mn(){return!!T()||(b(N),E(),!1)}function Vn(e,t){return!e||!t||w(e,t)||mn()}function kn(e,t){return!w(e,t)&&!T()}function E(e){return z==null&&(z=Promise.all([H(),import("./chunk-4MGGY7GO.js").then(t=>t.g),import("./chunk-CTCUJ2QS.js")])),z.then(([,t,{hydratedAdapter:n}])=>{Y(e),g=n,h=t.default,h._enableProjection(J),N.notify()})}function hn(e,t,n=null,o=null){return Array.isArray(e)?e.length===0?[]:(U(e),an(g,e,e[0].spatialReference,t,n,o)):(Q(e),an(g,[e],e.spatialReference,t,n,o)[0])}function an(e,t,n,o,r=null,i=null){if(n==null||o==null)return t;if(w(n,o,r))return t.map(a=>k(a,n,o));if(r==null&&F(n))return t.map(a=>k(a,n,v.WGS84)).map(a=>L(a,o));if(r==null&&F(o))return t.map(a=>L(a,v.WGS84)).map(a=>k(a,v.WGS84,o));if(r==null){let a=Z.cacheKey(n,o);W[a]!==void 0?r=W[a]:((r=gn(n,o,void 0))==null&&(r=new Z),W[a]=r)}if(h==null||e==null)throw new x;return i!=null?h._project(e,t,n,o,r,i):h._project(e,t,n,o,r)}function Nn(e,t){let n=dn([e],t);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function dn(e,t){if(!T()){for(let n of e)if(n!=null&&!M(n.spatialReference,t)&&d(n.spatialReference)&&d(t)&&!w(n.spatialReference,t))return b(N),{pending:E(),geometries:null}}return{pending:null,geometries:e.map(n=>n==null?null:M(n.spatialReference,t)?n:d(n.spatialReference)&&d(t)?L(n,t):null)}}function gn(e,t,n=null){if(e==null||t==null)return null;if(h==null||g==null)throw new x;let o=h._getTransformation(g,e,t,n,n?.spatialReference);return o!==null?Z.fromGE(o):null}function Xn(e,t,n=null){if(h==null||g==null)throw new x;let o=h._getTransformationBySuitability(g,e,t,n,n?.spatialReference);if(o!==null){let r=[];for(let i of o)r.push(Z.fromGE(i));return r}return[]}var x=class extends X{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Yn(){h=null,g=null,z=null,W={}}var In={get loadPromise(){return z}};function L(e,t){try{let n=hn(e,t);if(n==null)return null;"xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax);let o=rn(n.type,e.spatialReference,t);return o?.(n),n}catch(n){if(!(n instanceof x))throw n;return null}}function Kn(e,t,n){return C(this,null,function*(){let o=e.spatialReference;return o!=null&&t!=null&&(yield yn(o,t,null,n)),L(e,t)})}function w(e,t,n){return!n&&(!!M(e,t)||d(e)&&d(t)&&!!on(e,t))}function Hn(e,t){if(M(e,t))return!0;if(!d(e)||!d(t))return!1;let n=_(e)||q(e)||B(e),o=_(t)||q(t)||B(t);return n&&o}function yn(e,t,n,o){return C(this,null,function*(){if(T())return O(o);if(Array.isArray(e)){for(let{source:r,dest:i,geographicTransformation:a}of e)if(r&&i&&!w(r,i,a))return E(o)}else if(e&&t&&!w(e,t,n))return E(o);return O(o)})}function k(e,t,n){return e?"x"in e?sn(e,t,new $,n,0):"xmin"in e?fn(e,t,new D,n,0):"rings"in e?cn(e,t,new en,n,0):"paths"in e?un(e,t,new tn,n,0):"points"in e?ln(e,t,new nn,n,0):null:null}function Jn(e,t,n=t.spatialReference,o=0){return n!=null&&e.spatialReference!=null&&sn(e,e.spatialReference,t,n,o)!=null}function sn(e,t,n,o,r){u[0]=e.x,u[1]=e.y;let i=e.z;return u[2]=i!==void 0?i:r,j(u,t,0,u,o,0)?(n.x=u[0],n.y=u[1],n.spatialReference=o,i!==void 0||y(o)?(n.z=u[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),e.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function Qn(e,t,n=t.spatialReference,o=0){return e.spatialReference!=null&&n!=null&&ln(e,e.spatialReference,t,n,o)!=null}function ln(e,t,n,o,r){let{points:i,hasZ:a,hasM:l}=e,s=[],p=i.length,m=[];for(let c of i)m.push(c[0],c[1],a?c[2]:r);if(!j(m,t,0,m,o,0,p))return null;let f=a||y(o);for(let c=0;c<p;++c){let R=3*c,P=m[R],S=m[R+1];f&&l?s.push([P,S,m[R+2],i[c][3]]):f?s.push([P,S,m[R+2]]):l?s.push([P,S,i[c][2]]):s.push([P,S])}return n.points=s,n.spatialReference=o,n.hasZ=a,n.hasM=l,n}function Un(e,t,n=t.spatialReference,o=0){return e.spatialReference!=null&&n!=null&&un(e,e.spatialReference,t,n,o)!=null}function un(e,t,n,o,r){let{paths:i,hasZ:a,hasM:l}=e,s=[];if(!pn(i,a??!1,l??!1,t,s,o,r))return null;let p=a||y(o);return n.paths=s,n.spatialReference=o,n.hasZ=p,n.hasM=l,n}function $n(e,t,n=t.spatialReference,o=0){return e.spatialReference!=null&&n!=null&&cn(e,e.spatialReference,t,n,o)!=null}function cn(e,t,n,o,r){let{rings:i,hasZ:a,hasM:l}=e,s=[];if(!pn(i,a??!1,l??!1,t,s,o,r))return null;let p=a||y(o);return n.rings=s,n.spatialReference=o,n.hasZ=p,n.hasM=l,n}function Dn(e,t,n=t.spatialReference,o=0){return e.spatialReference!=null&&n!=null&&fn(e,e.spatialReference,t,n,o)!=null}function fn(e,t,n,o,r){let{xmin:i,ymin:a,xmax:l,ymax:s,hasZ:p,hasM:m}=e,f=p?e.zmin:r;if(!V(i,a,f,t,u,o))return null;let c=p||y(o);n.xmin=u[0],n.ymin=u[1],c&&(n.zmin=u[2]);let R=p?e.zmax:r;return V(l,s,R,t,u,o)?(n.xmax=u[0],n.ymax=u[1],c&&(n.zmax=u[2]),m&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=o,n):null}function pn(e,t,n,o,r,i,a=0){let l=new Array;for(let m of e)for(let f of m)l.push(f[0],f[1],t?f[2]:a);if(!j(l,o,0,l,i,0))return!1;let s=0;r.length=0;let p=t||y(i);for(let m of e){let f=new Array;for(let c of m)p&&n?f.push([l[s++],l[s++],l[s++],c[3]]):p?f.push([l[s++],l[s++],l[s++]]):n?(f.push([l[s++],l[s++],c[2]]),s++):(f.push([l[s++],l[s++]]),s++);r.push(f)}return!0}var u=A();export{V as a,T as b,mn as c,Vn as d,kn as e,E as f,hn as g,an as h,Nn as i,dn as j,gn as k,Xn as l,Yn as m,In as n,L as o,Kn as p,w as q,Hn as r,yn as s,k as t,Jn as u,Qn as v,Un as w,$n as x,Dn as y};
