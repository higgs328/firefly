import{b as g}from"./chunk-H5XONHBB.js";import{a as d,j as m}from"./chunk-TG45K3WR.js";import{b as y}from"./chunk-ACP3S2CH.js";import{a as r}from"./chunk-QGVBCWUY.js";import{H as C}from"./chunk-MYO4NP2N.js";import{e as s}from"./chunk-NFIPKH6V.js";import{l as L}from"./chunk-5QEXLALV.js";import{a as c,b as h,f as w}from"./chunk-VTHXE323.js";function f(i,t){let o=10**t;return Math.round(i*o)/o}var _={left:0,right:0,top:0,bottom:0},e=class extends C{constructor(i){super(i),this._leadingClips=new Map,this._trailingClips=new Map,this.direction="horizontal",this.leadingLayers=new y,this.max=100,this.min=0,this.precision=4,this.step=.5,this.stepMultiplier=10,this.trailingLayers=new y,this.view=null}initialize(){this.addHandles([d(()=>[this.view,this.view?.ready,this.position,this.direction],()=>this._clipLayers(),m),d(()=>this.leadingLayers.toArray(),()=>this._clipLeadingLayers(),m),d(()=>this.trailingLayers.toArray(),()=>this._clipTrailingLayers(),m)])}destroy(){this._removeExistingClips()}get position(){return 25}set position(i){let{precision:t,min:o,max:l}=this;this._set("position",f(Math.max(Math.min(i,l),o),t))}get state(){return this.view?.ready?"ready":"disabled"}_clipLayers(){this._clipLeadingLayers(),this._clipTrailingLayers()}_clipLeadingLayers(){this._removeClips("leading");let{leadingLayers:i}=this;i.forEach(t=>this._clipLayer({layer:t,type:"leading"}))}_clipTrailingLayers(){this._removeClips("trailing");let{trailingLayers:i}=this;i.forEach(t=>this._clipLayer({layer:t,type:"trailing"}))}_getLayerView(i){return w(this,null,function*(){let{view:t}=this;if(!i||!t)return null;let o=yield t.whenLayerView(i);return"clips"in o?o:null})}_getVerticalClipRect(i){let{position:t}=this;return i==="leading"?new g(h(c({},_),{bottom:100-t+"%"})):i==="trailing"?new g(h(c({},_),{top:`${t}%`})):null}_getHorizontalClipRect(i){let{position:t}=this;return i==="leading"?new g(h(c({},_),{right:100-t+"%"})):i==="trailing"?new g(h(c({},_),{left:`${t}%`})):null}_getClipRect(i){let{direction:t}=this;return t==="vertical"?this._getVerticalClipRect(i):t==="horizontal"?this._getHorizontalClipRect(i):null}_clipLayer(i){return w(this,null,function*(){let{_leadingClips:t,_trailingClips:o}=this,{layer:l,type:p}=i,n=p==="trailing"?o:p==="leading"?t:null,a=yield this._getLayerView(l);if(!(a&&"clips"in a&&n&&a.hasOwnProperty("clips")))return;let v=n.get(a);v&&a.clips.remove(v);let u=this._getClipRect(p);u&&(n.set(a,u),a.clips.add(u))})}_removeClips(i){let{_leadingClips:t,_trailingClips:o}=this,l=i==="trailing"?o:i==="leading"?t:null;l&&(l.forEach((p,n)=>{n&&n.hasOwnProperty("clips")&&n.clips.remove(p)}),l.clear())}_removeExistingClips(){this._removeClips("leading"),this._removeClips("trailing")}};r([s()],e.prototype,"direction",void 0),r([s({type:y,nonNullable:!0})],e.prototype,"leadingLayers",void 0),r([s({readOnly:!0})],e.prototype,"max",void 0),r([s({readOnly:!0})],e.prototype,"min",void 0),r([s()],e.prototype,"position",null),r([s()],e.prototype,"precision",void 0),r([s({readOnly:!0})],e.prototype,"state",null),r([s()],e.prototype,"step",void 0),r([s()],e.prototype,"stepMultiplier",void 0),r([s({type:y,nonNullable:!0})],e.prototype,"trailingLayers",void 0),r([s()],e.prototype,"view",void 0),e=r([L("esri.widgets.Swipe.SwipeViewModel")],e);var A=e;export{A as a};
