import{a as ee}from"./chunk-5OBPPS5Q.js";import{a as Le}from"./chunk-GHO4IAJA.js";import{a as ve}from"./chunk-VY3DECDW.js";import{a as ne,b as te,c as Q,d as Ze,e as O,f as $,g as $e,h as ke,i as Ue,j as Re,l as je,m as J,n as Me,o as Oe,r as ze,s as fe}from"./chunk-VKT623SV.js";import{r as de,v as Pe}from"./chunk-YOYF36NA.js";import"./chunk-V4OU5ZYM.js";import{b as Se}from"./chunk-QR5K5DGD.js";import"./chunk-PEUXUNDP.js";import{a as P}from"./chunk-N7H6JYYU.js";import"./chunk-ZCXB2W4M.js";import{A as M,B as oe,C as X,D as Ee,F as x,N as E,Q as V,R as Ne,S as G,ca as Ae,m as q,n as xe,na as se,q as L,t as B,v,y as re}from"./chunk-GF36OIHY.js";import{c as Y,q as ae}from"./chunk-EJ2UYJJS.js";import{a as De}from"./chunk-OCNYIIP3.js";import{a as He}from"./chunk-JEQO724Q.js";import"./chunk-C5ZWNRXP.js";import"./chunk-RCWIX6EL.js";import{a as Ve}from"./chunk-DAIPJVZF.js";import"./chunk-6HT3BT3B.js";import{a as We}from"./chunk-CVKHXVTW.js";import{a as le}from"./chunk-2WYOVBUR.js";import"./chunk-GPQCYR3E.js";import"./chunk-WDTJILD4.js";import"./chunk-P7HHUOEW.js";import"./chunk-Z6CDEQPZ.js";import"./chunk-DKNG2DCF.js";import"./chunk-RZU6EEB3.js";import"./chunk-NIRJWS2D.js";import"./chunk-H3ZWZZ2B.js";import"./chunk-VRIRKZGO.js";import"./chunk-U7BD7DJH.js";import"./chunk-LBB4AU7W.js";import"./chunk-E3OE5HRA.js";import"./chunk-TSG4MDJV.js";import"./chunk-HCW4M77K.js";import"./chunk-H4IF7PQO.js";import"./chunk-QKVTMI24.js";import"./chunk-GGYZRKBV.js";import"./chunk-I76R3PW5.js";import"./chunk-4KM76TSJ.js";import"./chunk-6RE36L2Q.js";import"./chunk-37PSR6DC.js";import"./chunk-LC44KLTN.js";import"./chunk-A66JV4A6.js";import"./chunk-JBFXTI45.js";import"./chunk-GNPXNHTO.js";import"./chunk-7P56QMT7.js";import"./chunk-P4JHTV62.js";import"./chunk-H25DKJGS.js";import"./chunk-QTO4E4UZ.js";import"./chunk-SO3JGF64.js";import"./chunk-TIWKONVC.js";import"./chunk-PRJOIHPH.js";import"./chunk-6DALCDDU.js";import"./chunk-RK6C6D6K.js";import"./chunk-CHCKIOZR.js";import"./chunk-TUF2Y2FX.js";import"./chunk-4QHB56M5.js";import"./chunk-KN5AJ2NM.js";import"./chunk-5A7AFZJT.js";import"./chunk-Z5EURZKA.js";import"./chunk-OVX6BGGA.js";import"./chunk-PBAMEKFE.js";import"./chunk-XIZ7IH6M.js";import"./chunk-JD66UCS7.js";import"./chunk-FU7RO3AR.js";import"./chunk-4YRY3D3A.js";import"./chunk-ZZ5UYT7M.js";import"./chunk-U4XVPHQU.js";import"./chunk-KLZGQ7M6.js";import"./chunk-N36GL6VL.js";import"./chunk-UX3QUEDM.js";import"./chunk-YZJDOXQC.js";import"./chunk-6ZY36ZHO.js";import"./chunk-6RHGQ4Z5.js";import"./chunk-G23ELQMS.js";import"./chunk-PZOK2JKH.js";import"./chunk-FJUYECJ6.js";import"./chunk-2SJBRRT6.js";import"./chunk-2SXWYVJN.js";import"./chunk-ELUASJOG.js";import"./chunk-KQZGMGWR.js";import"./chunk-66BPZDMW.js";import"./chunk-GAVFKWSK.js";import"./chunk-DK4DGLAO.js";import"./chunk-7Y6S2GNA.js";import"./chunk-VOB6IBIW.js";import"./chunk-63B3IOWG.js";import"./chunk-PE276TWH.js";import"./chunk-BMZ3PE5Y.js";import"./chunk-EHG7JRYJ.js";import"./chunk-FNY6LFKI.js";import"./chunk-IBVI7JQ7.js";import"./chunk-2DFFQEIV.js";import"./chunk-4JY7PCV4.js";import"./chunk-BBB7KLHV.js";import"./chunk-JPC2A6ML.js";import"./chunk-OGFDJ67M.js";import"./chunk-5K6CB5PS.js";import"./chunk-J2AEVBSH.js";import"./chunk-5ODXFRPI.js";import"./chunk-E5QCV5LT.js";import"./chunk-QS3EYJPF.js";import"./chunk-HJJZ2AXH.js";import"./chunk-TPNSUEHH.js";import"./chunk-SMVNQSZ4.js";import"./chunk-Z2QGLRDB.js";import"./chunk-7IDFDPA3.js";import"./chunk-VL2YL74P.js";import"./chunk-P2AJD2R2.js";import"./chunk-UMJIJLDA.js";import"./chunk-E5NFS3KN.js";import"./chunk-HQHD6BMN.js";import"./chunk-AIKKGGPG.js";import"./chunk-RDGG4TVD.js";import"./chunk-3IQFPOUU.js";import"./chunk-I4CY6X6S.js";import"./chunk-VQ4QGNRX.js";import"./chunk-LLWQ5E4P.js";import"./chunk-GNEAU6X4.js";import"./chunk-5RH7OPHX.js";import"./chunk-JFB3F3BC.js";import"./chunk-J4JQLN5L.js";import"./chunk-4KXJ537H.js";import"./chunk-JIRULGDT.js";import"./chunk-QJGOWIJD.js";import"./chunk-QML26MQC.js";import"./chunk-RNZY2XUD.js";import"./chunk-JXPUHKCT.js";import"./chunk-XR5FT7TQ.js";import"./chunk-4YTM754S.js";import{a as Ce}from"./chunk-LAX5536Z.js";import"./chunk-N3HRYLNW.js";import"./chunk-4DBMALZW.js";import"./chunk-CVWWHM2V.js";import"./chunk-6OQYVEQJ.js";import"./chunk-XNHRPKJK.js";import"./chunk-YOXOWGT6.js";import"./chunk-EFZOSMYP.js";import"./chunk-WI7F4ZKJ.js";import"./chunk-MJ7M24NH.js";import"./chunk-GJH4QFRX.js";import"./chunk-T63F7663.js";import"./chunk-O4V2VBSK.js";import"./chunk-5TKRKB5E.js";import"./chunk-XAGMDNNR.js";import"./chunk-OP2TLIUN.js";import"./chunk-T2THIR6K.js";import"./chunk-LORHDXEB.js";import"./chunk-BBBPJI4H.js";import"./chunk-45BTW5EG.js";import"./chunk-TPFBHGDM.js";import"./chunk-73NLRHJD.js";import"./chunk-PNFEUBDF.js";import"./chunk-6RCCEJDL.js";import"./chunk-PQ2TNDUX.js";import"./chunk-6X6MKRQ3.js";import"./chunk-FQFHMHYU.js";import"./chunk-SZMEI3WL.js";import"./chunk-KKVGD67U.js";import"./chunk-MYOJWRDU.js";import"./chunk-L7UKJKHG.js";import"./chunk-V2IENAEU.js";import"./chunk-QAGQFNF2.js";import"./chunk-SY7JS2VW.js";import"./chunk-WK57SDN6.js";import"./chunk-AG4V3ZUO.js";import"./chunk-YWLMJ26A.js";import"./chunk-QAWNU3UJ.js";import"./chunk-HRQT4R6X.js";import"./chunk-44BHLWQ4.js";import"./chunk-5BPM64SU.js";import"./chunk-7PAP5DT2.js";import"./chunk-OY5GEC5R.js";import"./chunk-CZAUQJCN.js";import"./chunk-5GYPON2V.js";import"./chunk-TC4RVDI6.js";import"./chunk-WDY6ALC6.js";import"./chunk-KGFXFSTP.js";import"./chunk-PMVHHMQJ.js";import"./chunk-NAFOM5UA.js";import"./chunk-B526OXED.js";import"./chunk-XPTKDFYS.js";import"./chunk-ZYTQ7T5Q.js";import"./chunk-MZC42HHY.js";import"./chunk-DREO3ZIC.js";import"./chunk-L7OBQ2MX.js";import"./chunk-2SEACSJ7.js";import"./chunk-FTMCRRWI.js";import"./chunk-L54EYG5G.js";import"./chunk-DH7A4UPK.js";import"./chunk-JLE3XOUQ.js";import"./chunk-ERHGRSXY.js";import"./chunk-AMEUMZLJ.js";import"./chunk-VU2QHSDR.js";import"./chunk-QHZWU2K5.js";import"./chunk-JMNB6CKE.js";import"./chunk-L3RS33Q4.js";import"./chunk-ZUPR4L6O.js";import"./chunk-DO7UF2F2.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-MROWXKZJ.js";import"./chunk-4TAYW5IF.js";import"./chunk-AR2JEA37.js";import"./chunk-IPLEDIX4.js";import"./chunk-RB3POJ2P.js";import"./chunk-HV62ZNCD.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import"./chunk-K57Z4J34.js";import"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-2GF6YDKP.js";import"./chunk-TC77DYTW.js";import"./chunk-F2BQ2GD6.js";import"./chunk-R3XLNYYB.js";import"./chunk-2HYVVLKS.js";import"./chunk-XRTA5GHC.js";import"./chunk-Y6XW36QP.js";import"./chunk-ZXKU6WBY.js";import"./chunk-BMYVPMAK.js";import"./chunk-6F25LG6O.js";import"./chunk-SC4TZEOX.js";import"./chunk-6KRFVLII.js";import"./chunk-25WBXAEY.js";import"./chunk-7QY3BMVN.js";import"./chunk-Y7GY5YIF.js";import"./chunk-LMGYHZE3.js";import"./chunk-5LG2P6MT.js";import"./chunk-GJ2QRXGN.js";import"./chunk-TJ6P6NLD.js";import"./chunk-6RBQSBA2.js";import"./chunk-CSNRCIB5.js";import"./chunk-3JGYBNJA.js";import"./chunk-DA3SDKGO.js";import"./chunk-ZOEPYNM4.js";import"./chunk-57VFBGF3.js";import"./chunk-GWBRHLNH.js";import"./chunk-BJH4F4SM.js";import"./chunk-Z3RBZHAK.js";import"./chunk-73K3NWCV.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-ZC6EBRE4.js";import"./chunk-ZAZJB7CV.js";import"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import{a as p,b as y}from"./chunk-OUBCFKOM.js";import{a as Z}from"./chunk-E7AX56GD.js";import"./chunk-IDVLLREH.js";import"./chunk-DWLSVYOY.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-D3CUKSGS.js";import"./chunk-2TX472ZB.js";import"./chunk-7QNKS2X6.js";import"./chunk-VCCMJ6BV.js";import"./chunk-QK56OQGR.js";import"./chunk-FXCL7YYQ.js";import"./chunk-QKO56XO6.js";import"./chunk-JRGT3GTH.js";import"./chunk-K75TK42V.js";import"./chunk-CELWVZPW.js";import"./chunk-VV5G7VY5.js";import"./chunk-OLOKUDVI.js";import"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-KVM6SHDX.js";import"./chunk-POX73EYJ.js";import"./chunk-NKUXRYJG.js";import{e as T}from"./chunk-33RXTDEX.js";import"./chunk-P33JWG3G.js";import{b as Te,d as k,f as A}from"./chunk-HX2VGIR2.js";import{d as be}from"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-2GJBUR2F.js";import{a as ce}from"./chunk-DKGGDYJI.js";import"./chunk-5LA3PVK5.js";import"./chunk-IR6XCBC4.js";import"./chunk-C6JPAW54.js";import"./chunk-WD3OPXCN.js";import"./chunk-FA3WGIU4.js";import"./chunk-WWVPA6PE.js";import"./chunk-YPMM52MU.js";import"./chunk-BBR7CJCO.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-O3EGNJTY.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-WTB3O6DJ.js";import"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import{I as Fe}from"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{a as he,f as S}from"./chunk-VTHXE323.js";function Be(a){if(a.length===1){if(A(a[0]))return ee("distinct",a[0],-1);if(M(a[0]))return ee("distinct",a[0].toArray(),-1)}return ee("distinct",a,-1)}function ue(a,n,i){let g=a.getVariables();if(g.length>0){let I={};for(let e of g)I[e]=n.evaluateIdentifier(i,{name:e});a.parameters=I}return a}function u(a,n,i=null){for(let g in a)if(g.toLowerCase()===n.toLowerCase())return a[g];return i}function Ge(a){if(a===null)return null;let n={type:u(a,"type",""),name:u(a,"name","")};if(n.type==="range")n.range=u(a,"range",[]);else{n.codedValues=[];for(let i of u(a,"codedValues",[]))n.codedValues.push({name:u(i,"name",""),code:u(i,"code",null)})}return n}function me(a){if(a===null)return null;let n={},i=u(a,"wkt");i!==null&&(n.wkt=i);let g=u(a,"wkid");return g!==null&&(n.wkid=g),n}function _e(a){if(a===null)return null;let n={hasZ:u(a,"hasz",!1),hasM:u(a,"hasm",!1)},i=u(a,"spatialreference");i!=null&&(n.spatialReference=me(i));let g=u(a,"x",null);if(g!==null)return n.x=g,n.y=u(a,"y",null),n.hasZ&&(n.z=u(a,"z",null)),n.hasM&&(n.m=u(a,"m",null)),n;let I=u(a,"rings",null);if(I!==null)return n.rings=I,n;let e=u(a,"paths",null);if(e!==null)return n.paths=e,n;let t=u(a,"points",null);if(t!==null)return n.points=t,n;for(let o of["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]){let l=u(a,o,null);l!==null&&(n[o]=l)}return n}function Qe(a,n){for(let i of n)if(i===a)return!0;return!1}function Je(a){return!!a.layerDefinition&&!!a.featureSet&&Qe(a.layerDefinition.geometryType,["",null,"esriGeometryNull","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])!==!1&&A(a.layerDefinition.fields)!==!1&&A(a.featureSet.features)!==!1}function _(a){return a?.toLowerCase()==="utc"?"UTC":a?.toLowerCase()==="unknown"?"Unknown":a}function Ye(a,n,i,g,I,e,t){return S(this,null,function*(){let o=yield a.getFeatureSetInfo();if((o?.layerId??null)===null||!I.layerIdLookup.get(o.layerId))return null;let l=a.serviceUrl().replace(/\/FeatureServer/i,"/UtilityNetworkServer"),m=[];switch(i){case"connected":m.push("connectivity"),m.push("junction-edge-from-connectivity"),m.push("junction-edge-to-connectivity"),m.push("junction-edge-midspan-connectivity"),m.push("junction-junction-connectivity");break;case"container":case"content":m.push("containment");break;case"structure":case"attached":m.push("attachment");break;case"junctionedge":m.push("junction-edge-from-connectivity"),m.push("junction-edge-to-connectivity");break;case"midspan":m.push("junction-edge-midspan-connectivity");break;default:throw new y(e,p.InvalidParameter,t)}let f=null,s=!1;if(g!==null&&g!==""&&g!==void 0){for(let c of I.terminals)c.terminalName===g&&(f=c.terminalId);f===null&&(s=!0)}let r=[];if(!s){let c=new We(he({globalId:n.field(a.globalIdField),networkSourceId:I.layerIdLookup.get(o.layerId).sourceId},f?{terminalId:f}:"")),N=yield He(l,new Ve({types:m,elements:[c]})),D=0;for(let w of N.associations){let b=null,z="",U="";if(w.fromNetworkElement?.globalId===c.globalId?(b=w.toNetworkElement,U="to"):w.toNetworkElement?.globalId===c.globalId&&(b=w.fromNetworkElement,U="from"),!b)continue;switch(i){case"attached":if(w.associationType!=="attachment"||U!=="to")continue;break;case"structure":if(w.associationType!=="attachment"||U!=="from")continue;break;case"container":if(w.associationType!=="containment"||U!=="from")continue;break;case"content":if(w.associationType!=="containment"||U!=="to")continue;break;case"connected":break;case"junctionedge":w.associationType==="junction-edge-to-connectivity"?z="to":w.associationType==="junction-edge-from-connectivity"&&(z="from");break;case"midspan":if(w.associationType!=="junction-edge-midspan-connectivity")continue}let W=I.sourceIdLookup.get(b.networkSourceId)?.className??"";r.push(new Ce({geometry:null,attributes:{objectId:D++,globalId:b.globalId,percentAlong:w.percentAlong??0,isContentVisible:w.isContentVisible?0:1,className:W,side:z}}))}}let d=new le({source:r,geometryType:null,objectIdField:"objectId",globalIdField:"globalId",fields:[new Z({name:"objectId",alias:"objectId",type:"oid"}),new Z({name:"globalId",alias:"globalId",type:"global-id"}),new Z({name:"percentAlong",alias:"percentAlong",type:"double"}),new Z({name:"side",alias:"side",type:"string"}),new Z({name:"isContentVisible",alias:"isContentVisible",type:"integer"}),new Z({name:"className",alias:"className",type:"string"})]});return J(d)})}function vn(a){a.mode==="async"&&(a.functions.timezone=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(x(e,1,2,n,i),Ee(e[0])||X(e[0]))return"Unknown";if(v(e[0])){if(yield e[0].load(),e.length===1||e[1]===null)return e[0].datesInUnknownTimezone?_("unknown"):_(e[0].dateFieldsTimeZone);if(!(e[1]instanceof P)||e[1].hasField("type")===!1)throw new y(n,p.InvalidParameter,i);let l=e[1].field("type");if(k(l)===!1)throw new y(n,p.InvalidParameter,i);switch(E(l).toLowerCase()){case"preferredtimezone":return _(e[0].preferredTimeZone);case"editfieldsinfo":return _(e[0].editFieldsInfo?.timeZone??null);case"timeinfo":return _(e[0].timeInfo?.timeZone??null);case"field":if(e[1].hasField("fieldname")&&k(e[1].field("fieldname")))return _(e[0].fieldTimeZone(E(e[1].field("fieldname"))))}throw new y(n,p.InvalidParameter,i)}let t=Ne(e[0],se(n));if(t===null)return null;let o=t.timeZone;return o==="system"?be.systemTimeZoneCanonicalName:o.toLowerCase()==="utc"?"UTC":o.toLowerCase()==="unknown"?"Unknown":o}))},a.functions.sqltimestamp=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){x(e,1,3,n,i);let t=e[0];if(oe(t)){if(e.length===1)return t.toSQLWithKeyword();if(e.length===2)return t.changeTimeZone(E(e[1])).toSQLWithKeyword();throw new y(n,p.InvalidParameter,i)}if(X(t))return t.toSQLWithKeyword();if(v(t)){if(e.length!==3)throw new y(n,p.InvalidParameter,i);yield t.load();let o=E(e[1]);if(X(e[2]))return e[2].toSQLWithKeyword();if(oe(e[2])===!1)throw new y(n,p.InvalidParameter,i);let l=t.fieldTimeZone(o);return l==null?e[2].toSQLWithKeyword():e[2].changeTimeZone(l).toSQLWithKeyword()}throw new y(n,p.InvalidParameter,i)}))},a.signatures.push({name:"sqltimestamp",min:2,max:4}),a.functions.featuresetbyid=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>{if(x(e,2,4,n,i),re(e[0])){let t=E(e[1]),o=L(e[2],null),l=G(L(e[3],!0));if(o===null&&(o=["*"]),A(o)===!1)throw new y(n,p.InvalidParameter,i);return e[0].featureSetById(t,l,o)}throw new y(n,p.InvalidParameter,i)})},a.signatures.push({name:"featuresetbyid",min:2,max:4}),a.functions.getfeatureset=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(x(e,1,2,n,i),B(e[0])){let t=L(e[1],"datasource");return t===null&&(t="datasource"),t=E(t).toLowerCase(),ze(e[0].fullSchema(),t,n.lrucache,n.interceptor,n.spatialReference??null)}throw new y(n,p.InvalidParameter,i)}))},a.signatures.push({name:"getfeatureset",min:1,max:2}),a.functions.featuresetbyportalitem=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>{if(x(e,2,5,n,i),e[0]===null)throw new y(n,p.PortalRequired,i);if(e[0]instanceof ve){let f=E(e[1]),s=E(e[2]),r=L(e[3],null),d=G(L(e[4],!0));if(r===null&&(r=["*"]),A(r)===!1)throw new y(n,p.InvalidParameter,i);let c;return c=n.services?.portal?n.services.portal:ce.getDefault(),c=Le(e[0],c),fe(f,s,n.spatialReference??null,r,d,c,n.lrucache,n.interceptor)}if(k(e[0])===!1)throw new y(n,p.PortalRequired,i);let t=E(e[0]),o=E(e[1]),l=L(e[2],null),m=G(L(e[3],!0));if(l===null&&(l=["*"]),A(l)===!1)throw new y(n,p.InvalidParameter,i);return fe(t,o,n.spatialReference??null,l,m,n.services?.portal??ce.getDefault(),n.lrucache,n.interceptor)})},a.signatures.push({name:"featuresetbyportalitem",min:2,max:5}),a.functions.featuresetbyname=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>{if(x(e,2,4,n,i),re(e[0])){let t=E(e[1]),o=L(e[2],null),l=G(L(e[3],!0));if(o===null&&(o=["*"]),A(o)===!1)throw new y(n,p.InvalidParameter,i);return e[0].featureSetByName(t,l,o)}throw new y(n,p.InvalidParameter,i)})},a.signatures.push({name:"featuresetbyname",min:2,max:4}),a.functions.featureset=function(n,i){return a.standardFunction(n,i,(g,I,e)=>{x(e,1,1,n,i);let t={layerDefinition:{geometryType:"",objectIdField:"",globalIdField:"",typeIdField:"",hasM:!1,hasZ:!1,fields:[]},featureSet:{geometryType:"",features:[]}};if(k(e[0])){let o=JSON.parse(e[0]);o.layerDefinition!==void 0?(t.layerDefinition=o.layerDefinition,t.featureSet=o.featureSet,o.layerDefinition.spatialReference&&(t.layerDefinition.spatialReference=o.layerDefinition.spatialReference)):(t.featureSet.features=o.features,t.featureSet.geometryType=o.geometryType,t.layerDefinition.geometryType=t.featureSet.geometryType,t.layerDefinition.objectIdField=o.objectIdFieldName??"",t.layerDefinition.typeIdField=o.typeIdFieldName,t.layerDefinition.globalIdField=o.globalIdFieldName,t.layerDefinition.fields=o.fields,o.spatialReference&&(t.layerDefinition.spatialReference=o.spatialReference))}else{if(!(e[0]instanceof P))throw new y(n,p.InvalidParameter,i);{let o=JSON.parse(e[0].castToText(!0)),l=u(o,"layerdefinition");if(l!==null){t.layerDefinition.geometryType=u(l,"geometrytype",""),t.featureSet.geometryType=t.layerDefinition.geometryType,t.layerDefinition.globalIdField=u(l,"globalidfield",""),t.layerDefinition.objectIdField=u(l,"objectidfield",""),t.layerDefinition.typeIdField=u(l,"typeidfield",""),t.layerDefinition.hasZ=u(l,"hasz",!1)===!0,t.layerDefinition.hasM=u(l,"hasm",!1)===!0;let m=u(l,"spatialreference");m&&(t.layerDefinition.spatialReference=me(m));let f=[];for(let r of u(l,"fields",[])){let d={name:u(r,"name",""),alias:u(r,"alias",""),type:u(r,"type",""),nullable:u(r,"nullable",!0),editable:u(r,"editable",!0),length:u(r,"length",null),domain:Ge(u(r,"domain"))};f.push(d)}t.layerDefinition.fields=f;let s=u(o,"featureset");if(s){let r={};for(let d of f)r[d.name.toLowerCase()]=d.name;for(let d of u(s,"features",[])){let c={},N=u(d,"attributes",{});for(let D in N)c[r[D.toLowerCase()]]=N[D];t.featureSet.features.push({attributes:c,geometry:_e(u(d,"geometry"))})}}}else{t.layerDefinition.hasZ=u(o,"hasz",!1)===!0,t.layerDefinition.hasM=u(o,"hasm",!1)===!0,t.layerDefinition.geometryType=u(o,"geometrytype",""),t.featureSet.geometryType=t.layerDefinition.geometryType,t.layerDefinition.objectIdField=u(o,"objectidfieldname",""),t.layerDefinition.typeIdField=u(o,"typeidfieldname","");let m=u(o,"spatialreference");m&&(t.layerDefinition.spatialReference=me(m));let f=[],s=u(o,"fields",null);if(!A(s))throw new y(n,p.InvalidParameter,i);for(let c of s){let N={name:u(c,"name",""),alias:u(c,"alias",""),type:u(c,"type",""),nullable:u(c,"nullable",!0),editable:u(c,"editable",!0),length:u(c,"length",null),domain:Ge(u(c,"domain"))};f.push(N)}t.layerDefinition.fields=f;let r={};for(let c of f)r[c.name.toLowerCase()]=c.name;let d=u(o,"features",null);if(A(d))for(let c of d){let N={},D=u(c,"attributes",{});for(let w in D)N[r[w.toLowerCase()]]=D[w];t.featureSet.features.push({attributes:N,geometry:_e(u(c,"geometry",null))})}else d=null,t.featureSet.features=d}}}if(Je(t)===!1)throw new y(n,p.InvalidParameter,i);return t.layerDefinition.geometryType||(t.layerDefinition.geometryType="esriGeometryNull"),Re.create(t,n.spatialReference)})},a.signatures.push({name:"featureset",min:1,max:1}),a.functions.filter=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(x(e,2,2,n,i),A(e[0])||M(e[0])){let t=[],o,l=e[0];if(l instanceof De&&(l=l.toArray()),!xe(e[1]))throw new y(n,p.InvalidParameter,i);o=e[1].createFunction(n);for(let m of l){let f=o(m);Fe(f)?(yield f)===!0&&t.push(m):f===!0&&t.push(m)}return t}if(v(e[0])){let t=yield e[0].load(),o=T.create(e[1],{fieldsIndex:t.getFieldsIndex(),timeZone:t.dateFieldsTimeZoneDefaultUTC}),l=o.getVariables();if(l.length>0){let m={};for(let f of l)m[f]=a.evaluateIdentifier(n,{name:f});o.parameters=m}return new ne({parentfeatureset:e[0],whereclause:o})}throw new y(n,p.InvalidParameter,i)}))},a.signatures.push({name:"filter",min:2,max:2}),a.functions.orderby=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(x(e,2,2,n,i),v(e[0])){let t=new $e(e[1]);return new ke({parentfeatureset:e[0],orderbyclause:t})}throw new y(n,p.InvalidParameter,i)}))},a.signatures.push({name:"orderby",min:2,max:2}),a.functions.top=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(x(e,2,2,n,i),v(e[0]))return new Ue({parentfeatureset:e[0],topnum:e[1]});if(A(e[0]))return V(e[1])>=e[0].length?e[0].slice():e[0].slice(0,V(e[1]));if(M(e[0]))return V(e[1])>=e[0].length()?e[0].slice():e[0].slice(0,V(e[1]));throw new y(n,p.InvalidParameter,i)}))},a.signatures.push({name:"top",min:2,max:2}),a.functions.first=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(x(e,1,1,n,i),v(e[0])){let t=yield e[0].first(g.abortSignal);if(t!==null){let o=Se.createFromGraphicLikeObject(t.geometry,t.attributes,e[0],n.timeZone);return o._underlyingGraphic=t,o}return t}return A(e[0])?e[0].length===0?null:e[0][0]:M(e[0])?e[0].length()===0?null:e[0].get(0):null}))},a.signatures.push({name:"first",min:1,max:1}),a.functions.attachments=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){x(e,1,2,n,i);let t={minsize:-1,maxsize:-1,types:null,returnMetadata:!1};if(e.length>1){if(e[1]instanceof P){if(e[1].hasField("minsize")&&(t.minsize=V(e[1].field("minsize"))),e[1].hasField("metadata")&&(t.returnMetadata=G(e[1].field("metadata"))),e[1].hasField("maxsize")&&(t.maxsize=V(e[1].field("maxsize"))),e[1].hasField("types")){let o=Ae(e[1].field("types"),!1);o.length>0&&(t.types=o)}}else if(e[1]!==null)throw new y(n,p.InvalidParameter,i)}if(B(e[0])){let o=e[0]._layer,l;if(v(o))l=o;else{if(o==null||!ae(o))return[];l=J(o,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)}return yield l.load(),l.queryAttachments(e[0].field(l.objectIdField),t.minsize,t.maxsize,t.types,t.returnMetadata)}if(e[0]===null)return[];throw new y(n,p.InvalidParameter,i)}))},a.signatures.push({name:"attachments",min:1,max:2}),a.functions.featuresetbyrelationshipname=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){x(e,2,4,n,i);let t=e[0],o=E(e[1]),l=L(e[2],null),m=G(L(e[3],!0));if(l===null&&(l=["*"]),A(l)===!1)throw new y(n,p.InvalidParameter,i);if(e[0]===null)return null;if(!B(e[0]))throw new y(n,p.InvalidParameter,i);let f=t._layer,s;if(v(f))s=f;else{if(f==null||!ae(f))return null;s=J(f,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)}s=yield s.load();let r=s.relationshipMetaData().filter(w=>w.name===o);if(r.length===0)return null;if(r[0].relationshipTableId!==void 0&&r[0].relationshipTableId!==null&&r[0].relationshipTableId>-1)return Oe(s,r[0],t.field(s.objectIdField),s.spatialReference,l,m,n.lrucache,n.interceptor);let d=s.serviceUrl();if(!d)return null;d=d.charAt(d.length-1)==="/"?d+r[0].relatedTableId.toString():d+"/"+r[0].relatedTableId.toString();let c=yield je(d,s.spatialReference,l,m,n.lrucache,n.interceptor);yield c.load();let N=c.relationshipMetaData();if(N=N.filter(w=>w.id===r[0].id),t.hasField(r[0].keyField)===!1||t.field(r[0].keyField)===null){let w=yield s.getFeatureByObjectId(t.field(s.objectIdField),[r[0].keyField]);if(w){let b=T.create(N[0].keyField+"= @id",{fieldsIndex:c.getFieldsIndex(),timeZone:c.dateFieldsTimeZoneDefaultUTC});return b.parameters={id:w.attributes[r[0].keyField]},c.filter(b)}return new Pe({parentfeatureset:c})}let D=T.create(N[0].keyField+"= @id",{fieldsIndex:c.getFieldsIndex(),timeZone:c.dateFieldsTimeZoneDefaultUTC});return D.parameters={id:t.field(r[0].keyField)},c.filter(D)}))},a.signatures.push({name:"featuresetbyrelationshipname",min:2,max:4}),a.functions.featuresetbyassociation=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){x(e,2,3,n,i);let t=e[0],o=E(L(e[1],"")).toLowerCase(),l=k(e[2])?E(e[2]):null;if(e[0]===null)return null;if(!B(e[0]))throw new y(n,p.InvalidParameter,i);let m=t._layer;if(m instanceof le&&(m=J(m,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),m===null||v(m)===!1)return null;yield m.load();let f=m.serviceUrl(),s=yield Me(f,n.spatialReference,!0);if(s.unVersion>=8)return yield Ye(m,t,o,l,s,n,i);let r=s.associations,d=null,c=null,N=!1;if(l!==null&&l!==""&&l!==void 0){for(let F of s.terminals)F.terminalName===l&&(c=F.terminalId);c===null&&(N=!0)}let D=r.getFieldsIndex(),w=D.get("TOGLOBALID").name,b=D.get("FROMGLOBALID").name,z=D.get("TOTERMINALID").name,U=D.get("FROMTERMINALID").name,W=D.get("FROMNETWORKSOURCEID").name,K=D.get("TONETWORKSOURCEID").name,H=D.get("ASSOCIATIONTYPE").name,Ke=D.get("ISCONTENTVISIBLE").name,qe=D.get("OBJECTID").name;for(let F of m.fields)if(F.type==="global-id"){d=t.field(F.name);break}let R=null,pe=new O(new Z({name:"percentalong",alias:"percentalong",type:"double"}),T.create("0",{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC})),ye=new O(new Z({name:"side",alias:"side",type:"string"}),T.create("''",{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC})),C="globalid",we="globalId",ge={};for(let F in s.lkp)ge[F]=s.lkp[F].sourceId;let j=new Ze(new Z({name:"classname",alias:"classname",type:"string"}),null,ge),h="";switch(o){case"midspan":{h=`((${w}='${d}') OR ( ${b}='${d}')) AND (${H} IN (5))`,j.codefield=T.create(`CASE WHEN (${w}='${d}') THEN ${W} ELSE ${K} END`,{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC});let F=Y($.findField(r.fields,b));F.name=C,F.alias=C,R=new O(F,T.create(`CASE WHEN (${b}='${d}') THEN ${w} ELSE ${b} END`,{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC})),pe=s.unVersion>=4?new te($.findField(r.fields,D.get("PERCENTALONG").name)):new O(new Z({name:"percentalong",alias:"percentalong",type:"double"}),T.create("0",{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC}));break}case"junctionedge":{h=`((${w}='${d}') OR ( ${b}='${d}')) AND (${H} IN (4,6))`,j.codefield=T.create(`CASE WHEN (${w}='${d}') THEN ${W} ELSE ${K} END`,{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC});let F=Y($.findField(r.fields,b));F.name=C,F.alias=C,R=new O(F,T.create(`CASE WHEN (${b}='${d}') THEN ${w} ELSE ${b} END`,{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC})),ye=new O(new Z({name:"side",alias:"side",type:"string"}),T.create(`CASE WHEN (${H}=4) THEN 'from' ELSE 'to' END`,{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC}));break}case"connected":{let F=`${w}='@T'`,Ie=`${b}='@T'`;c!==null&&(F+=` AND ${z}=@A`,Ie+=` AND ${U}=@A`),h="(("+F+") OR ("+Ie+"))",h=q(h,"@T",d??""),F=q(F,"@T",d??""),c!==null&&(F=q(F,"@A",c.toString()),h=q(h,"@A",c.toString())),j.codefield=T.create("CASE WHEN "+F+` THEN ${W} ELSE ${K} END`,{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC});let ie=Y($.findField(r.fields,b));ie.name=C,ie.alias=C,R=new O(ie,T.create("CASE WHEN "+F+` THEN ${b} ELSE ${w} END`,{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC}));break}case"container":h=`${w}='${d}' AND ${H} = 2`,c!==null&&(h+=` AND ${z} = `+c.toString()),j.codefield=W,h="( "+h+" )",R=new Q($.findField(r.fields,b),C,C);break;case"content":h=`(${b}='${d}' AND ${H} = 2)`,c!==null&&(h+=` AND ${U} = `+c.toString()),j.codefield=K,h="( "+h+" )",R=new Q($.findField(r.fields,w),C,C);break;case"structure":h=`(${w}='${d}' AND ${H} = 3)`,c!==null&&(h+=` AND ${z} = `+c.toString()),j.codefield=W,h="( "+h+" )",R=new Q($.findField(r.fields,b),C,we);break;case"attached":h=`(${b}='${d}' AND ${H} = 3)`,c!==null&&(h+=` AND ${U} = `+c.toString()),j.codefield=K,h="( "+h+" )",R=new Q($.findField(r.fields,w),C,we);break;default:throw new y(n,p.InvalidParameter,i)}return N&&(h="1 <> 1"),new $({parentfeatureset:r,adaptedFields:[new te($.findField(r.fields,qe)),new te($.findField(r.fields,Ke)),R,ye,j,pe],extraFilter:h?T.create(h,{fieldsIndex:r.getFieldsIndex(),timeZone:r.dateFieldsTimeZoneDefaultUTC}):null})}))},a.signatures.push({name:"featuresetbyassociation",min:2,max:6}),a.functions.groupby=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(x(e,3,3,n,i),!v(e[0]))throw new y(n,p.InvalidParameter,i);let t=yield e[0].load(),o=[],l=[],m=!1,f=[];if(k(e[1]))f.push(e[1]);else if(e[1]instanceof P)f.push(e[1]);else if(A(e[1]))f=e[1];else{if(!M(e[1]))throw new y(n,p.InvalidParameter,i);f=e[1].toArray()}for(let s of f)if(k(s)){let r=T.create(E(s),{fieldsIndex:t.getFieldsIndex(),timeZone:t.dateFieldsTimeZoneDefaultUTC}),d=de(r)===!0?E(s):"%%%%FIELDNAME";o.push({name:d,expression:r}),d==="%%%%FIELDNAME"&&(m=!0)}else{if(!(s instanceof P))throw new y(n,p.InvalidParameter,i);{let r=s.hasField("name")?s.field("name"):"%%%%FIELDNAME",d=s.hasField("expression")?s.field("expression"):"";if(r==="%%%%FIELDNAME"&&(m=!0),!r)throw new y(n,p.InvalidParameter,i);o.push({name:r,expression:T.create(d||r,{fieldsIndex:t.getFieldsIndex(),timeZone:t.dateFieldsTimeZoneDefaultUTC})})}}if(f=[],k(e[2]))f.push(e[2]);else if(A(e[2]))f=e[2];else if(M(e[2]))f=e[2].toArray();else{if(!(e[2]instanceof P))throw new y(n,p.InvalidParameter,i);f.push(e[2])}for(let s of f){if(!(s instanceof P))throw new y(n,p.InvalidParameter,i);{let r=s.hasField("name")?s.field("name"):"",d=s.hasField("statistic")?s.field("statistic"):"",c=s.hasField("expression")?s.field("expression"):"";if(!r||!d||!c)throw new y(n,p.InvalidParameter,i);l.push({name:r,statistic:d.toLowerCase(),expression:T.create(c,{fieldsIndex:t.getFieldsIndex(),timeZone:t.dateFieldsTimeZoneDefaultUTC})})}}if(m){let s={};for(let d of t.fields)s[d.name.toLowerCase()]=1;for(let d of o)d.name!=="%%%%FIELDNAME"&&(s[d.name.toLowerCase()]=1);for(let d of l)d.name!=="%%%%FIELDNAME"&&(s[d.name.toLowerCase()]=1);let r=0;for(let d of o)if(d.name==="%%%%FIELDNAME"){for(;s["field_"+r.toString()]===1;)r++;s["field_"+r.toString()]=1,d.name="FIELD_"+r.toString()}}for(let s of o)ue(s.expression,a,n);for(let s of l)ue(s.expression,a,n);return e[0].groupby(o,l)}))},a.signatures.push({name:"groupby",min:3,max:3}),a.functions.distinct=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(v(e[0])){x(e,2,2,n,i);let t=yield e[0].load(),o=[],l=[];if(k(e[1]))l.push(e[1]);else if(e[1]instanceof P)l.push(e[1]);else if(A(e[1]))l=e[1];else{if(!M(e[1]))throw new y(n,p.InvalidParameter,i);l=e[1].toArray()}let m=!1;for(let f of l)if(k(f)){let s=T.create(E(f),{fieldsIndex:t.getFieldsIndex(),timeZone:t.dateFieldsTimeZoneDefaultUTC}),r=de(s)===!0?E(f):"%%%%FIELDNAME";o.push({name:r,expression:s}),r==="%%%%FIELDNAME"&&(m=!0)}else{if(!(f instanceof P))throw new y(n,p.InvalidParameter,i);{let s=f.hasField("name")?f.field("name"):"%%%%FIELDNAME",r=f.hasField("expression")?f.field("expression"):"";if(s==="%%%%FIELDNAME"&&(m=!0),!s)throw new y(n,p.InvalidParameter,i);o.push({name:s,expression:T.create(r||s,{fieldsIndex:t.getFieldsIndex(),timeZone:t.dateFieldsTimeZoneDefaultUTC})})}}if(m){let f={};for(let r of t.fields)f[r.name.toLowerCase()]=1;for(let r of o)r.name!=="%%%%FIELDNAME"&&(f[r.name.toLowerCase()]=1);let s=0;for(let r of o)if(r.name==="%%%%FIELDNAME"){for(;f["field_"+s.toString()]===1;)s++;f["field_"+s.toString()]=1,r.name="FIELD_"+s.toString()}}for(let f of o)ue(f.expression,a,n);return e[0].groupby(o,[])}return Be(e)}))},a.functions.getfeaturesetinfo=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(x(e,1,1,n,i),!v(e[0]))return null;let t=yield e[0].getFeatureSetInfo();return t?P.convertObjectToArcadeDictionary({layerId:t.layerId,layerName:t.layerName,itemId:t.itemId,serviceLayerUrl:t.serviceLayerUrl,webMapLayerId:t.webMapLayerId??null,webMapLayerTitle:t.webMapLayerTitle??null,className:null,objectClassId:null},se(n),!1,!1):null}))},a.signatures.push({name:"getfeaturesetinfo",min:1,max:1}),a.functions.filterbysubtypecode=function(n,i){return a.standardFunctionAsync(n,i,(g,I,e)=>S(this,null,function*(){if(x(e,2,2,n,i),v(e[0])){let t=yield e[0].load(),o=e[1];if(!Te(o))throw new y(n,p.InvalidParameter,i);if(t.subtypeField){let m=T.create(`${t.subtypeField}= ${e[1]}`,{fieldsIndex:t.getFieldsIndex(),timeZone:t.dateFieldsTimeZoneDefaultUTC});return new ne({parentfeatureset:e[0],whereclause:m})}if(t.typeIdField===null||t.typeIdField==="")throw new y(n,p.FeatureSetDoesNotHaveSubtypes,i);let l=T.create(`${t.typeIdField}= ${e[1]}`,{fieldsIndex:t.getFieldsIndex(),timeZone:t.dateFieldsTimeZoneDefaultUTC});return new ne({parentfeatureset:e[0],whereclause:l})}throw new y(n,p.InvalidParameter,i)}))},a.signatures.push({name:"filterbysubtypecode",min:2,max:2}))}export{vn as registerFunctions};
