import{b as h,d as w,e as A}from"./chunk-XAJ5ULUR.js";import{b as P}from"./chunk-3ZJ4NMBE.js";import{a as N,e as v}from"./chunk-AYNBEMCC.js";import{G as S,a as F,o as R}from"./chunk-6B5XFA6F.js";import{a as i}from"./chunk-BOVYXYHK.js";function D(e,r){return b(e)===b(r)}function b(e){if(e==null)return null;let r=e.layer!=null?e.layer.id:"",t=null;return t=e.objectId!=null?e.objectId:e.layer!=null&&"objectIdField"in e.layer&&e.layer.objectIdField!=null&&e.attributes!=null?e.attributes[e.layer.objectIdField]:e.uid,t==null?null:`o-${r}-${t}`}var J={json:{write:{writer:x,target:{"feature.layerId":{type:[Number,String],isRequired:!0},"feature.objectId":{type:[Number,String],isRequired:!0}}},origins:{"web-scene":{read:B}}}};function x(e,r){e?.layer?.objectIdField!=null&&e.attributes!=null&&(r.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})}function B(e){if(e.layerId!=null&&e.objectId!=null)return{uid:null,layer:{id:e.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:e.objectId}}}function K(e,r,t,l){let{sceneIntersectionHelper:q}=e,{observer:m,observerFeatureId:c,targetFeatureId:d,target:y}=t;if(c==null&&d==null)return;l||(l=n=>n),S(a,m,y);let o=F(a),u=1;R(a,m,a,u/o);let L=v(a,y,G);r.options.store=P.ALL,q.intersectToolIntersectorRay(L,r);let j=null,p=null,f=null,s=null;for(let n of r.results.all){let g=h(n,e);if(g==null||n.distanceInRenderSpace==null)continue;let I=b(g);I!=null&&(c!=null&&I===c&&(j??=l(T(n,e,o)),n.distanceInRenderSpace-u<j&&(f=n)),d!=null&&I===d&&(p??=l(T(n,e,o)),s==null&&n.distanceInRenderSpace-u<o&&o-n.distanceInRenderSpace+u<p&&(s=n)))}let{observerAdjusted:O,targetAdjusted:$}=t;f?.getIntersectionPoint(O)?t.observerSurfaceNormal=f.getTransformedNormal(i()):t.observerSurfaceNormal=null,s?.getIntersectionPoint($)?t.targetSurfaceNormal=s.getTransformedNormal(i()):t.targetSurfaceNormal=null}function T(e,r,t){if(A(e)){let l=w(e,r);if(l!=null)return Math.min(l*E,t)}return 1e-5*t}var E=.05,G=N(),a=i();export{D as a,b,J as c,K as d};
