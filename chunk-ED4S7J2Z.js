import{a as c}from"./chunk-MU2TPF5V.js";import{a as b}from"./chunk-TGSXSDDB.js";import{a as h}from"./chunk-FHBFWDFD.js";import{a as w}from"./chunk-AXYQJCCX.js";import{a as p}from"./chunk-5XCFNEYX.js";import{a as m}from"./chunk-GQL2MBZT.js";import{c as v}from"./chunk-TG45K3WR.js";import{a as i}from"./chunk-QGVBCWUY.js";import{e as r}from"./chunk-NFIPKH6V.js";import{l as _}from"./chunk-5QEXLALV.js";var n="esri-attribution",l={base:n,poweredBy:`${n}__powered-by`,sources:`${n}__sources`,open:`${n}--open`,sourcesOpen:`${n}__sources--open`,link:`${n}__link`},t=class extends m{constructor(e,s){super(e,s),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(o=>o.forEach(({target:d})=>this._checkSourceTextOverflow(d))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new c}initialize(){this.addHandles(v(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,s)=>(e.includes(s.text)||e.push(s.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e={[l.open]:this._isOpen};return p("div",{bind:this,class:this.classes(l.base,h.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return p("div",{class:l.poweredBy},"Powered by"," ",p("a",{class:l.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){let e=this._isOpen,s=this._isInteractive,o=s?0:void 0,{attributionText:d}=this,a={[l.sourcesOpen]:e,[h.interactive]:s};return p("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(l.sources,a),innerHTML:d,tabIndex:o})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let s=!1,{clientHeight:o,clientWidth:d,scrollWidth:a}=e,u=a>d,g=this._attributionTextOverflowed!==u;if(this._attributionTextOverflowed=u,g&&(s=!0),this._isOpen){let f=o<this._prevSourceNodeHeight;this._prevSourceNodeHeight=o,f&&(this._isOpen=!1,s=!0)}s&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};i([r()],t.prototype,"_isOpen",void 0),i([r()],t.prototype,"_isInteractive",null),i([r()],t.prototype,"_attributionTextOverflowed",void 0),i([r()],t.prototype,"_prevSourceNodeHeight",void 0),i([r({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],t.prototype,"attributionText",null),i([r()],t.prototype,"icon",null),i([r()],t.prototype,"itemDelimiter",void 0),i([r()],t.prototype,"label",null),i([r(),w("esri/widgets/Attribution/t9n/Attribution")],t.prototype,"messages",void 0),i([r()],t.prototype,"view",null),i([r({type:c})],t.prototype,"viewModel",void 0),i([b()],t.prototype,"_toggleState",null),t=i([_("esri.widgets.Attribution")],t);var D=t;export{D as a};
