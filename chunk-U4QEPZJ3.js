import{c as d}from"./chunk-KJUZWSCL.js";import{a as f}from"./chunk-BUZ3SPLE.js";import{m as w}from"./chunk-ZQIC5NFT.js";import{c as h}from"./chunk-VIEK2X23.js";import{a as v}from"./chunk-XKIFGPJO.js";import{a as P}from"./chunk-7F5DJLJT.js";import{a as c}from"./chunk-CX5IFQZJ.js";import{a as n}from"./chunk-QGVBCWUY.js";import{e as p}from"./chunk-NFIPKH6V.js";import{l as y}from"./chunk-5QEXLALV.js";import{b as o}from"./chunk-2LI2GKBQ.js";import{a as l,b as u}from"./chunk-VTHXE323.js";var m;function R(t){return!Array.isArray(t[0])}function A(t){return typeof t[0]?.[0]=="number"}function b(t){if(!t)return;let{paths:r,hasM:e,hasZ:s,spatialReference:i}=t;switch(r??=[],A(r)&&(r=[r]),r[0]?.[0]?.length){case 4:s??=!0,e??=!0;break;case 3:s??=e!==!0,e??=!s;break;default:s??=!1,e??=!1}return i??=P.WGS84,u(l({},t),{hasM:e,hasZ:s,paths:r,spatialReference:i})}var a=m=class extends v{constructor(t){super(b(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,r){r.curvePaths=o(t)}get extent(){let t=d(this),{spatialReference:r}=this;return t?new w(u(l({},t),{spatialReference:r})):null}writePaths(t,r){r.paths=o(this.paths)}addPath(t){if(!t)return;let r=this.paths,e=r.length;if(R(t)){let s=[];for(let i=0,g=t.length;i<g;i++)s[i]=t[i].toArray();r[e]=s}else r[e]=t.slice();return this.notifyChange("paths"),this}clone(){let t=new m;return t.spatialReference=this.spatialReference,t.paths=o(this.paths),t.curvePaths=o(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,r){if(!this._validateInputs(t,r))return null;let e=this.paths[t][r],s=this.hasZ,i=this.hasM;return s&&!i?new h(e[0],e[1],e[2],void 0,this.spatialReference):i&&!s?new h(e[0],e[1],void 0,e[2],this.spatialReference):s&&i?new h(e[0],e[1],e[2],e[3],this.spatialReference):new h(e[0],e[1],this.spatialReference)}insertPoint(t,r,e){return this._validateInputs(t,r,!0)?(f(this,e),Array.isArray(e)||(e=e.toArray()),this.paths[t].splice(r,0,e),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;let r=this.paths.splice(t,1)[0],e=this.spatialReference,s=r.map(i=>new h(i,e));return this.notifyChange("paths"),s}removePoint(t,r){if(!this._validateInputs(t,r))return null;let e=new h(this.paths[t].splice(r,1)[0],this.spatialReference);return this.notifyChange("paths"),e}setPoint(t,r,e){return this._validateInputs(t,r)?(f(this,e),Array.isArray(e)||(e=e.toArray()),this.paths[t][r]=e,this.notifyChange("paths"),this):this}_validateInputs(t,r,e=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(r!=null){let s=this.paths[t];if(e&&(r<0||r>s.length)||!e&&(r<0||r>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};n([p({readOnly:!0})],a.prototype,"cache",null),n([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],a.prototype,"curvePaths",void 0),n([c("curvePaths")],a.prototype,"writeCurvePaths",null),n([p({readOnly:!0})],a.prototype,"extent",null),n([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],a.prototype,"paths",void 0),n([c("paths")],a.prototype,"writePaths",null),a=m=n([y("esri.geometry.Polyline")],a);var D=a;a.prototype.toJSON.isDefaultToJSON=!0;export{D as a};
