import{a as O}from"./chunk-TNF3LMU6.js";import{a as T}from"./chunk-M3TNQKVJ.js";import{a as J}from"./chunk-DDZ3KR2Q.js";import{b as q}from"./chunk-NX5B6XBR.js";import{b as d}from"./chunk-6RBQSBA2.js";import{g as x}from"./chunk-ZC6EBRE4.js";import{d as R,g as c}from"./chunk-NJWTSROP.js";import{o as g}from"./chunk-AUAZP44J.js";import{A as S,k as p}from"./chunk-76ATOSLU.js";import{a as o,b as y,f as s}from"./chunk-VTHXE323.js";function N(i){let e=i.geometry,r=i.toJSON(),t=r,l,n,m;if(e!=null&&(n=e.spatialReference,m=c(n),t.geometryType=x(e),t.geometry=JSON.stringify(e),t.inSR=m),r.outSR?(t.outSR=c(r.outSR),l=i.outSpatialReference):e&&(t.outSR=t.inSR,l=n),t.bin&&=JSON.stringify(t.bin),t.quantizationParameters&&=JSON.stringify(t.quantizationParameters),t.outStatistics&&=JSON.stringify(t.outStatistics),t.outTimeReference&&=JSON.stringify(t.outTimeReference),r.timeExtent){let f=r.timeExtent,{start:a,end:u}=f;a==null&&u==null||(t.time=a===u?a:`${a??"null"},${u??"null"}`),delete r.timeExtent}return i.defaultSpatialReference&&R(n,l)&&(t.defaultSR=t.inSR,delete t.inSR,delete t.outSR),t}function E(i,e,r){return s(this,null,function*(){return e.timeExtent!=null&&e.timeExtent.isEmpty?{data:{features:[]}}:yield b(i,e,r)})}function b(t,l){return s(this,arguments,function*(i,e,r={}){let n=typeof i=="string"?p(i):i,m=e.geometry?[e.geometry]:[],f=yield q(m,null,{signal:r.signal}),a=f?.[0];a!=null&&((e=e.clone()).geometry=a);let u=J(o(y(o({},n.query),{f:"json"}),N(e)));return g(S(n.path,"queryBins"),y(o({},r),{query:o(o({},u),r.query)}))})}function V(i,e,r){return s(this,null,function*(){let{data:t}=yield E(d(i),T.from(e),r);return O.fromJSON(t)})}export{V as a};
