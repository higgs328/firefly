import{a as y}from"./chunk-G4DZJMGT.js";import{C as l,y as d}from"./chunk-76ATOSLU.js";import{a as o}from"./chunk-QGVBCWUY.js";import{H as c}from"./chunk-MYO4NP2N.js";import{e as a}from"./chunk-NFIPKH6V.js";import{l as h}from"./chunk-5QEXLALV.js";import{b as m}from"./chunk-YOFFGXOB.js";import{g as u}from"./chunk-XRGPJ3QY.js";import{a as p,b as i,f as n}from"./chunk-VTHXE323.js";var r=class extends c{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t?.portalItem&&t.path?i(p({},t),{path:f(t.path,t.portalItem)}):t}set path(t){t!=null&&l(t)?u.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return f(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",e){let s=this.cdnUrl;if(s==null)throw new m("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(s,{responseType:t,query:{token:this.portalItem.apiKey,_ts:e?.cacheBust?Date.now():null},signal:e?.signal})}update(t,e){return n(this,null,function*(){let{addOrUpdateResources:s}=yield import("./chunk-VA4XMF2X.js");return yield s(this.portalItem,[{resource:this,content:t,compress:e?.compress,access:e?.access}],"update",e),this})}hasPath(){return this.path!=null}};function f(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&l(t)&&(t=d(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}o([a()],r.prototype,"portalItem",void 0),o([a({type:String,value:null})],r.prototype,"path",null),o([y("path")],r.prototype,"_castPath",null),o([a({type:String,readOnly:!0})],r.prototype,"url",null),o([a({type:String,readOnly:!0})],r.prototype,"cdnUrl",null),o([a({type:String,readOnly:!0})],r.prototype,"itemRelativeUrl",null),r=o([h("esri.portal.PortalItemResource")],r);var S=r;export{S as a};
