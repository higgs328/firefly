import{a as ie,b as oe,c as re}from"./chunk-5C57S7IZ.js";import{a as ne}from"./chunk-2WYOVBUR.js";import{a as q}from"./chunk-WDTJILD4.js";import{a as te}from"./chunk-H4IF7PQO.js";import{a as T}from"./chunk-3JGYBNJA.js";import{a as ee}from"./chunk-CELWVZPW.js";import{t as G}from"./chunk-NJWTSROP.js";import{a as _}from"./chunk-BAEF3CT6.js";import{f as D}from"./chunk-CCJU4DSH.js";import{a as e}from"./chunk-QGVBCWUY.js";import{H as Z}from"./chunk-MYO4NP2N.js";import{e as t}from"./chunk-NFIPKH6V.js";import{l as P}from"./chunk-5QEXLALV.js";import{b as X}from"./chunk-YOFFGXOB.js";import{c as Q}from"./chunk-6MRUJ2UW.js";import{b as B}from"./chunk-2LI2GKBQ.js";import{a as j,b as V,f as Y}from"./chunk-VTHXE323.js";var v=class extends Z{set horizontalWKID(i){i?G({wkid:+i})?this._set("horizontalWKID",+i):this._set("horizontalWKID",i):this._set("horizontalWKID",null)}set verticalWKID(i){i?this._set("verticalWKID",isFinite(i)&&G({wkid:+i})?+i:null):this._set("verticalWKID",null)}get isAdvanced(){let{affineTransformations:i,focalLength:o,principalOffsetPoint:r,radialDistortionCoefficients:a,tangentialDistortionCoefficients:l}=this;return i?.length>1&&!Number.isNaN(o)&&r?.length>1&&a?.length>1&&l?.length>1}};e([t({json:{write:!0}})],v.prototype,"affineTransformations",void 0),e([t({json:{write:!0}})],v.prototype,"focalLength",void 0),e([t({json:{write:!0}})],v.prototype,"principalOffsetPoint",void 0),e([t({json:{write:!0}})],v.prototype,"radialDistortionCoefficients",void 0),e([t({json:{write:!0}})],v.prototype,"tangentialDistortionCoefficients",void 0),e([t({json:{write:!0}})],v.prototype,"horizontalWKID",null),e([t({json:{write:!0}})],v.prototype,"verticalWKID",null),e([t({json:{write:!0}})],v.prototype,"x",void 0),e([t({json:{write:!0}})],v.prototype,"y",void 0),e([t({json:{write:!0}})],v.prototype,"z",void 0),e([t({json:{write:!0}})],v.prototype,"type",void 0),v=e([P("esri.layers.orientedImagery.core.CameraOrientation")],v);var C=v;var d=class extends T.ClonableMixin(D.JSONSupportMixin(C)){constructor(){super(...arguments),this.type=1}toString(){let{type:i,horizontalWKID:o,verticalWKID:r,x:a,y:l,z:y,heading:c,pitch:u,roll:f,affineTransformations:x,focalLength:N,principalOffsetPoint:w,radialDistortionCoefficients:S,tangentialDistortionCoefficients:I}=this,p=[i,o,r,a,l,y,c,u,f];return this.isAdvanced&&(x?.forEach(n=>p.push(n)),p.push(N),w?.forEach(n=>p.push(n)),S?.forEach(n=>p.push(n)),I?.forEach(n=>p.push(n))),p.map(n=>Number.isNaN(n)?"":n).join("|")}};e([t({json:{write:!0}})],d.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],d.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],d.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],d.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],d.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],d.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],d.prototype,"heading",void 0),e([t({type:Number,json:{write:!0}})],d.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],d.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],d.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],d.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],d.prototype,"z",void 0),d=e([P("esri.layers.orientedImagery.core.CameraOrientationHPR")],d);var ae=d;var O=class extends T.ClonableMixin(D.JSONSupportMixin(C)){constructor(){super(...arguments),this.type=4}toString(){let{type:i,latitude:o,longitude:r,ellipsoidRadius:a,squaredEccentricity:l,properties:y}=this,c=`${y}`.split("|");return c.splice(1,1),`${i}|${o}|${r}|${a}|${l}|${c.join("|")}`}};e([t({json:{write:!0}})],O.prototype,"type",void 0),e([t({json:{write:!0},type:Number})],O.prototype,"latitude",void 0),e([t({json:{write:!0},type:Number})],O.prototype,"longitude",void 0),e([t({json:{write:!0},type:Number})],O.prototype,"ellipsoidRadius",void 0),e([t({json:{write:!0},type:Number})],O.prototype,"squaredEccentricity",void 0),e([t({json:{write:!0}})],O.prototype,"properties",void 0),O=e([P("esri.layers.orientedImagery.core.CameraOrientationLTP")],O);var se=O;var h=class extends T.ClonableMixin(D.JSONSupportMixin(C)){constructor(){super(...arguments),this.type=2}toString(){let{type:i,horizontalWKID:o,verticalWKID:r,x:a,y:l,z:y,omega:c,phi:u,kappa:f,affineTransformations:x,focalLength:N,principalOffsetPoint:w,radialDistortionCoefficients:S,tangentialDistortionCoefficients:I}=this,p=[i,o,r,a,l,y,c,u,f];return this.isAdvanced&&(x?.forEach(n=>p.push(n)),p.push(N),w?.forEach(n=>p.push(n)),S?.forEach(n=>p.push(n)),I?.forEach(n=>p.push(n))),p.map(n=>isNaN(n)?"":n).join("|")}};e([t({json:{write:!0}})],h.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],h.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],h.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],h.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],h.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"omega",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"phi",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"kappa",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],h.prototype,"z",void 0),h=e([P("esri.layers.orientedImagery.core.CameraOrientationOPK")],h);var pe=h;var g=class extends T.ClonableMixin(D.JSONSupportMixin(C)){constructor(){super(...arguments),this.type=3}get isAdvanced(){let{affineTransformations:i,focalLength:o,principalOffsetPoint:r,radialDistortionCoefficients:a,tangentialDistortionCoefficients:l}=this;return i?.length>1||!Number.isNaN(o)||r?.length>1||a?.length>1||l?.length>1}toString(){let{type:i,horizontalWKID:o,verticalWKID:r,x:a,y:l,z:y,yaw:c,pitch:u,roll:f,affineTransformations:x,focalLength:N,principalOffsetPoint:w,radialDistortionCoefficients:S,tangentialDistortionCoefficients:I}=this,p=[i,o,r,a,l,y,c,u,f];return this.isAdvanced&&(x?.forEach(n=>p.push(n)),p.push(N),w?.forEach(n=>p.push(n)),w?.forEach(n=>p.push(n)),S?.forEach(n=>p.push(n)),I?.forEach(n=>p.push(n))),p.map(n=>Number.isNaN(n)?"":n).join("|")}};e([t({json:{write:!0}})],g.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],g.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],g.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],g.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],g.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"yaw",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],g.prototype,"z",void 0),g=e([P("esri.layers.orientedImagery.core.CameraOrientationYPR")],g);var me=g;var b;(function(i){i[i.HPR=1]="HPR",i[i.OPK=2]="OPK",i[i.YPR=3]="YPR",i[i.LTP=4]="LTP"})(b||(b={}));var z=new Map;z.set(`${b.OPK}`,{desc:"Using Omega Phi Kappa",constructor:pe}),z.set(`${b.HPR}`,{desc:"Using Heading, Pitch and Roll",constructor:ae}),z.set(`${b.YPR}`,{desc:"Using Yaw, Pitch and Roll",constructor:me}),z.set(`${b.LTP}`,{desc:"Using Local Tangent Plane",constructor:se});function ce(i,o,r){return o&&(i=`${o}${i}`),r&&(i+=`${r}`),i}function fe(i,o,r){let{url:a}=i;return a?(a=ce(a,o,r),new ie(V(j({},i),{url:a}))):null}function le(i,o,r){return i&&(re(i)?new oe(i):fe(i,o,r))}var A=new _({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),U=new _({Feet:"feet",Meter:"meter"}),k=new _({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique","":null}),E=new Map;function de(i){let[o,r,a,l,y,c,u,f,x,N,w,S,I,p,n,K,M,R,L,$,W,F]=i.slice(1);return j({horizontalWKID:o,verticalWKID:r,x:a,y:l,z:y,omega:c,phi:u,kappa:f},J([x,N,w,S,I,p],[K,M],[R,L,$],[W,F],n))}E.set(`${b.HPR}`,he),E.set(`${b.YPR}`,ge),E.set(`${b.OPK}`,de),E.set(`${b.LTP}`,ve);var H=i=>{let o=i.map(r=>parseFloat(r)).filter(r=>!isNaN(r));if(o.length===i.length)return o};function J(i,o,r,a,l){let y=H(i),c=H(o),u=H(r),f=H(a);return{affineTransformations:y?.length===6?y:void 0,focalLength:y?.length===6?parseFloat(l):void 0,principalOffsetPoint:c?.length!==2?[0,0]:c,radialDistortionCoefficients:u?.length!==3?[0,0,0]:u,tangentialDistortionCoefficients:f?.length!==2?[0,0]:f}}function he(i){let[o,r,a,l,y,c,u,f,x,N,w,S,I,p,n,K,M,R,L,$,W,F]=i.slice(1);return j({horizontalWKID:o,verticalWKID:r,x:a,y:l,z:y,heading:c,pitch:u,roll:f},J([x,N,w,S,I,p],[K,M],[R,L,$],[W,F],n))}function ge(i){let[o,r,a,l,y,c,u,f,x,N,w,S,I,p,n,K,M,R,L,$,W,F]=i.slice(1);return j({horizontalWKID:o,verticalWKID:r,x:a,y:l,z:y,yaw:c,pitch:u,roll:f},J([x,N,w,S,I,p],[K,M],[R,L,$],[W,F],n))}function ve(i){let[o,r,a,l,y,...c]=i.slice(1),u=E.get(y),f=z.get(y)?.constructor;return!u||!f?null:{latitude:o,longitude:r,ellipsoidRadius:a,squaredEccentricity:l,properties:new f(u([y,"",...c]))}}function Kt(i){if(!i)return null;let o=`${i}`.split("|");if(o.length===0)return null;let r=z.get(o[0]);if(!r)return null;let a=E.get(o[0]);return a?new r.constructor(a(o)):null}function ye(i){return Array.isArray(i)&&i?.length===9&&!i.some(isNaN)}var we=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","imageGeometryField","imageReferenceField","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),ue=(i,o)=>!we.has(o)&&i,je=(i,o,r)=>{let a=`orientedImageryProperties.${i}`;return{name:a,write:o?{ignoreOrigin:!0,target:a,writer:o}:{ignoreOrigin:!0},read:r?{ignoreOrigin:!0,source:a,reader:r}:{ignoreOrigin:!0}}};function Pe(i){return i.json&&(i.json.origins=i.json.origins??{},i.json.origins["web-scene"]={write:!1,read:!1}),i}function m(i,o,r,a){let{name:l,write:y,read:c}=je(i,o,r),u={name:l,write:y,read:c,origins:{service:{name:`orientedImageryInfo.${l}`,write:o,read:r},"web-scene":{name:l,write:ue(y,i),read:ue(c,i)},"web-map":{name:l,write:y,read:c}}};return a&&u.origins&&(u.type=a,u.origins["web-map"].type=a,u.origins["web-scene"].type=a),u}var s=class extends ne{constructor(){super(...arguments),this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField="ImageGeometry",this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField="OIObjectID",this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){let{elevationSource:i,demPathPrefix:o,demPathSuffix:r}=this;return le(i,o,r)}save(i){return Y(this,null,function*(){return this._debouncedSaveOperations(q.SAVE,i)})}saveAs(i,o){return Y(this,null,function*(){return this._debouncedSaveOperations(q.SAVE_AS,o,i)})}findFirstValidLayerId(i){return i.layers?.find(o=>this.supportedSourceTypes.has(o.type))?.id}_verifySource(){if(super._verifySource(),this.geometryType!=="point")throw new X("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};e([t({type:Number,json:m("cameraHeading")})],s.prototype,"cameraHeading",void 0),e([t({type:Number,json:m("cameraHeight")})],s.prototype,"cameraHeight",void 0),e([t({type:Number,json:m("cameraPitch")})],s.prototype,"cameraPitch",void 0),e([t({type:Number,json:m("cameraRoll")})],s.prototype,"cameraRoll",void 0),e([t({type:Number,json:m("coveragePercent")})],s.prototype,"coveragePercent",void 0),e([t({type:String,json:m("demPathPrefix")})],s.prototype,"demPathPrefix",void 0),e([t({type:String,json:m("demPathSuffix")})],s.prototype,"demPathSuffix",void 0),e([t({type:String,json:m("depthImagePathPrefix")})],s.prototype,"depthImagePathPrefix",void 0),e([t({type:String,json:m("depthImagePathSuffix")})],s.prototype,"depthImagePathSuffix",void 0),e([t({type:Object,json:m("elevationSource")})],s.prototype,"elevationSource",void 0),e([t({readOnly:!0})],s.prototype,"effectiveElevationSource",null),e([t({type:Number,json:m("farDistance")})],s.prototype,"farDistance",void 0),e([t()],s.prototype,"geometryType",void 0),e([t({type:Number,json:m("horizontalFieldOfView")})],s.prototype,"horizontalFieldOfView",void 0),e([t({type:String,json:m("horizontalMeasurementUnit")})],s.prototype,"horizontalMeasurementUnit",void 0),e([t({type:String,json:V(j({},m("imageGeometryField")),{default:"ImageGeometry"})})],s.prototype,"imageGeometryField",void 0),e([t({type:String,json:m("imagePathPrefix")})],s.prototype,"imagePathPrefix",void 0),e([t({type:String,json:m("imagePathSuffix")})],s.prototype,"imagePathSuffix",void 0),e([t({type:String,json:V(j({},m("imageReferenceField")),{default:"OIObjectID"})})],s.prototype,"imageReferenceField",void 0),e([t({type:Number,json:m("imageRotation")})],s.prototype,"imageRotation",void 0),e([t({type:Number,json:m("maximumDistance")})],s.prototype,"maximumDistance",void 0),e([t({type:Number,json:m("nearDistance")})],s.prototype,"nearDistance",void 0),e([t({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],s.prototype,"operationalLayerType",void 0),e([t({json:j({},m("orientationAccuracy",(i,o,r)=>{Q(r,i.join(";"),o)},i=>{let o=i?.split(";")?.map(Number);return ye(o)?o:[0,0,0,0,0,0,0,0,0]},String))})],s.prototype,"orientationAccuracy",void 0),e([t({json:j({},m("orientedImageryType",k.write,k.read,k.jsonValues.slice(1)))})],s.prototype,"orientedImageryType",void 0),e([t({json:{read:!1},value:"oriented-imagery",readOnly:!0})],s.prototype,"type",void 0),e([t({type:A.apiValues,json:j({},m("timeIntervalUnit",A.write,A.read,A.jsonValues))})],s.prototype,"timeIntervalUnit",void 0),e([t(Pe(B(te)))],s.prototype,"useViewTime",void 0),e([t({type:Number,json:m("verticalFieldOfView")})],s.prototype,"verticalFieldOfView",void 0),e([t({type:U.apiValues,json:j({},m("verticalMeasurementUnit",U.write,U.read,U.jsonValues))})],s.prototype,"verticalMeasurementUnit",void 0),e([t({type:String,json:m("videoPathPrefix")})],s.prototype,"videoPathPrefix",void 0),e([t({type:String,json:m("videoPathSuffix")})],s.prototype,"videoPathSuffix",void 0),e([t({type:ee,json:{origins:{"web-scene":{write:!1,read:!1}}}})],s.prototype,"visibilityTimeExtent",void 0),s=e([P("esri.layers.OrientedImageryLayer")],s);var Jt=s;export{C as a,b,z as c,ce as d,le as e,k as f,Kt as g,Jt as h};
