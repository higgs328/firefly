import{a as i}from"./chunk-AN3DAG6F.js";import{a,b as n}from"./chunk-6ZTUPVYX.js";import{a as c}from"./chunk-5DVGZXEZ.js";import{a as o}from"./chunk-ALWV3RJ2.js";import{a as t}from"./chunk-ZTOZWLEE.js";var l=class extends i{constructor(e){super(e),this._resources=null,this._transform=o()}get object(){return this._resources!=null?this._resources.object:null}get transform(){return this._transform}set transform(e){t(this._transform,e),this._resources!=null&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(this._resources==null)return;let e=this._resources.object,s=this.view._stage;s.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),e.visible=this.visible,s.addMany(e.geometries)}createResources(){this.destroyResources();let e=this.view._stage;if(!e)return;let s=new n(e,{pickable:!1,updatePolicy:c.SYNC}),r=new a({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial(u=>e.add(u)),e.add(r),s.add(r),r.visible=this.visible,this._resources={layer:s,object:r}}destroyResources(){let e=this.view._stage;this._resources!=null&&e&&(e.remove(this._resources.object),this._resources.layer.destroy(),this.forEachExternalMaterial(s=>{e.remove(s)}),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){this._resources!=null&&(this._resources.object.visible=e)}};export{l as a};
