import{a as l}from"./chunk-TG2UTNEO.js";import{a,b as c}from"./chunk-VTHXE323.js";var f=Symbol("widget"),g=Symbol("widget-test-data");var u=[],m={},s=new WeakMap;function w(e,o){let r=o.children;if(r?.length)for(let t=0;t<r.length;++t)r[t]=w(e,r[t]);else r=u;let n=o.vnodeSelector;if(v(n)){let t=o.properties||m,d=t.key||n,i={key:d,afterCreate:y,afterUpdate:S,afterRemoved:p,parentWidget:e,widgetConstructor:n,widgetProperties:c(a({},t),{key:d,children:r})};return{vnodeSelector:n.vnodeSelector,properties:i,children:void 0,text:void 0,domNode:null}}return o}function y(e,o,r,{parentWidget:n,widgetConstructor:t,widgetProperties:d}){let i=new t(d);i.container=e,s.set(e,i),i.afterCreate?.(i,e),n.addHandles(l(()=>p(e))),queueMicrotask(()=>{i[g].projector.renderNow()})}function S(e,o,r,{widgetProperties:n}){let t=s.get(e);t&&(t.set(n),t.afterUpdate?.(t,e))}function p(e){let o=s.get(e);o&&(o.afterRemoved?.(o,e),o.destroy(),s.delete(e))}function v(e){return typeof e=="function"&&e[f]}export{f as a,g as b,w as c,v as d};
