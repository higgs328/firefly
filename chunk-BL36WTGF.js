import{a as p,b as u,k as h}from"./chunk-TG45K3WR.js";import{a as o}from"./chunk-QGVBCWUY.js";import{H as n}from"./chunk-MYO4NP2N.js";import{e as s}from"./chunk-NFIPKH6V.js";import{l}from"./chunk-5QEXLALV.js";import{g as r}from"./chunk-XRGPJ3QY.js";var i=class extends n{constructor(t){super(t),this.tool=null,this._loggedUnsupportedErrorOnce=!1,t?.visible!=null&&(this.visible=t.visible)}initialize(){this.addHandles(p(()=>({ready:this.view!=null&&this.view.ready,supported:this.supported}),({ready:t,supported:e})=>{!t||e||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)},h))}destroy(){this.removeTool(),this.view=null}get active(){return this.tool!=null&&this.tool.active}get disabled(){return this.view==null||!this.view.ready||!this.supported}get supported(){return this.view==null||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(t){if(t===this.view)return;this.removeTool(),this._set("view",t);let e="tools";this.removeHandles(e),t!=null&&this.addHandles(t.tools.on("after-remove",d=>{d.item===this.tool&&this._set("tool",null)}),e)}set visible(t){this._set("visible",t),this.tool!=null&&(this.tool.visible=t)}createTool(t={interactive:!1}){if(this.removeTool(),this.view==null||!this.view.ready||!this.supported)return;let e=this.constructTool();e.created?(this._set("tool",e),this.view.tools.add(e)):t.interactive?(this._set("tool",e),this.view.addAndActivateTool(e),u(()=>e.created,()=>{e.active&&this.view!=null&&(this.view.activeTool=null)},{initial:!0,once:!0})):e.destroy()}removeTool(){let t=this.tool;if(t==null)return;let e=this.view?.tools;e!=null?e.remove(t):t.destroy(),this._set("tool",null)}logError(...t){r.getLogger(this).error(...t)}};o([s({constructOnly:!0})],i.prototype,"tool",void 0),o([s()],i.prototype,"active",null),o([s()],i.prototype,"disabled",null),o([s()],i.prototype,"supported",null),o([s({value:null})],i.prototype,"view",null),o([s({type:Boolean,value:!0})],i.prototype,"visible",null),i=o([l("esri.widgets.support.InteractiveToolViewModel")],i);export{i as a};
