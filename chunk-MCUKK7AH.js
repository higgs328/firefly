import{b as n,c as d,f as h}from"./chunk-TG45K3WR.js";import{a as o}from"./chunk-QGVBCWUY.js";import{H as r}from"./chunk-MYO4NP2N.js";import{e as a}from"./chunk-NFIPKH6V.js";import{l}from"./chunk-5QEXLALV.js";var i=class extends r{constructor(t){super(t),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(d(()=>this.view?.ui,"expand",t=>{let{target:e}=t;e&&e!==this&&e.expanded&&e.group&&e.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(t){this._set("autoCollapse",t),this._watchViewpoint()}set expanded(t){let e=!!t;this._set("expanded",e);let s=this.view?.ui;s&&s.emit("expand",{target:this}),this._viewpointHandleChange(e)}get state(){return this.view?.ready?"ready":"disabled"}set view(t){this._get("view")!==t&&(this._set("view",t),t&&n(()=>t.ready,()=>{this.view===t&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(t){this._viewpointHandle&&(t?n(()=>this.view?.stationary,()=>this._viewpointHandle?.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){let t="viewpoint";this.removeHandles(t),this._viewpointHandle=null;let{autoCollapse:e,view:s}=this;if(!s||!e)return;let p=h(()=>s.type==="3d"?s.camera:s.viewpoint,()=>this._collapse());this.addHandles(p,t),this._viewpointHandle=p}_collapse(){this.expanded=!1}};o([a({value:!1})],i.prototype,"autoCollapse",null),o([a({value:!1})],i.prototype,"expanded",null),o([a()],i.prototype,"group",void 0),o([a({readOnly:!0})],i.prototype,"state",null),o([a({value:null})],i.prototype,"view",null),i=o([l("esri.widgets.Expand.ExpandViewModel")],i);var H=i;export{H as a};
