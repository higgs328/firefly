function r(i){return i?.release&&typeof i.release=="function"}function h(i){return i?.acquire&&typeof i.acquire=="function"}var a=(()=>{class i{constructor(t,e,s,o=1,n=0){this._ctor=t,this._acquireFunction=e,this._releaseFunction=s,this.allocationSize=o,this._pool=new Array(n),this._initialSize=n;for(let l=0;l<n;l++)this._pool[l]=new this._ctor;this.allocationSize=Math.max(o,1)}destroy(){this.prune(0)}acquire(...t){let e;if(i.test.disabled)e=new this._ctor;else{if(this._pool.length===0){let s=this.allocationSize;for(let o=0;o<s;o++)this._pool[o]=new this._ctor}e=this._pool.pop()}return this._acquireFunction?this._acquireFunction(e,...t):h(e)&&e.acquire(...t),e}release(t){t&&!i.test.disabled&&(this._releaseFunction?this._releaseFunction(t):r(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let e=t;e<this._pool.length;++e){let s=this._pool[e];this._dispose(s)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}return i.test={disabled:!1},i})();export{a};
