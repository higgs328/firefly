import{a as O}from"./chunk-IL63CQ3W.js";import{a as qt}from"./chunk-AT3LJJPR.js";import{a as Zt,d as Wt,e as Gt,f as Qt}from"./chunk-SU2NZAJW.js";import{a as Nt}from"./chunk-4OC4J3KU.js";import{h as Kt}from"./chunk-QCN4VUQF.js";import{c as M}from"./chunk-2JW3DUYT.js";import{f as V,g as yt,h as Ut,i as Xt,j as Yt,k as Bt}from"./chunk-WSDIUTRN.js";import{a as _t}from"./chunk-UF3HHTD3.js";import{a as zt}from"./chunk-6OWZRPJO.js";import{a as P,d as Ht,e as gt}from"./chunk-67GIWMYL.js";import{a as vt}from"./chunk-H2NTHPNN.js";import{d as ft,e as ht}from"./chunk-OLOKUDVI.js";import{O as Ot,P as St,Q as Rt}from"./chunk-NJWTSROP.js";import{c as Vt}from"./chunk-MDSLION2.js";import{a as L}from"./chunk-AXYQJCCX.js";import{a as n,b as u}from"./chunk-5XCFNEYX.js";import{a as w}from"./chunk-GQL2MBZT.js";import{b as E}from"./chunk-EBIFNV2H.js";import{e as $t,g as Pt}from"./chunk-FB4M3WPV.js";import{b as I,c as F}from"./chunk-32OAXCA4.js";import{a as D,b as Lt,i as At,j as dt,k as ut}from"./chunk-TG45K3WR.js";import{a as Ft}from"./chunk-T7DXJKX7.js";import{a as s}from"./chunk-QGVBCWUY.js";import{e as a}from"./chunk-NFIPKH6V.js";import{l as p}from"./chunk-5QEXLALV.js";import{h as mt,j as $}from"./chunk-HEVQSRJ2.js";import{F as Et,b as pt,l as k,p as It,t as ct}from"./chunk-4PTIEWMT.js";import{a as lt,f as x}from"./chunk-VTHXE323.js";var f="esri-tooltip",Jt=`${f}-content`,jt=`${f}-content--input`,te=`${f}-content__header`,ee=`${f}-content__header__spacer`,xt=`${f}-content__header__actions`,S=`${f}-draw-header-actions`,oe=`${f}-table`,ie=`${f}-help-message`,ne=`${f}-help-message__text`,se=`${f}-help-message__icon`;var R=`${f}-field`,H={base:R,inputMode:`${R}--input`,title:`${R}__title`,value:`${R}__value`},d=class extends w{constructor(){super(...arguments),this.hidden=!1,this.mode="feedback"}render(){return n("div",{class:this.classes({[H.base]:!0,[H.inputMode]:this.mode==="input"})},n("div",{class:H.title,key:"title"},this.title),n("div",{class:H.value,key:"value"},this.value))}};s([a()],d.prototype,"hidden",void 0),s([a()],d.prototype,"mode",void 0),s([a()],d.prototype,"title",void 0),s([a()],d.prototype,"value",void 0),d=s([p("esri.views.interactive.tooltip.components.TooltipField")],d);var ge={base:`${f}-value-by-value`},C=class extends w{constructor(){super(...arguments),this.divider="\xD7"}render(){return n("div",{class:ge.base},n("span",null,this.left),n("span",null,this.divider),n("span",null,this.right))}};s([a()],C.prototype,"left",void 0),s([a()],C.prototype,"divider",void 0),s([a()],C.prototype,"right",void 0),C=s([p("esri.views.interactive.tooltip.components.ValueByValue")],C);var U=1,ae=6;function le(t,e){return{angleRelative:ye,direction:xe,directionRelative:Ce,directionRelativeBilateral:be,latitudeDecimalDegrees:Te,longitudeDecimalDegrees:we,area:(o,i)=>Bt(t,o,i??e.area),length:(o,i,r)=>yt(t,o,i??e.length,r),lengthRelative:(o,i)=>Ut(t,o,i??e.length),totalLength:(o,i)=>yt(t,o,i??e.length),verticalLength:(o,i)=>Xt(t,o,i??e.verticalLength),verticalLengthRelative:(o,i)=>Yt(t,o,i??e.verticalLength),percentage:ke,scalar:me,scale:De}}function ye(t){return I(t,lt({signDisplay:"exceptZero"},Ct(U)))}function xe(t){return V(t,t.rotationType,U)}function Ce(t){let e=Kt(t);return I(e,lt({style:"unit",unitDisplay:"narrow",unit:"degree",signDisplay:e>0?"never":"exceptZero"},Ct(U)))}function be(t){return V(t,t.rotationType,U)}function we(t){return pe(t,ue)}function Te(t){return pe(t,fe)}function ho(t){return ce(t,ue)}function vo(t){return ce(t,fe)}function pe(t,e){return V(gt(t,"degrees"),"geographic",ae,e,!1)}function ce(t,e){let i=e.normalize(gt(t,"degrees").value,void 0,!1);return me(P(i),ae)}function ke(t){return I(t.value,{style:"percent"})}function De(t){return I(t,{style:"percent",maximumFractionDigits:0})}function me(t,e){return I(t.value,Ct(e))}function Ct(t){return{minimumFractionDigits:t,maximumFractionDigits:t}}function _o({createQuantity:t,sanitize:e}){return(o,i)=>{if(o==null)return null;e&&(o=e(o));let r=F(o);return r==null?null:t(r,i)}}function go(t){return t.replaceAll(/[*^~°º]/g,"")}var Me=t=>{let e=`[-+]?[0-9${t.thousands}]+`;return t.decimal!==""&&(e+=`${t.decimal}[0-9]+`),new RegExp(`^(${e}\\s*)${t.separator}(\\s*${e})$`,"i")},Ie="\u202F",de=[];for(let t of[",","\\|","\\s+"])for(let e of["\\.",",",""])for(let o of["",",","\\.",Ie,"\\s+"])t!==e&&t!==o&&e!==o&&de.push({separator:t,decimal:e,thousands:o,pattern:Me({decimal:e,thousands:o,separator:t})});function yo(t){for(let{decimal:e,thousands:o,pattern:i}of de){i.lastIndex=0;let r=t.match(i);if(!r)continue;let c=F(re(r[1],e,o)),m=F(re(r[2],e,o));if(c!=null&&m!=null)return{x:P(c),y:P(m)}}return null}function re(t,e,o){let i=t.replaceAll(/[\s+]/g,"");return o!==""&&(i=i.replaceAll(o,"")),e!==""&&(i=i.replaceAll(e,".")),i}function xo(t){if(!t||F(t)!=null||!Zt())return null;let e=Wt(t),o=z(e?.latitude),i=z(e?.longitude);return i!=null&&o!=null?{latitude:o,longitude:i}:null}function Co(t){return z(Gt(t))}function bo(t){return z(Qt(t))}function z(t){return t!=null?Ht(t,"degrees","geographic"):null}var ue=new vt(-180,180),fe=new vt(-90,90);var bt=Symbol("dragHandles"),l=class extends w{constructor(){super(...arguments),this._focusAbortController=new AbortController,this._transitionInfo=null,this._mode="feedback",this._getFormatters=Nt(le),this._onHeaderPointerDown=t=>{let e=t.target;e instanceof HTMLElement&&e?.tagName?.toLowerCase()!=="calcite-button"&&(this.removeHandles(bt),e.setPointerCapture(t.pointerId),this.tooltip.onDragStart(t.clientX,t.clientY),this.addHandles([k(e,"pointermove",({clientX:o,clientY:i})=>{this.tooltip.onDrag(o,i)}),k(e,["pointerup","pointercancel"],o=>{this.removeHandles(bt),e.releasePointerCapture(t.pointerId),this.tooltip.onDragEnd()}),k(e,"touchstart",o=>o.preventDefault())],bt))},this._onDiscard=()=>{this.destroyed||(this.tooltip.emit("discard"),this.info.clearInputValues(),this.exitInputMode())},this._onCommit=(t,e)=>{if(this.destroyed)return;if(this.tooltip.emit("commit",{type:e}),e==="commit-and-exit")return void this.exitInputMode();if(e==="commit-on-blur")return;let o=this._getFocusableElements(),i=o.length,r=o.indexOf(t);if(r===-1)return void this.exitInputMode();let c=((r+(e==="commit-and-next"?1:-1))%i+i)%i;X(o.at(c))},this._onKeyDown=t=>{switch(t.code){case M.next:return this._onNextKey(t);case M.discard:return t.stopPropagation(),this._onDiscard()}}}get mode(){return this._mode}get _displayUnits(){let{displayUnits:t}=this.info.sketchOptions.values,e=_t(this.tooltip.view);return{length:t.length??e,verticalLength:t.verticalLength??e,area:t.area??e}}get _inputUnitInfos(){let t=this._messagesUnits,e=b=>({unit:b,abbreviation:zt(t,b,"abbr")}),{inputUnits:o}=this.info.sketchOptions.values,i=_t(this.tooltip.view),r=o.length??i,c=o.verticalLength??i,m=o.area??i;return{length:e(Ot(r)),verticalLength:e(St(c)),area:e(Rt(m)),angle:e("degrees")}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,sketchOptions:this.info.sketchOptions,onCommit:this._onCommit,onDiscard:this._onDiscard}}render(){let{visibleElements:t}=this.info.sketchOptions.tooltips,e=this._renderedContent,o=this._renderedActions,i=this._renderedHelpMessage,r=e.length>0,c=r||!!i,m=this.mode==="input";return n("div",{class:$t(Jt,m&&jt),onkeydown:this._onKeyDown,tabIndex:-1},m&&c&&t.header?n("div",{class:te,"data-testid":"tooltip-header",key:"header",onpointerdown:this._onHeaderPointerDown},n("calcite-button",{appearance:"transparent","data-testid":"tooltip-back-button",iconFlipRtl:"both",iconStart:"chevron-left",key:"discard-button",kind:"neutral",onclick:this._onDiscard,scale:"s",tabIndex:-1}),o.length>0?n(u,null,n("div",{class:ee,key:"spacer"}),n("div",{class:xt,key:"actions"},o)):null):null,r?n("div",{class:oe,key:"content"},...e):null,i)}destroy(){this._focusAbortController.abort(),this._transitionInfo?.transition.skipTransition()}_renderActions(){return null}loadDependencies(){return E({button:()=>import("./chunk-K3RCADAN.js"),icon:()=>import("./chunk-7Z2RNQA3.js"),input:()=>import("./chunk-SS6GQCI6.js")})}enterInputMode(t,e){return x(this,null,function*(){try{yield this._transitionTo("input",e),yield this._focusField(t)}catch(o){ct(o)}})}exitInputMode(){return x(this,arguments,function*({focusOnView:t=!0}={}){try{let{container:e,info:o}=this;o.clearInputValues();let i=t?e?.closest(".esri-view")?.querySelector(".esri-view-surface"):null;yield this._transitionTo("feedback"),i instanceof HTMLElement&&i.focus()}catch(e){ct(e)}})}_onNextKey(t){let e=this._getFocusableElements(),o=e.at(0),i=e.at(-1);o&&i&&(t.shiftKey?document.activeElement===o&&(t.preventDefault(),t.stopPropagation(),X(i)):document.activeElement===i&&(t.preventDefault(),t.stopPropagation(),X(o)))}get _renderedContent(){return he(this._renderContent())}get _renderedActions(){return he(this._renderActions())}get _renderedHelpMessage(){let{sketchOptions:t,visibleElements:e}=this.info;if(!e.helpMessage)return null;let o=t.tooltips.helpMessage??this._defaultHelpMessage;if(!o)return null;let i=t.tooltips.helpMessageIcon??"information";return n("div",{class:ie,key:"help-message"},i?n("calcite-icon",{class:se,icon:i,scale:"s"}):null,n("div",{class:ne},o))}get _defaultHelpMessage(){let{helpMessage:t,viewType:e}=this.info;if(t==null)return null;let o=e==="3d"?"helpMessages3d":"helpMessages2d";return this._messagesTooltip?.sketch?.[o]?.[t]}_focusField(t){return x(this,null,function*(){this._focusAbortController?.abort(),this._focusAbortController=new AbortController;let{signal:e}=this._focusAbortController;yield this._waitForInputs(),It(e);let o=this._getFocusableInputs(),i=t?o.find(r=>r.getAttribute("data-field-name")===t):o.at(0);yield X(i)})}_transitionTo(t,e){return x(this,null,function*(){if(this._mode===t&&!this._transitionInfo)return;if(this._transitionInfo?.mode===t)return this._transitionInfo.transition.finished;this._transitionInfo?.transition.skipTransition();let o=()=>x(this,null,function*(){this.destroyed||(this._mode=t,yield mt(),this.destroyed||(this.renderNow(),yield mt(),this.destroyed||e?.()))});if(!this.domNode?.firstChild||!document.startViewTransition||qt())return void(yield o());this.autoRenderingEnabled=!1;let i=this._transitionInfo={transition:document.startViewTransition(()=>x(this,null,function*(){this.destroyed||i!==this._transitionInfo||(this.autoRenderingEnabled=!0,yield o())})),mode:t};try{yield i.transition.finished}finally{i===this._transitionInfo&&(this._transitionInfo=null)}})}_waitForInputs(){return x(this,null,function*(){let t=()=>Array.from(this.domNode?.querySelectorAll("calcite-input")??[]);for(;t().length===0;)yield Et(Ee);yield $()})}_getFocusableInputs(){return Array.from(this.domNode?.querySelectorAll("calcite-input:not([read-only]):not([disabled])")??[])}_getFocusableElements(){let t=this.domNode?.querySelector(`.${S}`);return[...Array.from(t?.querySelectorAll(`.${xt} calcite-button:not([disabled])`)??[]),...this._getFocusableInputs()]}};function X(t){return x(this,null,function*(){yield t?.setFocus()})}function he(t){return(Array.isArray(t)?t:[t]).flat(10).filter(e=>!!e)}s([L("esri/core/t9n/Units"),a()],l.prototype,"_messagesUnits",void 0),s([L("esri/views/interactive/tooltip/t9n/Tooltip"),a()],l.prototype,"_messagesTooltip",void 0),s([a()],l.prototype,"info",void 0),s([a()],l.prototype,"tooltip",void 0),s([a()],l.prototype,"_mode",void 0),s([a()],l.prototype,"mode",null),s([a()],l.prototype,"_displayUnits",null),s([a()],l.prototype,"_inputUnitInfos",null),s([a()],l.prototype,"_formatters",null),s([a()],l.prototype,"fieldContext",null),s([a()],l.prototype,"_renderedContent",null),s([a()],l.prototype,"_renderedActions",null),s([a()],l.prototype,"_renderedHelpMessage",null),s([a()],l.prototype,"_defaultHelpMessage",null),l=s([p("esri.views.interactive.tooltip.content.TooltipContent")],l);var Ee=20;var Y=class extends l{_renderContent(){let{area:t,radius:e,xSize:o,ySize:i,visibleElements:r}=this.info,c=this._messagesTooltip.sketch,m=this._formatters;return n(u,null,r.radius&&e!=null?n(d,{title:c.radius,value:m.length(e)}):null,r.size&&o!=null&&i!=null?n(d,{title:c.size,value:n(C,{left:m.length(o),right:m.length(i)})}):null,r.area?n(d,{title:c.area,value:m.area(t)}):null)}};Y=s([p("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],Y);var g=`${f}-editable-field`,_={base:g,inputMode:`${g}--input`,feedbackMode:`${g}--feedback`,readOnly:`${g}--read-only`,locked:`${g}--locked`,title:`${g}__title`,value:`${g}__value`,valueContent:`${g}__value__content`,valueContentReadOnly:`${g}__value__content--read-only`,lockIcon:`${g}__lock-icon`,input:`${g}__input`,inputWrapper:`${g}__input-wrapper`,inputMessage:`${g}__input-message`,inputSuffix:`${g}__input-suffix`,button:`${g}__button`},wt={lock:"lock",unlock:"unlock"},y=class extends w{constructor(){super(...arguments),this._input=null,this._lock=null,this._onLockClick=()=>{this.field.toggleLock(this.context)},this._onLockAfterCreate=t=>{this._lock=t},this._onLockAfterRemoved=()=>{this._lock=null},this._onKeyDown=t=>{t.key===M.discard&&this.mode==="input"&&this._input&&this.context.onDiscard(this._input)},this._onInputKeyDown=t=>{let e=this._input;if(e)switch(t.key){case M.commit:return this.field.onCommit("commit-and-exit",e,this.context);case M.next:{t.preventDefault(),t.stopPropagation();let o=t.shiftKey?"commit-and-previous":"commit-and-next";return this.field.onCommit(o,e,this.context)}}},this._onInput=t=>{this.field.onInput(t.currentTarget.value)},this._onInputBlur=t=>{let e=this._input;e&&t.relatedTarget!==this._lock&&this.field.onCommit("commit-on-blur",e,this.context)},this._selectText=()=>{let t=()=>{this._input===document.activeElement&&this._input?.selectText()};t(),$().then(t)},this._onAfterCreate=t=>{this._input=t,t.addEventListener("paste",this._onPaste),t.addEventListener("beforeinput",this._onBeforeInput)},this._onAfterRemoved=t=>{t.removeEventListener("paste",this._onPaste),t.removeEventListener("beforeinput",this._onBeforeInput)},this._onPaste=t=>{let e=t.clipboardData?.getData("text");e&&this.field.parse(e,this.context)!=null&&(t.stopPropagation(),this.field.onInput(e))},this._onBeforeInput=t=>{(t.inputType==="historyUndo"||t.inputType==="historyRedo")&&!this.field.dirty&&t.preventDefault()}}initialize(){this.addHandles(D(()=>this._rawDisplayValue,()=>{let{committed:t,inputValue:e}=this.field;t||e||this._input!==document.activeElement||this._selectText()}))}loadDependencies(){return E({button:()=>import("./chunk-K3RCADAN.js"),icon:()=>import("./chunk-7Z2RNQA3.js"),input:()=>import("./chunk-SS6GQCI6.js"),"input-message":()=>import("./chunk-BQUCPREW.js")})}render(){let{field:t,mode:e}=this,o=e==="input",{locked:i,readOnly:r}=t;return n("div",{class:this.classes({[_.base]:!0,[_.feedbackMode]:e==="feedback",[_.inputMode]:e==="input",[_.locked]:i,[_.readOnly]:r})},n("div",{class:_.title,key:"title"},this._title),n("div",{class:_.value,key:"value",onkeydown:this._onKeyDown},o?this._renderValueInputMode():this._renderValueFeedbackMode()))}get _formattedValue(){return this.field.getFormattedValue(this.context)||ve}get _rawDisplayValue(){return this.field.getRawDisplayValue(this.context)}get _suffix(){return this.field.getSuffix(this.context)}get _title(){let{title:t}=this.field;return typeof t=="string"?t:t(this.context)}get _messages(){return this.context?.messages.sketch??{}}_renderValueFeedbackMode(){return n(u,null,n("div",{class:_.valueContent,key:"value-feedback"},this._formattedValue),this.field.locked&&this.mode!=="input"?n("calcite-icon",{class:_.lockIcon,icon:wt.lock,key:"icon",scale:"s"}):null)}_renderValueInputMode(){return this.field.readOnly?this._renderValueReadOnly():this._renderValueWritable()}_renderValueReadOnly(){return n("div",{class:this.classes(_.valueContent,_.valueContentReadOnly),key:"value-read-only"},this._formattedValue)}_renderValueWritable(){let{field:t}=this,e=this._messages,{name:o,invalid:i}=t;return n(u,null,n("div",{class:_.inputWrapper,key:"value-input"},n("calcite-input",{afterCreate:this._onAfterCreate,afterRemoved:this._onAfterRemoved,class:_.input,"data-field-name":o,"data-testid":`tooltip-field-${o}`,key:"input",onblur:this._onInputBlur,onfocus:this._selectText,onkeydown:this._onInputKeyDown,scale:"s",status:i?"invalid":"idle",type:"text",value:this._rawDisplayValue??ve,onCalciteInputInput:this._onInput}),i?n("calcite-input-message",{class:_.inputMessage,scale:"s",status:"invalid"},e.invalidValue):null),n("div",{class:_.inputSuffix,key:"suffix"},this._suffix),this._renderedLockButton)}get _renderedLockButton(){let{name:t,locked:e,lockable:o}=this.field;if(!o)return n("div",{key:"no-lock-button"});let i=this._messages,r=e?i.unlockConstraint:i.lockConstraint;return n("calcite-button",{afterCreate:this._onLockAfterCreate,afterRemoved:this._onLockAfterRemoved,alignment:"center",appearance:"transparent",class:_.button,"data-testid":`tooltip-field-${t}-lock`,iconStart:e?wt.lock:wt.unlock,key:"lock-button",kind:"neutral",label:r,onclick:this._onLockClick,scale:"s",tabIndex:-1,title:r})}};s([a()],y.prototype,"field",void 0),s([a()],y.prototype,"context",void 0),s([a()],y.prototype,"mode",void 0),s([a()],y.prototype,"_input",void 0),s([a()],y.prototype,"_lock",void 0),s([a()],y.prototype,"_formattedValue",null),s([a()],y.prototype,"_rawDisplayValue",null),s([a()],y.prototype,"_suffix",null),s([a()],y.prototype,"_title",null),s([a()],y.prototype,"_messages",null),s([a()],y.prototype,"_renderedLockButton",null),y=s([p("esri.views.interactive.tooltip.components.TooltipEditableField")],y);var ve="\u2014";function v(t){let e=t.fields.filter(o=>o?.visible===!0);return e.length===0?null:n(u,null,e.map(o=>n(y,{context:t.context,field:o,key:o.id,mode:t.mode})))}var B=class extends l{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(v,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.scale?e.scale:void 0],mode:o})}};B=s([p("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],B);var N=class extends l{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{elevation:i,visibleElements:r}=e;return n(v,{context:t,fields:[r.coordinates?e.effectiveX:void 0,r.coordinates?e.effectiveY:void 0,r.elevation?i:void 0],mode:o})}};N=s([p("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],N);var T=class extends w{constructor(t){super(t),this.visibleElements={}}render(){return n("div",{class:S},this._isElementVisible("direction")?n(Fe,{messages:this.messages,sketchOptions:this.sketchOptions}):null)}loadDependencies(){return E({button:()=>import("./chunk-K3RCADAN.js"),dropdown:()=>import("./chunk-F6T2J7EG.js"),"dropdown-item":()=>import("./chunk-XJK7VSUG.js"),"dropdown-group":()=>import("./chunk-KPY43GC2.js")})}_isElementVisible(t){return this.visibleElements?.[t]??this.sketchOptions.tooltips.visibleElements[t]}};function Fe(t){let{directionMode:e}=t.sketchOptions.values,o=t.messages?.sketch,i=o?.directionModeSelect?.title,r="absolute",c="relative";return n("calcite-dropdown",{key:"direction-mode",placement:"bottom-end",scale:"s",widthScale:"s",onCalciteDropdownSelect:m=>{let b=m.currentTarget.selectedItems?.[0]?.getAttribute("data-mode");t.sketchOptions.values.directionMode=b??"absolute"}},n("calcite-button",{alignment:"end",appearance:"transparent",iconStart:O[e],kind:"neutral",label:i,scale:"s",slot:"trigger",title:i}),n("calcite-dropdown-group",{selectionMode:"single"},n("calcite-dropdown-item",{"data-mode":c,"data-testid":"tooltip-direction-mode-relative",iconStart:O.relative,key:"relative",selected:e===c},o?.directionModeSelect?.relative),n("calcite-dropdown-item",{"data-mode":r,"data-testid":"tooltip-direction-mode-absolute",iconStart:O.absolute,key:"absolute",selected:e===r},o?.directionModeSelect?.absolute)))}s([L("esri/views/interactive/tooltip/t9n/Tooltip"),a()],T.prototype,"messages",void 0),s([a()],T.prototype,"sketchOptions",void 0),s([a()],T.prototype,"visibleElements",void 0),T=s([p("esri.views.interactive.tooltip.components.DrawHeaderActions")],T);var K=class extends l{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{xyMode:i,visibleElements:r}=e;return n(v,{context:t,fields:[...i==="direction-distance"?[r.direction?e.direction:void 0,r.distance?e.distance:void 0]:[r.coordinates?e.effectiveX:void 0,r.coordinates?e.effectiveY:void 0],r.elevation?e.elevation:void 0,r.area?e.area:void 0],mode:o})}_renderActions(){let{xyMode:t,sketchOptions:e}=this.info;return n(T,{sketchOptions:e,visibleElements:{direction:t==="direction-distance"}})}};K=s([p("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],K);var q=class extends l{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{xyMode:i,visibleElements:r}=e;return n(v,{context:t,fields:[...i==="direction-distance"?[r.direction?e.direction:void 0,r.distance?e.distance:void 0]:[r.coordinates?e.effectiveX:void 0,r.coordinates?e.effectiveY:void 0],r.elevation?e.elevation:void 0,r.totalLength?e.totalLength:void 0],mode:o})}_renderActions(){let{xyMode:t,sketchOptions:e}=this.info;return n(T,{sketchOptions:e,visibleElements:{direction:t==="direction-distance"}})}};q=s([p("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],q);var Z=class extends l{_renderContent(){let{area:t,xSize:e,ySize:o,visibleElements:i}=this.info,r=this._messagesTooltip.sketch,c=this._formatters;return n(u,null,i.size&&e!=null&&o!=null?n(d,{title:r.size,value:n(C,{left:c.length(e),right:c.length(o)})}):null,i.area?n(d,{title:r.area,value:c.area(t)}):null)}};Z=s([p("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],Z);var W=class extends l{_renderContent(){let{angle:t,visibleElements:e}=this.info,o=this._messagesTooltip.sketch;return n(u,null,e.rotation?n(d,{title:o.rotation,value:this._formatters.angleRelative(t)}):null)}};W=s([p("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],W);var G=class extends l{_renderContent(){let t=this.info,{visibleElements:e}=t,o=this._messagesTooltip.sketch,i=this._formatters;return n(u,null,e.size?n(d,{title:o.size,value:n(C,{left:i.length(t.xSize),right:i.length(t.ySize)})}):null,e.scale?n(d,{title:o.scale,value:n(C,{left:i.scale(t.xScale),right:i.scale(t.yScale)})}):null)}};G=s([p("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],G);var Q=class extends l{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(v,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0],mode:o})}};Q=s([p("esri.views.interactive.tooltip.content.TooltipContentMovePoint")],Q);var J=class extends l{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(v,{context:t,fields:[i.distance?e.distance:void 0,i.area?e.area:void 0,i.totalLength?e.totalLength:void 0],mode:o})}};J=s([p("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],J);var j=class extends l{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(v,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.area&&e.geometryType==="polygon"?e.area:null,i.totalLength&&e.geometryType==="polyline"?e.totalLength:null],mode:o})}};j=s([p("esri.views.interactive.tooltip.content.TooltipContentSelectedVertex")],j);var tt=class extends l{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(v,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.scale?e.scale:void 0],mode:o})}};tt=s([p("esri.views.interactive.tooltip.content.TooltipContentTransformMesh")],tt);var et=class extends l{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(v,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.size?e.size:void 0],mode:o})}};et=s([p("esri.views.interactive.tooltip.content.TooltipContentTransformPoint")],et);var ot=class extends l{_renderContent(){let{info:t}=this,{visibleElements:e}=t,o=this._messagesTooltip.sketch,i=this._formatters;return n(u,null,e.distance?n(d,{title:o.distance,value:i.length(t.distance)}):null)}};ot=s([p("esri.views.interactive.tooltip.content.TooltipContentTranslate")],ot);var it=class extends l{_renderContent(){let{distance:t,elevation:e,area:o,totalLength:i,visibleElements:r}=this.info,c=this._messagesTooltip.sketch,m=this._formatters;return n(u,null,r.distance?n(d,{title:c.distance,value:m.length(t)}):null,r.elevation&&e?.actual!=null?n(d,{title:c.elevation,value:m.verticalLength(e.actual)}):null,r.area&&o!=null?n(d,{title:c.area,value:m.area(o)}):null,r.totalLength&&i!=null?n(d,{title:c.totalLength,value:m.length(i)}):null)}};it=s([p("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],it);var nt=class extends l{_renderContent(){let{info:t}=this,{visibleElements:e}=t,o=this._messagesTooltip.sketch,i=this._formatters;return n(u,null,e.distance?n(d,{title:o.distance,value:i.length(t.distance)}):null)}};nt=s([p("esri.views.interactive.tooltip.content.TooltipContentTranslateXY")],nt);var st=class extends l{_renderContent(){let{info:t}=this,{visibleElements:e}=t,o=this._messagesTooltip.sketch;return n(u,null,e.distance?n(d,{title:o.distance,value:this._formatters.verticalLengthRelative(t.distance)}):null)}};st=s([p("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],st);function _e(t,e){if(e==null)return null;let o=document.createElement("div");switch(e.type){case"draw-point":case"draw-multipoint":return new N({tooltip:t,info:e,container:o});case"draw-polygon":return new K({tooltip:t,info:e,container:o});case"draw-polyline":return new q({tooltip:t,info:e,container:o});case"draw-mesh":return new B({tooltip:t,info:e,container:o});case"draw-rectangle":return new Z({tooltip:t,info:e,container:o});case"draw-circle":return new Y({tooltip:t,info:e,container:o});case"extent-rotate":return new W({tooltip:t,info:e,container:o});case"extent-scale":return new G({tooltip:t,info:e,container:o});case"move-point":return new Q({tooltip:t,info:e,container:o});case"selected-vertex":return new j({tooltip:t,info:e,container:o});case"transform-point":return new et({tooltip:t,info:e,container:o});case"transform-mesh":return new tt({tooltip:t,info:e,container:o});case"translate":return new ot({tooltip:t,info:e,container:o});case"translate-vertex":return new it({tooltip:t,info:e,container:o});case"translate-z":return new st({tooltip:t,info:e,container:o});case"translate-xy":return new nt({tooltip:t,info:e,container:o});case"reshape-edge-offset":return new J({tooltip:t,info:e,container:o})}}var A={base:`${f}`,ltr:`${f}--ltr`,rtl:`${f}--rtl`,debug:`${f}--debug`},Le=20,Ae=16,$e="bottom-end",h=class extends Ft.EventedAccessor{constructor(t){super(t),this.info=null,this.options=null,this.position=null,this.content=null,this._focused=!1,this.outerContainer=document.createElement("div"),this.debug=!1,this._lastPosition=null,this._rtl=!1,this._prevXY=[0,0]}initialize(){let{outerContainer:t}=this;this.addHandles([D(()=>this.view.overlay?.surface,e=>{t.remove(),e?.appendChild(t),this._rtl=Pt(e)},ut),D(()=>this.info,(e,o)=>{if(this.content!=null&&e!=null&&o!=null&&e.type===o.type)this.content.info=e;else{pt(this.content);let i=_e(this,e);i?(this.content=i,i.container&&t.appendChild(i.container),this.exitInputMode()):this.content=null}},ut),D(()=>({container:this.outerContainer,style:this._outerContainerStyle}),({container:e,style:o})=>{Object.assign(e.style,o)},dt),D(()=>({outerContainer:this.outerContainer,placement:this.effectivePlacement,effectiveOffset:this._effectiveOffset,rtl:this._rtl,debug:this.debug}),({outerContainer:e,placement:o,effectiveOffset:i,rtl:r,debug:c})=>{let{classList:m}=e;m.add(A.base),m.toggle(A.rtl,r),m.toggle(A.ltr,!r),m.toggle(A.debug,c),this.outerContainer.style.setProperty("--offset",`${i}px`),Vt(e),Oe(e,o)},dt),Lt(()=>this.mode==="feedback",()=>{this.position=null,this._clearOverride("effectivePlacement")},At),k(this.outerContainer,"paste",e=>{this.emit("paste",e)}),k(this.outerContainer,["focusin","focusout"],()=>{setTimeout(()=>{this._focused=this.content?.container?.contains(document.activeElement)??!1})})])}destroy(){this.info=null,this.content=pt(this.content),this.outerContainer.remove()}get mode(){return this.content?.mode??"feedback"}get focused(){return this._focused}get visible(){return this._outerContainerStyle.display!=="none"}get contentContainer(){return this.content?.container}get effectivePlacement(){let t=this.options?.placement;return t==="auto"?"bottom-end":t??$e}get _screenPoint(){let{inputManager:t}=this.view;return t?.multiTouchActive?null:t?.latestPointerLocation}get _effectiveOffset(){return this.options?.offset??Le}get _outerContainerStyle(){let t=this.position??this._screenPoint;return this._lastPosition=ht(t),t!=null&&this.content!=null?{display:"block",transform:`translate(${Math.round(t.x)}px, ${Math.round(t.y)}px)`}:{display:"none",transform:"none"}}clear(){this.info=null}enterInputMode(t){return x(this,null,function*(){let e=this.position??this._lastPosition??this._screenPoint,o=this.position=ht(e),{effectivePlacement:i}=this;this._override("effectivePlacement",i);let r=()=>{o&&(this.position=Pe(this.contentContainer,o,this._effectiveOffset,this.view),Object.assign(this.outerContainer.style,this._outerContainerStyle))};yield this.content?.enterInputMode(t,r)})}exitInputMode(t){return x(this,null,function*(){yield this.content?.exitInputMode(t)})}onDragStart(t,e){this._prevXY=[t,e]}onDrag(t,e){let o=t-this._prevXY[0],i=e-this._prevXY[1];this._prevXY=[t,e];let{position:r}=this;if(r){let{view:c}=this,m=t-c.position[0],b=e-c.position[1];if(m<0||m>c.width||b<0||b>c.height-Ae)return;this.position=ft(r.x+o,r.y+i)}}onDragEnd(){this._prevXY=[0,0]}};function Pe(t,e,o,i){if(!t||!i.container)return e;let r=t.getBoundingClientRect(),{left:c,top:m}=i.container.getBoundingClientRect(),{x:b,y:at}=e,Tt=r.left-c-o;Tt<0&&(b-=Tt);let kt=r.right-c+o-i.width;kt>0&&(b-=kt);let Dt=r.top-m-o;Dt<0&&(at-=Dt);let Mt=r.bottom-m+o-i.height;return Mt>0&&(at-=Mt),ft(b,at)}s([a({nonNullable:!0})],h.prototype,"view",void 0),s([a()],h.prototype,"info",void 0),s([a()],h.prototype,"options",void 0),s([a()],h.prototype,"position",void 0),s([a()],h.prototype,"content",void 0),s([a({readOnly:!0})],h.prototype,"mode",null),s([a()],h.prototype,"_focused",void 0),s([a({readOnly:!0})],h.prototype,"focused",null),s([a({readOnly:!0})],h.prototype,"outerContainer",void 0),s([a({readOnly:!0})],h.prototype,"contentContainer",null),s([a({readOnly:!0})],h.prototype,"effectivePlacement",null),s([a()],h.prototype,"debug",void 0),s([a()],h.prototype,"_lastPosition",void 0),s([a()],h.prototype,"_screenPoint",null),s([a()],h.prototype,"_rtl",void 0),s([a()],h.prototype,"_effectiveOffset",null),s([a()],h.prototype,"_outerContainerStyle",null),h=s([p("esri.views.interactive.Tooltip")],h);var Ve=["top","bottom","leading","trailing"].flatMap(t=>[rt(`${t}-start`),rt(t),rt(`${t}-end`)]);function rt(t){return`${A.base}--${t}`}function Oe({classList:t},e){Ve.forEach(o=>t.remove(o)),t.add(rt(e))}var il=h;export{ho as a,vo as b,_o as c,go as d,yo as e,xo as f,Co as g,bo as h,z as i,il as j};
