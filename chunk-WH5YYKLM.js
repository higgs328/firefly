import{b as le,c as ue,d as ce,h as Z}from"./chunk-RPYYOCCF.js";import{a as de,b as te,d as pe,h as N,j as D}from"./chunk-4SRR6EC6.js";import{h as ee,i as ne}from"./chunk-LMCM3VZM.js";import{d as _,f as J,g as W,h as Y,j as oe}from"./chunk-Y3KWVZKS.js";import{a as X,b as B}from"./chunk-ZWHAEUE3.js";import{b as ie}from"./chunk-2CC7WNFC.js";import{f as ae}from"./chunk-CCJU4DSH.js";import{a as F}from"./chunk-QGVBCWUY.js";import{e as A}from"./chunk-NFIPKH6V.js";import{l as se}from"./chunk-5QEXLALV.js";import{g as Q}from"./chunk-XRGPJ3QY.js";import{a as M,b as O}from"./chunk-VTHXE323.js";var R=1,P=1/111e3;function re(e){let{altitude:t,azimuth:r}=e,{hillshadeType:o,pixelSizePower:n=1,pixelSizeFactor:i=1,scalingType:l,isGCS:s,resolution:a}=e,u=o==="multi-directional"?2*e.zFactor:e.zFactor,{x:d,y:c}=a,m=u/(8*d),f=u/(8*c);if(s&&u>.001&&(m/=P,f/=P),l==="adjusted")if(s){let I=d*P,L=c*P;m=(u+I**n*i)/(8*I),f=(u+L**n*i)/(8*L)}else m=(u+d**n*i)/(8*d),f=(u+c**n*i)/(8*c);let x=(90-t)*Math.PI/180,p=Math.cos(x),b=(360-r+90)*Math.PI/180,y=Math.sin(x)*Math.cos(b),k=Math.sin(x)*Math.sin(b),w=[315,270,225,360,180,0],S=[60,60,60,60,60,90],C=new Float32Array([3,5,3,2,1,4]),g=C.reduce((I,L)=>I+L),z=C.map(I=>I/g),T=o==="multi-directional"?w.length:1,h=new Float32Array(6),V=new Float32Array(6),v=new Float32Array(6);if(o==="multi-directional")for(let I=0;I<T;I++)t=S[I],r=w[I],x=(90-t)*Math.PI/180,p=Math.cos(x),b=(360-r+90)*Math.PI/180,y=Math.sin(x)*Math.cos(b),k=Math.sin(x)*Math.sin(b),h[I]=p,V[I]=y,v[I]=k;else h.fill(p),V.fill(y),v.fill(k);return{resolution:a,factor:[m,f],sinZcosA:y,sinZsinA:k,cosZ:p,sinZcosAs:[...V],sinZsinAs:[...v],cosZs:[...h],weights:[...z],hillshadeType:["traditional","multi-directional"].indexOf(o)}}function j(e,t){let{width:r,height:o}=e,n=r*o,i=new Uint8Array(n),l=e.mask!=null,s;if(l){s=new Uint8Array(e.mask);for(let g=0;g<s.length;g++)s[g]&&(i[g]=1,s[g]=1)}let a=e.pixels[0],u=new Float32Array(n),d=new Float32Array(n),c,m=0;if(t){let{resolution:g}=t,z=g?(g.x+g.y)/2:1;m=200*t.zFactor/(z*z),c=new Float32Array(n)}let f=t?.curvatureType,x,p,b,y,k,w,S,C;for(let g=R;g<o-R;g++){let z=g*r;for(let T=R;T<r-R;T++){let h=z+T;if(!s||s[h]!==0){if(s){if(s[h-r-1]+s[h-r]+s[h-r+1]+s[h-1]+s[h+1]+s[h+r-1]+s[h+r]+s[h+r+1]<7){i[h]=0;continue}x=s[h-r-1]?a[h-r-1]:a[h],p=s[h-r]?a[h-r]:a[h],b=s[h-r+1]?a[h-r+1]:a[h],y=s[h-1]?a[h-1]:a[h],k=s[h+1]?a[h+1]:a[h],w=s[h+r-1]?a[h+r-1]:a[h],S=s[h+r]?a[h+r]:a[h],C=s[h+r+1]?a[h+r+1]:a[h]}else x=a[h-r-1],p=a[h-r],b=a[h-r+1],y=a[h-1],k=a[h+1],w=a[h+r-1],S=a[h+r],C=a[h+r+1];if(u[h]=b+k+k+C-(x+y+y+w),d[h]=w+S+S+C-(x+p+p+b),c!=null){let V=a[h],v=.5*(y+k)-V,I=.5*(p+S)-V;if(f==="standard")c[h]=-m*(v+I);else{let L=(-x+b+w-C)/4,G=(-y+k)/2,q=(p-S)/2,E=G*G,$=q*q,K=E+$;K&&(c[h]=f==="profile"?m*(v*E+I*$+L*G*q)/K:-m*(v*$+I*E-L*G*q)/K)}}}}}return{outMask:l?i:null,dzxs:u,dzys:d,curvatures:c}}function H(e,t,r){for(let o=0;o<r;o++)e[o*t]=e[o*t+1],e[(o+1)*t-1]=e[(o+1)*t-2];for(let o=1;o<t-1;o++)e[o]=e[o+t],e[o+(r-1)*t]=e[o+(r-2)*t]}function he(e,t){if(!_(e))return e;let{factor:r,sinZcosA:o,sinZsinA:n,cosZ:i,sinZcosAs:l,sinZsinAs:s,cosZs:a,weights:u}=re(t),[d,c]=r,m=t.hillshadeType==="traditional",{width:f,height:x}=e,p=new Uint8Array(f*x),{dzxs:b,dzys:y,outMask:k}=j(e);for(let w=R;w<x-R;w++){let S=w*f;for(let C=R;C<f-R;C++){let g=S+C;if(!k||k[g]){let z=b[g]*d,T=y[g]*c,h=Math.sqrt(1+z*z+T*T),V=0;if(m){let v=255*(i+n*T-o*z)/h;v<0&&(v=0),V=v}else{let v=s.length;for(let I=0;I<v;I++){let L=255*(a[I]+s[I]*T-l[I]*z)/h;L<0&&(L=0),V+=L*u[I]}}p[g]=255&V}}}return H(p,f,x),new B({width:f,height:x,pixels:[p],mask:k,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[new X(0,255)]})}function me(e,t,r,o){if(!_(e)||!_(t))return;let{min:n,max:i}=o,l=e.pixels[0],{pixels:s,mask:a}=t,u=s[0],d=255.00001/(i-n),c=new Uint8ClampedArray(u.length),m=new Uint8ClampedArray(u.length),f=new Uint8ClampedArray(u.length),x=r.length-1;for(let p=0;p<u.length;p++){if(a&&a[p]===0)continue;let b=Math.floor((u[p]-n)*d),[y,k]=r[b<0?0:b>x?x:b],w=l[p],S=w*k,C=S*(1-Math.abs(y%2-1)),g=w-S;switch(Math.floor(y)){case 0:c[p]=S+g,m[p]=C+g,f[p]=g;break;case 1:c[p]=C+g,m[p]=S+g,f[p]=g;break;case 2:c[p]=g,m[p]=S+g,f[p]=C+g;break;case 3:c[p]=g,m[p]=C+g,f[p]=S+g;break;case 4:c[p]=C+g,m[p]=g,f[p]=S+g;break;case 5:case 6:c[p]=S+g,m[p]=g,f[p]=C+g}}e.pixels=[c,m,f],e.updateStatistics()}function Ce(e,t){if(!_(e))return e;let r=t.zFactor,o=t.pixelSizePower??1,n=t.pixelSizeFactor??1,i=t.slopeType,l=t.isGCS,{x:s,y:a}=t.resolution,u=r/(8*s),d=r/(8*a);l&&Math.abs(r-1)<1e-4&&(u/=P,d/=P),i==="adjusted"&&(u=(r+s**o*n)/(8*s),d=(r+a**o*n)/(8*a));let{dzxs:c,dzys:m,outMask:f}=j(e),{width:x,height:p}=e,b=new Float32Array(x*p);for(let k=R;k<p-R;k++){let w=k*x;for(let S=R;S<x-R;S++){let C=w+S;if(!f||f[C]){let g=c[C]*u,z=m[C]*d,T=Math.sqrt(g*g+z*z);b[w+S]=i==="percent-rise"?100*T:57.2957795*Math.atan(T)}}}H(b,x,p);let y=new B({width:x,height:p,pixels:[b],mask:f,pixelType:"f32",validPixelCount:e.validPixelCount});return y.updateStatistics(),y}function Ie(e,t={}){if(!_(e))return e;let{resolution:r}=t,o=r?1/r.x:1,n=r?1/r.y:1,{dzxs:i,dzys:l,outMask:s}=j(e),{width:a,height:u}=e,d=new Float32Array(a*u);for(let c=R;c<u-R;c++){let m=c*a;for(let f=R;f<a-R;f++){let x=m+f;if(!s||s[x]){let p=i[x]*o,b=l[x]*n,y=-1;p===0&&b===0||(y=90-57.29578*Math.atan2(b,-p),y<0&&(y+=360),y===360?y=0:y>360&&(y%=360)),d[m+f]=y}}}return H(d,a,u),new B({width:a,height:u,pixels:[d],mask:s,pixelType:"f32",validPixelCount:e.validPixelCount,statistics:[new X(-1,360)]})}function we(e,t){if(!_(e))return e;let{curvatures:r,outMask:o}=j(e,t),{width:n,height:i}=e;H(r,n,i);let l=new B({width:n,height:i,pixels:[r],mask:o,pixelType:"f32",validPixelCount:e.validPixelCount});return l.updateStatistics(),l}function Re(e,t,r){let{hillshadeType:o,altitude:n,azimuth:i,zFactor:l,pixelSizeFactor:s,pixelSizePower:a,slopeType:u}=e;return{hillshadeType:o,altitude:n,azimuth:i,zFactor:l,pixelSizePower:a,pixelSizeFactor:s,scalingType:u==="scaled"?"adjusted":"none",resolution:t,isGCS:r}}var U=class extends ae{constructor(e){super(e)}bind(){let{rendererJSON:e}=this;if(!e)return{success:!1};let t;switch(this.lookup={rendererJSON:{}},e.type){case"uniqueValue":t=this._updateUVRenderer(e);break;case"rasterColormap":t=this._updateColormapRenderer(e);break;case"rasterStretch":t=this._updateStretchRenderer(e);break;case"classBreaks":t=this._updateClassBreaksRenderer(e);break;case"rasterShadedRelief":t=this._updateShadedReliefRenderer(e);break;case"vectorField":t=this._updateVectorFieldRenderer();break;case"flowRenderer":t=this._updateFlowRenderer()}return t}symbolize(e){let t=e?.pixelBlock;if(!fe(t))return t;if(e.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(t,e.simpleStretchParams);try{let r;switch(t.pixels.length>3&&(t=t.extractBands(e.bandIds??[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolizeColormap(t);break;case"classBreaks":r=this._symbolizeClassBreaks(t);break;case"rasterStretch":r=this._symbolizeStretch(t,e.bandIds);break;case"rasterShadedRelief":{let o=e.extent,n=o.spatialReference.isGeographic,i={x:(o.xmax-o.xmin)/t.width,y:(o.ymax-o.ymin)/t.height};r=this._symbolizeShadedRelief(t,{isGCS:n,resolution:i});break}}return r}catch(r){return Q.getLogger(this).error("symbolize",r.message),t}}simpleStretch(e,t){if(!fe(e))return e;try{return e.pixels.length>3&&(e=e.extractBands([0,1,2])),D(e,O(M({},t),{isRenderer:!0}))}catch(r){return Q.getLogger(this).error("symbolize",r.message),e}}generateWebGLParameters(e){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){let{indexedColormap:l,offset:s}=this.lookup.colormapLut||{};return{colormap:l,colormapOffset:s,isClassBreaks:this.rendererJSON.type==="classBreaks",type:"lut"}}let{pixelBlock:t,isGCS:r,resolution:o,bandIds:n}=e,{rendererJSON:i}=this;return i.type==="rasterStretch"?this._generateStretchWebGLParams(t,i,n):i.type==="rasterShadedRelief"?this._generateShadedReliefWebGLParams(i,r,o??void 0):i.type==="vectorField"?this._generateVectorFieldWebGLParams(i):null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){let t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(e){return this._isLUTChanged()&&!this.bind().success?e:W(e,this.lookup.colormapLut)}_symbolizeClassBreaks(e){let{canUseIndexedLUT:t}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?e:t?W(e,this.lookup.colormapLut):oe(e,this.lookup.remapLut??[])}_symbolizeStretch(e,t){let{rasterInfo:r}=this,{pixelType:o,bandCount:n}=r,i=this.rendererJSON,l=["u8","u16","s8","s16"].includes(o),s,a,{dra:u}=i,{gamma:d}=this.lookup;if(i.stretchType==="histogramEqualization"){let c=u?null:this.lookup?.histogramLut,m=N(i,{rasterInfo:r,pixelBlock:e,bandIds:t,returnHistogramLut:!c}),f=D(e,O(M({},m),{gamma:d,isRenderer:!0}));a=Y(f,{lut:u?m.histogramLut:c,offset:0})}else if(l){if(u){let c=N(i,{rasterInfo:r,pixelBlock:e,bandIds:t});s=te(O(M({pixelType:o},c),{gamma:d,rounding:"floor"}))}else if(this._isLUTChanged()){if(!this.bind().success)return e;s=this.lookup?this.lookup.stretchLut:null}else s=this.lookup?this.lookup.stretchLut:null;if(!s)return e;n>1&&t!=null&&t.length===e?.pixels.length&&s?.lut.length===n&&(s={lut:t.map(c=>s.lut[c]),offset:s.offset}),a=Y(e,s)}else{let c=N(i,{rasterInfo:r,pixelBlock:e,bandIds:t});a=D(e,O(M({},c),{gamma:d,isRenderer:!0}))}if(i.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;a=W(a,this.lookup?.colormapLut)}return a}_symbolizeShadedRelief(e,t){let r=this.rendererJSON,o=M(M({},r),t),n=he(e,o);if(!r.colorRamp)return n;let i;if(this._isLUTChanged(!0)){if(!this.bind().success)return n;i=this.lookup?this.lookup.hsvMap:null}else i=this.lookup?this.lookup.hsvMap:null;if(!i)return n;let l=this.rasterInfo.statistics?.[0]??{min:0,max:8e3};return me(n,e,i,l),n}_isVectorFieldData(){let{bandCount:e,dataType:t}=this.rasterInfo;return e===2&&(t==="vector-magdir"||t==="vector-uv")}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(e){let{bandCount:t,attributeTable:r,pixelType:o}=this.rasterInfo,n=e.field1;if(!n)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};let i=e.defaultSymbol,l=t===1&&["u8","s8"].includes(o);if(!le(this.rasterInfo,n)&&!l)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};let s=[];if(r!=null){let u=r.fields.find(d=>d.name.toLowerCase()==="value");if(!u)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};r.features.forEach(d=>{let c=e.uniqueValueInfos?.find(f=>String(f.value)===String(d.attributes[n])),m=c?.symbol?.color;m?s.push([d.attributes[u.name]].concat(m)):i&&s.push([d.attributes[u.name]].concat(i.color))})}else{if(n.toLowerCase()!=="value")return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not available.'};e.uniqueValueInfos?.forEach(u=>{let d=u?.symbol?.color;d?s.push([parseInt(""+u.value,10)].concat(d)):i&&s.push([parseInt(""+u.value,10)].concat(i?.color))})}if(s.length===0)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};let a=J({colormap:s});return this.lookup={rendererJSON:e,colormapLut:a},this.canRenderInWebGL=Z(a?.indexedColormap),{success:!0}}_updateColormapRenderer(e){if(!ce(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};let t=e.colormapInfos.map(o=>[o.value].concat(o.color)).sort((o,n)=>o[0]-n[0]);if(!t||t.length===0)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};let r=J({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=Z(r?.indexedColormap),{success:!0}}_updateShadedReliefRenderer(e){if(!ue(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(e.colorRamp){let t=ee(e.colorRamp,{interpolateAlpha:!0}),r=J({colormap:t}),o=ne(r.indexedColormap);this.lookup={rendererJSON:e,colormapLut:r,hsvMap:o}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(e){let{attributeTable:t,pixelType:r}=this.rasterInfo,o=t!=null?t.fields.find(l=>l.name.toLowerCase()==="value"):null,n=t!=null?t.fields.find(l=>l.name.toLowerCase()===e.field.toLowerCase()):null,i=o!=null&&n!==null;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(r)||i,tableValueField:o,tableBreakField:n}}_updateClassBreaksRenderer(e){let{attributeTable:t}=this.rasterInfo,{canUseIndexedLUT:r,tableValueField:o,tableBreakField:n}=this._analyzeClassBreaks(e),i=e.classBreakInfos;if(!i?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};let l=i.sort((c,m)=>c.classMaxValue-m.classMaxValue),s=l[l.length-1],a=e.minValue;if(!r){let c=[];for(let m=0;m<l.length;m++)c.push({value:l[m].classMinValue??a,mappedColor:l[m].symbol.color}),a=l[m].classMaxValue;return c.push({value:s.classMaxValue,mappedColor:s.symbol.color}),this.lookup={rendererJSON:e,remapLut:c},this.canRenderInWebGL=!1,{success:!0}}let u=[];if(t!=null&&o!=null&&n!==null&&o!==n){let c=o.name,m=n.name,f=l[l.length-1],{classMaxValue:x}=f;a=e.minValue;for(let p of t.features){let b=p.attributes[c],y=p.attributes[m],k=y===x?f:y<a?null:l.find(({classMaxValue:w})=>w>y);k&&u.push([b].concat(k.symbol.color))}}else{a=Math.floor(e.minValue);for(let c=0;c<l.length;c++){let m=l[c];for(let f=a;f<m.classMaxValue;f++)u.push([f].concat(m.symbol.color));a=Math.ceil(m.classMaxValue)}s.classMaxValue===a&&u.push([s.classMaxValue].concat(s.symbol.color))}let d=J({colormap:u,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:d},this.canRenderInWebGL=Z(d?.indexedColormap),{success:!0}}_updateStretchRenderer(e){let{stretchType:t,dra:r}=e;if(!(t==="none"||e.statistics?.length||ge(this.rasterInfo.statistics)||r))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};let o=e.histograms||this.rasterInfo.histograms;!ye(e.stretchType)||o?.length||r||(t="minMax");let{computeGamma:n,useGamma:i,colorRamp:l}=e,{gamma:s}=e;if(i&&n&&!s?.length){let d=e.statistics?.length?e.statistics:this.rasterInfo.statistics;s=pe(this.rasterInfo.pixelType,d)}let a=this.rasterInfo.pixelType,u=!r&&["u8","u16","s8","s16"].includes(a);if(t==="histogramEqualization"){let d=o.map(c=>de(c));this.lookup={rendererJSON:e,histogramLut:d}}else if(u){let d=N(e,{rasterInfo:this.rasterInfo}),c=te(O(M({pixelType:a},d),{gamma:i?s:null,rounding:"floor"}));this.lookup={rendererJSON:e,stretchLut:c}}if(l&&!xe(l)){let d=ee(l,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=J({colormap:d}),this.lookup.rendererJSON=e}return this.lookup.gamma=i&&s?.length?s:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(e,t,r){let o=null,n=null,i=this.lookup?.colormapLut;t.colorRamp&&i&&(o=i.indexedColormap,n=i.offset),t.stretchType==="histogramEqualization"&&(t=O(M({},t),{stretchType:"minMax"}));let{gamma:l}=this.lookup,s=!(!t.useGamma||!l?.some(S=>S!==1)),{minCutOff:a,maxCutOff:u,minOutput:d,maxOutput:c}=N(t,{rasterInfo:this.rasterInfo,pixelBlock:e,bandIds:r}),m=0;e!=null&&(m=e.getPlaneCount(),m===2&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));let{bandCount:f}=this.rasterInfo,x=Math.min(3,r?.length||m||f,f),p=o||s?1:255,b=new Float32Array(x);if(s&&l)for(let S=0;S<x;S++)l[S]>1?l[S]>2?b[S]=6.5+(l[S]-2)**2.5:b[S]=6.5+100*(2-l[S])**4:b[S]=1;a.length===1&&(a[2]=a[1]=a[0]),u.length===1&&(u[2]=u[1]=u[0]);let y=s&&l?[l[0],l[1]??l[0],l[2]??l[0]]:[1,1,1],k=s?[b[0],b[1]??b[0],b[2]??b[0]]:[1,1,1],w=u.map((S,C)=>u[C]===a[C]?0:(c-d)/(u[C]-a[C])/p);return{bandCount:x,minOutput:d/p,maxOutput:c/p,minCutOff:a,maxCutOff:u,factor:w,useGamma:s,gamma:y,gammaCorrection:k,colormap:o,colormapOffset:n,stretchType:t.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(e,t=!1,r={x:0,y:0}){let o=null,n=null,i=this.lookup?.colormapLut;e.colorRamp&&i&&(o=i.indexedColormap,n=i.offset);let l=O(M({},e),{isGCS:t,resolution:r}),s=re(l),a=this.rasterInfo.statistics?.[0];return O(M({},s),{minValue:a?.min??0,maxValue:a?.max??8e3,hillshadeType:e.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:o,colormapOffset:n})}_generateVectorFieldWebGLParams(e){let{style:t,inputUnit:r,outputUnit:o,visualVariables:n,symbolTileSize:i,flowRepresentation:l}=e,s,a=this.rasterInfo.statistics?.[0].min??0,u=this.rasterInfo.statistics?.[0].max??50,d=n?.find(y=>y.type==="sizeInfo")??{type:"sizeInfo",field:"Magnitude",maxDataValue:u,maxSize:.8*i,minDataValue:a,minSize:.2*i},c=d.minDataValue??a,m=d.maxDataValue??u,f=d.maxSize!=null&&d.minSize!=null?[d.minSize/i,d.maxSize/i]:[.2,.8];if(t==="wind_speed"){let y=(f[0]+f[1])/2;f[0]=f[1]=y}let x=c!=null&&m!=null?[c,m]:null;if(t==="classified_arrow")if(c!=null&&m!=null&&d!=null){s=[];let y=(d.maxDataValue-d.minDataValue)/5;for(let k=0;k<6;k++)s.push(d.minDataValue+y*k)}else s=[0,1e-6,3.5,7,10.5,14];let p=l==="flow_to"==(t==="ocean_current_kn"||t==="ocean_current_m")?0:Math.PI,b=n?.find(y=>y.type==="rotationInfo");return{breakValues:s,dataRange:x,inputUnit:r,outputUnit:o,symbolTileSize:i,symbolPercentRange:f,style:t||"single_arrow",rotation:p,rotationType:this.rasterInfo.storageInfo?.tileInfo&&this.rasterInfo.dataType==="vector-uv"?"geographic":b?.rotationType||e.rotationType,type:"vectorField"}}};F([A({json:{write:!0}})],U.prototype,"rendererJSON",void 0),F([A({type:ie,json:{write:!0}})],U.prototype,"rasterInfo",void 0),F([A({json:{write:!0}})],U.prototype,"lookup",void 0),F([A()],U.prototype,"canRenderInWebGL",void 0),U=F([se("esri.renderers.support.RasterSymbolizer")],U);var Be=U;function ye(e){return e==="percentClip"||e==="histogramEqualization"}function ge(e){return e!=null&&e.length>0&&e[0].min!=null&&e[0].max!=null}function fe(e){return _(e)&&e.validPixelCount!==0}function xe(e){return e.type==="algorithmic"&&["0,0,0,255","0,0,0"].includes(e.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(e.toColor.join(","))}export{P as a,re as b,he as c,me as d,Ce as e,Ie as f,we as g,Re as h,Be as i};
