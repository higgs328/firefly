import{a as B,b as I,i as R}from"./chunk-FKASYKK7.js";import"./chunk-LAAJ7BOG.js";import{L as k,e as f,f as C,g as P,p as M}from"./chunk-A2QQP5DF.js";import{a as q,c as A}from"./chunk-LTHAIW3V.js";import"./chunk-RRQS6PLL.js";import{c as w,ea as g}from"./chunk-WFHQTMIY.js";import"./chunk-XAZOVQGA.js";import{G as _,b as h,f as E,g as S,o as v,oa as b,v as N,z as L}from"./chunk-V3KEO7AJ.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-KVM6SHDX.js";import"./chunk-EQZWYK27.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-G4DZJMGT.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import"./chunk-VTHXE323.js";function j(y,e,n,t,r){return new G(e,n,t,r).processGeometry(y)}var G=class{constructor(e,n,t,r){this.m_interval=t,this.m_progressTracker=r,this.m_attribute=e,this.m_ord=n,(w.getComponentCount(this.m_attribute)<=n||n<0)&&v("LocateBetween: ordinate"),w.getInterpolation(this.m_attribute)===2&&v("LocateBetween: angular interpolation")}processGeometry(e){let n=e.getGeometryType();if(n===h.enumGeometryCollection)return this.processGeometryCollection(e);if(E(n)&&v("LocateBetween does not support Polygons and Envelopes."),e.isEmpty()||!e.hasAttribute(this.m_attribute))return new g({vd:e.getDescription()});if(S(n))return this.processSegment(e);switch(n){case h.enumPoint:return this.processPoint(e);case h.enumMultiPoint:return this.processMultiPoint(e);case h.enumPolyline:return this.processPolyline(e);default:N("LocateBetween")}}processPoint(e){let n=e.getAttributeAsDbl(this.m_attribute,this.m_ord);return this.m_interval.containsCoordinate(n)?new f({point:e}):new g({vd:e.getDescription()})}processMultiPoint(e){let n=null,t=-1,r=e.getAttributeStreamRef(this.m_attribute),u=w.getComponentCount(this.m_attribute);for(let l=0,s=0,i=e.getPointCount();l<i;++l,s+=u){let d=r.readAsDbl(s);this.m_interval.containsCoordinate(d)?t===-1&&(t=l):t>=0&&(n||(n=new f({vd:e.getDescription()})),n.addPoints(e,t,l),t=-1)}return t>=0&&(n||(n=new f({vd:e.getDescription()})),n.addPoints(e,t,-1)),n||new g({vd:e.getDescription()})}processPolyline(e){let n=e.queryInterval(this.m_attribute,this.m_ord);if(this.m_interval.contains(n))return e;if(!this.m_interval.isIntersecting(n))return new g({vd:e.getDescription()});let t=null,r=null,u=e.querySegmentIterator(),l=new k,s=new g,i=new g,d=new g,o=!0,a=!1;for(;u.nextPath();)for(o=!0,a=!1;u.hasNextSegment();){let m=u.nextSegment(),c=[null],p=this.processSegmentHelper(m,l,c,s);if(p!==h.enumUnknown)if(p===h.enumPoint){if(!o&&(r.getPointByVal(r.getPointCount()-1,i),i.equals(s))||(o=!0,a&&(m.queryStart(i),s.equals(i))))continue;m.queryEnd(i),a=s.equals(i),t?t.add(s):t=new f({point:s})}else p===h.enumLine&&(a=!1,r||(r=new M),o&&(t===null||t.isEmpty()||(t.getPointByVal(t.getPointCount()-1,i),c[0].queryStart(s),i.equals(s)&&t.removePoint(t.getPointCount()-1))),r.addSegment(c[0],o),m.queryEnd(i),c[0].queryEnd(d),o=!i.equals(d));else o=!0,a=!1}if(t!==null&&t.isEmpty()&&(t=null),t!==null&&r!==null){let m=new C;return m.addGeometry(r),m.addGeometry(t),m}return t!==null?t:r!==null?r:new g({vd:e.getDescription()})}processSegment(e){let n=e.getAttributeAsDbl(0,this.m_attribute,this.m_ord),t=e.getAttributeAsDbl(1,this.m_attribute,this.m_ord),r=Number.isNaN(n)?t:n,u=Number.isNaN(t)?n:t,l=new _;l.setCoords(r,u);let s=l.clone();if(s.intersect(this.m_interval),s.isEmpty())return new g({vd:e.getDescription()});if(l.equals(s))return e;let i=u-r,d=e.calculateLength2D();if(s.width()===0){let m=new g({vd:e.getDescription()}),c=(s.vmin-r)/i,p=e.lengthToT(c*d);return e.queryCoord(p,m),m}let o=(s.vmin-r)/i,a=(s.vmax-r)/i;return o>a&&(a=b(o,o=a)),o=e.lengthToT(o*d),a=e.lengthToT(a*d),e.cut(o,a)}processGeometryCollection(e){if(e.isEmpty()||!e.hasAttribute(this.m_attribute))return new g({vd:e.getDescription()});let n=P(e),t=new C;for(let r=n.next();r!==null;r=n.next()){let u=this.processGeometry(r);u.isEmpty()||t.addGeometry(u)}return t.isEmpty()?new g({vd:e.getDescription()}):t}processSegmentHelper(e,n,t,r){let u=e.getAttributeAsDbl(0,this.m_attribute,this.m_ord),l=e.getAttributeAsDbl(1,this.m_attribute,this.m_ord),s=Number.isNaN(u)?l:u,i=Number.isNaN(l)?u:l,d=new _;d.setCoords(s,i);let o=d.clone();if(o.intersect(this.m_interval),o.isEmpty())return h.enumUnknown;if(d.equals(o))return t[0]=e,h.enumLine;let a=i-s,m=e.calculateLength2D();if(o.width()===0){let T=(o.vmin-s)/a,O=T===1?1:e.lengthToT(T*m);return e.queryCoord(O,r),h.enumPoint}let c=(o.vmin-s)/a,p=(o.vmax-s)/a;return c>p&&(p=b(c,c=p)),c=c===1?1:e.lengthToT(c*m),p=p===1?1:e.lengthToT(p*m),e.queryCut(c,p,n),t[0]=n.get(),h.enumLine}},x=class{getOperatorType(){return 10801}accelerateGeometry(e,n,t){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}executeMany(e,n,t){return new D(e,n,t)}},D=class extends q{constructor(e,n,t){super(),this.m_collectionCursor=null,this.m_interval=n,this.m_progressTracker=t,this.m_inputGeoms=e,this.m_index=-1}tock(){return!0}getRank(){return 1}next(){if(this.m_collectionCursor){let t=this.m_collectionCursor.next();if(t)return t;this.m_collectionCursor=null}let e=this.m_inputGeoms.next();if(e===null)return null;L(e),this.m_index=this.m_inputGeoms.getGeometryID();let n=j(e,2,0,this.m_interval,this.m_progressTracker);return n.getGeometryType()===h.enumGeometryCollection?(this.m_collectionCursor=P(n),this.m_collectionCursor.next()):n}getGeometryID(){return this.m_index}},V=new x;function H(y,e){let n=V.executeMany(new A(y),e,null);return Array.from(n)}function U(){return V.supportsCurves()}function $(y,e,n){let t=y.map(I),r=B(y);return H(t,new _(e,n)).map(u=>R(u,r))}var ee=U();export{$ as executeMany,ee as supportsCurves};
