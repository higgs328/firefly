import{a as c,d as i}from"./chunk-PVDFCTA4.js";import{A as o,C as s,E as u,H as l,I as m}from"./chunk-76ATOSLU.js";function g(e,a,t){return a.imageData?m({mediaType:a.contentType||"image/png",isBase64:!0,data:a.imageData}):p(a.url,t)}function p(e,a){if(!s(e)){let t=D(a);if(t)return o(t,"images",e)}return c(e,a)}function f(e,a,t,r){if(u(e)){let n=l(e);if(!n)return;a.contentType=n.mediaType,a.imageData=n.data,t&&t.imageData===a.imageData&&t.url&&i(t.url,a,"url",r)}else i(e,a,"url",r)}var T={json:{read:{source:["imageData","url"],reader:g},write:{writer(e,a,t,r){f(e,a,this.source,r)}}}},w={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,a,t){let r={};return a.imageData&&(r.imageData=a.imageData),a.contentType&&(r.contentType=a.contentType),a.url&&(r.url=p(a.url,t)),r}}}};function D(e){if(!e)return null;let{origin:a,layer:t}=e;if(a!=="service"&&a!=="portal-item")return null;let r=t?.type;return r==="feature"||r==="stream"?t.parsedUrl?.path:r==="map-image"||r==="tile"?e.url?.path:null}export{T as a,w as b};
