import{a as I}from"./chunk-2EZ3JMAV.js";import{a as ct}from"./chunk-C6GAOMLO.js";import"./chunk-BNOCJUWF.js";import{a as dt}from"./chunk-EPKVBNFW.js";import{a as T}from"./chunk-TGSXSDDB.js";import"./chunk-VEL25CVB.js";import{a as y}from"./chunk-OBYF3P4E.js";import{a as d}from"./chunk-FHBFWDFD.js";import"./chunk-M3OAU7W5.js";import{b as Z}from"./chunk-TUF2Y2FX.js";import"./chunk-3JGYBNJA.js";import"./chunk-MIS6QMFE.js";import"./chunk-CELWVZPW.js";import{b as mt,d as ut}from"./chunk-DYTVXYAV.js";import"./chunk-PEW2PLAN.js";import"./chunk-CX5IFQZJ.js";import{b as lt}from"./chunk-MDSLION2.js";import{a as O}from"./chunk-AXYQJCCX.js";import{a as i}from"./chunk-5XCFNEYX.js";import{a as rt}from"./chunk-GQL2MBZT.js";import{b as ot}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import{f as nt}from"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import{c as at,d as k}from"./chunk-K5T5FD5C.js";import{a as et,b as it}from"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as R,j as st}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as s}from"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import{e as o}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as tt}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import{j as Y}from"./chunk-QBWJMFH5.js";import{a as L,b as B}from"./chunk-VTHXE323.js";var n="esri-time-slider",e={timeSlider:`${n}`,timeSliderOutOfBounds:`${n}--out-of-bounds`,timeSliderMode:`${n}__mode--`,timeSliderLayout:`${n}__layout--`,timeSliderRow:`${n}__row`,animation:`${n}__animation`,animationButton:`${n}__animation-button`,timeExtent:`${n}__time-extent`,timeExtentGroup:`${n}__time-extent-group`,timeExtentDate:`${n}__time-extent-date`,timeExtentTime:`${n}__time-extent-time`,timeExtentSeparator:`${n}__time-extent-separator`,playbackControls:`${n}__playback-controls`,min:`${n}__min`,minDate:`${n}__min-date`,minTime:`${n}__min-time`,slider:`${n}__slider`,sliderMajorTick:"majorTick",sliderMinorTick:"minorTick",max:`${n}__max`,maxDate:`${n}__max-date`,maxTime:`${n}__max-time`,previous:`${n}__previous`,previousButton:`${n}__previous-button`,next:`${n}__next`,nextButton:`${n}__next-button`,warning:`${n}__warning`,warningText:`${n}__warning-text`,hasActions:`${n}--has-actions`,actions:`${n}__actions`,actionsButton:`${n}__actions-button`};var xt=3,bt=858,gt=[{minor:{value:100,unit:"milliseconds"},major:{value:1,unit:"seconds"},format:{second:"numeric"}},{minor:{value:500,unit:"milliseconds"},major:{value:5,unit:"seconds"},format:{second:"numeric"}},{minor:{value:1,unit:"seconds"},major:{value:20,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:2,unit:"seconds"},major:{value:30,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:10,unit:"seconds"},major:{value:1,unit:"minutes"},format:{minute:"numeric"}},{minor:{value:15,unit:"seconds"},major:{value:5,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"minutes"},major:{value:20,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:5,unit:"minutes"},major:{value:2,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:15,unit:"minutes"},major:{value:6,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"hours"},major:{value:1,unit:"days"},format:{day:"numeric",month:"short"}},{minor:{value:6,unit:"hours"},major:{value:1,unit:"weeks"},format:{day:"numeric",month:"short"}},{minor:{value:1,unit:"days"},major:{value:1,unit:"months"},format:{month:"long"}},{minor:{value:2,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:3,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:4,unit:"days"},major:{value:3,unit:"months"},format:{month:"short",year:"numeric"}},{minor:{value:1,unit:"weeks"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"months"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:2,unit:"months"},major:{value:2,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"years"},major:{value:1,unit:"decades"},format:{year:"numeric"}},{minor:{value:2,unit:"years"},major:{value:5,unit:"decades"},format:{year:"numeric"}},{minor:{value:5,unit:"decades"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1,unit:"centuries"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:2,unit:"centuries"},major:{value:20,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:5,unit:"centuries"},major:{value:50,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:10,unit:"centuries"},major:{value:100,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:20,unit:"centuries"},major:{value:200,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:50,unit:"centuries"},major:{value:500,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:100,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:200,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:500,unit:"centuries"},major:{value:5e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1e3,unit:"centuries"},major:{value:1e4,unit:"centuries"},format:{era:"short",year:"numeric"}}],a=class extends rt{constructor(t,r){super(t,r),this._ignoreNextSliderUpdate=!1,this._slider=new ct({precision:0,visibleElements:{rangeLabels:!1},rangeLabelInputsEnabled:!1,thumbsConstrained:!1}),this._tickFormat=null,this.disabled=!1,this.labelFormatFunction=null,this.messages=null,this.messagesCommon=null,this.tickConfigs=null,this.timeVisible=!1,this.viewModel=new I}initialize(){this.addHandles([R(()=>this._slider.values,t=>{if(this._ignoreNextSliderUpdate)return void(this._ignoreNextSliderUpdate=!1);let r=this.viewModel.valuesToTimeExtent(t);this.timeExtent!=null?r!=null?this.timeExtent.equals(r)||(this.timeExtent=r):this.timeExtent=null:r!=null&&(this.timeExtent=r)}),R(()=>this.effectiveStops,()=>this._updateSliderSteps(),st)])}loadDependencies(){return ot({action:()=>import("./chunk-X23M5IZ6.js"),"action-menu":()=>import("./chunk-4SH4NG6C.js")})}destroy(){this._slider.destroy(),this._tickFormat=null}get _dateFormat(){return this._getIntlOptions("short-date")}get _timeFormat(){return this._getIntlOptions("long-time")}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}get effectiveStops(){return this.viewModel.effectiveStops}get fullTimeExtent(){return this.viewModel.fullTimeExtent}set fullTimeExtent(t){this.viewModel.fullTimeExtent=t}get icon(){return"clock"}set icon(t){this._overrideIfSome("icon",t)}get interactive(){return!(this.disabled||this.viewModel.state==="disabled"||this.timeZone===it)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){["auto","compact","wide"].includes(t)||(t="auto"),this._set("layout",t)}get loop(){return this.viewModel.loop}set loop(t){this.viewModel.loop=t}get mode(){return this.viewModel.mode}set mode(t){this.viewModel.mode=t}get playRate(){return this.viewModel.playRate}set playRate(t){this.viewModel.playRate=t}get stops(){return this.viewModel.stops}set stops(t){this.viewModel.stops=t}get tickFormats(){let{timeZone:t}=this;return gt.map(({minor:r,major:h,format:v})=>({minor:new Z(r),major:new Z(h),format:B(L({},v),{timeZone:t})}))}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(t){this.viewModel.timeExtent=t}get timeZone(){return this.viewModel.view?.timeZone??et}set timeZone(t){this._overrideIfSome("timeZone",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}next(){return this.viewModel.next()}play(){return this.viewModel.play()}previous(){return this.viewModel.previous()}stop(){return this.viewModel.stop()}render(){let{_slider:t,actions:r,domNode:h,effectiveStops:v,fullTimeExtent:u,interactive:f,messages:_,messagesCommon:m,mode:A,tickConfigs:E,timeExtent:l,timeVisible:w,viewModel:{state:U,timeExtentValues:M}}=this;if(u!=null){let{start:p,end:K}=u;if(p!=null&&K!=null){let j=p.getTime(),F=K.getTime(),Q=t.min!==j||t.max!==F;if(Q&&(t.min=j,t.max=F),E!=null)t.tickConfigs!==E&&(t.tickConfigs=E);else{let yt=(F-j)/(t.trackElement?.offsetWidth||400),b=this.tickFormats.find(C=>C.minor.toMilliseconds()>xt*yt)??this.tickFormats.at(-1),X=this._tickFormat!==b&&b!=null;if(X&&(this._tickFormat=b),Q||X){let C={mode:"position",values:this._getTickPositions(b.minor),labelsVisible:!1,tickCreatedFunction:($,D)=>{D?.classList.add(e.sliderMinorTick)}},_t={mode:"position",values:this._getTickPositions(b.major),labelsVisible:!0,tickCreatedFunction:($,D)=>{D?.classList.add(e.sliderMajorTick)},labelFormatFunction:$=>k($,b.format)};t.tickConfigs=[C,_t]}}}}let S=this.fullTimeExtent?.start==null||this.fullTimeExtent.end==null||this.timeExtent==null||this.timeExtent.isAllTime||this.timeExtent.isEmpty||this.timeExtent.start!=null&&(this.timeExtent.start<this.fullTimeExtent.start||this.timeExtent.start>this.fullTimeExtent.end)||this.timeExtent.end!=null&&(this.timeExtent.end>this.fullTimeExtent.end||this.timeExtent.end<this.fullTimeExtent.start);if(S)switch(this._ignoreNextSliderUpdate=!0,A){case"time-window":t.values=[t.min,t.max];break;case"instant":case"cumulative-from-end":t.values=[t.min];break;case"cumulative-from-start":t.values=[t.max]}else M!=null?Y(t.values,M)||(t.values=M):t.values=null;t.disabled=!f;let pt=U==="ready",g=U==="playing",c=S||!f||v==null||v.length===0,x=this.layout==="auto"?h.clientWidth<bt?"compact":"wide":this.layout,V=i("div",{class:e.animation},i("button",{"aria-disabled":c?"true":"false","aria-label":g?m.control.stop:m.control.play,bind:this,class:this.classes(d.widgetButton,e.animationButton,c&&d.buttonDisabled),disabled:c,onclick:this._playOrStopClick,title:g?m.control.stop:m.control.play,type:"button"},i("div",{class:this.classes((pt||c)&&y.play,g&&y.pause)}))),ht=this.labelFormatFunction!=null?i("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:e.timeExtentDate,"data-date":l?[l.start,l.end]:null,"data-layout":x,"data-type":"extent",key:"extent"}):l==null||l!=null&&l.isAllTime?[i("div",{class:this.classes(e.warning,y.noticeTriangle)}),i("div",{class:e.warningText,key:"warning-text"},_.noTimeExtent)]:l.isEmpty?[i("div",{class:this.classes(e.warning,y.noticeTriangle)}),i("div",{class:e.warningText,key:"warning-text"},_.emptyTimeExtent)]:[l.start!=null&&i("div",{class:e.timeExtentGroup,key:"start-date-group"},i("div",{class:e.timeExtentDate,key:"start-date"},this._formatDate(l.start)),w?i("div",{class:e.timeExtentTime,key:"start-time"},this._formatTime(l.start)):null),l.start!=null&&l.end!=null&&l.start.getTime()!==l.end.getTime()&&i("div",{class:e.timeExtentSeparator,key:"separator"},"\u2013"),l.end!=null&&(l.start==null||l.start.getTime()!==l.end.getTime())&&i("div",{class:e.timeExtentGroup,key:"end-date-group"},i("div",{class:e.timeExtentDate,key:"end-date"},this._formatDate(l.end)),w?i("div",{class:e.timeExtentTime,key:"end-time"},this._formatTime(l.end)):null)],N=i("div",{class:this.classes(e.timeExtent,!f&&d.buttonDisabled)},[ht]),vt=this.labelFormatFunction!=null?i("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:e.minDate,"data-date":u?.start,"data-layout":x,"data-type":"min",key:"min-date"}):u?.start!=null&&[i("div",{class:e.minDate,key:"min-date"},this._formatDate(u.start)),w&&i("div",{class:e.minTime,key:"min-time"},this._formatTime(u.start))],W=i("div",{class:this.classes(e.min,!f&&d.buttonDisabled)},[vt]),G=i("div",{class:e.slider},t.render()),ft=this.labelFormatFunction!=null?i("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:e.maxDate,"data-date":u?.end,"data-layout":x,"data-type":"max",key:"max-date"}):u?.end!=null&&[i("div",{class:e.maxDate,key:"max-date"},this._formatDate(u.end)),w&&i("div",{class:e.maxTime,key:"max-time"},this._formatTime(u.end))],H=i("div",{class:this.classes(e.max,!f&&d.buttonDisabled)},[ft]),P=i("div",{class:e.previous},i("button",{"aria-disabled":c?"true":"false","aria-label":m.pagination.previous,bind:this,class:this.classes(d.widgetButton,e.previousButton,(g||c)&&d.buttonDisabled),disabled:c,onclick:this._previousClick,title:m.pagination.previous,type:"button"},i("div",{class:y.reverse}))),q=i("div",{class:e.next},i("button",{"aria-disabled":c?"true":"false","aria-label":m.pagination.next,bind:this,class:this.classes(d.widgetButton,e.nextButton,(g||c)&&d.buttonDisabled),disabled:c,onclick:this._nextClick,title:m.pagination.next,type:"button"},i("div",{class:y.forward}))),z=r?.length>0,J=z&&i("div",{class:e.actions,title:m.options},i("calcite-action-menu",{class:e.actionsButton,label:m.options},r.toArray().map(p=>i("calcite-action",{bind:this,icon:p.icon,id:p.id,onclick:()=>this.viewModel.triggerAction(p),text:p.title,textEnabled:!0,title:p.title}))));return i("div",{afterCreate:p=>{this.addHandles(nt(p,()=>this.scheduleRender()))},"aria-label":_.widgetLabel,class:this.classes(e.timeSlider,d.widget,`${e.timeSliderMode}${A}`,`${e.timeSliderLayout}${x}`,!f&&d.disabled,S&&e.timeSliderOutOfBounds,z&&e.hasActions,lt())},x==="wide"&&i("div",{class:e.timeSliderRow},i("div",{class:e.playbackControls},[V,N,W,G,H,P,q]),J),x==="compact"&&[i("div",{class:e.timeSliderRow,key:"time-slider-row-1"},[N,J]),i("div",{class:e.timeSliderRow,key:"time-slider-row-2"},[G]),i("div",{class:e.timeSliderRow,key:"time-slider-row-3"},[W,P,V,q,H])])}updateWebDocument(t){this.viewModel?.updateWebDocument(t)}_createLabel(t){if(this.labelFormatFunction==null)return;let r=t.getAttribute("data-type"),h=t.getAttribute("data-layout"),v=t["data-date"];this.labelFormatFunction(v,r,t,h)}_formatDate(t){return k(t,this._dateFormat)}_formatTime(t){return k(t,this._timeFormat)}_getIntlOptions(t){let{timeZone:r}=this;return B(L({},at(t)),{timeZone:r})}_getTickPositions(t){let{fullTimeExtent:r}=this;if(r?.start==null||r.end==null)return[];let{start:h,end:v}=r,u=[],{value:f,unit:_}=t,m=ut(h,_,this.timeZone);for(;m.getTime()<=v.getTime();)m.getTime()>=h.getTime()&&u.push(m.getTime()),m=mt(m,f,_,this.timeZone);return u}_updateSliderSteps(){this._slider.steps=this.effectiveStops!=null&&this.effectiveStops.length>0?this.effectiveStops.map(t=>t.getTime()):null}_playOrStopClick(){switch(this.viewModel.state){case"ready":this.viewModel.play();break;case"playing":this.viewModel.stop();break;case"disabled":break;default:this.viewModel.state}}_previousClick(){this.viewModel.previous()}_nextClick(){this.viewModel.next()}};s([o()],a.prototype,"_dateFormat",null),s([o()],a.prototype,"_timeFormat",null),s([o()],a.prototype,"actions",null),s([o()],a.prototype,"disabled",void 0),s([o()],a.prototype,"effectiveStops",null),s([o()],a.prototype,"fullTimeExtent",null),s([o()],a.prototype,"icon",null),s([o({readOnly:!0})],a.prototype,"interactive",null),s([o()],a.prototype,"label",null),s([o()],a.prototype,"labelFormatFunction",void 0),s([o({value:"auto"})],a.prototype,"layout",null),s([o()],a.prototype,"loop",null),s([o(),O("esri/widgets/TimeSlider/t9n/TimeSlider")],a.prototype,"messages",void 0),s([o(),O("esri/t9n/common")],a.prototype,"messagesCommon",void 0),s([o()],a.prototype,"mode",null),s([o()],a.prototype,"playRate",null),s([o()],a.prototype,"stops",null),s([o()],a.prototype,"tickConfigs",void 0),s([o()],a.prototype,"tickFormats",null),s([o()],a.prototype,"timeExtent",null),s([o({nonNullable:!0})],a.prototype,"timeVisible",void 0),s([o()],a.prototype,"timeZone",null),s([o()],a.prototype,"view",null),s([o({type:I}),dt("trigger-action")],a.prototype,"viewModel",void 0),s([T()],a.prototype,"_playOrStopClick",null),s([T()],a.prototype,"_previousClick",null),s([T()],a.prototype,"_nextClick",null),a=s([tt("esri.widgets.TimeSlider")],a);var zt=a;export{zt as default};
