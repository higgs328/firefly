import{a as O}from"./chunk-PIWEOJIH.js";import{c as k}from"./chunk-OHURIINH.js";import{a as _}from"./chunk-26JWDTE3.js";import{a as v}from"./chunk-5DVGZXEZ.js";import{a as x}from"./chunk-D2FDGJMW.js";import"./chunk-WT37QSNF.js";import"./chunk-WYXAYMB7.js";import"./chunk-LXYWEX2U.js";import"./chunk-IBSCSNYA.js";import"./chunk-T3LMCJNQ.js";import"./chunk-BWSUZDSV.js";import"./chunk-5H7NDIGP.js";import"./chunk-ZYYN4NWF.js";import"./chunk-2GLWK7ZW.js";import"./chunk-BKWQOCBC.js";import"./chunk-XACQ2RJ5.js";import"./chunk-CX3G2QWN.js";import"./chunk-YTAJKLRN.js";import"./chunk-D6N4VI5S.js";import"./chunk-5YS73I3T.js";import"./chunk-3ZJ4NMBE.js";import"./chunk-HH3C3QEN.js";import"./chunk-4S7THJAS.js";import"./chunk-P7MVFIZJ.js";import"./chunk-FSW536RM.js";import"./chunk-VN5FPMRB.js";import"./chunk-N7DSOI7B.js";import"./chunk-F4HA2HQL.js";import"./chunk-CY62WWD7.js";import"./chunk-VDNRZCIE.js";import"./chunk-I2JD5OSI.js";import"./chunk-2MROBW6T.js";import"./chunk-QAHTJVUZ.js";import"./chunk-X4VZU4O3.js";import"./chunk-XE4T4457.js";import"./chunk-BWHHYBB5.js";import"./chunk-XWEUR6F7.js";import"./chunk-PSNQ2KG3.js";import"./chunk-MPI26GZ3.js";import"./chunk-2ZB26SH7.js";import"./chunk-ZVSQXQ5X.js";import"./chunk-2IWALBQY.js";import"./chunk-3HEFIJB6.js";import"./chunk-K6RQLPKJ.js";import"./chunk-7V6BRQYE.js";import"./chunk-PORMJXR6.js";import"./chunk-Y7XG5IWW.js";import"./chunk-LSV6EK6V.js";import"./chunk-X5NPIY3C.js";import"./chunk-5252J253.js";import"./chunk-7WCQBAQY.js";import"./chunk-VQSLKKYN.js";import"./chunk-JBAMJB5J.js";import"./chunk-VAOSSSLB.js";import"./chunk-AMISFAT3.js";import"./chunk-CUV3BSEW.js";import"./chunk-3ZJU5D2H.js";import"./chunk-2UHZH5L3.js";import"./chunk-DQINVX66.js";import"./chunk-CSFAHB4Y.js";import"./chunk-T5UBLAP4.js";import"./chunk-PTXLSCMJ.js";import"./chunk-DA3NC6W4.js";import"./chunk-6L543SC5.js";import"./chunk-FRN24G7D.js";import"./chunk-FGABE2LC.js";import"./chunk-CU7FHMWW.js";import"./chunk-CZMBPC27.js";import"./chunk-VANM5A4M.js";import"./chunk-VSD74FMI.js";import"./chunk-KALTBP5D.js";import"./chunk-O2J7LFYY.js";import"./chunk-BIU7ZFAB.js";import"./chunk-6FZTFPIH.js";import"./chunk-J5AEP4US.js";import"./chunk-YHRLMRSO.js";import"./chunk-KPT44MCK.js";import"./chunk-XKFJ6GWH.js";import"./chunk-SFANISLX.js";import"./chunk-UJ7KVQR6.js";import"./chunk-GSXOR3JU.js";import"./chunk-55OTJIMU.js";import"./chunk-EM2AEAFS.js";import"./chunk-YEPHAEAY.js";import"./chunk-TK4PPGQL.js";import"./chunk-ELCBU4NP.js";import"./chunk-GMZFCQJQ.js";import"./chunk-5WDH2LXO.js";import"./chunk-L7NOU4T2.js";import"./chunk-VGAXEXH3.js";import"./chunk-HMNTGQTR.js";import"./chunk-ZLIWNUFM.js";import"./chunk-GVSOJUIP.js";import"./chunk-GWSX6PRO.js";import"./chunk-G2JMPZCN.js";import"./chunk-IRQF7UTO.js";import"./chunk-3KOZOOEP.js";import"./chunk-OL54OOJH.js";import"./chunk-EG2DTURK.js";import"./chunk-NQ3CCFQA.js";import"./chunk-YVCKQBWT.js";import"./chunk-WOZSH7YY.js";import"./chunk-2PJRHNJW.js";import"./chunk-B2RVSTL3.js";import"./chunk-4XEE5PE3.js";import"./chunk-2CKJLDTO.js";import"./chunk-F6TN7E7K.js";import"./chunk-4LDVFWME.js";import"./chunk-HUUJBVXR.js";import"./chunk-7G56KLCZ.js";import"./chunk-L56OBJFS.js";import"./chunk-7HMNN4FJ.js";import"./chunk-UKAGN54W.js";import{a as F}from"./chunk-ULOK73M2.js";import"./chunk-PHMJ7KPL.js";import"./chunk-ESSDCWGF.js";import"./chunk-WVKBXQWE.js";import"./chunk-42SGGFLN.js";import"./chunk-EDOVNTC7.js";import"./chunk-FSWSNKJD.js";import"./chunk-FGEB67EG.js";import"./chunk-YEXMIDOT.js";import"./chunk-T7PUQGWM.js";import"./chunk-GV3ZFCVD.js";import"./chunk-SOEEM7Z7.js";import"./chunk-MVDZB4AK.js";import"./chunk-44A27HB7.js";import"./chunk-47NSYSFY.js";import"./chunk-QXNVQZT7.js";import"./chunk-QSQIQSC6.js";import"./chunk-AYNBEMCC.js";import"./chunk-LNYBTIG7.js";import"./chunk-VYZHOYXV.js";import"./chunk-ECA5I2I7.js";import"./chunk-Y7XRSFOZ.js";import"./chunk-YQNUGDFH.js";import"./chunk-QCZ3ZIGQ.js";import"./chunk-NIRJWS2D.js";import"./chunk-H3ZWZZ2B.js";import"./chunk-7SDNM7YV.js";import"./chunk-4NUW747S.js";import"./chunk-T6WMVIUG.js";import"./chunk-ONYJLWAD.js";import"./chunk-PHODKV66.js";import"./chunk-JPMGMA4B.js";import{a as y}from"./chunk-4YTM754S.js";import"./chunk-LAX5536Z.js";import"./chunk-N3HRYLNW.js";import"./chunk-4DBMALZW.js";import"./chunk-CVWWHM2V.js";import"./chunk-6OQYVEQJ.js";import"./chunk-YOXOWGT6.js";import"./chunk-EFZOSMYP.js";import"./chunk-WI7F4ZKJ.js";import"./chunk-MJ7M24NH.js";import"./chunk-GJH4QFRX.js";import"./chunk-T63F7663.js";import"./chunk-O4V2VBSK.js";import"./chunk-5TKRKB5E.js";import"./chunk-XAGMDNNR.js";import"./chunk-OP2TLIUN.js";import"./chunk-T2THIR6K.js";import"./chunk-LORHDXEB.js";import"./chunk-BBBPJI4H.js";import"./chunk-45BTW5EG.js";import"./chunk-TPFBHGDM.js";import"./chunk-73NLRHJD.js";import"./chunk-PNFEUBDF.js";import"./chunk-6RCCEJDL.js";import"./chunk-PQ2TNDUX.js";import"./chunk-6X6MKRQ3.js";import"./chunk-FQFHMHYU.js";import"./chunk-SZMEI3WL.js";import"./chunk-KKVGD67U.js";import"./chunk-MYOJWRDU.js";import"./chunk-L7UKJKHG.js";import"./chunk-V2IENAEU.js";import"./chunk-QAGQFNF2.js";import"./chunk-SY7JS2VW.js";import"./chunk-WK57SDN6.js";import"./chunk-AG4V3ZUO.js";import"./chunk-YWLMJ26A.js";import"./chunk-QAWNU3UJ.js";import"./chunk-HRQT4R6X.js";import"./chunk-44BHLWQ4.js";import"./chunk-5BPM64SU.js";import"./chunk-PMVHHMQJ.js";import"./chunk-NAFOM5UA.js";import"./chunk-DO7UF2F2.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import"./chunk-K57Z4J34.js";import"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-R3XLNYYB.js";import"./chunk-BMYVPMAK.js";import"./chunk-6F25LG6O.js";import"./chunk-XLL67PCY.js";import"./chunk-MCO7DSFO.js";import"./chunk-IIROCMOY.js";import"./chunk-5LG2P6MT.js";import"./chunk-GJ2QRXGN.js";import"./chunk-S52JRLJC.js";import"./chunk-E2QKN2KY.js";import"./chunk-PDQQY7RQ.js";import"./chunk-W5OI4BJ2.js";import"./chunk-RWCIDBNQ.js";import"./chunk-2NH7HOKA.js";import"./chunk-EM35R6FY.js";import"./chunk-HM5RIVQC.js";import"./chunk-CXOFHVIF.js";import"./chunk-EO2H4LIH.js";import"./chunk-DJW5LMRG.js";import"./chunk-DEH76MSI.js";import"./chunk-ALWV3RJ2.js";import"./chunk-2ZFXOJDB.js";import"./chunk-QXXXCEV5.js";import"./chunk-6B5XFA6F.js";import"./chunk-3JGYBNJA.js";import"./chunk-57VFBGF3.js";import"./chunk-GWBRHLNH.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-ZC6EBRE4.js";import"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-E7AX56GD.js";import"./chunk-IDVLLREH.js";import"./chunk-DWLSVYOY.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-K75TK42V.js";import"./chunk-OLOKUDVI.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-KVM6SHDX.js";import"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-DKGGDYJI.js";import"./chunk-5LA3PVK5.js";import"./chunk-IR6XCBC4.js";import"./chunk-C6JPAW54.js";import"./chunk-WD3OPXCN.js";import"./chunk-FA3WGIU4.js";import"./chunk-WWVPA6PE.js";import{m as f}from"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-O3EGNJTY.js";import"./chunk-WGAOVKGR.js";import{a as c}from"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-WTB3O6DJ.js";import"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{c as g}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as i}from"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import{e as a}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as p}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import{b as h}from"./chunk-4PTIEWMT.js";import{a as w}from"./chunk-TG2UTNEO.js";import{b as l}from"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{f as o}from"./chunk-VTHXE323.js";var s=class extends c{constructor(e){super(e),this.schedule=null,this._workerUpdating=!0}get updating(){return this._workerUpdating}initialize(){this._workerHandle=new m(this.schedule,this);let{layer:e,viewSpatialReference:r,renderSpatialReference:t}=this;this.addResolvingPromise(o(this,null,function*(){yield e.load();let{fullExtent:n}=e;yield this._workerHandle.invokeMethod("setup",{url:e.parsedUrl?.path??"",baseQuery:e.createQuery().toJSON(),viewSpatialReference:r.toJSON(),renderSpatialReference:t.toJSON(),viewingMode:this.viewingMode,objectIdField:e.objectIdField,capabilities:e.capabilities,timeInfo:e.timeInfo?.toJSON(),fieldsIndex:e.fieldsIndex.toJSON(),fullExtent:n?.toJSON()})})),this.addHandles(this._workerHandle.on("notify-updating",({updating:n})=>{this._workerUpdating=n}))}onTileTreeChange({added:e,removed:r}){if(e.length===0&&r.length===0)return;let t=e.map(H),n=r.map(H);this._workerHandle.invokeMethod("onTileTreeChange",{added:t,removed:n})}executeQuery(e,r){return o(this,null,function*(){let t=yield this._workerHandle.invokeMethod("executeQuery",e?.toJSON(),r),n=y.fromJSON(t);return this._ensureLayerOnFeatures(n),n})}executeQueryForIds(e,r){return o(this,null,function*(){return yield this._workerHandle.invokeMethod("executeQueryForIds",e?.toJSON(),r)})}executeQueryForCount(e,r){return o(this,null,function*(){return yield this._workerHandle.invokeMethod("executeQueryForCount",e?.toJSON(),r)})}executeQueryForExtent(e,r){return o(this,null,function*(){let{count:t,extent:n}=yield this._workerHandle.invokeMethod("executeQueryForExtent",e?.toJSON(),r);return{count:t,extent:f.fromJSON(n)}})}executeQueryForLatestObservations(e,r){return o(this,null,function*(){let t=yield this._workerHandle.invokeMethod("executeQueryForLatestObservations",e?.toJSON(),r),n=y.fromJSON(t);return this._ensureLayerOnFeatures(n),n})}_ensureLayerOnFeatures(e){let{layer:r}=this;for(let t of e.features)t.layer=r,t.sourceLayer=r}};i([a()],s.prototype,"updating",null),i([a({constructOnly:!0})],s.prototype,"schedule",void 0),i([a({constructOnly:!0})],s.prototype,"layer",void 0),i([a({constructOnly:!0})],s.prototype,"viewSpatialReference",void 0),i([a({constructOnly:!0})],s.prototype,"renderSpatialReference",void 0),i([a({constructOnly:!0})],s.prototype,"viewingMode",void 0),i([a({constructOnly:!0})],s.prototype,"dispatchRenderCommands",void 0),i([a()],s.prototype,"_workerUpdating",void 0),s=i([p("esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorkerHandle")],s);var m=class extends F{constructor(r,t){super("Feature3DPipelineWorker","setup",{},r,{strategy:"dedicated",client:t})}};function H({id:e,lij:r,extent:t}){return{id:e,lij:r,extent:t}}var d=class extends c{constructor(e){super(e),this._renderer=null,this.graphicsQuery={queryForSymbologySnapping:(r,t)=>{throw new l("unsupported-symbology-snapping")},executeQuery:(r,t)=>o(this,null,function*(){return yield this._workerHandle.executeQuery(r,t)}),executeQueryForIds:(r,t)=>o(this,null,function*(){return yield this._workerHandle.executeQueryForIds(r,t)}),executeQueryForCount:(r,t)=>o(this,null,function*(){return yield this._workerHandle.executeQueryForCount(r,t)}),executeQueryForExtent:(r,t)=>o(this,null,function*(){return yield this._workerHandle.executeQueryForExtent(r,t)}),executeQueryForLatestObservations:(r,t)=>o(this,null,function*(){return yield this._workerHandle.executeQueryForLatestObservations(r,t)})},this.maximumNumberOfFeatures=1e3}initialize(){if(this.layerView.layer.geometryType!=="point")throw new l("unsupported-geometry-type",`${this.layerView.layer.geometryType} is not supported`);this.addResolvingPromise(this.setup())}destroy(){this.removeAllHandles(),this._workerHandle.destroy(),h(this._renderer)}setup(){return o(this,null,function*(){let{layer:e,view:r}=this.layerView,{spatialReference:t,renderSpatialReference:n,resourceController:S}=r,b=r.state.viewingMode;if(this._renderer=new x({view:r,layerUid:e.uid}),e.type!=="feature")throw new Error("Only FeatureLayer is supported");let Q=new s({schedule:u=>S.immediate.schedule(u),layer:e,viewSpatialReference:t,renderSpatialReference:n,viewingMode:b,dispatchRenderCommands:u=>this._renderer.executeRenderCommands(u)});this._workerHandle=yield Q.when(),this.addHandles([this.layerView.view.featureTiles.addClient(),g(()=>this.layerView.view.featureTiles.tiles,"change",u=>{this._workerHandle.onTileTreeChange(u)},{onListenerAdd:u=>this._workerHandle.onTileTreeChange({added:u.toArray(),removed:[]}),onListenerRemove:u=>this._workerHandle.onTileTreeChange({added:[],removed:u.toArray()})})])})}get legendEnabled(){return!1}get hasAllFeatures(){return!1}get hasAllFeaturesInView(){return!1}get hasFullGeometries(){return!1}get symbologySnappingSupported(){return!1}get scaleVisibilitySuspended(){return!1}get suspendInfo(){return{}}get updating(){return this._workerHandle.updating}get dataUpdating(){return!1}get updatePolicy(){return v.ASYNC}get maximumNumberOfFeaturesExceeded(){return!1}get updatingProgressValue(){return 1}get usedMemory(){return this._renderer?.usedMemory??0}get unloadedMemory(){return 0}get ignoresMemoryFactor(){return!0}get totalFeatures(){return this._renderer?.totalFeatures??0}get performanceInfo(){let e=this.totalFeatures;return new O(new _(this.usedMemory,e,e,this.maximumNumberOfFeatures,0,null),e,e,this.maximumNumberOfFeaturesExceeded,"tiles","n/a")}get suspendResumeExtentMode(){return"computed"}forEachGraphic(e){}findGraphic(e){return null}highlight(e){return k}maskOccludee(e){return w()}whenGraphicBounds(e,r){return o(this,null,function*(){return null})}computeAttachmentOrigin(e,r){return null}elevationAlignPointsInFeatures(e,r){throw new l("unsupported-elevation-alignment")}doRefresh(e){return o(this,null,function*(){})}setVisibility(e,r){}getMissingAttributesForFeature(e){return null}getHydratedGeometry(e){return null}};i([a()],d.prototype,"layerView",void 0),i([a()],d.prototype,"updating",null),i([a()],d.prototype,"totalFeatures",null),d=i([p("esri.views.3d.layers.graphics.pipeline.Feature3DPipeline")],d);export{d as Feature3DPipeline};
