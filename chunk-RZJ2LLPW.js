import{a as Ve}from"./chunk-UVKF37MY.js";import"./chunk-GRP3SJZF.js";import"./chunk-LSYBUGGM.js";import"./chunk-OLOYQ6KE.js";import"./chunk-QAJCY744.js";import"./chunk-E7DFFC2Y.js";import"./chunk-7T2VXP7X.js";import{a as he,g as Pe}from"./chunk-SJAM4JSC.js";import"./chunk-2UKYPYIL.js";import"./chunk-5C7K2G4S.js";import{h as Fe}from"./chunk-3HZYMAA2.js";import"./chunk-4A4DMQSS.js";import{a as te,b as Ue}from"./chunk-PT2T74VZ.js";import"./chunk-B3VPRADQ.js";import"./chunk-HJQNAAJT.js";import"./chunk-KP75LCOH.js";import"./chunk-ES4WUTEM.js";import{a as ae}from"./chunk-FHBFWDFD.js";import"./chunk-J4NXMDBD.js";import{i as ye}from"./chunk-5AFOYCWC.js";import"./chunk-Z3MWEX65.js";import"./chunk-YB6RTOHR.js";import"./chunk-5VU7MVV7.js";import"./chunk-4Y7EKSO4.js";import"./chunk-63F5HAQH.js";import"./chunk-E56W4PK4.js";import"./chunk-4D3QHJI2.js";import"./chunk-E2J2V7JN.js";import"./chunk-KLZGQ7M6.js";import"./chunk-N36GL6VL.js";import"./chunk-UX3QUEDM.js";import"./chunk-YZJDOXQC.js";import"./chunk-6ZY36ZHO.js";import"./chunk-6RHGQ4Z5.js";import"./chunk-G23ELQMS.js";import"./chunk-PZOK2JKH.js";import"./chunk-FJUYECJ6.js";import"./chunk-GAVFKWSK.js";import"./chunk-DK4DGLAO.js";import"./chunk-ZM24RY22.js";import"./chunk-7Y6S2GNA.js";import"./chunk-VOB6IBIW.js";import"./chunk-63B3IOWG.js";import"./chunk-PE276TWH.js";import"./chunk-BMZ3PE5Y.js";import"./chunk-EHG7JRYJ.js";import"./chunk-FNY6LFKI.js";import"./chunk-J2AEVBSH.js";import"./chunk-5ODXFRPI.js";import"./chunk-E5QCV5LT.js";import"./chunk-QS3EYJPF.js";import"./chunk-HJJZ2AXH.js";import"./chunk-TPNSUEHH.js";import"./chunk-SMVNQSZ4.js";import"./chunk-Z2QGLRDB.js";import"./chunk-7IDFDPA3.js";import"./chunk-VL2YL74P.js";import"./chunk-P2AJD2R2.js";import"./chunk-UMJIJLDA.js";import"./chunk-E5NFS3KN.js";import"./chunk-HQHD6BMN.js";import"./chunk-AIKKGGPG.js";import"./chunk-RDGG4TVD.js";import"./chunk-3IQFPOUU.js";import"./chunk-I4CY6X6S.js";import"./chunk-VQ4QGNRX.js";import"./chunk-GNEAU6X4.js";import"./chunk-5RH7OPHX.js";import"./chunk-4KXJ537H.js";import"./chunk-JIRULGDT.js";import"./chunk-QJGOWIJD.js";import"./chunk-DAEIFJ76.js";import"./chunk-YHWE4TIZ.js";import"./chunk-B2QMHWYJ.js";import"./chunk-QML26MQC.js";import"./chunk-RNZY2XUD.js";import"./chunk-JXPUHKCT.js";import"./chunk-XR5FT7TQ.js";import"./chunk-LAX5536Z.js";import"./chunk-N3HRYLNW.js";import"./chunk-4DBMALZW.js";import"./chunk-CVWWHM2V.js";import"./chunk-6OQYVEQJ.js";import"./chunk-YOXOWGT6.js";import"./chunk-EFZOSMYP.js";import"./chunk-WI7F4ZKJ.js";import"./chunk-MJ7M24NH.js";import"./chunk-GJH4QFRX.js";import"./chunk-T63F7663.js";import"./chunk-O4V2VBSK.js";import"./chunk-5TKRKB5E.js";import"./chunk-XAGMDNNR.js";import"./chunk-OP2TLIUN.js";import"./chunk-T2THIR6K.js";import"./chunk-LORHDXEB.js";import"./chunk-BBBPJI4H.js";import"./chunk-45BTW5EG.js";import"./chunk-TPFBHGDM.js";import"./chunk-73NLRHJD.js";import"./chunk-PNFEUBDF.js";import"./chunk-6RCCEJDL.js";import"./chunk-PQ2TNDUX.js";import"./chunk-6X6MKRQ3.js";import"./chunk-FQFHMHYU.js";import"./chunk-SZMEI3WL.js";import"./chunk-KKVGD67U.js";import"./chunk-MYOJWRDU.js";import"./chunk-L7UKJKHG.js";import"./chunk-V2IENAEU.js";import"./chunk-QAGQFNF2.js";import"./chunk-SY7JS2VW.js";import"./chunk-WK57SDN6.js";import"./chunk-AG4V3ZUO.js";import"./chunk-YWLMJ26A.js";import"./chunk-QAWNU3UJ.js";import"./chunk-HRQT4R6X.js";import"./chunk-44BHLWQ4.js";import"./chunk-5BPM64SU.js";import"./chunk-PMVHHMQJ.js";import"./chunk-NAFOM5UA.js";import"./chunk-DO7UF2F2.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import"./chunk-K57Z4J34.js";import"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-R3XLNYYB.js";import"./chunk-BMYVPMAK.js";import{a as de}from"./chunk-6F25LG6O.js";import"./chunk-6KRFVLII.js";import"./chunk-GJ2QRXGN.js";import"./chunk-3JGYBNJA.js";import"./chunk-F5AJITOA.js";import"./chunk-IHATPE6U.js";import"./chunk-PU4AK46X.js";import"./chunk-73K3NWCV.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-ZC6EBRE4.js";import"./chunk-ZAZJB7CV.js";import"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-QKO56XO6.js";import"./chunk-JRGT3GTH.js";import"./chunk-K75TK42V.js";import"./chunk-VV5G7VY5.js";import{a as A}from"./chunk-OLOKUDVI.js";import"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-KVM6SHDX.js";import"./chunk-POX73EYJ.js";import"./chunk-NKUXRYJG.js";import"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-DKGGDYJI.js";import"./chunk-5LA3PVK5.js";import"./chunk-IR6XCBC4.js";import"./chunk-C6JPAW54.js";import"./chunk-WD3OPXCN.js";import"./chunk-FA3WGIU4.js";import"./chunk-WWVPA6PE.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-MDSLION2.js";import{a as Z}from"./chunk-AXYQJCCX.js";import{a as s}from"./chunk-5XCFNEYX.js";import{a as w}from"./chunk-GQL2MBZT.js";import{b as Ne}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import{b as Me}from"./chunk-CFRDSUTM.js";import{g as ce}from"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import{a as Be}from"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import{a as ie}from"./chunk-7P44K2YD.js";import{b as Ae}from"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as pe,c as me,j as $e}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as o}from"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import{e as l}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as L}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import{d as Te}from"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{a as j,c as Ce}from"./chunk-VTHXE323.js";var f="esri-legend--card",se="esri-legend",p={activated:`${f}__carousel-indicator--activated`,base:f,stacked:`${se}--stacked`,carouselTitle:`${f}__carousel-title`,indicator:`${f}__carousel-indicator`,intervalSeparator:`${f}__interval-separator`,imageryLayerStretchedImage:`${f}__imagery-layer-image--stretched`,imageLabel:`${f}__image-label`,layerCaption:`${f}__layer-caption`,labelElement:`${f}__label-element`,layerRow:`${f}__layer-row`,labelCell:`${f}__label-cell`,message:`${f}__message`,rampLabel:`${f}__ramp-label`,section:`${f}__section`,relationshipSection:`${f}__relationship-section`,serviceCaptionText:`${f}__service-caption-text`,serviceContent:`${f}__service-content`,service:`${f}__service`,groupLayer:`${f}__group-layer`,groupLayerChild:`${f}__group-layer-child`,symbol:`${f}__symbol`,sizeRampRow:`${f}__size-ramp-row`,symbolRow:`${f}__symbol-row`,symbolCell:`${f}__symbol-cell`,carousel:`${f}__carousel`,carouselItem:`${f}__carousel-item`,indicatorContainer:`${f}__carousel-indicator-container`,intervalSeparatorsContainer:`${f}__interval-separators-container`,relationshipLabelContainer:`${f}__relationship-label-container`,labelContainer:`${f}__label-container`,serviceCaptionContainer:`${f}__service-caption-container`,symbolContainer:`${f}__symbol-container`,colorRampContainer:`${f}__color-ramp-container`,sizeRampContainer:`${f}__size-ramp-container`,sizeRampPreview:`${f}__size-ramp-preview`,pieChartRampPreview:`${f}__pie-chart-ramp-preview`,rampContainer:`${se}__ramps`,sizeRampHorizontal:`${se}__size-ramp--horizontal`,rampLabelsContainer:`${se}__ramp-labels`,layerInfo:`${se}__layer-cell ${se}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function Ye(e,t){return t}function v(e){let t=this;e.appendChild(t)}function B(e,t,r){if(!t)return;if(typeof t=="number")return t;if(typeof t=="string")return Te(t);if("value"in t||"unit"in t)return ie(e.dotValue,t);if("colorName"in t&&"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:void 0;let a=null;return Ye(t,r)?a=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:Re(t,r)&&(a=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),a?ie(a==="showField"?"{field}":e[a],{field:t.field,normField:t.normField}):void 0}function Re(e,t){return!t}function fe(e,t){return!!(t&&t==="Stretched"&&"version"in e&&typeof e.version=="number"&&e.version>=10.3&&e.declaredClass==="esri.layers.ImageryLayer")}function De(e,t){return e.label?t[e.label]+": "+(typeof e.value=="string"?e.value:Ae(e.value??0,{style:"decimal",notation:e.value?.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function ge(e,t,r){switch(t){case"heatmap-ramp":return r[e.label]||e.label;case"stretch-ramp":return De(e,r);default:return e.label}}function ve(e,t){if(!e.title||typeof e.title=="string")return e.title;let r=e.type==="color-ramp"||e.type==="opacity-ramp",a=e.title,i=B(t,a,r);return Re(a,r)&&a.title?`${a.title} (${i})`:i}var et=25,tt=25,st=100,G=class extends w{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){let e=this.legendElement.infos.slice().reverse();return s("div",{class:this.classes(p.layerRow,p.colorRampContainer)},this._renderRampLabel(e[0]),s("div",{class:p.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){let{opacity:t}=this,r=this.legendElement.type==="heatmap-ramp",a=e.length-1,i=tt,n=a>2&&!r?et*a:st,c=n+20,d=10,y=[[{shape:{type:"path",path:`M0 ${i/2} L${d} 0 L${d} ${i} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:d,y:0,width:n,height:i},fill:{type:"linear",x1:d,y1:0,x2:n+d,y2:0,colors:e.map((_,C)=>({color:_.color,offset:r&&"ratio"in _?_.ratio:C/a}))},stroke:{width:0}},{shape:{type:"path",path:`M${n+d} 0 L${c} ${i/2} L${n+d} ${i} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],h=Fe(y,c,i),u={filter:ye(this.effectList)??void 0,opacity:t==null?void 0:`${t}`};return s("div",{styles:u},h)}_renderMiddleStopRampLabel(e){let t=e.length%2!=0?e[e.length/2|0]:null;return t?s("div",{class:p.intervalSeparatorsContainer},s("div",{class:p.intervalSeparator},"|"),this._renderRampLabel(t)):null}_renderRampLabel(e){return s("div",{class:p.rampLabel},ge(e,this.legendElement.type,this.messages))}};o([l()],G.prototype,"effectList",void 0),o([l()],G.prototype,"legendElement",void 0),o([l()],G.prototype,"messages",void 0),o([l()],G.prototype,"opacity",void 0),G=o([L("esri.widgets.Legend.styles.card.ColorRamp")],G);var He=G;var rt="#ddd",re=window.devicePixelRatio;function it(e){if(!e)return;if(e.type.includes("3d")){if(!e.symbolLayers?.length)return;let r=e.symbolLayers.at(-1),a=r.resource?.primitive;return a==="circle"||a==="cross"||a==="kite"||a==="sphere"||a==="cube"||a==="diamond"}let t=e.style;return t==="circle"||t==="diamond"||t==="cross"}function at(e){if(e){if(e.type.includes("3d")){if(!e.symbolLayers?.length)return;let t=e.symbolLayers.at(-1),r=t?.resource?.primitive;return r==="triangle"||r==="cone"||r==="tetrahedron"}return e.style==="triangle"}}var W=class extends w{constructor(e,t){super(e,t),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){let{legendElement:e,hasIndicators:t,opacity:r}=this,a=e.infos,C=a.at(0),{label:i}=C,n=Ce(C,["label"]),b=a.at(-1),{label:c}=b,d=Ce(b,["label"]),y=n.preview,h=d.preview,u={"flex-direction":t?"column":"row-reverse"};y&&(y=y.cloneNode(!0),y.style.display="flex"),h&&(h=h.cloneNode(!0),h.style.display="flex");let _={opacity:r!=null?`${r}`:""};return s("div",{class:this.classes(p.layerRow,{[p.sizeRampRow]:t})},s("div",{class:p.rampLabel},t?i:c),s("div",{class:p.sizeRampContainer,styles:u},s("div",{afterCreate:v,bind:y,class:p.sizeRampPreview,styles:_}),this._renderSizeRampLines(e),s("div",{afterCreate:v,bind:h,class:p.sizeRampContainer,styles:_})),s("div",{class:p.rampLabel},t?c:i))}_renderSizeRampLines(e){let t=e.infos,r=t[0],a=t.at(-1),i=r.symbol,n=this.hasIndicators,c=A(r.size+r.outlineSize)*re,d=A(a.size+a.outlineSize)*re,y=n?c:c+50*re,h=n?c/2+50*re:c,u=at(i),_=it(i),C=document.createElement("canvas");C.width=y,C.height=h,C.style.width=C.width/re+"px",C.style.height=C.height/re+"px";let b=C.getContext("2d");if(n){b.beginPath();let k=0,E=0,R=y/2-d/2,I=h;b.moveTo(k,E),b.lineTo(R,I);let H=y,F=0,O=y/2+d/2,z=h;b.moveTo(H,F),b.lineTo(O,z)}else{b.beginPath();let k=0,E=h/2-d/2,R=y;b.moveTo(k,E),b.lineTo(R,0);let H=0,F=h/2+d/2,O=y,z=h;b.moveTo(H,F),b.lineTo(O,z)}return b.strokeStyle=rt,b.stroke(),s("div",{afterCreate:v,bind:C,styles:n?{display:"flex",marginTop:`-${u?0:_?c/2:0}px`,marginBottom:`-${u?d:_?d/2:0}px`}:{display:"flex",marginRight:`-${u?0:_?c/2:0}px`,marginLeft:`-${u?0:_?d/2:0}px`}})}};o([l()],W.prototype,"hasIndicators",void 0),o([l()],W.prototype,"legendElement",void 0),o([l()],W.prototype,"messages",void 0),o([l()],W.prototype,"opacity",void 0),W=o([L("esri.widgets.Legend.styles.card.SizeRamp")],W);var Oe=W;var ot=Me(),je=10,xe=20,ue=10,Ee=20,ke={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function lt(e="vertical"){let t="stroke:rgb(200, 200, 200);stroke-width:1";return e==="vertical"?s("svg",{height:"4",width:"10"},s("line",{style:t,x1:"0",x2:"10",y1:"2",y2:"2"})):s("svg",{height:"10",width:"10"},s("line",{style:t,x1:"5",x2:"5",y1:"0",y2:"10"}))}function nt(e,t="vertical"){let r=document.createElement("div");return r.style.height=`${xe}px`,r.className=ke.univariateAboveAndBelowSymbol,e!=null&&(r.style.opacity=e.toString()),ot.append(r,lt.bind(null,t)),r}function Ze(e,t,r="vertical",a){e.infos.forEach((i,n)=>{if(a&&n===2)i.preview=nt(t,r);else{let c=A(i.size)+(r==="horizontal"?Ee:ue),d=i.preview,y=d?.tagName.toLowerCase()==="div",h=y?d:document.createElement("div");h.className=ke.univariateAboveAndBelowSymbol,r==="horizontal"?h.style.width=`${c}px`:h.style.height=`${c}px`,!y&&d&&h.appendChild(d),i.preview=h}})}function P(e,t="classic"){let r=e.infos;return t==="classic"?(A(r[0].size)+ue)/2:(A(r[0].size)-A(r[r.length-1].size))/2}function M(e,t){if(!e)return null;let r=e.infos.map(i=>i.color),a=Pe(t.type==="full"?r:t.type==="above"?r.slice(0,3):r.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return a.className=ke.colorRamp,t.opacity!=null&&(a.style.opacity=t.opacity.toString()),a}function oe(e,t,r,a="vertical"){let i=0,n=e.infos,c=Math.floor(n.length/2),d=t==="full"||t==="above"?0:c,y=t==="full"||t==="below"?n.length-1:c;for(let h=d;h<=y;h++)r&&h===c?i+=a==="horizontal"?je:xe:i+=A(n[h].size)+(a==="horizontal"?Ee:ue);return Math.round(i)}function N(e,t,r,a="vertical"){let i=oe(e,t,r,a),n=e.infos,c=Math.floor(n.length/2),d=t==="full"||t==="above"?0:c,y=t==="full"||t==="below"?n.length-1:c,h=t==="full"?n[d].size+n[y].size:t==="above"?n[d].size:n[y].size,u=r?a==="vertical"?xe:je:0,_=a==="vertical"?ue*(t==="full"?2:1):Ee*(t==="full"?2:1);return Math.round(i-(A(h)/2+u/2+_/2))}function be(e,t,r="vertical"){let a=e.infos,i=a.find(({type:c})=>c==="size-ramp"),n=a.find(({type:c})=>c==="color-ramp");return i&&(i=j({},i),i.infos=[...i.infos],Ze(i,t,r,!0)),n&&(n=j({},n),n.infos=[...n.infos]),r==="horizontal"&&(i?.infos.reverse(),n?.infos.reverse()),{sizeRampElement:i,colorRampElement:n}}function Le(e,t="vertical"){let r=e.infos,a=r.find(({type:n})=>n==="size-ramp"),i=r.find(({type:n})=>n==="color-ramp");return a&&(a=j({},a),a.infos=[...a.infos],Ze(a,null,t,!1)),i&&(i=j({},i),i.infos=[...i.infos]),t==="horizontal"&&(a?.infos.reverse(),i?.infos.reverse()),{sizeRampElement:a,colorRampElement:i}}var le={marginLeft:"3px"},V={display:"table-cell",verticalAlign:"middle"},we={display:"flex",alignItems:"flex-start"};var q=class extends w{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){let{legendElement:e,opacity:t,effectList:r,key:a}=this,{sizeRampElement:i,colorRampElement:n}=be(e,t,"horizontal");if(!i)return null;let c=oe(i,"full",!0,"horizontal"),d=N(i,"above",!0,"horizontal"),y=N(i,"below",!0,"horizontal"),h=12,u=this.messages?.previewColorRampAriaLabel,_=M(n,{width:d,height:h,rampAlignment:"horizontal",opacity:t,type:"above",effectList:r,ariaLabel:u}),C=M(n,{width:y,height:h,rampAlignment:"horizontal",opacity:t,type:"below",effectList:r,ariaLabel:u}),b=P(i,"card"),k=i.infos.map(z=>z.label),E=k.length-1,R=k.map((z,x)=>x===0||x===E?s("div",{key:x},z):null),I={display:"flex",flexDirection:"column"},H={display:"flex",flexDirection:"row"},F={marginTop:"3px",display:"flex"};ce(this.container)?F.marginRight=`${b}px`:F.marginLeft=`${b}px`;let O={width:`${c}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return s("div",{class:p.layerRow,key:`${a}-container`,styles:I},s("div",{class:this.classes(p.symbolContainer,p.sizeRampHorizontal),styles:H},i.infos.map((z,x)=>s("div",{afterCreate:v,bind:z.preview,class:p.symbol,key:x}))),_?s("div",{class:p.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:F},s("div",{afterCreate:v,bind:_}),s("div",{afterCreate:v,bind:C})):null,s("div",{class:p.layerInfo},s("div",{class:p.rampLabelsContainer,styles:O},R)))}};o([l()],q.prototype,"effectList",void 0),o([l()],q.prototype,"legendElement",void 0),o([l()],q.prototype,"messages",void 0),o([l()],q.prototype,"opacity",void 0),q=o([L("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],q);var Ge=q;var J=class extends w{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){let{legendElement:e,opacity:t,effectList:r,key:a}=this,{sizeRampElement:i,colorRampElement:n}=Le(e,"horizontal");if(!i)return null;let c=oe(i,"full",!1,"horizontal"),d=N(i,"full",!1,"horizontal"),y=M(n,{width:d,height:12,rampAlignment:"horizontal",opacity:t,type:"full",effectList:r,ariaLabel:this.messages?.previewColorRampAriaLabel}),h=P(i,"card"),u=i.infos.length-1,_=i.infos.map((R,I)=>I===0||I===u?s("div",{key:I},R.label):null),C={display:"flex",flexDirection:"column"},b={display:"flex",flexDirection:"row"},k={marginTop:"3px",display:"flex"};ce(this.container)?k.marginRight=`${h}px`:k.marginLeft=`${h}px`;let E={width:`${c}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return s("div",{class:p.layerRow,key:`${a}-container`,styles:C},s("div",{class:this.classes(p.symbolContainer,p.sizeRampHorizontal),styles:b},i.infos.map((R,I)=>s("div",{afterCreate:v,bind:R.preview,class:p.symbol,key:I}))),s("div",{class:p.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:k},s("div",{afterCreate:v,bind:y})),s("div",{class:p.layerInfo},s("div",{class:p.rampLabelsContainer,styles:E},_)))}};o([l()],J.prototype,"effectList",void 0),o([l()],J.prototype,"legendElement",void 0),o([l()],J.prototype,"messages",void 0),o([l()],J.prototype,"opacity",void 0),J=o([L("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],J);var We=J;var Ie,T=Ie=class extends w{constructor(e,t){super(e,t),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){let e=this._renderLegendElement(),t=ve(this.legendElement,this.messages),r=this.hasIndicators&&!this.isChild?s("div",null,s(te,{class:p.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),s(te,{class:p.layerCaption,level:Ue(this.headingLevel)},t)):t?s(te,{class:p.layerCaption,level:this.headingLevel},t):null;return s("section",{"aria-labelledby":this.key,class:p.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},r,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return s(Oe,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return s(He,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return he(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return s("div",{afterCreate:v,bind:this.legendElement.preview,class:p.pieChartRampPreview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return s(Ge,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return s(We,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){let t=e.infos.map(n=>this._renderElementInfo(n,e.legendType)).filter(Boolean);if(!t.length)return null;let r=this.activeLayerInfo.legendElements.some(({type:n})=>n==="relationship-ramp"),a=t[0]?.properties?.classes?.[p.symbolRow],i={[p.labelContainer]:!a&&!r,[p.relationshipLabelContainer]:r};return s("div",{class:this.classes(i)},t)}_renderElementInfo(e,t){let{layer:r}=this,a="label"in e?e.label:null,i=`${this.key}-${a}`;if("type"in e&&e.type)return s(Ie,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:i,layer:r,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;let n=fe(r,t),c=B(this.messages,a,!1)||"";if("src"in e&&e.src)return s("div",{class:p.layerRow,key:`${i}-row`},this._renderImage(e,r,n),s("div",{class:p.imageLabel},c));if("symbol"in e&&e.preview){if(!e.symbol?.type.includes("simple-fill")){if(!e.label)return s("div",{afterCreate:v,bind:e.preview,key:`${i}-row`});let d={[p.symbolCell]:this.hasIndicators};return s("div",{class:this.classes(p.layerRow,{[p.symbolRow]:this.hasIndicators}),key:`${i}-row`},s("div",{afterCreate:v,bind:e.preview,class:this.classes(d)}),s("div",{class:this.classes(p.imageLabel,{[p.labelCell]:this.hasIndicators})},c))}return s("div",{class:p.layerRow,key:`${i}-row`},s("div",{class:p.labelElement,styles:this._getBackgroundStyles(e)},c))}return null}_getBackgroundStyles(e){let t=e.symbol,r=t.color,a=!!r?.a,i="outline"in t?t.outline:null,n=!!i?.color?.a,c=new de(a&&r?[r.r,r.g,r.b,r.a*this.layer.opacity]:[255,255,255,0]),d=n&&i.color?new de([i.color.r,i.color.g,i.color.b,i.color.a*this.layer.opacity]):new de([255,255,255,0]),y=e.symbol.color?.isBright??!0,h=y?"black":"white",u=y?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:a?c.toCss(!0):"none",color:h,textShadow:`-1px -1px 0 ${u},
                  1px -1px 0 ${u},
                  -1px 1px 0 ${u},
                  1px 1px 0 ${u}`,border:n?`1px solid ${d.toCss(!0)}`:"none",filter:ye(this.effectList)??void 0}}_renderImage(e,t,r){let{label:a,src:i,opacity:n}=e,c={[p.imageryLayerStretchedImage]:r,[p.symbol]:!r},d={opacity:`${n??t.opacity}`},y=B(this.messages,a,!1);return s("img",{alt:y,"aria-label":y,border:0,class:this.classes(c),height:e.height,src:i,styles:d,width:e.width})}};o([l()],T.prototype,"activeLayerInfo",void 0),o([l()],T.prototype,"effectList",void 0),o([l()],T.prototype,"hasIndicators",void 0),o([l()],T.prototype,"headingLevel",void 0),o([l()],T.prototype,"isChild",void 0),o([l()],T.prototype,"layer",void 0),o([l()],T.prototype,"legendElement",void 0),o([l()],T.prototype,"messages",void 0),T=Ie=o([L("esri.widgets.Legend.styles.card.LegendElement")],T);var ze=T;var pt=768,U=class extends w{constructor(e,t){super(e,t),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return Ne({carousel:()=>import("./chunk-OTRR2HZL.js"),"carousel-item":()=>import("./chunk-MHQ6UYN2.js")})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=pt||this.layout==="stack";let e=this._hasIndicators?this._renderCarousel():this._renderLayers(),t={[p.stacked]:this._hasIndicators};return s("div",{class:this.classes(p.base,t)},e||s("div",{class:p.message},this.messages.noLegend))}_renderCarousel(){let e=[],t=this.activeLayerInfos;if(t)for(let r of t)this._renderSections(r,e);return e?.length?s("calcite-carousel",{class:p.carousel,label:this.messages.carousel},e.map((r,a)=>s("calcite-carousel-item",{class:p.carouselItem,key:a,label:ie(this.messagesCommon.pagination.pageText,{index:a+1,total:e.length})},r))):null}_renderLayers(){let e=this.activeLayerInfos,t=e?.toArray()?.map(r=>this._renderLegendForLayer(r)).filter(Boolean);return t?.length?t:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){let t=e.children.toArray().map(this._renderLegendForLayer,this);return s("section",{class:this.classes(p.service,p.groupLayer),key:e.layer.uid},s("div",{class:p.serviceCaptionContainer},e.title),t)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){let t=e.legendElements?.filter(Boolean);if(!t?.length)return null;let r=t.map(i=>s(ze,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${i.type}`,layer:e.layer,legendElement:i,messages:this.messages})),a={[p.groupLayerChild]:!!e.parent};return s("section",{class:this.classes(p.service,a),key:e.layer.uid},s("div",{class:p.serviceCaptionContainer},s("div",{class:p.serviceCaptionText},e.title)),s("div",{class:p.serviceContent},r))}_renderSections(e,t){if(!e.ready)return;if(e.children.length)for(let a of e.children)this._renderSections(a,t);let r=e.legendElements;if(r?.length)for(let a of r){let i=s(ze,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${a.type}`,layer:e.layer,legendElement:a,messages:this.messages});i&&t.push(i)}}};o([l()],U.prototype,"activeLayerInfos",void 0),o([l()],U.prototype,"headingLevel",void 0),o([l()],U.prototype,"layout",void 0),o([l(),Z("esri/widgets/Legend/t9n/Legend")],U.prototype,"messages",void 0),o([l(),Z("esri/t9n/common")],U.prototype,"messagesCommon",void 0),o([l({readOnly:!0})],U.prototype,"type",void 0),o([l()],U.prototype,"view",void 0),U=o([L("esri.widgets.Legend.styles.card.CardView")],U);var _e=U;var g="esri-legend",m={service:`${g}__service`,label:`${g}__service-label`,layer:`${g}__layer`,groupLayer:`${g}__group-layer`,groupLayerChild:`${g}__group-layer-child`,layerTable:`${g}__layer-table`,layerTableSizeRamp:`${g}__layer-table--size-ramp`,layerChildTable:`${g}__layer-child-table`,layerCaption:`${g}__layer-caption`,layerBody:`${g}__layer-body`,layerRow:`${g}__layer-row`,layerCell:`${g}__layer-cell`,layerInfo:`${g}__layer-cell ${g}__layer-cell--info`,imageryLayerStretchedImage:`${g}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${g}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${g}__imagery-layer-info--stretched`,symbolContainer:`${g}__layer-cell ${g}__layer-cell--symbols`,symbol:`${g}__symbol`,rampContainer:`${g}__ramps`,sizeRamp:`${g}__size-ramp`,colorRamp:`${g}__color-ramp`,opacityRamp:`${g}__opacity-ramp`,borderlessRamp:`${g}__borderless-ramp`,rampTick:`${g}__ramp-tick`,rampFirstTick:`${g}__ramp-tick-first`,rampLastTick:`${g}__ramp-tick-last`,rampLabelsContainer:`${g}__ramp-labels`,rampLabel:`${g}__ramp-label`,message:`${g}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"};var mt=24,K=class extends w{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){let e=this.legendElement.preview;if(!e)return null;let t=this.legendElement.type==="opacity-ramp"?m.opacityRamp:"";return e.className=`${m.colorRamp} ${t}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString()),e}render(){let{legendElement:e,_preview:t}=this;if(!t)return null;let r={width:`${mt}px`},a={height:t.style.height};return s("div",{class:m.layerRow,key:`${this.key}-row`},s("div",{class:m.symbolContainer,styles:r},s("div",{afterCreate:v,bind:t,class:m.rampContainer})),s("div",{class:m.layerInfo},s("div",{class:m.rampLabelsContainer,styles:a},e.infos.map((i,n)=>this._renderRampLabel(i,n,e.type)))))}_renderRampLabel(e,t,r){return s("div",{class:e.label?m.rampLabel:void 0,key:`${this.key}-stop-${e.label??t}-label`},ge(e,r,this.messages))}};o([l()],K.prototype,"_preview",null),o([l()],K.prototype,"legendElement",void 0),o([l()],K.prototype,"messages",void 0),o([l()],K.prototype,"opacity",void 0),K=o([L("esri.widgets.Legend.styles.classic.ColorRamp")],K);var qe=K;var ne=class extends w{constructor(e,t){super(e,t),this.legendElement=null}render(){let e=this.legendElement.infos.map(t=>this._renderRow(t)).filter(Boolean);return e.length?s("div",{class:m.layerBody},e):null}_renderRow(e){return e.preview?s("div",{class:m.layerRow,key:`${this.key}-${e.label}-row`},s("div",{class:this.classes(m.symbolContainer,m.sizeRamp)},s("div",{afterCreate:v,bind:e.preview,class:m.symbol})),s("div",{class:m.layerInfo},B(this.messages,e.label,!1)||"")):null}};o([l()],ne.prototype,"legendElement",void 0),o([l()],ne.prototype,"messages",void 0),ne=o([L("esri.widgets.Legend.styles.classic.SizeRamp")],ne);var Je=ne;var Q=class extends w{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){let{legendElement:e,opacity:t,effectList:r,key:a}=this,{sizeRampElement:i,colorRampElement:n}=be(e,t);if(!i)return null;let c=this.messages.previewColorRampAriaLabel,d=N(i,"above",!0),y=N(i,"below",!0),h=12,u=M(n,{width:h,height:d,rampAlignment:"vertical",opacity:t,type:"above",effectList:r,ariaLabel:c}),_=M(n,{width:h,height:y,rampAlignment:"vertical",opacity:t,type:"below",effectList:r,ariaLabel:c}),C=P(i),b=i.infos.map(x=>x.label),k=b.map((x,S)=>S===0?s("div",{class:x?u?m.univariateAboveAndBelowLabel:m.rampLabel:void 0,key:`${a}-color-ramp-above-label-${x??S}`},x):S===2?s("div",null):null),E=b.length-1,R=Math.floor(b.length/2),I=b.map((x,S)=>S===R||S===E?s("div",{class:x?u?m.univariateAboveAndBelowLabel:m.rampLabel:void 0,key:`${a}-color-ramp-below-label-${x??S}`},x):null),H={display:"table-cell",verticalAlign:"middle"},F={marginTop:`${C}px`},O={height:`${d}px`},z={height:`${y}px`};return s("div",{key:`${a}-container`,styles:we},s("div",{class:m.layerBody},i.infos.map((x,S)=>s("div",{class:this.classes(m.layerRow,m.sizeRamp),key:`${a}-row-${S}`},s("div",{afterCreate:v,bind:x.preview,class:m.symbol,styles:H}),u||S%2!=0?null:s("div",{class:m.layerInfo},b[S])))),u?s("div",{styles:F},s("div",{styles:le},s("div",{styles:V},s("div",{afterCreate:v,bind:u,class:m.rampContainer})),s("div",{styles:V},s("div",{class:m.rampLabelsContainer,styles:O},k))),s("div",{styles:le},s("div",{styles:V},s("div",{afterCreate:v,bind:_,class:m.rampContainer})),s("div",{styles:V},s("div",{class:m.rampLabelsContainer,styles:z},I)))):null)}};o([l()],Q.prototype,"effectList",void 0),o([l()],Q.prototype,"legendElement",void 0),o([l()],Q.prototype,"messages",void 0),o([l()],Q.prototype,"opacity",void 0),Q=o([L("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],Q);var Ke=Q;var X=class extends w{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){let{legendElement:e,opacity:t,effectList:r,key:a}=this,{sizeRampElement:i,colorRampElement:n}=Le(e);if(!i)return null;let c=P(i),d=12,y=N(i,"full",!1),h=M(n,{width:d,height:y,rampAlignment:"vertical",opacity:t,type:"full",effectList:r,ariaLabel:this.messages?.previewColorRampAriaLabel}),u=i.infos.length-1,_=i.infos.map((E,R)=>R===0||R===u?s("div",{class:E.label?n?m.univariateAboveAndBelowLabel:m.rampLabel:void 0,key:`${a}-color-ramp-label-${E.label??R}`},E.label):null),C={display:"table-cell",verticalAlign:"middle"},b={marginTop:`${c}px`},k={height:`${y}px`};return s("div",{key:`${a}-container`,styles:we},s("div",{class:m.layerBody},i.infos.map((E,R)=>s("div",{class:this.classes(m.layerRow,m.sizeRamp),key:`${a}-row-${R}`},s("div",{afterCreate:v,bind:E.preview,class:m.symbol,styles:C})))),s("div",{styles:b},s("div",{styles:le},s("div",{styles:V},s("div",{afterCreate:v,bind:h,class:m.rampContainer})),s("div",{styles:V},s("div",{class:m.rampLabelsContainer,styles:k},_)))))}};o([l()],X.prototype,"effectList",void 0),o([l()],X.prototype,"legendElement",void 0),o([l()],X.prototype,"messages",void 0),o([l()],X.prototype,"opacity",void 0),X=o([L("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],X);var Qe=X;var Se,D=Se=class extends w{constructor(e,t){super(e,t),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){let e=this._renderLegendElement(),t=ve(this.legendElement,this.messages),r=this.isChild?m.layerChildTable:m.layerTable,a=t?s("div",{class:m.layerCaption},t):null,i={[m.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return s("section",{class:this.classes(r,i),key:`${this.key}-table`},a,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return s(Je,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return s(qe,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return he(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return s("div",{afterCreate:v,bind:this.legendElement.preview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return s(Ke,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return s(Qe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){let t=e.infos.map(r=>this._renderElementInfo(r,e.legendType)).filter(Boolean);return t.length?s("div",{class:m.layerBody},t):null}_renderElementInfo(e,t){let{layer:r}=this,a="label"in e?e.label:null,i=`${this.key}-${a}`;if("type"in e&&e.type)return s(Se,{effectList:this.effectList,isChild:!0,key:i,layer:r,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;let n=fe(r,t),c={[m.imageryLayerInfoStretched]:n},d={[m.imageryLayerInfoStretched]:n};return s("div",{class:m.layerRow,key:`${i}-row`},s("div",{class:this.classes(m.symbolContainer,d)},this._renderPreview(e,n)),s("div",{class:this.classes(m.layerInfo,c)},B(this.messages,a,!1)||""))}_renderPreview(e,t){let{layer:r}=this;return"preview"in e&&e.preview?s("div",{afterCreate:v,bind:e.preview,class:m.symbol}):"src"in e&&e.src?this._renderImage(e,r,t):null}_renderImage(e,t,r){let{label:a,src:i,opacity:n}=e,c={[m.imageryLayerStretchedImage]:r,[m.symbol]:!r},d={opacity:`${n??t.opacity}`},y=B(this.messages,a,!1);return s("img",{alt:y,"aria-label":y,border:0,class:this.classes(c),height:e.height,src:i,styles:d,width:e.width})}};o([l()],D.prototype,"effectList",void 0),o([l()],D.prototype,"isChild",void 0),o([l()],D.prototype,"layer",void 0),o([l()],D.prototype,"legendElement",void 0),o([l()],D.prototype,"messages",void 0),D=Se=o([L("esri.widgets.Legend.styles.classic.LegendElement")],D);var Xe=D;var ct=`${g}__`,Y=class extends w{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){let e=this.activeLayerInfos,t=e?.toArray().map(r=>this._renderLegendForLayer(r)).filter(Boolean);return t?.length?s("section",null,t):s("div",{class:m.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,t){if(!e.ready)return null;let r=`${e.layer.uid}-version-${e.version}`,a=`${ct}${t?`${t}-`:""}${r}`,i=e.title?te({level:this.headingLevel,class:this.classes(ae.heading,m.label)},e.title):null;if(e.children.length){let n=e.children.toArray().map(c=>this._renderLegendForLayer(c,r));return s("section",{class:this.classes(m.service,m.groupLayer),key:a},i,n)}return this._renderLegendElementsForLayer(e,i,a)}_renderLegendElementsForLayer(e,t,r){let a=e.legendElements?.filter(Boolean);if(!a?.length)return null;let i=a.map(c=>s(Xe,{effectList:e.effectList,isChild:!1,key:`${r}-${c.type}`,layer:e.layer,legendElement:c,messages:this.messages})),n={[m.groupLayerChild]:!!e.parent};return s("section",{class:this.classes(m.service,n),key:r},t,s("div",{class:m.layer},i))}};o([l()],Y.prototype,"activeLayerInfos",void 0),o([l()],Y.prototype,"headingLevel",void 0),o([l(),Z("esri/widgets/Legend/t9n/Legend")],Y.prototype,"messages",void 0),o([l({readOnly:!0})],Y.prototype,"type",void 0),Y=o([L("esri.widgets.Legend.styles.classic.ClassicView")],Y);var ee=Y;var dt={base:"esri-legend"},$=class extends w{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.style=new ee,this.viewModel=new Ve}initialize(){this.addHandles([me(()=>this.view,"resize",()=>this.scheduleRender()),me(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),pe(()=>this.headingLevel,e=>{let{style:t}=this;t&&(t.headingLevel=e)}),pe(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},$e)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof _e||e instanceof ee)return e;if(typeof e=="string")return e==="card"?new _e:new ee;if(e&&typeof e.type=="string"){let t=j({},e);return delete t.type,e.type==="card"?new _e(t):new ee(t)}return new ee}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return s("div",{class:this.classes(dt.base,ae.widget,this.style instanceof ee?ae.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(t=>{this.removeHandles(`version_${t.layer.uid}`),this._renderOnActiveLayerInfoChange(t)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){let t=pe(()=>e.version,()=>this.scheduleRender());this.addHandles(t,`version_${e.layer.uid}`);let r=me(()=>e.children,"change",()=>e.children.forEach(a=>this._renderOnActiveLayerInfoChange(a)),$e);this.addHandles(r,`version_${e.layer.uid}`),e.children.forEach(a=>this._renderOnActiveLayerInfoChange(a))}};o([l()],$.prototype,"activeLayerInfos",null),o([l()],$.prototype,"basemapLegendVisible",null),o([l()],$.prototype,"groundLegendVisible",null),o([l()],$.prototype,"headingLevel",void 0),o([l()],$.prototype,"hideLayersNotInCurrentView",null),o([l()],$.prototype,"keepCacheOnDestroy",null),o([l()],$.prototype,"respectLayerDefinitionExpression",null),o([l()],$.prototype,"respectLayerVisibility",null),o([l()],$.prototype,"icon",null),o([l()],$.prototype,"label",null),o([l()],$.prototype,"layerInfos",null),o([l(),Z("esri/widgets/Legend/t9n/Legend")],$.prototype,"messages",void 0),o([l()],$.prototype,"style",void 0),o([Be("style")],$.prototype,"castStyle",null),o([l()],$.prototype,"view",null),o([l()],$.prototype,"viewModel",void 0),$=o([L("esri.widgets.Legend")],$);var va=$;export{va as default};
