import{e as y}from"./chunk-YB6RTOHR.js";import{a as f}from"./chunk-6F25LG6O.js";import{a as n}from"./chunk-OLOKUDVI.js";import{a as u}from"./chunk-POX73EYJ.js";import{b as m}from"./chunk-X2B63YVS.js";import{o as p}from"./chunk-AUAZP44J.js";var b="picture-fill",w="simple-fill",k="simple-line",x="simple-marker",C="text",A="cim",g=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),h=new u(1e3);function P(t){let e=t.style,o=null;if(t)switch(t.type){case x:e!=="cross"&&e!=="x"&&(o=t.color);break;case w:e&&e!=="solid"?e!=="none"&&(o={type:"pattern",x:0,y:0,src:m(`esri/symbols/patterns/${e}.png`),width:5,height:5}):o=t.color;break;case b:o={type:"pattern",src:t.url,width:n(t.width)*t.xscale,height:n(t.height)*t.yscale,x:n(t.xoffset),y:n(t.yoffset)};break;case C:o=t.color;break;case A:o=y(t)}return o}function T(t,e){let o=t+"-"+e;return h.get(o)!==void 0?Promise.resolve(h.get(o)):p(t,{responseType:"image"}).then(c=>{let s=c.data,i=s.naturalWidth,r=s.naturalHeight,a=document.createElement("canvas");a.width=i,a.height=r;let l=a.getContext("2d");l.fillStyle=e,l.fillRect(0,0,i,r),l.globalCompositeOperation="destination-in",l.drawImage(s,0,0);let d=a.toDataURL();return h.put(o,d),d})}function j(t){if(!t)return null;let e=null;switch(t.type){case w:case b:case x:e=j(t.outline);break;case k:{let o=n(t.width);t.style!=null&&t.style!=="none"&&o!==0&&(e={color:t.color,style:S(t.style),width:o,cap:t.cap,join:t.join==="miter"?n(t.miterLimit):t.join},e.dashArray=L(e).join(",")||"none");break}default:e=null}return e}function L(t){if(!t?.style)return[];let{dashArray:e,style:o,width:c}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(r=>Number(r));let s=c??0,i=g.has(o)?g.get(o).map(r=>r*s):[];if(t.cap!=="butt")for(let[r,a]of i.entries())i[r]=r%2==1?a+s:Math.max(a-s,1);return i}var S=(()=>{let t={};return e=>{if(t[e])return t[e];let o=e.replaceAll("-","");return t[e]=o,o}})(),W=new f([128,128,128]);export{P as a,T as b,j as c,L as d,S as e,W as f};
