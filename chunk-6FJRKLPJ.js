import{a as c,b as Z,c as te,d as ie,e as k,f as ne,g as oe,h as ae}from"./chunk-LDB3GCZV.js";import"./chunk-MELYPAZ7.js";import"./chunk-PKVI3POI.js";import{f as N}from"./chunk-NQ53MXMB.js";import{e as T,f as M,g as J,h as K,i as Q,j as ee,l as U}from"./chunk-4RK2B3SZ.js";import"./chunk-ZK55DZ3X.js";import{a as Y}from"./chunk-EPKVBNFW.js";import{a as D}from"./chunk-FHBFWDFD.js";import"./chunk-OCNYIIP3.js";import"./chunk-2WYOVBUR.js";import"./chunk-GPQCYR3E.js";import"./chunk-WDTJILD4.js";import"./chunk-P7HHUOEW.js";import"./chunk-Z6CDEQPZ.js";import"./chunk-DKNG2DCF.js";import"./chunk-RZU6EEB3.js";import"./chunk-NIRJWS2D.js";import"./chunk-H3ZWZZ2B.js";import"./chunk-VRIRKZGO.js";import"./chunk-U7BD7DJH.js";import"./chunk-LBB4AU7W.js";import"./chunk-E3OE5HRA.js";import"./chunk-TSG4MDJV.js";import"./chunk-HCW4M77K.js";import"./chunk-H4IF7PQO.js";import"./chunk-QKVTMI24.js";import"./chunk-GGYZRKBV.js";import"./chunk-I76R3PW5.js";import"./chunk-4KM76TSJ.js";import"./chunk-6RE36L2Q.js";import"./chunk-37PSR6DC.js";import"./chunk-LC44KLTN.js";import"./chunk-A66JV4A6.js";import"./chunk-JBFXTI45.js";import"./chunk-GNPXNHTO.js";import"./chunk-7P56QMT7.js";import"./chunk-P4JHTV62.js";import"./chunk-H25DKJGS.js";import"./chunk-QTO4E4UZ.js";import"./chunk-SO3JGF64.js";import"./chunk-TIWKONVC.js";import"./chunk-PRJOIHPH.js";import"./chunk-6DALCDDU.js";import"./chunk-RK6C6D6K.js";import"./chunk-CHCKIOZR.js";import"./chunk-TUF2Y2FX.js";import"./chunk-4QHB56M5.js";import"./chunk-KN5AJ2NM.js";import"./chunk-5A7AFZJT.js";import"./chunk-Z5EURZKA.js";import"./chunk-OVX6BGGA.js";import"./chunk-PBAMEKFE.js";import"./chunk-XIZ7IH6M.js";import"./chunk-JD66UCS7.js";import"./chunk-FU7RO3AR.js";import"./chunk-4YRY3D3A.js";import"./chunk-ZZ5UYT7M.js";import"./chunk-U4XVPHQU.js";import"./chunk-KLZGQ7M6.js";import"./chunk-N36GL6VL.js";import"./chunk-UX3QUEDM.js";import"./chunk-YZJDOXQC.js";import"./chunk-6ZY36ZHO.js";import"./chunk-6RHGQ4Z5.js";import"./chunk-G23ELQMS.js";import"./chunk-PZOK2JKH.js";import"./chunk-FJUYECJ6.js";import"./chunk-2SJBRRT6.js";import"./chunk-2SXWYVJN.js";import"./chunk-ELUASJOG.js";import"./chunk-KQZGMGWR.js";import"./chunk-66BPZDMW.js";import"./chunk-GAVFKWSK.js";import"./chunk-DK4DGLAO.js";import"./chunk-7Y6S2GNA.js";import"./chunk-VOB6IBIW.js";import"./chunk-63B3IOWG.js";import"./chunk-PE276TWH.js";import"./chunk-BMZ3PE5Y.js";import"./chunk-EHG7JRYJ.js";import"./chunk-FNY6LFKI.js";import"./chunk-IBVI7JQ7.js";import"./chunk-2DFFQEIV.js";import"./chunk-4JY7PCV4.js";import"./chunk-BBB7KLHV.js";import"./chunk-JPC2A6ML.js";import"./chunk-OGFDJ67M.js";import"./chunk-5K6CB5PS.js";import"./chunk-J2AEVBSH.js";import"./chunk-5ODXFRPI.js";import"./chunk-E5QCV5LT.js";import"./chunk-QS3EYJPF.js";import"./chunk-HJJZ2AXH.js";import"./chunk-TPNSUEHH.js";import"./chunk-SMVNQSZ4.js";import"./chunk-Z2QGLRDB.js";import"./chunk-7IDFDPA3.js";import"./chunk-VL2YL74P.js";import"./chunk-P2AJD2R2.js";import"./chunk-UMJIJLDA.js";import"./chunk-E5NFS3KN.js";import"./chunk-HQHD6BMN.js";import"./chunk-AIKKGGPG.js";import"./chunk-RDGG4TVD.js";import"./chunk-3IQFPOUU.js";import"./chunk-I4CY6X6S.js";import"./chunk-VQ4QGNRX.js";import"./chunk-LLWQ5E4P.js";import"./chunk-GNEAU6X4.js";import"./chunk-5RH7OPHX.js";import"./chunk-JFB3F3BC.js";import"./chunk-J4JQLN5L.js";import"./chunk-4KXJ537H.js";import"./chunk-JIRULGDT.js";import"./chunk-QJGOWIJD.js";import"./chunk-QML26MQC.js";import"./chunk-RNZY2XUD.js";import"./chunk-JXPUHKCT.js";import"./chunk-XR5FT7TQ.js";import"./chunk-4YTM754S.js";import"./chunk-LAX5536Z.js";import"./chunk-N3HRYLNW.js";import"./chunk-4DBMALZW.js";import"./chunk-CVWWHM2V.js";import"./chunk-6OQYVEQJ.js";import"./chunk-XNHRPKJK.js";import"./chunk-YOXOWGT6.js";import"./chunk-EFZOSMYP.js";import"./chunk-WI7F4ZKJ.js";import"./chunk-MJ7M24NH.js";import"./chunk-GJH4QFRX.js";import"./chunk-T63F7663.js";import"./chunk-O4V2VBSK.js";import"./chunk-5TKRKB5E.js";import"./chunk-XAGMDNNR.js";import"./chunk-OP2TLIUN.js";import"./chunk-T2THIR6K.js";import"./chunk-LORHDXEB.js";import"./chunk-BBBPJI4H.js";import"./chunk-45BTW5EG.js";import"./chunk-TPFBHGDM.js";import"./chunk-73NLRHJD.js";import"./chunk-PNFEUBDF.js";import"./chunk-6RCCEJDL.js";import"./chunk-PQ2TNDUX.js";import"./chunk-6X6MKRQ3.js";import"./chunk-FQFHMHYU.js";import"./chunk-SZMEI3WL.js";import"./chunk-KKVGD67U.js";import"./chunk-MYOJWRDU.js";import"./chunk-L7UKJKHG.js";import"./chunk-V2IENAEU.js";import"./chunk-QAGQFNF2.js";import"./chunk-SY7JS2VW.js";import"./chunk-WK57SDN6.js";import"./chunk-AG4V3ZUO.js";import"./chunk-YWLMJ26A.js";import"./chunk-QAWNU3UJ.js";import"./chunk-HRQT4R6X.js";import"./chunk-44BHLWQ4.js";import"./chunk-5BPM64SU.js";import"./chunk-7PAP5DT2.js";import"./chunk-OY5GEC5R.js";import"./chunk-CZAUQJCN.js";import"./chunk-5GYPON2V.js";import"./chunk-TC4RVDI6.js";import"./chunk-WDY6ALC6.js";import"./chunk-KGFXFSTP.js";import"./chunk-PMVHHMQJ.js";import"./chunk-NAFOM5UA.js";import"./chunk-B526OXED.js";import"./chunk-XPTKDFYS.js";import"./chunk-ZYTQ7T5Q.js";import"./chunk-MZC42HHY.js";import"./chunk-DREO3ZIC.js";import"./chunk-L7OBQ2MX.js";import"./chunk-2SEACSJ7.js";import"./chunk-FTMCRRWI.js";import"./chunk-L54EYG5G.js";import"./chunk-DH7A4UPK.js";import"./chunk-JLE3XOUQ.js";import"./chunk-ERHGRSXY.js";import"./chunk-AMEUMZLJ.js";import"./chunk-VU2QHSDR.js";import"./chunk-QHZWU2K5.js";import"./chunk-JMNB6CKE.js";import"./chunk-L3RS33Q4.js";import"./chunk-ZUPR4L6O.js";import"./chunk-DO7UF2F2.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-MROWXKZJ.js";import"./chunk-4TAYW5IF.js";import"./chunk-AR2JEA37.js";import"./chunk-IPLEDIX4.js";import"./chunk-RB3POJ2P.js";import"./chunk-HV62ZNCD.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import"./chunk-K57Z4J34.js";import"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-JQAW4OB5.js";import"./chunk-2GF6YDKP.js";import"./chunk-TC77DYTW.js";import"./chunk-F2BQ2GD6.js";import"./chunk-R3XLNYYB.js";import"./chunk-2HYVVLKS.js";import"./chunk-XRTA5GHC.js";import"./chunk-Y6XW36QP.js";import"./chunk-ZXKU6WBY.js";import"./chunk-BMYVPMAK.js";import"./chunk-6F25LG6O.js";import"./chunk-6KRFVLII.js";import"./chunk-GJ2QRXGN.js";import"./chunk-TJ6P6NLD.js";import"./chunk-CSNRCIB5.js";import"./chunk-3JGYBNJA.js";import"./chunk-DA3SDKGO.js";import"./chunk-ZOEPYNM4.js";import"./chunk-57VFBGF3.js";import"./chunk-GWBRHLNH.js";import"./chunk-BJH4F4SM.js";import"./chunk-Z3RBZHAK.js";import"./chunk-F5AJITOA.js";import"./chunk-IHATPE6U.js";import"./chunk-PU4AK46X.js";import"./chunk-73K3NWCV.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-ZC6EBRE4.js";import"./chunk-ZAZJB7CV.js";import{Z as X}from"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-E7AX56GD.js";import"./chunk-IDVLLREH.js";import"./chunk-DWLSVYOY.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-D3CUKSGS.js";import"./chunk-2TX472ZB.js";import"./chunk-7QNKS2X6.js";import"./chunk-VCCMJ6BV.js";import"./chunk-QK56OQGR.js";import"./chunk-FXCL7YYQ.js";import"./chunk-QKO56XO6.js";import"./chunk-JRGT3GTH.js";import"./chunk-K75TK42V.js";import"./chunk-CELWVZPW.js";import"./chunk-VV5G7VY5.js";import"./chunk-OLOKUDVI.js";import"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-KVM6SHDX.js";import"./chunk-POX73EYJ.js";import"./chunk-NKUXRYJG.js";import"./chunk-P33JWG3G.js";import{d as L}from"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-2GJBUR2F.js";import"./chunk-DKGGDYJI.js";import"./chunk-5LA3PVK5.js";import"./chunk-IR6XCBC4.js";import"./chunk-C6JPAW54.js";import"./chunk-WD3OPXCN.js";import"./chunk-FA3WGIU4.js";import"./chunk-WWVPA6PE.js";import"./chunk-YPMM52MU.js";import"./chunk-BBR7CJCO.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-O3EGNJTY.js";import"./chunk-GHKL3NOH.js";import{a as V}from"./chunk-AXYQJCCX.js";import{a as r}from"./chunk-5XCFNEYX.js";import{a as W}from"./chunk-GQL2MBZT.js";import{b as j}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import{o as R}from"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import{a as G}from"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as $,e as z}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as d}from"./chunk-QGVBCWUY.js";import{H as q}from"./chunk-MYO4NP2N.js";import{e as u}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as O}from"./chunk-5QEXLALV.js";import{c as E}from"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import{f as A}from"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{a as h,b as f,f as S}from"./chunk-VTHXE323.js";var v="esri-batch-attribute-form",B=`${v}__group`,w=`${v}__input`,l={base:v,form:`${v}__form`,formHeader:`${v}__form-header`,noticeError:`${v}__notice-error`,label:`${v}__label`,labelTextContent:`${v}__label-text-content`,fieldInput:`${w}`,inputRadio:`${w}--radio`,placeholderRadio:`${w}--radio-placeholder`,inputRadioGroup:`${w}--radio-group`,inputRadioLabel:`${w}--radio-label`,inputDisabled:`${w}--disabled`,inputSwitch:`${w}--switch`,centeredButton:`${v}__centered-button`,description:`${v}__description-text`,dateInputContainer:`${`${v}__date`}-input-container`,block:`${v}__block`,group:B,groupSequential:`${B}--sequential`,individualElement:`${B}__individual-element`};var F=class extends q{constructor(e){super(e),this.errorsForNonVisibleFields=!0,this.featureInfo=!0,this.featureSwitcher=!0}};d([u({type:Boolean,nonNullable:!0})],F.prototype,"errorsForNonVisibleFields",void 0),d([u({type:Boolean,nonNullable:!0})],F.prototype,"featureInfo",void 0),d([u({type:Boolean,nonNullable:!0})],F.prototype,"featureSwitcher",void 0),F=d([O("esri.widgets.BatchAttributeForm.VisibleElements")],F);var _="data-element-id",m=class extends W{constructor(e,t){super(e,t),this.headingLevel=2,this.messagesCommon=null,this.messages=null,this.featureFormMessages=null,this.readOnly=!1,this.viewModel=new ae,this.visibleElements=new F,this.groupDisplay="all",this._attemptFocusOnNextRender=!1,this._dateComponentMap=new Map,this._touchedInputs=new Set,this._focusedFieldInput=null,this._batchSwitchInputInitialValues=new Map,this._saveInput=this._saveInput.bind(this),this._onFormSubmit=this._onFormSubmit.bind(this),this._onComponentFocus=this._onComponentFocus.bind(this),this._onComponentBlur=this._onComponentBlur.bind(this),this._afterComponentCreateOrUpdate=this._afterComponentCreateOrUpdate.bind(this),this._afterDateComponentCreate=this._afterDateComponentCreate.bind(this),this._afterDateComponentUpdate=this._afterDateComponentUpdate.bind(this),this._afterRadioGroupCreateOrUpdate=this._afterRadioGroupCreateOrUpdate.bind(this)}initialize(){this.addHandles([$(()=>this.features,()=>{this._dateComponentMap.clear();let e=new AbortController;z(()=>!this.viewModel.updating,e.signal).then(()=>{this._attemptFocusOnNextRender=!0}),this.addHandles(A(e))}),$(()=>this.viewModel.activeForm,()=>{this._batchSwitchInputInitialValues.clear()})])}loadDependencies(){return j({input:()=>import("./chunk-SS6GQCI6.js"),block:()=>import("./chunk-LVVNNI43.js"),button:()=>import("./chunk-K3RCADAN.js"),combobox:()=>import("./chunk-UQBNFKHV.js"),"combobox-item":()=>import("./chunk-L2XDWQVU.js"),"combobox-item-group":()=>import("./chunk-PYJ45EAT.js"),dropdown:()=>import("./chunk-F6T2J7EG.js"),"dropdown-group":()=>import("./chunk-KPY43GC2.js"),"dropdown-item":()=>import("./chunk-XJK7VSUG.js"),"input-date-picker":()=>import("./chunk-GYG7SVRX.js"),"input-number":()=>import("./chunk-M6HYH3SF.js"),"input-time-picker":()=>import("./chunk-AJSVLQF4.js"),"input-time-zone":()=>import("./chunk-XWTUIXYL.js"),label:()=>import("./chunk-S24JESVO.js"),"input-message":()=>import("./chunk-BQUCPREW.js"),loader:()=>import("./chunk-4Z3TWS6O.js"),notice:()=>import("./chunk-PEKK3NZO.js"),switch:()=>import("./chunk-IIWK5IA5.js"),"text-area":()=>import("./chunk-3FZTLL7I.js"),"radio-button":()=>import("./chunk-PDRBNXP5.js"),"radio-button-group":()=>import("./chunk-ZASJOLNJ.js")})}get activeFeatureIndex(){return this.viewModel.activeFeatureIndex}set activeFeatureIndex(e){this.viewModel.activeFeatureIndex=e}get disabled(){return this.viewModel.disabled}set disabled(e){this.viewModel.disabled=e}get _effectiveDisabled(){return this.disabled||this.viewModel.updating}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get icon(){return"edit-attributes"}set icon(e){this._overrideIfSome("icon",e)}goToClosestError(){let e=this.viewModel.getFirstVisibleInvalidFieldInput();if(!e)return;let{groupInput:t}=e;t&&(t.open||(t.open=!0)),setTimeout(()=>{if(!this.domNode)return;let i=this.domNode.querySelector(`[data-element-id="${e.input.template.elementId}"]`);i&&R(i)},10)}render(){let{status:e}=this.viewModel;return e==="failed"?this._renderErrorNotice(this.messages.formFailedToLoad):this.viewModel.expressionEvaluationFailed?this._renderErrorNotice(this.messages.expressionEvaluationFailed):this.viewModel.hasLayersWithContingentValues?this._renderErrorNotice(this.messages.unsupportedContingentValues):r("div",{class:this.classes(l.base,D.widget,D.panel)},e==="loaded"?this._renderForm():e==="loading"?r("calcite-loader",{key:"loader",label:this.messagesCommon?.loading}):null)}_setDateTimeTimeZoneMap(e){let{datePart:t,elementId:i}=e.dataset,n=this._getCalciteElementFromDateTimeTimeZonePicker(e,t);if(!n)return;let o=E(this._dateComponentMap,`${i}`,()=>({placeholder:{date:"",time:"",timeZone:""}}));switch(o.placeholder[t]=n.placeholder??"",t){case"date":o.date=e;break;case"time":o.time=e;break;case"timeZone":o.timeZone=e,o.defaultComboboxItemElements=n.selectedItems}t==="timeZone"&&(o.defaultComboboxItemElements=n.selectedItems)}_getCalciteElementFromDateTimeTimeZonePicker(e,t){let i=e.shadowRoot;return i?t==="timeZone"?i.querySelector("calcite-combobox"):i.querySelector("calcite-input-text"):null}_updateDateTimeOrTimeZoneShadowDom(e,t){let{datePart:i,elementId:n}=e.dataset,o=this._dateComponentMap.get(`${n}`);if(!o)return;let a=this._getCalciteElementFromDateTimeTimeZonePicker(e,i);if(a)switch(i){case"date":case"time":a.placeholder=t?this.messages.differentValues:o.placeholder[i];break;case"timeZone":t?(a.value="",a.placeholder=this.messages.differentValues):(!a.selectedItems.length&&o.defaultComboboxItemElements?.length&&(a.selectedItems[0]=o.defaultComboboxItemElements[0]),a.placeholder=o.placeholder[i])}}_renderErrorNotice(e){return r("div",{class:this.classes(l.base,D.widget,D.panel)},r("calcite-notice",{class:l.noticeError,icon:!0,kind:"warning",open:!0},r("div",{slot:"message"},e)))}_renderForm(){return r("form",{onsubmit:this._onFormSubmit},this._renderInvisibleFieldsError(),this._renderContent())}_renderInvisibleFieldsError(){let{viewModel:e}=this,{hasNonActiveInvalidFeatures:t,activeForm:i}=e,n;if(!e.submitHasBeenAttempted)return null;if(i.invalidHiddenInputs.length>0)if(n=oe(i,e.mode,this.messages),this.viewModel.mode==="batch"){let o=i.invalidHiddenInputs.filter(a=>a.effectiveVisibilityCode===Z.HIDDEN_GROUP_VISIBILITY_EXPRESSION_ALL||a.visibilityCode===Z.HIDDEN_VISIBILITY_EXPRESSION_ALL);o.length>0?n+=` (${o.map(a=>a.label).join(", ")})`:n=null}else n+=` (${i.invalidHiddenInputs.map(o=>o.label).join(", ")})`;else if(t)return null;return n?r("calcite-notice",{class:l.noticeError,icon:!0,kind:"danger",open:!0},r("div",{slot:"message"},n)):null}_renderContent(){if(!this.viewModel.hasVisibleInputs)return[r("calcite-notice",{class:l.noticeError,icon:!0,kind:"warning",open:!0},r("div",{slot:"message"},this.messages.noVisibleFields[this.viewModel.noVisibleElementsReason]))];let{inputs:e}=this.viewModel.activeForm;return e.filter(t=>t.visible).map(t=>this._renderInput(t))}_renderInput(e){return ie(e)?this._renderGroupInput(e):te(e)?this._renderLabeledField(e):void 0}_renderGroupInput(e){let{inputs:t,template:i,open:n}=e,o=t.filter(s=>s.visible),a=i.label??"";return r("calcite-block",{class:this.classes(l.group,this.groupDisplay==="sequential"?l.groupSequential:null,this.disabled?l.inputDisabled:null),collapsible:!0,description:i.description??void 0,disabled:this._effectiveDisabled,heading:a,headingLevel:this.headingLevel,key:`{${i.elementId}-key}`,label:a,open:n,onCalciteBlockClose:()=>{e.open=!1},onCalciteBlockOpen:()=>{e.open=!0}},o.map(s=>this._renderInput(s)))}_renderLabeledField(e){let{label:t,elementId:i}=e.template,{required:n,dataType:o}=e,a=n?G(this.messages.requiredFieldLabel,{name:t}):t;return r("calcite-label",{"aria-label":a,class:l.label,key:`field--${i}`},r("div",{class:l.labelTextContent,key:"labelTextContainer"},t,n?r("span",{"aria-hidden":"true",title:this.messagesCommon.required},"*"):void 0),o!=="unsupported"?this._renderFieldInput(e):this._renderReadOnlyComponent(e),this._renderAuxiliaryText(e))}_renderFieldInput(e){let t=this.getCommonInputProps(e),{dataType:i}=e;return i==="date"?this._renderDateComponents(e,t):e.domain?.type==="coded-value"?this._renderCodedInputs({input:e,props:t}):i==="number"?this._renderNumberComponent(e,t):this._renderStringComponent(e,t)}_renderAuxiliaryText(e){let{compositeError:t,description:i,submittable:n}=e,o=!n&&t&&(this.viewModel.submitHasBeenAttempted||this._touchedInputs.has(e.template.elementId))?ne(e,t,this.messages):null;return o?r("calcite-input-message",{icon:!0,status:"invalid"},o):i?r("calcite-input-message",{class:l.description,icon:!1,status:"idle"},i):null}_renderCodedInputs({input:e,props:t}){let i=e.template.input?.type??null,n=e.codedValueOptions;switch(i){case"switch":return this._renderSwitchField({input:e,props:t});case"radio-buttons":return this._renderRadioButtonGroupComponent({input:e,options:n.flat(),props:t});default:return this._renderComboBoxComponent({options:n,props:t,input:e})}}_renderSwitchField({input:e,props:t}){if((this._batchSwitchInputInitialValues.get(e)===c||e.value===c)&&this.viewModel.mode==="batch"){let i={dropdown:{afterCreate:this._afterComponentCreateOrUpdate,afterUpdate:this._afterComponentCreateOrUpdate,disabled:t.readOnly,open:!1,[_]:t[_]},trigger:{appearance:"transparent",iconEnd:"chevron-down",kind:"neutral",slot:"trigger",label:t.label},group:{mode:"single"}};return this._renderDropdownComponent({buttonValue:e.value,dropdownProps:i,options:[{name:this.messages.differentValues,value:c,disabled:!0},...e.codedValueDomainOptions]})}return this._renderSwitchComponent({input:e,props:t})}_renderSwitchComponent({input:e,props:t}){return r("calcite-switch",f(h({},t),{checked:!!k(e.template,"switch")&&e.value===e.template.input.onValue,class:l.inputSwitch,disabled:t.readOnly,onblur:()=>{this._focusedFieldInput=null},onCalciteSwitchChange:({currentTarget:i})=>this._saveInput(i)}))}_renderDropdownComponent({buttonValue:e,options:t,dropdownProps:i}){let{trigger:n,dropdown:o,group:a}=i;return r("calcite-dropdown",f(h({},o),{onblur:()=>{this._focusedFieldInput=null},onfocus:this._onComponentFocus,onCalciteDropdownSelect:({currentTarget:s})=>this._saveInput(s)}),r("calcite-button",h({},n),e===c?this.messages.differentValues:e),r("calcite-dropdown-group",{selectionMode:a.mode},t.map(s=>r("calcite-dropdown-item",{disabled:s.disabled,label:String(s.name),selected:e===s.value},s.name))))}_renderComboBoxComponent({input:e,options:t,props:i}){let n=this.viewModel.editType==="INSERT",o=this._touchedInputs.has(e?.template?.elementId),a=n&&e.showNoValueOptionEnabled&&!o?()=>{}:i.onblur,s=f(h({},i),{onblur:a});return r("calcite-combobox",f(h({},s),{selectionMode:"single",value:i.placeholder===this.messages.differentValues?c:String(i.value),onCalciteComboboxChange:({currentTarget:p})=>{p.value!==c&&this._saveInput(p)}}),this.renderComboboxOptionsList({input:e,options:t,props:i}))}renderComboboxOptionsList({input:e,options:t,props:i}){let[n,o]=t.map(C=>C.map(({name:g,value:I})=>r("calcite-combobox-item",{key:`#${I}`,selected:i.value===I,textLabel:g,value:`${I}`}))),a=[...n];o.length>0&&a.push(r("calcite-combobox-item-group",{key:"unsupported",label:this.featureFormMessages.subtypes.unsupportedDomainGroupTitle},o));let s=i.placeholder===this.messages.differentValues,p=!s&&N(i.value);return e.showNoValueOptionEnabled&&a.unshift(r("calcite-combobox-item",{key:"empty-option",selected:p,textLabel:e.showNoValueLabel||this.messages.empty,value:""})),s&&a.unshift(r("calcite-combobox-item",{key:c,selected:!0,textLabel:this.messages.differentValues,value:c})),a}_renderRadioButtonGroupComponent({input:e,options:t,props:i}){let n=t.map(({name:o,value:a})=>this._renderRadioButtons({label:o,value:a,selected:a===e.value,props:i}));if(e.showNoValueOptionEnabled){let o="",a=e.showNoValueLabel||this.messages.empty,s=N(e.value);n.unshift(this._renderRadioButtons({label:a,value:o,selected:s,props:i}))}return r("calcite-radio-button-group",{afterCreate:this._afterRadioGroupCreateOrUpdate,afterUpdate:this._afterRadioGroupCreateOrUpdate,class:l.inputRadioGroup,disabled:i.readOnly,key:`${i.key}-radio-group`,layout:"vertical",name:i.name,required:i.required},n,i.placeholder===this.messages.differentValues?r("calcite-label",{class:l.placeholderRadio,key:i.label,layout:"inline"},r("calcite-radio-button",{checked:!0,class:l.inputRadio,disabled:!0,name:i.placeholder,value:i.placeholder}),i.placeholder):null)}_renderRadioButtons({value:e,selected:t,label:i,props:n}){return r("calcite-label",{class:l.inputRadioLabel,key:n.label,layout:"inline"},r("calcite-radio-button",f(h({},n),{afterCreate:void 0,afterUpdate:void 0,checked:t,class:l.inputRadio,disabled:n.readOnly,name:n.label,onblur:()=>{this._focusedFieldInput=null},value:e,onCalciteRadioButtonChange:({currentTarget:o})=>{o.checked&&this._saveInput(o)}})),i)}_renderStringComponent(e,t){let{template:i}=e;return i.field.editable?i.input&&i.input.type==="text-area"?r("calcite-text-area",f(h({},t),{class:this.classes(l.individualElement),resize:"vertical",value:t.value?String(t.value):"",onCalciteTextAreaInput:({currentTarget:n})=>this._saveInput(n)})):r("calcite-input",f(h({},t),{class:this.classes(l.individualElement),type:"text",value:t.value?String(t.value):"",onCalciteInputInput:({currentTarget:n})=>this._saveInput(n)})):this._renderReadOnlyComponent(e)}_renderNumberComponent(e,t){let i=X(e.field);return r("calcite-input-number",f(h({},t),{integer:i,type:"number",value:i&&t.value!==""?Math.round(parseFloat(String(t.value))).toString():String(t.value),onCalciteInputNumberInput:({currentTarget:n})=>this._saveInput(n)}))}_renderReadOnlyComponent(e,t){let i=this.getCommonInputProps(e);return r("calcite-input",f(h({},i),{class:this.classes(l.fieldInput,l.inputDisabled,l.individualElement),readOnly:!0,type:"text",value:String(t??i.value??"")}))}_renderDateComponents(e,t){let{type:i}=e.field;switch(i){case"date":return this._renderDateFieldComponents(e,t);case"date-only":return this._renderDateOnlyFieldComponent(e,t);case"time-only":return this._renderTimeOnlyFieldComponent(e,t);case"timestamp-offset":return this._renderTimestampOffsetFieldComponents(e,t);default:return this._renderReadOnlyComponent(e,K(e.field,t.value,h({timeZone:e.effectiveTimeZone},J(e.template.field))))}}_renderDateOnlyFieldComponent(e,t){let{class:i,key:n,readOnly:o}=t,{rawMax:a,rawMin:s}=e.range;return r("calcite-input-date-picker",{afterCreate:this._afterDateComponentCreate,afterUpdate:this._afterDateComponentUpdate,class:i,"data-date-part":"date","data-element-id":t[_],key:`${n}-date-input`,max:L(a)?a:void 0,min:L(s)?s:void 0,onblur:()=>{this._focusedFieldInput=null},onfocus:this._onComponentFocus,overlayPositioning:"fixed",readOnly:o,value:e.value===c?"":e.value?String(e.value):"",onCalciteInputDatePickerChange:p=>this._saveValueFromDateComponent(e,p.currentTarget)})}_renderTimeOnlyFieldComponent(e,t){let{class:i,key:n,readOnly:o}=t;return r("calcite-input-time-picker",{afterCreate:this._afterDateComponentCreate,afterUpdate:this._afterDateComponentUpdate,class:i,"data-date-part":"time","data-element-id":t[_],key:`${n}-time-input`,onblur:()=>{this._focusedFieldInput=null},onfocus:this._onComponentFocus,overlayPositioning:"fixed",readOnly:o,value:e.value===c?"":e.value?String(e.value):"",onCalciteInputTimePickerChange:a=>this._saveValueFromDateComponent(e,a.currentTarget)})}_renderTimestampOffsetFieldComponents(e,t){let{class:i,key:n,readOnly:o}=t,{rawMax:a,rawMin:s}=e.range,p=T(a),C=T(s),g=T(e.value===c?"":e.value),I=e.includeTimeOffset,y={afterCreate:this._afterDateComponentCreate,afterUpdate:this._afterDateComponentUpdate,overlayPositioning:"fixed",readOnly:o,[_]:t[_],onfocus:this._onComponentFocus};return r("div",{class:l.dateInputContainer,key:`${n}-date-time-container`},r("calcite-input-date-picker",f(h({},y),{class:i,"data-date-part":"date",key:`${n}-date-input`,max:p?.date??void 0,min:C?.date??void 0,onblur:()=>{this._focusedFieldInput=null},value:g.date??"",onCalciteInputDatePickerChange:b=>this._saveValueFromDateComponent(e,b.target)})),r("calcite-input-time-picker",f(h({},y),{class:i,"data-date-part":"time",key:`${n}-time-input`,onblur:()=>{this._focusedFieldInput=null},value:g.time??"",onCalciteInputTimePickerChange:b=>this._saveValueFromDateComponent(e,b.target)})),I?r("calcite-input-time-zone",f(h({},y),{class:i,"data-date-part":"timeZone",key:`${n}-timezone-input`,onblur:()=>{this._focusedFieldInput=null},value:g.timeZoneOffset??"0",onCalciteInputTimeZoneChange:b=>this._saveValueFromDateComponent(e,b.target)})):null)}_renderDateFieldComponents(e,t){let{class:i,key:n,readOnly:o,min:a,max:s}=t,p=e.effectiveTimeZone,C=M(e.value===c?"":e.value,p),g=M(s,p),I=M(a,p),y=e.includeTime,b={afterCreate:this._afterDateComponentCreate,afterUpdate:this._afterDateComponentUpdate,overlayPositioning:"fixed",readOnly:o,[_]:t[_],onfocus:this._onComponentFocus};return r("div",{class:l.dateInputContainer,key:`${n}-date-time-container`},r("calcite-input-date-picker",f(h({},b),{class:i,"data-date-part":"date",key:`${n}-date-input`,max:g?.date??void 0,min:I?.date??void 0,onblur:()=>{this._focusedFieldInput=null},value:C.date??"",onCalciteInputDatePickerChange:x=>this._saveValueFromDateComponent(e,x.target)})),y?r("calcite-input-time-picker",f(h({},b),{"data-date-part":"time",key:`${n}-time-input`,onblur:()=>{this._focusedFieldInput=null},step:1,value:C.time??"",onCalciteInputTimePickerChange:x=>{this._saveValueFromDateComponent(e,x.target)}})):null)}getCommonInputProps(e){let{_effectiveDisabled:t}=this,{template:i,valid:n,value:o,minLength:a,maxLength:s,required:p,fieldName:C,editable:g,userHasChangedValue:I,range:{max:y,min:b}}=e,x=!g||t,P=i.hint??void 0,H=!1;return o===c&&(P=this.messages.differentValues,H=!0),{afterCreate:this._afterComponentCreateOrUpdate,afterUpdate:this._afterComponentCreateOrUpdate,"aria-invalid":n?"false":"true",class:this.classes(l.fieldInput,x?l.inputDisabled:null),status:!I&&!this.viewModel.submitHasBeenAttempted||n?"idle":"invalid",maxLength:s&&s>-1?s:void 0,minLength:a&&a>-1?a:void 0,key:i.elementId,label:C,name:C,max:y??void 0,min:b??void 0,readOnly:x,onblur:this._onComponentBlur,required:p,placeholder:P,value:H?"":o??"",[_]:i.elementId,onfocus:this._onComponentFocus}}_onFormSubmit(e){e.preventDefault()}_getFieldInputFromHTMLElement(e){return this.viewModel.findFieldInput(e.getAttribute(_))}_afterRadioGroupCreateOrUpdate(e){let t=e.selectedItem,i=e.querySelector("calcite-radio-button"),n=t||i;n&&this._afterComponentCreateOrUpdate(n)}_onComponentFocus(e){let t=e.target,i=this._getFieldInputFromHTMLElement(t);this._touchedInputs.add(i.template.elementId),this._focusedFieldInput=i}_afterComponentCreateOrUpdate(e){let t=this._getFieldInputFromHTMLElement(e),i=this._focusedFieldInput;this._attemptFocusOnNextRender&&i===t&&(this._attemptFocusOnNextRender=!1,R(e))}_onComponentBlur(){this._focusedFieldInput=null}_parseValue(e,t){if(k(t.template,"switch")){if(e.localName==="calcite-dropdown"&&t.domain){for(let n of t.domain.codedValues)if(n.name===e.selectedItems[0].textContent)return n.code}return e.checked?t.template.input.onValue:t.template.input.offValue}let i=e.value;return i==null||i===""?null:t.dataType==="number"?i==="-0"||i==="-0."||i==="-0,"?i:parseFloat(i):t.field.type==="date"?parseFloat(i):i}_saveInput(e){let t=this._getFieldInputFromHTMLElement(e),{elementId:i}=t.template;if(!t)return;let n=t?.value;if(k(t.template,"switch")&&this.viewModel.mode!=="single"){let a=E(this._batchSwitchInputInitialValues,t,()=>t.value);this._batchSwitchInputInitialValues.set(t,a===null?n:a)}let o=this._parseValue(e,t);o!==n&&this.viewModel.setValue(i,o)}_afterDateComponentCreate(e){return S(this,null,function*(){let t=this._getFieldInputFromHTMLElement(e);yield e.componentOnReady(),this._setDateTimeTimeZoneMap(e),this._updateDateTimeOrTimeZoneShadowDom(e,t.value===c),this._afterComponentCreateOrUpdate(e)})}_afterDateComponentUpdate(e){return S(this,null,function*(){let{value:t}=this._getFieldInputFromHTMLElement(e);yield e.componentOnReady(),this._updateDateTimeOrTimeZoneShadowDom(e,t===c),this._afterComponentCreateOrUpdate(e)})}_saveValueFromDateComponent(e,t){let{elementId:i}=e.template,n=e.field.type,o=this._dateComponentMap.get(`${i}`);if(!o)return;let a=e.effectiveTimeZone,s=e.value===c?void 0:e.value,p=null;n==="date-only"?p=Array.isArray(t.value)?t.value[0]:t.value:n==="time-only"?(s=U(s),p=U(t.value)):p=n==="timestamp-offset"?t.value!=null?Q({dateComponent:o.date,timeComponent:o.time,oldValue:s,timeZoneComponent:o.timeZone,defaultTimeZone:a}):null:t.value!=null?ee({oldValue:s,dateComponent:o.date,timeZone:a,timeComponent:o.time?.value===c?void 0:o.time}):null,s!==p&&(p!==null&&t.value?this.viewModel.setValue(`${i}`,p):this.viewModel.setValue(`${i}`,null))}};d([u()],m.prototype,"activeFeatureIndex",null),d([u()],m.prototype,"disabled",null),d([u()],m.prototype,"_effectiveDisabled",null),d([u()],m.prototype,"features",null),d([u()],m.prototype,"map",null),d([u()],m.prototype,"spatialReference",null),d([u()],m.prototype,"timeZone",null),d([u()],m.prototype,"headingLevel",void 0),d([u()],m.prototype,"icon",null),d([u(),V("esri/t9n/common")],m.prototype,"messagesCommon",void 0),d([u(),V("esri/widgets/BatchAttributeForm/t9n/BatchAttributeForm")],m.prototype,"messages",void 0),d([u(),V("esri/widgets/FeatureForm/t9n/FeatureForm")],m.prototype,"featureFormMessages",void 0),d([u()],m.prototype,"readOnly",void 0),d([u(),Y(["value-change","submit"])],m.prototype,"viewModel",void 0),d([u({type:F,nonNullable:!0})],m.prototype,"visibleElements",void 0),d([u()],m.prototype,"groupDisplay",void 0),m=d([O("esri.widgets.BatchAttributeForm")],m);var Ae=m;export{Ae as default};
