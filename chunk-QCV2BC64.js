import{a as H}from"./chunk-AP7VLAWJ.js";import{a as B,b as A,c as S}from"./chunk-FKPG7W5D.js";import{c as N,d as W,e as I}from"./chunk-7WESBCZZ.js";import{a as V}from"./chunk-C6GAOMLO.js";import"./chunk-BNOCJUWF.js";import"./chunk-OW4BGWW5.js";import{a as z}from"./chunk-PT2T74VZ.js";import{a as w}from"./chunk-FHBFWDFD.js";import"./chunk-ZN6QVIVX.js";import"./chunk-TCTLHOSE.js";import"./chunk-44NA5LTU.js";import"./chunk-INL6HB7Y.js";import"./chunk-D4ULQQN7.js";import"./chunk-DYTVXYAV.js";import"./chunk-EQZWYK27.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import{a as k}from"./chunk-AXYQJCCX.js";import{a as n,b as $}from"./chunk-5XCFNEYX.js";import{a as E}from"./chunk-GQL2MBZT.js";import{b as L}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import{f as O}from"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as b,k as y}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as o}from"./chunk-QGVBCWUY.js";import{H as T}from"./chunk-MYO4NP2N.js";import{e as s}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as c}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import{g as x}from"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import"./chunk-VTHXE323.js";var p="esri-daylight",f=`${p}__container`,m="esri-slider",a={base:p,dayContainer:`${f} ${p}__day-container`,dateContainer:`${f} ${p}__date-container`,containerDisabled:`${f}--disabled`,slider:m,sliderShadowOff:`${m}--shadow-off`,sliderShadowOn:`${m}--shadow-on`,sliderAmPmOn:`${m}--ampm-on`,sliderDateOff:`${m}--date-off`,sliderDateOn:`${m}--date-on`,playPauseButton:`${p}__play-pause-button`,datePicker:`${p}__date-picker`,seasonPicker:`${p}__season-picker`,panelError:`${p}__panel--error`,sunLightingCheckbox:`${p}__sun-lighting-checkbox`,shadowsCheckbox:`${p}__shadows-checkbox`};var h=class extends T{constructor(e){super(e),this.header=!0,this.playButtons=!0,this.datePicker=!0,this.timezone=!0,this.sunLightingToggle=!0,this.shadowsToggle=!0}};o([s({type:Boolean,nonNullable:!0})],h.prototype,"header",void 0),o([s({type:Boolean,nonNullable:!0})],h.prototype,"playButtons",void 0),o([s({type:Boolean,nonNullable:!0})],h.prototype,"datePicker",void 0),o([s({type:Boolean,nonNullable:!0})],h.prototype,"timezone",void 0),o([s({type:Boolean,nonNullable:!0})],h.prototype,"sunLightingToggle",void 0),o([s({type:Boolean,nonNullable:!0})],h.prototype,"shadowsToggle",void 0),h=o([c("esri.widgets.Daylight.VisibleElements")],h);var C=h;var D="esri-slider-with-dropdown",_={label:"esri-slider__label",box:`${D}__box`,boxDropDownOn:`${D}__box--drop-down-on`,boxDropDownOff:`${D}__box--drop-down-off`},g=class extends V{constructor(e,l){super(e,l),this.viewModel=new A,this.showDropDown=!0,this._labelWidth=0,this._onLabelAfterCreate=t=>{let i="label-size-observer";this.removeHandles(i),this.addHandles(O(t,({contentRect:d})=>{this._labelWidth=d.width}),i)},this._getLabelStyles=()=>{if(!this.trackElement)return;let t=this._trackWidth,i=this._labelWidth/2,d=this.getCurrentPosition(),u=d-i,M=d+i,v=-i;return u<0?v+=-u:M>t&&(v+=t-M),{left:`${v}px`}},this._onTimezoneChange=t=>{this.viewModel.utcOffset=t},this._onTimezonePickerOpen=()=>{this.viewModel.timezonePickerOpen=!0},this._onTimezonePickerClose=()=>{this.viewModel.timezonePickerOpen=!1}}renderThumbLabel(e){let{showDropDown:l,viewModel:t}=this;return n("div",{afterCreate:this._onLabelAfterCreate,class:this.classes({[_.box]:!0,[_.label]:!0,[_.boxDropDownOn]:l,[_.boxDropDownOff]:!l}),key:"thumb-label",styles:this._getLabelStyles()},super.renderThumbLabel(e),l?n(H,{disabled:this.disabled,open:t.timezonePickerOpen,value:t.utcOffset,onChange:this._onTimezoneChange,onClose:this._onTimezonePickerClose,onOpen:this._onTimezonePickerOpen}):null)}};o([s()],g.prototype,"viewModel",void 0),o([s()],g.prototype,"showDropDown",void 0),o([s()],g.prototype,"_labelWidth",void 0),g=o([c("esri.widgets.Daylight.support.SliderWithDropdown")],g);var Y=g;var P="date",r=class extends E{constructor(e,l){super(e,l),this.headingLevel=3,this.viewModel=new S,this.visibleElements=new C,this.dateOrSeason=P,this._timeSlider=new Y({viewModel:this.viewModel.timeSliderViewModel,steps:this.timeSliderSteps,labelInputsEnabled:!1,visibleElements:{labels:!0},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:(t,i,d)=>N({tickElement:i,labelElement:d,tickClasses:F,onClick:this._makeGoToTime(t)})},{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:(t,i)=>W({tickElement:i,tickClasses:F,onClick:this._makeGoToTime(t)})}]}),this._onPlayDayClick=()=>{this.viewModel.toggleDayPlaying()},this._onDateChange=t=>{let i=t.currentTarget.valueAsDate;this.viewModel.onDateChange(Array.isArray(i)?i[0]:i)},this._onYearPlayClick=()=>{this.viewModel.toggleYearPlaying()},this._onSeasonChange=t=>{this.viewModel.currentSeason=t.currentTarget.value},this._onSunLightingCheckboxChange=()=>{this.viewModel.toggleSunLightingEnabled()},this._onShadowCheckboxChange=()=>{this.viewModel.toggleDirectShadowsEnabled()}}get icon(){return"brightness"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.title??""}set label(e){this._overrideIfSome("label",e)}get playSpeedMultiplier(){return this.viewModel.playSpeedMultiplier}set playSpeedMultiplier(e){this.viewModel.playSpeedMultiplier=e}get timeSliderSteps(){return this._timeSlider?.steps??5}set timeSliderSteps(e){this._timeSlider.steps=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}postInitialize(){this.viewModel.isSupported&&this.addHandles([b(()=>this.viewModel.timeSliderViewModel,e=>this._timeSlider.viewModel=e,y),b(()=>this.visibleElements?.timezone,e=>this._timeSlider.showDropDown=e,y),b(()=>!this.viewModel.sunLightingEnabled,e=>{this._timeSlider.disabled=e},y)])}destroy(){this._timeSlider.destroy()}render(){let{messages:e,viewModel:l,visibleElements:t}=this,i=l.isSupported;return n("div",{class:this.classes(a.base,w.widget)},i?n($,null,t.header?n(z,{level:this.headingLevel},e.title):null,this._renderTimeOptions(),t.datePicker?this._renderDateOrSeason():null,t.sunLightingToggle?this._renderSunLightingToggle():null,t.shadowsToggle?this._renderShadowsToggle():null):n("div",{class:a.panelError,key:"unsupported"},n("p",null,e.unsupported)))}loadDependencies(){return L({button:()=>import("./chunk-K3RCADAN.js"),checkbox:()=>import("./chunk-NV4IBMC5.js"),label:()=>import("./chunk-S24JESVO.js"),"input-date-picker":()=>import("./chunk-GYG7SVRX.js"),option:()=>import("./chunk-MKZWVLGJ.js"),select:()=>import("./chunk-YZG2OI4V.js")})}_renderTimeOptions(){let{viewModel:e,visibleElements:l,messages:t}=this,{directShadowsEnabled:i,dayPlaying:d}=e,u=!e.sunLightingEnabled;return n("div",{class:this.classes(a.dayContainer,{[a.sliderShadowOn]:i,[a.sliderShadowOff]:!i,[a.sliderDateOn]:l.datePicker,[a.sliderDateOff]:!l.datePicker,[a.sliderAmPmOn]:I(),[a.containerDisabled]:u}),key:"daylight-time-options"},this._timeSlider.render(),l.playButtons?this._renderPlayPauseButton({playing:d,disabled:u,label:t.playDay,onClick:this._onPlayDayClick}):null)}_renderDateOptions(){let{viewModel:e,visibleElements:l,messages:t}=this,{yearPlaying:i}=e,d=!e.sunLightingEnabled;return n("div",{class:this.classes(a.dateContainer,d&&a.containerDisabled),key:a.dateContainer},n("calcite-input-date-picker",{class:a.datePicker,"data-testid":"daylight-date-picker",disabled:d,key:a.datePicker,overlayPositioning:"fixed",placement:"bottom",valueAsDate:e.localDate,onCalciteInputDatePickerChange:this._onDateChange}),l.playButtons?this._renderPlayPauseButton({playing:i,disabled:d,label:t.playYear,onClick:this._onYearPlayClick}):null)}_renderPlayPauseButton({playing:e,disabled:l,label:t,onClick:i}){return n("calcite-button",{appearance:"solid",class:a.playPauseButton,disabled:l,iconStart:e?"pause-f":"play-f",label:t,onclick:i,round:!0,title:t,type:"button"})}_renderSeasonSelect(){let{messages:e,viewModel:l}=this,t=!l.sunLightingEnabled;return n("calcite-select",{class:this.classes(a.seasonPicker),disabled:t,label:e.season,onCalciteSelectChange:this._onSeasonChange},B.map(i=>n("calcite-option",{selected:l.currentSeason===i,value:i},e[i])))}_renderDateOrSeason(){return this.dateOrSeason==="date"?this._renderDateOptions():this._renderSeasonSelect()}_renderSunLightingToggle(){let e=this.messages?.sunLightingToggle;return n("calcite-label",{key:"date-time-toggle",layout:"inline",scale:"s",title:e?.tooltip},n("calcite-checkbox",{checked:this.viewModel.sunLightingEnabled,class:a.sunLightingCheckbox,onCalciteCheckboxChange:this._onSunLightingCheckboxChange}),e?.label)}_renderShadowsToggle(){let e=this.messages.shadowsToggle;return n("calcite-label",{key:"shadow-toggle",layout:"inline",scale:"s",title:e?.tooltip},n("calcite-checkbox",{checked:this.viewModel.directShadowsEnabled,class:a.shadowsCheckbox,onCalciteCheckboxChange:this._onShadowCheckboxChange}),e.label)}_makeGoToTime(e){return()=>{this.viewModel.timeSliderPosition=e}}};o([s(),k("esri/widgets/Daylight/t9n/Daylight")],r.prototype,"messages",void 0),o([s(),k("esri/widgets/support/t9n/timezone")],r.prototype,"timezoneMessages",void 0),o([s()],r.prototype,"headingLevel",void 0),o([s()],r.prototype,"icon",null),o([s()],r.prototype,"label",null),o([s()],r.prototype,"playSpeedMultiplier",null),o([s()],r.prototype,"timeSliderSteps",null),o([s()],r.prototype,"view",null),o([s({type:S})],r.prototype,"viewModel",void 0),o([s({type:C,nonNullable:!0})],r.prototype,"visibleElements",void 0),o([s({cast(e){return e==="season"||e==="date"?e:(x.getLogger(this).warn(`"${e}" is not a valid option. Acceptable values are only "date" or "season". Defaulting to "${P}".`),P)}})],r.prototype,"dateOrSeason",void 0),o([s()],r.prototype,"_timeSlider",void 0),r=o([c("esri.widgets.Daylight")],r);var F=[w.interactive,w.anchor],$e=r;export{$e as default};
