import{b as N,c as z}from"./chunk-4NUW747S.js";import{d as B}from"./chunk-T6WMVIUG.js";import{D as P,a as d,b as k,c as b,d as q,e as E,n as T,u as S,v as c,w as h}from"./chunk-6B5XFA6F.js";import{a as f}from"./chunk-BOVYXYHK.js";import{b as w,l as X}from"./chunk-EQZWYK27.js";function ot(t,r,n){let e=c(t,r)/c(t,t);return T(n,t,e)}function C(t,r){return c(t,r)/d(t)}function st(t,r){let n=c(t,r)/(d(t)*d(r));return-X(n)}function at(t,r,n){S(A,t),S(V,r);let e=c(A,V),o=X(e),i=h(A,A,V);return c(i,n)<0?2*Math.PI-o:o}var A=f(),V=f();function G(t=l){return[t[0],t[1],t[2],t[3]]}function gt(t=l[0],r=l[1],n=l[2],e=l[3]){return H(t,r,n,e,z.get())}function K(t,r){return H(r[0],r[1],r[2],r[3],t)}function H(t,r,n,e,o=G()){return o[0]=t,o[1]=r,o[2]=n,o[3]=e,o}function pt(t,r,n){return k(n,t),n[3]=r,n}function Q(t,r,n){let e=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],o=Math.abs(e-1)>1e-5&&e>1e-12?1/Math.sqrt(e):1;return n[0]=r[0]*o,n[1]=r[1]*o,n[2]=r[2]*o,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function W(t,r,n,e=G()){let o=n[0]-r[0],i=n[1]-r[1],a=n[2]-r[2],s=t[0]-r[0],O=t[1]-r[1],D=t[2]-r[2],p=i*D-a*O,y=a*s-o*D,j=o*O-i*s,v=p*p+y*y+j*j,x=Math.abs(v-1)>1e-5&&v>1e-12?1/Math.sqrt(v):1;return e[0]=p*x,e[1]=y*x,e[2]=j*x,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function J(t,r,n,e=0,o=Math.floor(n*(1/3)),i=Math.floor(n*(2/3))){if(n<3)return!1;r(_,e);let a=o,s=!1;for(;a<n-1&&!s;)r(g,a),a++,s=!P(_,g);if(!s)return!1;for(a=Math.max(a,i),s=!1;a<n&&!s;)r(m,a),a++,E(F,_,g),S(F,F),E(U,g,m),S(U,U),s=!P(_,m)&&!P(g,m)&&Math.abs(c(F,U))<Y;return s?(W(_,g,m,t),!0):(e!==0||o!==1||i!==2)&&J(t,r,n,0,1,2)}function _t(t,r,n=!0){let e=r.length/3;return J(t,(o,i)=>b(o,r[3*i+0],r[3*i+1],r[3*i+2]),n?e-1:e)}var Y=.99619469809,_=f(),g=f(),m=f(),F=f(),U=f();function lt(t,r,n){return r!==t&&K(t,r),t[3]=-c(t,n),t}function Mt(t,r){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=-t[3],r}function Ot(t,r,n,e){return h(m,r,t),Q(n,m,e)}function Dt(t,r,n,e){return L(R(t,r,E(N.get(),n,r),$,e))}function dt(t,r,n){return r!=null&&L(R(t,r.origin,r.direction,tt,n))}function ht(t,r,n){return L(R(t,r.origin,r.vector,I.NONE,n))}function Pt(t,r,n){return L(R(t,r.origin,r.vector,I.CLAMP,n))}function At(t,r){return M(t,r)>=0}function Ct(t,r){let n=c(t,r.ray.direction),e=-M(t,r.ray.origin);if(e<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return e>0;if((e<0||n<0)&&!(e<0&&n<0))return!0;let o=e/n;return n>0?o<r.c1&&(r.c1=o):o>r.c0&&(r.c0=o),r.c0<=r.c1}function Ft(t,r){let n=c(t,r.ray.direction),e=-M(t,r.ray.origin);if(n>-1e-6&&n<1e-6)return e>0;let o=e/n;return n>0?o<r.c1&&(r.c1=o):o>r.c0&&(r.c0=o),r.c0<=r.c1}function Ut(t,r,n){let e=T(N.get(),t,-t[3]),o=Z(t,E(N.get(),r,e),N.get());return q(n,o,e),n}function Lt(t,r,n,e){let o=t,i=N.get(),a=N.get();B(o,i,a);let s=E(N.get(),n,r),O=C(i,s),D=C(a,s),p=C(o,s);return b(e,O,D,p)}function Z(t,r,n){let e=T(N.get(),t,c(t,r));return E(n,r,e),n}function Rt(t,r){return Math.abs(M(t,r))}function M(t,r){return c(t,r)+t[3]}var u;function L(t){return t===u.INTERSECTS_INSIDE_OUT||t===u.INTERSECTS_OUTSIDE_IN}function R(t,r,n,e,o){let i=c(t,n),a=M(t,r);if(i===0)return a>=0?u.INSIDE:u.OUTSIDE;let s=-a/i;return e&I.CLAMP&&(s=w(s,0,1)),!(e&I.INFINITE_MIN)&&s<0||!(e&I.INFINITE_MAX)&&s>1?a>=0?u.INSIDE:u.OUTSIDE:(q(o,r,T(o,n,s)),a>=0?u.INTERSECTS_INSIDE_OUT:u.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(u||(u={}));var l=[0,0,1,0],I;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(I||(I={}));var $=I.INFINITE_MIN|I.INFINITE_MAX,tt=I.INFINITE_MAX;export{ot as a,C as b,st as c,at as d,G as e,gt as f,K as g,H as h,pt as i,Q as j,W as k,J as l,_t as m,lt as n,Mt as o,Ot as p,Dt as q,dt as r,ht as s,Pt as t,At as u,Ct as v,Ft as w,Ut as x,Lt as y,Rt as z,M as A,u as B,R as C,I as D};
