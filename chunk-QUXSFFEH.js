import{a as v,c as R,d as M,e as V}from"./chunk-KZJMV5LT.js";import{d as P,e as A}from"./chunk-BFNVELP4.js";import"./chunk-D43YNUSN.js";import"./chunk-XBSD6EUF.js";import"./chunk-B3VPRADQ.js";import"./chunk-HJQNAAJT.js";import"./chunk-KP75LCOH.js";import"./chunk-ES4WUTEM.js";import"./chunk-5AFOYCWC.js";import"./chunk-Z3MWEX65.js";import"./chunk-YB6RTOHR.js";import{b as c}from"./chunk-DKNG2DCF.js";import"./chunk-RZU6EEB3.js";import"./chunk-G23ELQMS.js";import"./chunk-2SXWYVJN.js";import"./chunk-ELUASJOG.js";import"./chunk-7Y6S2GNA.js";import"./chunk-VOB6IBIW.js";import"./chunk-63B3IOWG.js";import"./chunk-J2AEVBSH.js";import"./chunk-5ODXFRPI.js";import"./chunk-E5QCV5LT.js";import"./chunk-QS3EYJPF.js";import"./chunk-HJJZ2AXH.js";import"./chunk-TPNSUEHH.js";import"./chunk-VL2YL74P.js";import"./chunk-P2AJD2R2.js";import"./chunk-UMJIJLDA.js";import"./chunk-E5NFS3KN.js";import"./chunk-HQHD6BMN.js";import"./chunk-AIKKGGPG.js";import"./chunk-RDGG4TVD.js";import"./chunk-3IQFPOUU.js";import"./chunk-I4CY6X6S.js";import"./chunk-VQ4QGNRX.js";import"./chunk-4KXJ537H.js";import"./chunk-JIRULGDT.js";import"./chunk-QJGOWIJD.js";import"./chunk-RNZY2XUD.js";import"./chunk-JXPUHKCT.js";import"./chunk-XR5FT7TQ.js";import"./chunk-LAX5536Z.js";import"./chunk-N3HRYLNW.js";import"./chunk-4DBMALZW.js";import"./chunk-CVWWHM2V.js";import"./chunk-6OQYVEQJ.js";import"./chunk-YOXOWGT6.js";import"./chunk-EFZOSMYP.js";import"./chunk-WI7F4ZKJ.js";import"./chunk-MJ7M24NH.js";import"./chunk-GJH4QFRX.js";import"./chunk-T63F7663.js";import"./chunk-O4V2VBSK.js";import"./chunk-5TKRKB5E.js";import"./chunk-XAGMDNNR.js";import"./chunk-OP2TLIUN.js";import"./chunk-T2THIR6K.js";import"./chunk-LORHDXEB.js";import"./chunk-BBBPJI4H.js";import"./chunk-45BTW5EG.js";import"./chunk-TPFBHGDM.js";import"./chunk-73NLRHJD.js";import"./chunk-PNFEUBDF.js";import"./chunk-6RCCEJDL.js";import"./chunk-PQ2TNDUX.js";import"./chunk-6X6MKRQ3.js";import"./chunk-FQFHMHYU.js";import"./chunk-SZMEI3WL.js";import"./chunk-KKVGD67U.js";import"./chunk-MYOJWRDU.js";import"./chunk-L7UKJKHG.js";import"./chunk-V2IENAEU.js";import"./chunk-QAGQFNF2.js";import"./chunk-SY7JS2VW.js";import"./chunk-WK57SDN6.js";import"./chunk-AG4V3ZUO.js";import"./chunk-YWLMJ26A.js";import"./chunk-QAWNU3UJ.js";import"./chunk-HRQT4R6X.js";import"./chunk-44BHLWQ4.js";import"./chunk-5BPM64SU.js";import"./chunk-PMVHHMQJ.js";import"./chunk-NAFOM5UA.js";import{a as b}from"./chunk-DO7UF2F2.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import{a as I}from"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import{a as L}from"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import{a as N}from"./chunk-K57Z4J34.js";import{a as F}from"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-R3XLNYYB.js";import"./chunk-BMYVPMAK.js";import"./chunk-6F25LG6O.js";import"./chunk-6KRFVLII.js";import"./chunk-GJ2QRXGN.js";import"./chunk-TJ6P6NLD.js";import"./chunk-3JGYBNJA.js";import"./chunk-IO35PPBL.js";import"./chunk-F5AJITOA.js";import"./chunk-IHATPE6U.js";import"./chunk-PU4AK46X.js";import"./chunk-3CLJ5OX5.js";import"./chunk-E6C7G5SC.js";import"./chunk-73K3NWCV.js";import"./chunk-SP2CO3KX.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-ZC6EBRE4.js";import{W as E}from"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-E7AX56GD.js";import"./chunk-IDVLLREH.js";import"./chunk-DWLSVYOY.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-QKO56XO6.js";import"./chunk-JRGT3GTH.js";import"./chunk-K75TK42V.js";import"./chunk-VV5G7VY5.js";import"./chunk-OLOKUDVI.js";import"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-KVM6SHDX.js";import"./chunk-POX73EYJ.js";import"./chunk-NKUXRYJG.js";import"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-DKGGDYJI.js";import"./chunk-5LA3PVK5.js";import"./chunk-IR6XCBC4.js";import"./chunk-C6JPAW54.js";import"./chunk-WD3OPXCN.js";import"./chunk-FA3WGIU4.js";import"./chunk-WWVPA6PE.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-WTB3O6DJ.js";import{a as y}from"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import{b as S}from"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import{b as C}from"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{f as m}from"./chunk-VTHXE323.js";function h(t){let{fieldName:r,label:n,type:e}=t,s=e!=null&&E.includes(e),a=new N({fieldName:r,label:n,visible:!0,format:s?new F({places:e==="integer"||e==="small-integer"?0:2,digitSeparator:!0}):void 0});return e==="date"&&(a.format=new F({dateFormat:"short-date-short-time"})),a}function g(t,r){let n=t?r.getField(t):null;return n!=null?n.alias||n.name:void 0}function k(t,r,n){let{attributeInfo:e,statisticType:s}=r,{field:a,normalizationField:u}=e,i,o="";if(s==="avg"?i=u?n.clusters.avgNormFieldLabel:n.clusters.avgFieldLabel:s==="type"&&(i=n.clusters.predominantFieldLabel),i){let l=e.valueExpression?e.valueExpressionTitle:g(a,t),f=u&&g(u,t);o=y(i,{fieldLabel:l||"",normFieldLabel:f||""})}return o}function j(t,r,n,e){let{attributeInfo:s,statisticType:a}=r,{field:u,normalizationField:i}=s,o,l="";if(a==="avg"?o=i?e.clusters.avgNormFieldSummary:e.clusters.avgFieldSummary:a==="type"&&(o=e.clusters.predominantFieldSummary),o){let f=s.valueExpression?s.valueExpressionTitle:g(u,t),p=i&&g(i,t);l=y(o,{fieldLabel:f||"",normFieldLabel:p||"",fieldValue:"{"+n+"}"})}return l}function q(t){return{fieldInfo:h({fieldName:v,label:t.clusters.numFeatures,type:"integer"}),fieldSummary:new I({text:y(t.clusters.countSummary,{count:`{${v}}`})})}}function z(t,r,n){return m(this,null,function*(){if(!c(r))return null;let e=V(t,r),s=n.clusters.predominantNoneValue,a=r.type==="unique-value"?r.uniqueValueInfos??[]:[],{fieldInfo:u,fieldSummary:i}=q(n),o=[i],l=[u],f=[];for(let p of e){let{statisticType:x,attributeInfo:B}=p,d=R(B,x),w=k(t,p,n);if(x==="avg")o.push(new I({text:j(t,p,d,n)})),l.push(h({fieldName:d,label:w,type:"double"}));else if(x==="type"){let T=`expression/${d}`;o.push(new I({text:j(t,p,T,n)})),f.push(new L({name:d,title:w,returnType:"string",expression:M(a,d,s)})),l.push(h({fieldName:T}))}}return{fieldInfos:l,expressionInfos:f,content:o}})}function $(t,r,n){return m(this,null,function*(){if(!c(r))return null;let{fieldInfo:e,fieldSummary:s}=q(n),a=[s],u=[e],i=[],{fieldInfos:o,expressionInfos:l}=yield P({renderer:r,layer:t,isFeatureReduction:!0}),f=yield A(t,{fieldInfos:o,expressionInfos:l},!0);return a.push(...f),u.push(...o),i.push(...l),{fieldInfos:u,expressionInfos:i,content:a}})}function D(t){return m(this,null,function*(){let{layer:r,renderer:n}=t;yield r.load();let e=n??("renderer"in r?r.renderer:void 0);if(!c(e))throw new C("clusters-popup:invalid-parameters","'renderer' is not valid");return{layer:r,renderer:e}})}function me(t){return m(this,null,function*(){let[{renderer:r,layer:n},e]=yield Promise.all([D(t),S("esri/smartMapping/t9n/smartMapping")]),s=yield z(n,r,e);if(s==null)return null;let a={name:"clusters",title:e.clusters.templateTitle,value:new b({fieldInfos:s.fieldInfos,expressionInfos:s.expressionInfos,content:s.content,title:e.clusters.clusterPopupTitle})},u=[],i=n.featureReduction,o=i&&"renderer"in i?i.renderer:null;if(o?.type==="pie-chart"){let l=yield $(n,o,e);l!=null&&u.push({name:"clusters-pie-chart",title:"clusters-pie-chart",value:new b({fieldInfos:l.fieldInfos,expressionInfos:l.expressionInfos,content:l.content,title:e.clusters.clusterPopupTitle})})}return{primaryTemplate:a,secondaryTemplates:u}})}export{me as getTemplates};
