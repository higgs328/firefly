import{a as fe}from"./chunk-5LEVV5RT.js";import{b as Y}from"./chunk-OL45JXQR.js";import{a as me,b as ve}from"./chunk-DZULK4IP.js";import{b as ge}from"./chunk-342XUK2L.js";import"./chunk-JYWKUDYY.js";import"./chunk-5LQBOUN5.js";import"./chunk-SQ44NQCH.js";import"./chunk-Z7FM23V2.js";import"./chunk-UMRL4FCR.js";import"./chunk-UDMXK7SH.js";import"./chunk-ZEWUF6OQ.js";import{b as A,c as X}from"./chunk-ETLJEDNA.js";import"./chunk-AKDISSFR.js";import{b as Q}from"./chunk-QW25UBG2.js";import"./chunk-HSKV7JWT.js";import"./chunk-JK6ANXJE.js";import"./chunk-SWT4UIOH.js";import"./chunk-E6JHCD7G.js";import"./chunk-EOMINWGE.js";import"./chunk-EFTNLZSK.js";import"./chunk-Q3T7LRXL.js";import"./chunk-DYNR3EAF.js";import"./chunk-W3TWKYGN.js";import"./chunk-72TNJFVF.js";import"./chunk-OC2XJJQU.js";import"./chunk-TFDME2PB.js";import"./chunk-ZQ2SHTTW.js";import{a as ue}from"./chunk-EPKVBNFW.js";import"./chunk-TGSXSDDB.js";import{a as he}from"./chunk-FHBFWDFD.js";import"./chunk-2XCEJBGD.js";import"./chunk-UZ6PRO67.js";import"./chunk-IL63CQ3W.js";import"./chunk-7A3ZNBEY.js";import"./chunk-APBBABYM.js";import"./chunk-PCYNPIKE.js";import{a as de}from"./chunk-AM4QFKZT.js";import"./chunk-IKNLDVQM.js";import"./chunk-7UE7WQ2N.js";import"./chunk-AMX6AASB.js";import"./chunk-DT6D5YZT.js";import"./chunk-NYVW6BKJ.js";import"./chunk-CSSRRM4C.js";import"./chunk-RVXDLN3U.js";import"./chunk-4OC4J3KU.js";import"./chunk-QCN4VUQF.js";import"./chunk-DOB47SIN.js";import"./chunk-CESHMSBL.js";import"./chunk-CJL3HAFX.js";import"./chunk-S3MATJKX.js";import"./chunk-NWJCHWGR.js";import"./chunk-FM2MN524.js";import"./chunk-XEJVICTW.js";import"./chunk-ESAKNWVF.js";import"./chunk-H26LGRNQ.js";import"./chunk-2JW3DUYT.js";import"./chunk-4JIR4MZV.js";import"./chunk-ZO3S2OWI.js";import"./chunk-XGBN53IG.js";import"./chunk-KVIHP5QH.js";import"./chunk-62UTK67Z.js";import"./chunk-63BBKXWS.js";import"./chunk-NYVDVEEV.js";import"./chunk-67GIWMYL.js";import"./chunk-2BJHWKO6.js";import"./chunk-Q5KIWWVU.js";import"./chunk-7LVUNMSI.js";import"./chunk-WBPLJNRU.js";import"./chunk-QRJEAGEQ.js";import"./chunk-CISTQZ5X.js";import"./chunk-7XYYDAZO.js";import"./chunk-DXT3NBO5.js";import"./chunk-H2NTHPNN.js";import"./chunk-Z7TBAZRW.js";import"./chunk-CL7L227X.js";import{g as F}from"./chunk-456M7HFK.js";import"./chunk-342NGUMP.js";import"./chunk-NIYDRLW4.js";import"./chunk-QSQIQSC6.js";import"./chunk-AYNBEMCC.js";import"./chunk-LNYBTIG7.js";import"./chunk-3WNFY6Z5.js";import"./chunk-E2J2V7JN.js";import"./chunk-QCZ3ZIGQ.js";import"./chunk-7SDNM7YV.js";import"./chunk-4NUW747S.js";import"./chunk-T6WMVIUG.js";import"./chunk-PHODKV66.js";import"./chunk-JPMGMA4B.js";import"./chunk-YZJDOXQC.js";import"./chunk-BMZ3PE5Y.js";import{e as pe,f as ce}from"./chunk-XR5FT7TQ.js";import"./chunk-LAX5536Z.js";import"./chunk-N3HRYLNW.js";import"./chunk-4DBMALZW.js";import"./chunk-CVWWHM2V.js";import"./chunk-6OQYVEQJ.js";import"./chunk-YOXOWGT6.js";import"./chunk-EFZOSMYP.js";import"./chunk-WI7F4ZKJ.js";import"./chunk-MJ7M24NH.js";import"./chunk-GJH4QFRX.js";import"./chunk-T63F7663.js";import"./chunk-O4V2VBSK.js";import"./chunk-5TKRKB5E.js";import"./chunk-XAGMDNNR.js";import"./chunk-OP2TLIUN.js";import"./chunk-T2THIR6K.js";import"./chunk-LORHDXEB.js";import"./chunk-BBBPJI4H.js";import"./chunk-45BTW5EG.js";import"./chunk-TPFBHGDM.js";import"./chunk-73NLRHJD.js";import"./chunk-PNFEUBDF.js";import"./chunk-6RCCEJDL.js";import"./chunk-PQ2TNDUX.js";import"./chunk-6X6MKRQ3.js";import"./chunk-FQFHMHYU.js";import"./chunk-SZMEI3WL.js";import"./chunk-KKVGD67U.js";import"./chunk-MYOJWRDU.js";import"./chunk-L7UKJKHG.js";import"./chunk-V2IENAEU.js";import"./chunk-QAGQFNF2.js";import"./chunk-SY7JS2VW.js";import"./chunk-WK57SDN6.js";import"./chunk-AG4V3ZUO.js";import"./chunk-YWLMJ26A.js";import"./chunk-QAWNU3UJ.js";import"./chunk-HRQT4R6X.js";import"./chunk-44BHLWQ4.js";import"./chunk-5BPM64SU.js";import"./chunk-PMVHHMQJ.js";import"./chunk-NAFOM5UA.js";import"./chunk-DO7UF2F2.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import"./chunk-K57Z4J34.js";import"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-JQAW4OB5.js";import"./chunk-TC77DYTW.js";import"./chunk-F2BQ2GD6.js";import"./chunk-R3XLNYYB.js";import"./chunk-2HYVVLKS.js";import"./chunk-XRTA5GHC.js";import"./chunk-Y6XW36QP.js";import"./chunk-ZXKU6WBY.js";import"./chunk-U2ZO6WN5.js";import"./chunk-BMYVPMAK.js";import"./chunk-6F25LG6O.js";import"./chunk-XLL67PCY.js";import"./chunk-MCO7DSFO.js";import"./chunk-IIROCMOY.js";import"./chunk-GJ2QRXGN.js";import"./chunk-EM35R6FY.js";import"./chunk-HKJZ7WI6.js";import"./chunk-DJW5LMRG.js";import"./chunk-DMO5HQM3.js";import"./chunk-DEH76MSI.js";import"./chunk-ALWV3RJ2.js";import"./chunk-QXXXCEV5.js";import"./chunk-6B5XFA6F.js";import"./chunk-PUVSV35R.js";import"./chunk-FCWOKKZM.js";import"./chunk-TJ6P6NLD.js";import"./chunk-3JGYBNJA.js";import"./chunk-TQPBYYQ3.js";import"./chunk-DA3SDKGO.js";import"./chunk-ZOEPYNM4.js";import"./chunk-57VFBGF3.js";import"./chunk-GWBRHLNH.js";import"./chunk-BJH4F4SM.js";import"./chunk-Z3RBZHAK.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-JAPGPEA6.js";import"./chunk-ZC6EBRE4.js";import"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-E7AX56GD.js";import"./chunk-IDVLLREH.js";import"./chunk-DWLSVYOY.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-7QNKS2X6.js";import"./chunk-VCCMJ6BV.js";import"./chunk-QK56OQGR.js";import"./chunk-FXCL7YYQ.js";import"./chunk-QKO56XO6.js";import"./chunk-JRGT3GTH.js";import"./chunk-K75TK42V.js";import"./chunk-CELWVZPW.js";import"./chunk-VV5G7VY5.js";import"./chunk-OLOKUDVI.js";import"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-KVM6SHDX.js";import"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-DKGGDYJI.js";import"./chunk-5LA3PVK5.js";import"./chunk-IR6XCBC4.js";import"./chunk-C6JPAW54.js";import"./chunk-WD3OPXCN.js";import"./chunk-FA3WGIU4.js";import"./chunk-WWVPA6PE.js";import"./chunk-VU5W7W6Y.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-O3EGNJTY.js";import"./chunk-WGAOVKGR.js";import"./chunk-MDSLION2.js";import{a as O}from"./chunk-AXYQJCCX.js";import{a,b as U}from"./chunk-5XCFNEYX.js";import{a as _}from"./chunk-GQL2MBZT.js";import{b as M}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import{f as ae}from"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import{a as ne}from"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import{a as q}from"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as P,b as le,k as J}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import{b as re}from"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import{a as se}from"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as s}from"./chunk-QGVBCWUY.js";import{H as ie,d as V}from"./chunk-MYO4NP2N.js";import{e as r}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as m}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import{b as K,d as x,z as j}from"./chunk-4PTIEWMT.js";import{d as $}from"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import{g as E}from"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import{y as D}from"./chunk-QBWJMFH5.js";import{a as f,b as T}from"./chunk-VTHXE323.js";var v={groupSeparator:1,action:{s:32,m:48,l:64},splitButtonPart:{horizontal:{s:16,m:16,l:24},vertical:{s:16,m:24,l:40}}},N={splitButton:{horizontal:"chevron-down",vertical:"ellipsis"},overflow:"ellipsis"};function Z(e,t){return e.vnodeSelector===t?[e]:e.children?.flatMap(i=>Z(i,t))??[]}var W=e=>{let t=class extends e{constructor(){super(...arguments),this.priority=0,this.scale="m",this.slot=void 0,this.lastActiveKey=null,this.layout="horizontal"}destroy(){this.measurementManager?.managedElements.remove(this),this.measurementManager=null}set measurementManager(i){let o=this._get("measurementManager");i!==o&&(o&&o.managedElements.remove(this),this._set("measurementManager",i),i?.managedElements.add(this))}set budgetedLength(i){this.budgetedLength!==i&&(this._set("budgetedLength",i),this.scheduleRender())}get actionChildren(){return this.children?.flatMap(i=>Z(i,"calcite-action"))??[]}get activeChildElement(){let i=this.actionChildren.find(o=>o.properties?.active===!0);return i?(this._set("lastActiveKey",i.properties?.key),i):this.lastActiveKey?this.actionChildren.find(o=>o.properties?.key===this.lastActiveKey):void 0}_handleClick(i){i?.dataset&&"dataset"in i&&i.dataset.actionKey&&(this.lastActiveKey=i.dataset.actionKey)}};return s([r()],t.prototype,"priority",void 0),s([r()],t.prototype,"measurementManager",null),s([r()],t.prototype,"budgetedLength",null),s([r()],t.prototype,"actionChildren",null),s([r()],t.prototype,"activeChildElement",null),s([r()],t.prototype,"scale",void 0),s([r()],t.prototype,"slot",void 0),s([r()],t.prototype,"lastActiveKey",void 0),s([r()],t.prototype,"layout",void 0),t=s([m("esri.widgets.Sketch.support.ResponsiveToolbar.ToolbarGroupBase")],t),t};var ye=Symbol("on-resize-handle-key"),z=class extends W(_){constructor(e){super(e),this._measuredWidth=0,this._measuredHeight=0,this._measuredElement=null}destroy(){this._measuredElement=null}get lengthOptions(){return[this.layout==="horizontal"?this._measuredWidth:this._measuredHeight]}render(){return a("div",{afterCreate:e=>{this._measuredElement=e.firstElementChild,this.addHandles(ae(this._measuredElement,()=>{this._measuredWidth=this._measuredElement?.clientWidth??0,this._measuredHeight=this._measuredElement?.clientHeight??0}),ye)},afterRemoved:()=>this.removeHandles(ye)},this.children)}};s([r()],z.prototype,"_measuredWidth",void 0),s([r()],z.prototype,"_measuredHeight",void 0),s([r()],z.prototype,"lengthOptions",null),s([r()],z.prototype,"_measuredElement",void 0),z=s([m("esri.widgets.Sketch.support.ResponsiveToolbar.MeasuredContentGroup")],z);var _e=z;var B=class extends W(_){constructor(e){super(e),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return M({action:()=>import("./chunk-X23M5IZ6.js"),"action-group":()=>import("./chunk-WQ2GF3MJ.js"),"action-menu":()=>import("./chunk-4SH4NG6C.js")})}get minimumLength(){let{actionChildren:e,scale:t}=this;return e.length?this.allowCollapse?v.groupSeparator+v.action[t]*Math.min(e.length,2):v.groupSeparator+v.action[t]*e.length:0}get lengthOptions(){let{actionChildren:e,scale:t,minimumLength:i,allowCollapse:o,priority:l}=this,n=[i];if(e.length<=2||!o||l<1)return n;for(let c=1;c<e.length-1;c++)n.push(i+v.action[t]*c);return n}render(){if(!this.actionChildren.length)return a(U,null,void 0);let{budgetedLength:e,actionChildren:t,activeChildElement:i,layout:o,slot:l,scale:n}=this,c=Math.floor(e/v.action[n]),d=[],h=[];if(c>=t.length)d.push(...t);else{let g=i??d.at(0);if(d.push(...t.slice(0,c-1)),h.push(...t.slice(c-1)),g&&h.includes(g)){let[y]=h.splice(h.indexOf(g),1),H=d.pop();d.push(y),H&&h.unshift(H)}}return a("calcite-action-group",{key:"overflow-button-group",layout:o,onclick:g=>this._handleClick(g.target),slot:l},d.map(g=>this._renderManagedAction(g)),h.length>0?a("calcite-action-menu",{key:"split-button-dropdown",label:this.messagesCommon.more,overlayPositioning:"fixed"},a("calcite-action",{icon:N.overflow,key:"split-button-dropdown-trigger",scale:n,slot:"trigger",text:this.messagesCommon.more}),h.map(g=>this._renderManagedAction(g))):void 0)}_renderManagedAction(e){return a("calcite-action",T(f({},e?.properties),{"data-action-key":e?.properties?.key,text:e?.properties?.text??""}))}};B.vnodeSelector="calcite-action-group",s([r()],B.prototype,"allowCollapse",void 0),s([r()],B.prototype,"minimumLength",null),s([r(),O("esri/t9n/common")],B.prototype,"messagesCommon",void 0),s([r()],B.prototype,"lengthOptions",null),B=s([m("esri.widgets.Sketch.support.ResponsiveToolbar.OverflowGroup")],B);var be=B;var I=class extends ie{constructor(){super(...arguments),this.measuredElement=null,this.managedElements=new re,this.availableLength=0,this.layout="horizontal",this._resizeObserver=new ResizeObserver(()=>{this._measure()})}get _sortedElements(){return[...this.managedElements].sort((e,t)=>t.priority-e.priority)}connect(e){this._resizeObserver.disconnect(),this.measuredElement=e,this._resizeObserver.observe(e),this._measure()}allocate(){let e=new Map,{availableLength:t,_sortedElements:i}=this,o=0;for(let l of i){let n=l.lengthOptions[0];e.set(l,n),o+=n}for(let l of i)for(;o<t;){let n=e.get(l);if(!n)break;let c=l.lengthOptions.find(h=>h>n);if(!c)break;let d=o-n+c;if(d>t)break;e.set(l,c),o=d}for(let[l,n]of e)l.budgetedLength=n}_measure(){let e=this.measuredElement;this.availableLength=e?this.layout==="horizontal"?e.clientWidth??0:e.clientHeight??0:0,this.allocate()}destroy(){this._resizeObserver.disconnect()}};s([r()],I.prototype,"measuredElement",void 0),s([r()],I.prototype,"managedElements",void 0),s([r()],I.prototype,"_sortedElements",null),s([r()],I.prototype,"availableLength",void 0),s([r()],I.prototype,"layout",void 0),I=s([m("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbarManager")],I);var we=I;var Oe={base:"esri-split-button",splitButtonBase:"esri-split-button--split-part"},L=class extends W(_){constructor(e){super(e),this.messagesCommon=null}loadDependencies(){return M({action:()=>import("./chunk-X23M5IZ6.js"),"action-group":()=>import("./chunk-WQ2GF3MJ.js"),"action-menu":()=>import("./chunk-4SH4NG6C.js")})}get minimumLength(){let e=this.actionChildren;return e.length?e.length===1?v.action[this.scale]+v.groupSeparator:v.action[this.scale]+v.splitButtonPart[this.layout][this.scale]+v.groupSeparator:0}get lengthOptions(){let{actionChildren:e,minimumLength:t,layout:i,scale:o,priority:l}=this;if(e.length<2||l<0)return[t];let n=v.groupSeparator+v.action[o]*e.length;return[v.groupSeparator+v.action[o]+v.splitButtonPart[i][o],n]}render(){if(!this.actionChildren.length)return a(U,null,void 0);let{actionChildren:e,minimumLength:t,budgetedLength:i,layout:o,slot:l}=this,n=e.length<2||i>t;return a("calcite-action-group",{key:"split-button-group",layout:o,onclick:c=>this._handleClick(c.target),slot:l},n?this._renderUnSplit():this._renderSplit())}_renderSplit(){let{activeChildElement:e,layout:t,actionChildren:i,scale:o,messagesCommon:l}=this,n=e??i.at(0);if(!n)return;let c=i.filter(d=>d!==n);return[this._renderManagedAction(n),a("calcite-action-menu",{key:"split-button-dropdown",label:l.more,overlayPositioning:"fixed",placement:t==="horizontal"?"bottom-end":"right-end"},a("calcite-action",{class:`${Oe.splitButtonBase}--${t}--${this.scale}`,compact:t==="horizontal",icon:N.splitButton[t],key:"split-button-dropdown-trigger",scale:o,slot:"trigger",text:l.more}),c?.map(d=>this._renderManagedAction(d)))]}_renderUnSplit(){return this.actionChildren.map(e=>this._renderManagedAction(e))}_renderManagedAction(e){return a("calcite-action",T(f({},e?.properties),{"data-action-key":e?.properties?.key,text:e?.properties?.text??""}))}};L.vnodeSelector="calcite-action-group",s([r()],L.prototype,"minimumLength",null),s([r()],L.prototype,"lengthOptions",null),s([r(),O("esri/t9n/common")],L.prototype,"messagesCommon",void 0),L=s([m("esri.widgets.Sketch.support.ResponsiveToolbar.SplitButton")],L);var b="esri-responsive-toolbar",w={rulerBase:`${b}__ruler`,rulerBarHorizontal:`${b}__ruler--bar`,rulerBarVertical:`${b}__ruler--bar--vertical`,rulerPadVertical:`${b}__ruler--pad--vertical`,rulerPadHorizontal:`${b}__ruler--pad--horizontal`,bar:`${b}__bar`,barHorizontal:`${b}__bar--horizontal`,barVertical:`${b}__bar--vertical`,pad:`${b}__pad`,padVertical:`${b}__pad--vertical`,padHorizontal:`${b}__pad--horizontal`},R=class extends _{constructor(e){super(e),this.scale="m",this.barStyle="floating",this._measurementManager=new we,this._managedWidgets=new Map}loadDependencies(){return M({"action-bar":()=>import("./chunk-ZZCREW2O.js"),"action-pad":()=>import("./chunk-D2QBOSYD.js")})}destroy(){this._measurementManager=K(this._measurementManager),this._managedWidgets.forEach(e=>e.destroy()),this._managedWidgets.clear()}set layout(e){let t=this._get("layout");this._set("layout",e),this._measurementManager&&(this._measurementManager.layout=e),t!==e&&this.scheduleRender()}render(){let{layout:e,scale:t,barStyle:i}=this,o={layout:e,scale:t,expandDisabled:!0,key:"measured-toolbar"},l=i==="docked"?e==="vertical"?w.rulerBarVertical:w.rulerBarHorizontal:e==="horizontal"?w.rulerPadHorizontal:w.rulerPadVertical;return a("div",null,a("div",{afterCreate:n=>{this._measurementManager?.connect(n)},class:this.classes(w.rulerBase,l)}),i==="docked"?a("calcite-action-bar",T(f({},o),{classes:{[w.barHorizontal]:this.layout==="horizontal",[w.barVertical]:this.layout==="vertical",[w.bar]:!0},overflowActionsDisabled:!0}),this._renderChildren()):a("calcite-action-pad",T(f({},o),{class:this.classes(w.pad,e==="horizontal"?w.padHorizontal:w.padVertical)}),this._renderChildren()))}_renderChildren(){if(!this.children)return;let e=this.children.filter(o=>o.properties?.key!==void 0&&"group-kind"in o.properties),t=new Set,i=e.map(o=>{let l=o.properties,n=l.key;t.add(n);let c=this.barStyle==="docked"?l.slot??void 0:void 0,d=l.priority??0,h=l["group-kind"]??"overflow-group",g=l["allow-collapse"]??!0,y=this._managedWidgets.get(n);if(y)return y.children=o.children,y.priority=d,"allowCollapse"in y&&(y.allowCollapse=g),y.slot=c,y.layout=this.layout,y.scale=this.scale,y.measurementManager=this._measurementManager,y;let H={scale:this.scale,priority:d,measurementManager:this._measurementManager,children:o.children,slot:c,layout:this.layout};switch(h){case"split-button":{let k=new L(f({},H));return this._managedWidgets.set(n,k),k}case"overflow-group":{let k=new be(T(f({},H),{allowCollapse:g}));return this._managedWidgets.set(n,k),k}case"measured-content":{let k=new _e(f({},H));return this._managedWidgets.set(n,k),k}}}).filter(D);return Array.from(this._managedWidgets.keys()).filter(o=>!t.has(o)).forEach(o=>{this._managedWidgets.get(o)?.destroy(),this._managedWidgets.delete(o)}),this._measurementManager?.allocate(),i.map(o=>o.render())}};s([r()],R.prototype,"scale",void 0),s([r({value:"horizontal"})],R.prototype,"layout",null),s([r()],R.prototype,"barStyle",void 0),s([r()],R.prototype,"_measurementManager",void 0),s([r()],R.prototype,"_managedWidgets",void 0),R=s([m("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbar")],R);var ee=R;var C=class extends se.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.layerViewPreferenceEnabled=!0,this.sources=null}initialize(){this.addHandles([P(()=>this._sources,e=>{this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=x(this._operationHandlesGroup)}get _sources(){let{layerViewPreferenceEnabled:e,sources:t,view:i}=this;return i&&t?.length?t.flatMap(o=>{if(F(o))return o;if(pe(o)||ce(o)){let n=o.layers||[],c=n.map(d=>{let h=Q(i,d)||void 0;return e&&F(h)?h:d});return c.length?c.toArray():n.length?n.toArray():o}if(!e)return o;let l=Q(i,o)||void 0;return F(l)?l:o}):[]}get layers(){return V(E.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){V(E.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){let{_sources:e,view:t}=this,i=!e?.length&&!t?.selectionManager.sources.length;return this.activeOperation?"active":t?.ready&&!i?"ready":"disabled"}cancel(){this.state==="active"&&(this.activeOperation?.cancel(),this._set("activeOperation",null))}activate(e){let{_sources:t,state:i,view:o}=this,l=!t?.length&&!o?.selectionManager.sources.length;if(i==="disabled"||l||!this.view)return;i==="active"&&this.cancel();let n=new fe({view:this.view,sources:t,options:e});return this._operationHandlesGroup=$([n.selection.on("change",c=>this.emit("selection-change",c)),n.once("complete",c=>this._onOperationComplete(c))]),this._set("activeOperation",n),n}_onOperationComplete(e){this._operationHandlesGroup=x(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};s([r()],C.prototype,"_sources",null),s([r({readOnly:!0})],C.prototype,"activeOperation",void 0),s([r()],C.prototype,"layers",null),s([r()],C.prototype,"layerViewPreferenceEnabled",void 0),s([r()],C.prototype,"sources",void 0),s([r({readOnly:!0})],C.prototype,"state",null),s([r()],C.prototype,"view",void 0),C=s([m("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],C);var Te=C;var Me={lassoTool:!0,rectangleTool:!0},te="esri-selection-toolbar",oe={base:te,container:`${te}__container`,toolButton:`${te}__tool-button`},u=class extends _{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.defaultLassoToolOptions={createTool:"polygon",mode:"freehand"},this.defaultRectangleToolOptions={createTool:"rectangle"},this.messages=null,this.toolConfigs=[],this.viewModel=new Te,this.visibleElements=f({},Me),this.scale="s",this.layout="horizontal",this._viewModelHandlesGroup=$([this.viewModel.on("complete",i=>{this._set("activeToolInfo",null),this.emit("complete",i)})])}destroy(){this._viewModelHandlesGroup=x(this._viewModelHandlesGroup)}loadDependencies(){return M({action:()=>import("./chunk-X23M5IZ6.js")})}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return V(E.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){V(E.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get layerViewPreferenceEnabled(){return this.viewModel.layerViewPreferenceEnabled}set layerViewPreferenceEnabled(e){this.viewModel.layerViewPreferenceEnabled=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return f(f({},Me),e)}get state(){return this.viewModel.state}get visibleToolCount(){let{view:e,toolConfigs:t,visibleElements:i}=this;return(t?.length??0)+(e?.type==="2d"?(i.lassoTool?1:0)+(i.rectangleTool?1:0):0)}activate(e){if(this.cancel(),this.state!=="disabled")switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return a("div",{"aria-label":this.label,class:this.classes(oe.base,he.widget)},a("div",{class:oe.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){if(this.view?.type==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){if(this.toolConfigs?.length)return this.toolConfigs.map(({toolName:e,icon:t,toolKey:i})=>this._renderToolWithTooltip(e,i,t))}_renderLassoTool(){let{messages:e,visibleElements:t}=this;if(!t.lassoTool)return;let i=e.selectByLasso;return this._renderToolWithTooltip("lasso","lasso","lasso-select",i)}_renderRectangleTool(){let{messages:e,visibleElements:t}=this;if(!t.rectangleTool)return;let i=e.selectByRectangle;return this._renderToolWithTooltip("rectangle","rectangle","cursor-marquee",i)}_renderToolWithTooltip(e,t,i,o=e){let l=`${this.id}-tool-${t}`;return a("calcite-action",{active:this.activeToolInfo?.toolName===e,bind:this,class:oe.toolButton,disabled:this.state==="disabled",icon:i||"selection",id:l,key:l,onclick:()=>this._toggleTool(e),scale:this.scale,text:o,title:o})}_activateTool(e){let t=this._getToolOptions(e);if(!t)return;let i=this.viewModel.activate(t);i&&this._set("activeToolInfo",{toolName:e,operation:i})}_toggleTool(e){if(this.activeToolInfo){let t=this.activeToolInfo.toolName;if(this.cancel(),t===e)return}this._activateTool(e)}_getToolOptions(e){return e==="lasso"?this.defaultLassoToolOptions:e==="rectangle"?this.defaultRectangleToolOptions:this.toolConfigs.find(t=>t.toolName===e)}};s([r({readOnly:!0})],u.prototype,"activeToolInfo",void 0),s([r()],u.prototype,"defaultLassoToolOptions",void 0),s([r()],u.prototype,"defaultRectangleToolOptions",void 0),s([r()],u.prototype,"label",null),s([r()],u.prototype,"layers",null),s([r()],u.prototype,"layerViewPreferenceEnabled",null),s([r(),O("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],u.prototype,"messages",void 0),s([r()],u.prototype,"sources",null),s([r()],u.prototype,"toolConfigs",void 0),s([r()],u.prototype,"view",null),s([r()],u.prototype,"viewModel",void 0),s([r()],u.prototype,"visibleElements",void 0),s([ne("visibleElements")],u.prototype,"castVisibleElements",null),s([r()],u.prototype,"scale",void 0),s([r()],u.prototype,"state",null),s([r()],u.prototype,"layout",void 0),s([r()],u.prototype,"visibleToolCount",null),u=s([m("esri.widgets.support.SelectionToolbar")],u);var Ce=u;var G="esri-sketch",S={base:G,vertical:`${G}--vertical`,docked:`${G}-bar`,floating:`${G}-pad`,chipHorizontal:`${G}__selection-count-chip--horizontal`,chipVertical:`${G}__selection-count-chip--vertical`,chipVerticalSmall:`${G}__selection-count-chip--vertical--s`,popoverWrapper:`${G}__popover-wrapper`},Se={point:"pin",polyline:"line",polygon:"polygon",rectangle:"rectangle",circle:"circle",multipoint:"pins",mesh:"i3-d-building",freehandPolygon:"freehand-area",freehandPolyline:"freehand"},p=class extends _{constructor(e,t){super(e,t),this._activeCustomToolOptions=null,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.customToolOptions=null,this.customActions=null,this.toolbarKind="floating",this.contextualToolLocation="separate",this.groupCollapsePriorities=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new Y,this._defaultViewModel=null,this._calcitePopoverReferenceElement=null,this._relativeLocation="top",this._popoverOpen=!1,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=e?.viewModel||(this._defaultViewModel=new X({creationMode:e?.creationMode??"continuous"}))}initialize(){let{layer:e,view:t}=this,i=new Ce({view:t?.type==="2d"?t:null,sources:e?[e]:null,scale:this.scale});this.addHandles([P(()=>this.viewModel,o=>{this._viewModelHandlesGroup=x(this._viewModelHandlesGroup),o&&(this._viewModelHandlesGroup=$([o.on("create",()=>this.scheduleRender()),o.on("update",()=>this.scheduleRender()),o.on("delete",l=>this.emit("delete",l)),o.on("undo",()=>this.scheduleRender()),o.on("redo",()=>this.scheduleRender()),P(()=>o.layer,l=>{this._selectionToolbar&&(this._selectionToolbar.sources=l?[l]:null)}),P(()=>o.view,l=>{this._selectionToolbar&&(this._selectionToolbar.view=l?.type==="2d"?l:null)}),P(()=>o.state,()=>this.notifyChange("state"))]))},J),le(()=>i.activeToolInfo,()=>this.viewModel.cancel()),i.on("complete",o=>this._onSelectionOperationComplete(o)),P(()=>{let{selectionTools:o}=this.visibleElements;return{lassoTool:!!o?.["lasso-selection"],rectangleTool:!!o?.["rectangle-selection"]}},o=>{Object.assign(i.visibleElements,o)},J)]),this._selectionToolbar=i}loadDependencies(){return M({action:()=>import("./chunk-X23M5IZ6.js"),chip:()=>import("./chunk-YJHYFSU4.js"),popover:()=>import("./chunk-J5HY7FQ5.js")})}destroy(){this._selectionToolbar?.destroy(),this._viewModelHandlesGroup=x(this._viewModelHandlesGroup)}get activeTool(){let e=this._selectionToolbar?.activeToolInfo;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}let t=this._effectiveAvailableCreateTools,{activeTool:i,activeCreateToolDrawMode:o}=this.viewModel;return i==="polygon"&&o==="freehand"&&t?.includes("freehandPolygon")?"freehandPolygon":i==="polyline"&&o==="freehand"&&t?.includes("freehandPolyline")?"freehandPolyline":this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get creationMode(){return this.viewModel.creationMode}set creationMode(e){this.viewModel.creationMode=e}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}set layout(e){this._set("layout",e),this._selectionToolbar&&(this._selectionToolbar.layout=e)}set scale(e){this._set("scale",e),this._selectionToolbar&&(this._selectionToolbar.scale=e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){return this._selectionToolbar?.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){let t=this._get("viewModel");e!==t&&(t&&t===this._defaultViewModel&&K(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){let{availableCreateTools:e,view:t,visibleElements:i}=this,o=e?.filter(l=>!!i.createTools?.[l]);return t?.type==="3d"?o?.filter(l=>l!=="multipoint"):o}create(e,t,i){let o=i?.createOptions??t;return this._activeCustomToolOptions=i,j(this.viewModel.create(e,o))}update(e,t){return j(this.viewModel.update(e,t))}complete(){this.viewModel.complete()}cancel(){this._selectionToolbar?.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){this.viewModel.undo(),this.view?.focus()}redo(){this.viewModel.redo(),this.view?.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}dismissFloatingElements(){this._popoverOpen=!1}render(){let{toolbarKind:e,layout:t,scale:i}=this,o=this.customActions?.filter(l=>l.position==="selection-toolbar");return a("div",null,a("div",{classes:{[S.base]:!0,[S.floating]:e==="floating",[S.docked]:e==="docked",[S.vertical]:t==="vertical"}},a(ee,{barStyle:e,layout:t,scale:i},this._renderSelectionSetItemGroupInline(),a("div",{"group-kind":"split-button",key:"selection-split-button",priority:this.groupCollapsePriorities?.get("selectionTools")??A.Low},this._renderDefaultSelectionButton(),this._selectionToolbar?.render(),o?.map(l=>this._renderToolbarItem(l))),this._renderCreateToolActionGroup(),this._renderUndoRedoMenuItemGroup(),this._renderSettingsMenuItemGroup()),this._renderSelectionSetToolbar(),this._renderSettingsMenuPopover()))}_renderSettingsMenuPopover(){let{messagesCommon:e,snappingOptions:t,view:i,viewModel:o,visibleElements:l}=this;if(!this._calcitePopoverReferenceElement)return;let n={directionModePicker:l.directionModePicker,labelsToggle:l.labelsToggle,tooltipsToggle:l.tooltipsToggle},c=this.layout==="horizontal"?this._relativeLocation==="top"?"bottom-end":"top-end":"right-end";return a("calcite-popover",{closable:!0,focusTrapDisabled:!0,heading:e.settings,label:e.settings,open:this._popoverOpen,overlayPositioning:"fixed",placement:c,referenceElement:this._calcitePopoverReferenceElement,scale:this.scale,onCalcitePopoverBeforeClose:()=>this._popoverOpen=!1,onCalcitePopoverBeforeOpen:d=>this._remeasurePopoverSizes(d.currentTarget),onCalcitePopoverClose:()=>this._refocusOnView()},a("div",{class:S.popoverWrapper},Object.values(n).includes(!0)?a(ve,{sketchOptions:o.sketchOptions,viewType:i?.type,visibleElements:new me(n)}):void 0,l.snappingControls&&i&&t?a(ge,{snappingManager:this.viewModel.snappingManager,snappingOptions:t,view:i,visibleElements:l.snappingControlsElements}):void 0))}_renderSelectionSetToolbar(){if(this.contextualToolLocation!=="separate")return;let e=this._renderSelectionSetItemGroup();return e?.length?a(ee,{barStyle:this.toolbarKind,layout:this.layout,scale:this.scale},e):void 0}_renderSelectionSetItemGroupInline(){return this.contextualToolLocation==="separate"?[]:this._renderSelectionSetItemGroup()}_renderUndoRedoMenuItemGroup(){return a("div",{"group-kind":"split-button",key:"undo-redo-menu",priority:this.groupCollapsePriorities?.get("undoRedo")??A.Medium,slot:"actions-end"},this._renderUndoButton(),this._renderRedoButton())}_renderSettingsMenuItemGroup(){let e=[],t=[];this.customActions?.forEach(o=>{o.position==="settings-before"?t.push(o):o.position==="settings-after"&&e.push(o)});let i=[...t.map(o=>this._renderToolbarItem(o)),this._renderSettingsMenuButton(),...e.map(o=>this._renderToolbarItem(o))].filter(D);if(i.length)return a("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"settings-menu",priority:this.groupCollapsePriorities?.get("settings")??A.Max,slot:"actions-end"},i)}_renderSelectionSetItemGroup(){if(!this.updateGraphics.length)return[];let e=this.contextualToolLocation==="inline-end"?"actions-end":void 0,t=this.customActions?.filter(l=>l.position==="before-selection-set"),i=this.customActions?.filter(l=>l.position==="after-selection-set"),o=this.groupCollapsePriorities?.get("selectionSet")??A.High;return[a("div",{"group-kind":"measured-content",key:"selection-count-chip-group",priority:o,slot:e},this._renderFeatureCountChip()),a("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"selection-set-tool-group",priority:o,slot:e},t?.map(l=>this._renderToolbarItem(l)),this._renderDuplicateButton(),this._renderDeleteButton(),i?.map(l=>this._renderToolbarItem(l)))]}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return[];let{messages:e,state:t}=this;return this._renderToolbarItem({id:"pointer-select",text:e.selectFeature,icon:"cursor",onclick:this._activateDefaultSelectTool,active:t==="ready"})}_renderCreateToolActionGroup(){let e=this._effectiveAvailableCreateTools?.flatMap(i=>this._renderBuiltInCreateToolItem(i))??[],t=this.customToolOptions?.flatMap(i=>this._renderCustomToolItem(i))??[];return a("div",{"group-kind":"overflow-group",key:"create-tools-group",priority:this.groupCollapsePriorities?.get("createTools")??A.High},e,t)}_renderBuiltInCreateToolItem(e){return this._renderToolbarItem({id:`${e}-button`,text:this.messages.draw[e],icon:Se[e],onclick:()=>this._activateCreateTool(e),active:this.activeTool===e&&!this._activeCustomToolOptions})}_renderCustomToolItem(e){let{toolKey:t}=e;return this._renderToolbarItem({id:`custom-${e.toolKey}`,text:e.label,icon:e.icon,onclick:()=>this._activateCreateTool(e.toolName,null,e),active:this._activeCustomToolOptions?.toolKey===t})}_renderUndoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"undo-button",text:this.messages.undo,icon:"undo",disabled:!this.viewModel.canUndo(),onclick:this.undo,flipRTL:!0}):[]}_renderRedoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"redo-button",text:this.messages.redo,icon:"redo",disabled:!this.viewModel.canRedo(),onclick:this.redo,flipRTL:!0}):[]}_renderSettingsMenuButton(){return this.visibleElements.settingsMenu?this._renderToolbarItem({id:"settings-menu-action",text:this.messagesCommon.settings,icon:"gear",active:this._popoverOpen,onclick:()=>this._popoverOpen=!this._popoverOpen,afterCreate:e=>this._calcitePopoverReferenceElement=e,afterUpdate:e=>this._calcitePopoverReferenceElement=e,afterRemoved:()=>this._calcitePopoverReferenceElement=null}):[]}_renderFeatureCountChip(){if(!this.visibleElements.selectionCountLabel)return[];let{layout:e,messages:t,scale:i,id:o,updateGraphics:{length:l}}=this,n=q(t.selectedCount,{count:l}),c=i==="s"?99:999,d=l>c?q(t.selectedCountTruncated,{truncated:c}):l,h=i==="s"&&e==="vertical",g=h?`${o}-selection-chip-small`:`${o}-selection-chip`;return[h?a("span",{classes:{[S.chipVertical]:!0,[S.chipVerticalSmall]:this.scale==="s"},id:g,tabIndex:0,title:n},d):a("calcite-chip",{appearance:"outline",class:e==="horizontal"?S.chipHorizontal:S.chipVertical,id:g,kind:"brand",label:n,scale:i==="l"?"m":"s",tabIndex:0,title:e==="vertical"?n:void 0},e==="vertical"?d:n)]}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return[];let{messages:e}=this;return this._renderToolbarItem({id:"duplicate",text:this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature,icon:"copy",onclick:this._onDuplicateSelect})}_renderDeleteButton(){if(!this.visibleElements.deleteButton)return[];let{messages:e}=this,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return this._renderToolbarItem({id:"delete",text:t,icon:"trash",onclick:this.delete})}_renderToolbarItem({id:e,text:t,icon:i,disabled:o,onclick:l,active:n,flipRTL:c,afterCreate:d,afterUpdate:h,afterRemoved:g}){let y=`${this.id}-${e}`;return[a("calcite-action",{active:n,afterCreate:d,afterRemoved:g,afterUpdate:h,bind:this,"data-testid":e,disabled:o||this.state==="disabled",icon:i,iconFlipRtl:c??!1,id:y,key:e,onclick:l,scale:this.scale,text:t,title:t})]}_remeasurePopoverSizes(e){try{let t=e.parentElement,i=this?.view?.container?.getBoundingClientRect(),o=t?.style;if(!(t&&i&&o&&this.view?.container?.contains(t)))return;let l=this._calcitePopoverReferenceElement;if(!l)return;let{bottom:n,top:c}=l.getBoundingClientRect();if(this.layout==="horizontal"){let h=n<i.height/2;h!==(this._relativeLocation==="top")&&(this._relativeLocation=h?"top":"bottom"),h?(o?.setProperty("--sketch-view-height-offset",n-i.top+"px"),o?.setProperty("--sketch-view-margin-offset","30px")):(o?.setProperty("--sketch-view-height-offset",i.bottom-c+"px"),o?.setProperty("--sketch-view-margin-offset","15px"))}else this.layout==="vertical"&&(o.setProperty("--sketch-view-height-offset","15px"),o.setProperty("--sketch-view-margin-offset","15px"));let d=e.shadowRoot?.querySelector("div.header")?.getBoundingClientRect().height;o.setProperty("--sketch-popover-header-offset",`${d}px`)}catch(t){E.getLogger(this.declaredClass).warnOnce("Sketch failed to lay out settings menu.",t)}}_activateCreateTool(e,t,i){let o=this._activeCustomToolOptions;if(i||o){if(i?.toolKey===o?.toolKey)return void this.cancel()}else if(this.activeTool===e)return void this.cancel();this._selectionToolbar?.cancel(),this.create(e,t,i)}_onDuplicateSelect(){let e=this.duplicate(),t=this.viewModel.activeTool;t!=="transform"&&t!=="reshape"||this.update(e,{tool:t})}_onSelectionOperationComplete(e){let{viewModel:{defaultUpdateOptions:t}}=this,{selection:i}=e;if(!e.aborted&&i.length){let o=t.tool,l=i.length>1&&o==="reshape"?"transform":o;this.update(i,T(f({},t),{tool:l}))}this.notifyChange("state")}_activateDefaultSelectTool(){this.cancel(),this.view?.focus()}_refocusOnView(){this.activeTool&&this.view?.focus()}};s([r()],p.prototype,"_activeCustomToolOptions",void 0),s([r()],p.prototype,"activeTool",null),s([r({readOnly:!0})],p.prototype,"activeTooltip",null),s([r({cast:e=>{if(!e?.length)return null;let t=new Set(["point","polyline","polygon","rectangle","circle","multipoint","freehandPolyline","freehandPolygon","mesh"]);return e.filter(i=>t.has(i))}})],p.prototype,"availableCreateTools",void 0),s([r({readOnly:!0})],p.prototype,"createGraphic",null),s([r()],p.prototype,"creationMode",null),s([r()],p.prototype,"customToolOptions",void 0),s([r()],p.prototype,"customActions",void 0),s([r()],p.prototype,"defaultCreateOptions",null),s([r()],p.prototype,"defaultUpdateOptions",null),s([r()],p.prototype,"icon",null),s([r()],p.prototype,"label",null),s([r()],p.prototype,"labelOptions",null),s([r()],p.prototype,"layer",null),s([r({type:["horizontal","vertical"],value:"horizontal"})],p.prototype,"layout",null),s([r({value:"m"})],p.prototype,"scale",null),s([r()],p.prototype,"toolbarKind",void 0),s([r()],p.prototype,"contextualToolLocation",void 0),s([r()],p.prototype,"groupCollapsePriorities",void 0),s([r(),O("esri/widgets/Sketch/t9n/Sketch")],p.prototype,"messages",void 0),s([r(),O("esri/t9n/common")],p.prototype,"messagesCommon",void 0),s([r()],p.prototype,"snappingOptions",null),s([r()],p.prototype,"state",null),s([r()],p.prototype,"tooltipOptions",null),s([r({readOnly:!0})],p.prototype,"updateGraphics",null),s([r({type:de,nonNullable:!0})],p.prototype,"valueOptions",null),s([r()],p.prototype,"view",null),s([r({type:X}),ue(["create","update","undo","redo"])],p.prototype,"viewModel",null),s([r({type:Y,nonNullable:!0})],p.prototype,"visibleElements",void 0),s([r()],p.prototype,"_effectiveAvailableCreateTools",null),s([r()],p.prototype,"_defaultViewModel",void 0),s([r()],p.prototype,"_calcitePopoverReferenceElement",void 0),s([r()],p.prototype,"_relativeLocation",void 0),s([r()],p.prototype,"_popoverOpen",void 0),p=s([m("esri.widgets.Sketch")],p);var hi=p;export{hi as default};
