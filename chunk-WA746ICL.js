import{f as g}from"./chunk-BBM5BVWD.js";import{v as w}from"./chunk-CHALI33A.js";import{d as f}from"./chunk-26PJXQHD.js";import{f as c}from"./chunk-KVM6SHDX.js";import{e as v}from"./chunk-ZQIC5NFT.js";import{a as y}from"./chunk-7F5DJLJT.js";import{a as u,b as m,i as h}from"./chunk-TG45K3WR.js";import{b as o}from"./chunk-ACP3S2CH.js";import{a as d}from"./chunk-T7DXJKX7.js";import{a as t}from"./chunk-QGVBCWUY.js";import{H as p}from"./chunk-MYO4NP2N.js";import{e as i}from"./chunk-NFIPKH6V.js";import{l as s}from"./chunk-5QEXLALV.js";import{g as l}from"./chunk-XRGPJ3QY.js";var r=class extends d.EventedAccessor{constructor(e){super(e),this.demResolution={min:-1,max:-1},this.noDataValue=g}initialize(){this.view.basemapTerrain.on("elevation-change",()=>this.emit("changed",{}))}get extent(){let e=this.view.basemapTerrain;if(e?.extent==null||e.spatialReference==null)return null;let a=c(e.extent,e.spatialReference);return a.zmin=e.visibleElevationBounds.min,a.zmax=e.visibleElevationBounds.max,a}get spatialReference(){return this.view.basemapTerrain?.spatialReference??y.WGS84}elevationAt(e,a){if(this.extent==null||!v(this.extent,e,a)){let V=this.extent!=null?`${this.extent.xmin}, ${this.extent.ymin}, ${this.extent.xmax}, ${this.extent.ymax}`:null;return l.getLogger(this).warn("#elevationAt()",`Point used to sample elevation (${e}, ${a}) is outside of the sampler extent (${V})`),this.noDataValue}return this.view.elevationProvider?.getElevation(e,a,0,this.spatialReference,"ground")??this.noDataValue}queryElevation(e){return f(e.clone(),this)}};t([i({readOnly:!0})],r.prototype,"demResolution",void 0),t([i({readOnly:!0})],r.prototype,"extent",null),t([i({readOnly:!0})],r.prototype,"noDataValue",void 0),t([i()],r.prototype,"spatialReference",null),t([i({constructOnly:!0})],r.prototype,"view",void 0),r=t([s("esri.views.support.GroundViewElevationSampler")],r);var x=r;var n=class extends p{constructor(e){super(e),this.view=null,this.layerViews=new o}initialize(){this.addHandles(m(()=>this.view?.map?.ground,e=>e.load())),this.addHandles(this.layerViews.on("after-changes",()=>this._layerViewsAfterChangesHandler()))}destroy(){this._set("view",null);for(let e of this.layerViews)e.destroy();this.layerViews.length=0}get elevationSampler(){return this.view?this.view.type==="2d"?null:this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?new x({view:this.view}):null:null}get extent(){let e=this.view;return e&&e.type!=="2d"&&e.ready?w(e,e.state.camera,e.pointsOfInterest.centerOnSurfaceFrequent.renderLocation):null}get updating(){return!this.suspended&&this.layerViews.some(e=>e.updating)}get suspended(){return this.view?.suspended??!0}_layerViewsAfterChangesHandler(){this.removeHandles("updating"),this.addHandles(this.layerViews.map(e=>u(()=>e.updating,()=>this._updateUpdating(),h)).toArray(),"updating"),this._updateUpdating()}_updateUpdating(){this.notifyChange("updating")}};t([i({readOnly:!0})],n.prototype,"elevationSampler",null),t([i({readOnly:!0})],n.prototype,"extent",null),t([i({type:Boolean,readOnly:!0})],n.prototype,"updating",null),t([i({constructOnly:!0})],n.prototype,"view",void 0),t([i({type:o,readOnly:!0})],n.prototype,"layerViews",void 0),t([i({readOnly:!0})],n.prototype,"suspended",null),n=t([s("esri.views.GroundView")],n);var Z=n;export{Z as a};
