import{c as B}from"./chunk-MDSLION2.js";import{a as I}from"./chunk-MGGSCSBE.js";import{g as T}from"./chunk-FB4M3WPV.js";import{a as y}from"./chunk-G4DZJMGT.js";import{a as k,f as M}from"./chunk-WFKZLI6F.js";import{a as g,j as _}from"./chunk-TG45K3WR.js";import{a as A}from"./chunk-T7DXJKX7.js";import{a as s}from"./chunk-QGVBCWUY.js";import{H as f}from"./chunk-MYO4NP2N.js";import{e as d}from"./chunk-NFIPKH6V.js";import{l as u}from"./chunk-5QEXLALV.js";import{a as x}from"./chunk-TG2UTNEO.js";import{y as N}from"./chunk-QBWJMFH5.js";import{a as h}from"./chunk-VTHXE323.js";function $(t){return t&&"nodeType"in t}function R(t){return t&&typeof t.render=="function"}var E={component:"esri-component"},m=class extends f{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(t){this._set("id",t)}set node(t){let e=this._get("node");t!==e&&(t&&t.classList.add(E.component),e&&e.classList.remove(E.component),this._set("node",t))}castNode(t){return this.widget?.destroy(),t?typeof t=="string"||$(t)?(this._set("widget",null),I(t)):(R(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};s([d()],m.prototype,"id",null),s([d()],m.prototype,"node",null),s([y("node")],m.prototype,"castNode",null),s([d({readOnly:!0})],m.prototype,"widget",void 0),m=s([u("esri.views.ui.Component")],m);var C=m;var H={left:0,top:0,bottom:0,right:0},V={bottom:30,top:15,right:15,left:15},c="esri-ui",a={ui:c,corner:`${c}-corner`,innerContainer:`${c}-inner-container`,manualContainer:`${c}-manual-container`,cornerContainer:`${c}-corner-container`,topLeft:`${c}-top-left`,topRight:`${c}-top-right`,bottomLeft:`${c}-bottom-left`,bottomRight:`${c}-bottom-right`};function O(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function v(t){return t===0?"0":`${t}px`}function b(t){let e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function L(t,{top:e,bottom:n,left:o,right:i}){t.style.top=e,t.style.bottom=n,t.style.left=o,t.style.right=i}var p=class extends A.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=k(),this.view=null,this._applyViewPadding=()=>{let e=this.container;e&&L(e,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{let e=this._innerContainer;e&&L(e,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([g(()=>[this.view?.padding,this.container],this._applyViewPadding,_),g(()=>this.padding,this._applyUIPadding,_),g(()=>[this.container,this._locale],([t,e])=>{t&&t.setAttribute("lang",e)},_),M(t=>{this._locale=t})])}destroy(){this.container=null;for(let t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){let e=this._get("container");t!==e&&(t&&(t.classList.add(a.ui),B(t),this._attachContainers(t)),e&&(e.classList.remove(a.ui),L(e,{top:"",bottom:"",left:"",right:""}),e.textContent=""),this._set("container",t))}get height(){let t=this.view?.height??0;if(t===0)return t;let e=this._getViewPadding(),{top:n,bottom:o}=e;return Math.max(t-n-o,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:h(h({},V),t)}get width(){let t=this.view?.width??0;if(t===0)return t;let e=this._getViewPadding(),{left:n,right:o}=e;return Math.max(t-n-o,0)}add(t,e){let n,o,i;if(Array.isArray(t))return void t.forEach(l=>this.add(l,e));let r=b(t);r&&({index:n,position:e,component:t,key:o}=r),e&&typeof e=="object"&&({index:n,key:o,position:e,internal:i}=e),!t||e&&!this._isValidPosition(e)||this._add(t,e,n,o,i)}remove(t,e){if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,e));let n=this._find(t);if(n){if(this._componentMap.has(n)&&this._componentMap.get(n)?.key!==e)return;let o=this._components.indexOf(n);return n.node.parentNode?.removeChild(n.node),this._componentMap.delete(n),n.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,e={removeInternal:!1}){if(Array.isArray(t)){for(let i of t)this.empty(i,e);return}let n=this._positionNameToContainerLookup[t??"manual"],o=Array.prototype.slice.call(n.children).map(i=>this._findByNode(i)).filter(i=>i==null?!1:!(this._componentMap.get(i)?.internal??!1)||e.removeInternal);for(let i of o)this.remove(i)}move(t,e){if(Array.isArray(t)&&t.forEach(r=>this.move(r,e)),!t)return;let n,o=b(t)||b(e);if(o&&(n=o.index,e=o.position,t=o.component||t),e&&!this._isValidPosition(e))return;let i=this.remove(t);i&&this.add(i,{position:e,index:n})}find(t){if(!t)return null;let e=this._findById(t);return e&&(e.widget||e.node)}getComponents(t,e={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(n=>this._getComponentsAtPosition(n,e)):this._getComponentsAtPosition(t,e):this._components.filter(n=>e.includeInternal||!this._componentMap.get(n)?.internal).map(({widget:n,node:o})=>n??o)}getPosition(t){for(let e in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[e].contains(t))return e;return null}_add(t,e,n,o,i){t instanceof C||(t=new C({node:t}));let{widget:r}=t;r!=null&&r instanceof f&&r.addHandles(x(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:e,index:n}),this._components.push(t),this._componentMap.set(t,{key:o,internal:i})}_find(t){return t?t instanceof C?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.view?.padding??H}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){let t=document.createElement("div");t.classList.add(a.innerContainer,a.cornerContainer);let e=document.createElement("div");e.classList.add(a.innerContainer,a.manualContainer);let n=document.createElement("div");n.classList.add(a.topLeft,a.corner),t.appendChild(n);let o=document.createElement("div");o.classList.add(a.topRight,a.corner),t.appendChild(o);let i=document.createElement("div");i.classList.add(a.bottomLeft,a.corner),t.appendChild(i);let r=document.createElement("div");r.classList.add(a.bottomRight,a.corner),t.appendChild(r),this._innerContainer=t,this._manualContainer=e;let l=T();this._cornerNameToContainerLookup={"top-left":n,"top-right":o,"bottom-left":i,"bottom-right":r,"top-leading":l?o:n,"top-trailing":l?n:o,"bottom-leading":l?r:i,"bottom-trailing":l?i:r},this._positionNameToContainerLookup=h({manual:e},this._cornerNameToContainerLookup)}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){let e=t.position??"manual",{component:n,index:o}=t,i=this._positionNameToContainerLookup[e],r=o!=null&&o>-1;if(O(n.widget)&&n.widget.startup(),!r)return void i.appendChild(n.node);let l=Array.from(i.children);if(o===0){let{firstChild:w}=i;return void(w?w.parentNode?.insertBefore(n.node,w):i.appendChild(n.node))}if(o>=l.length)return void i.appendChild(n.node);let P=l[o];P.parentNode?.insertBefore(n.node,P)}_toPixelPosition(t){return{top:v(t.top),left:v(t.left),right:v(t.right),bottom:v(t.bottom)}}_findByComponent(t){return this._components.find(e=>e===t)??null}_findById(t){return this._components.find(({id:e})=>e===t)??null}_findByNode(t){return this._components.find(({node:e})=>e===t)??null}_getComponentsAtPosition(t,e){let n=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(n.children).map(o=>this._findByNode(o)).filter(N).filter(o=>e.includeInternal||!this._componentMap.get(o)?.internal).map(({widget:o,node:i})=>o??i)}};s([d()],p.prototype,"_locale",void 0),s([d()],p.prototype,"container",null),s([d()],p.prototype,"height",null),s([d({value:V})],p.prototype,"padding",null),s([y("padding")],p.prototype,"castPadding",null),s([d()],p.prototype,"view",void 0),s([d()],p.prototype,"width",null),p=s([u("esri.views.ui.UI")],p);var lt=p;export{C as a,lt as b};
