import{a as D}from"./chunk-HJJZ2AXH.js";import{a as S,b as l,d as E,e as j,f as T}from"./chunk-TPNSUEHH.js";import{a as V,b}from"./chunk-I4CY6X6S.js";import{c as g}from"./chunk-OLOKUDVI.js";import{a as p}from"./chunk-PEW2PLAN.js";import{a as w}from"./chunk-CX5IFQZJ.js";import{a as c}from"./chunk-G4DZJMGT.js";import{a as d}from"./chunk-BAEF3CT6.js";import{a as t}from"./chunk-QGVBCWUY.js";import{e as s}from"./chunk-NFIPKH6V.js";import{l as u}from"./chunk-5QEXLALV.js";import{b as f}from"./chunk-YOFFGXOB.js";import{g as o}from"./chunk-XRGPJ3QY.js";import{a as v}from"./chunk-VTHXE323.js";function O(e){return g(e)}var m=class extends V{constructor(){super(...arguments),this.customValues=null}};t([s({type:[Number],json:{write:!0}})],m.prototype,"customValues",void 0),m=t([u("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],m);var _=m;var x,h=new d({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),z=new d({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function M(e){if(e!=null)return typeof e=="string"||typeof e=="number"?O(e):e.type==="size"?l(e)?e:(delete(e=v({},e)).type,new i(e)):void 0}function N(e,r,n){if(typeof e!="object")return e;let a=new i;return a.read(e,n),a}var i=x=class extends b{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&T.test(this.valueExpression)}}set index(e){l(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),l(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return E(this)}set maxDataValue(e){e&&this.stops&&(o.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(o.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return M(e)}readMaxSize(e,r,n){return N(e,r,n)}set minDataValue(e){e&&this.stops&&(o.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(o.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return M(e)}readMinSize(e,r,n){return N(e,r,n)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(r=>!!r)).sort((r,n)=>r.value-n.value):e&&(o.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return j(this,this.inputValueType)}readValueExpression(e,r){return e||r.expression&&"$view.scale"}writeValueExpressionWebScene(e,r,n,a){if(e==="$view.scale"){if(a?.messages){let y=this.index,R=typeof y=="string"?y:`visualVariables[${y}]`;a.messages.push(new f("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:R+".valueExpression",context:a}))}}else r[n]=e}readValueUnit(e){return e?z.read(e):null}clone(){return new x({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:l(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:l(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===S.ClampedLinear){let{minSize:e,maxSize:r}=this;return this.minSize=r,this.maxSize=e,this}if(this.transformationType===S.Stops){let e=this.stops;if(!e)return this;let r=e.map(a=>a.size).reverse(),n=e.length;for(let a=0;a<n;a++)e[a].size=r[a];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(e=>e.value||0)}};t([s({readOnly:!0})],i.prototype,"cache",null),t([s({type:h.apiValues,json:{type:h.jsonValues,origins:{"web-map":{read:!1}},read:h.read,write:h.write}})],i.prototype,"axis",void 0),t([s()],i.prototype,"index",null),t([s({type:String,readOnly:!0})],i.prototype,"inputValueType",null),t([s({type:_,json:{write:!0}})],i.prototype,"legendOptions",void 0),t([s({type:Number,value:null,json:{write:!0}})],i.prototype,"maxDataValue",null),t([s({type:Number,value:null,json:{write:!0}})],i.prototype,"maxSize",null),t([c("maxSize")],i.prototype,"castMaxSize",null),t([p("maxSize")],i.prototype,"readMaxSize",null),t([s({type:Number,value:null,json:{write:!0}})],i.prototype,"minDataValue",null),t([s({type:Number,value:null,json:{write:!0}})],i.prototype,"minSize",null),t([c("minSize")],i.prototype,"castMinSize",null),t([p("minSize")],i.prototype,"readMinSize",null),t([s({type:String,json:{write:!0}})],i.prototype,"normalizationField",void 0),t([s({readOnly:!0})],i.prototype,"arcadeRequired",null),t([s({type:String})],i.prototype,"scaleBy",void 0),t([s({type:[D],value:null,json:{write:!0}})],i.prototype,"stops",null),t([s({type:["outline"],json:{write:!0}})],i.prototype,"target",void 0),t([s({type:String,readOnly:!0})],i.prototype,"transformationType",null),t([s({type:["size"],json:{type:["sizeInfo"]}})],i.prototype,"type",void 0),t([s({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],i.prototype,"useSymbolValue",void 0),t([s({type:String,json:{write:!0}})],i.prototype,"valueExpression",void 0),t([p("valueExpression",["valueExpression","expression"])],i.prototype,"readValueExpression",null),t([w("web-scene","valueExpression")],i.prototype,"writeValueExpressionWebScene",null),t([s({type:["radius","diameter","area","width","distance"],json:{write:!0}})],i.prototype,"valueRepresentation",void 0),t([s({type:z.apiValues,json:{write:z.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],i.prototype,"valueUnit",void 0),t([p("valueUnit")],i.prototype,"readValueUnit",null),i=x=t([u("esri.renderers.visualVariables.SizeVariable")],i);var ne=i;export{O as a,_ as b,ne as c};
