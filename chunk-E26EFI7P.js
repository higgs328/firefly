import{ga as T}from"./chunk-A2QQP5DF.js";import{a as b}from"./chunk-XAZOVQGA.js";import{b as d,g as l,o as h,ub as m}from"./chunk-V3KEO7AJ.js";function A(){return D(new m,-1,Number.NaN)}function D(e,n,o){return{m_coordinate:e.clone(),m_vertexIndex:n,m_geometryIndex:0,m_distance:o,m_bRightSide:!1,isEmpty:p}}function p(){return Number.isNaN(this.m_distance)}function C(e,n,o=-1,i=-1){if(e.isEmpty())return 3;let t=e.getGeometryType();if(l(t))return V(e,n,o,i);if(t===d.enumPolygon)return v(e,n,o,i);if(t===d.enumPolyline)return y(e,n,o,i);if(t===d.enumEnvelope){let r=new b;return e.queryEnvelope(r),r.contains(n)?r.containsExclusive(n)?1:2:0}return 3}function V(e,n,o,i){if(o>=0||i>=0)return h("");if(e.isDegenerate(0))return e.getStartXY().equals(n)?2:3;if(!e.isCurve()){let a=m.orientationRobust(n,e.getStartXY(),e.getEndXY());return a<0?1:a>0?0:2}let t=e.getClosestCoordinate(n,!1),r=e.getTangent(t),u=e.getCoord2D(t),g=m.orientationRobust(n,u,u.add(r));return g<0?1:g>0?0:2}function v(e,n,o,i){(o>=0||i>=0)&&h("");let t=new b;e.queryEnvelope(t);let r=T(e,n,0);return r===0?0:r===1?1:2}function y(e,n,o,i){(o<0&&i>=0||o>=0&&i<0)&&h("");let t=e.querySegmentIterator();if(o<0){let u=Number.MAX_VALUE,g=0;for(;t.nextPath();)for(;t.hasNextSegment();){let a=t.nextSegment(),s=a.getClosestCoordinate(n,!1),f=a.getCoord2D(s),c=m.sqrDistance(f,n);c<u?(g=1,o=t.getStartPointIndex(),i=t.getPathIndex(),u=c):c===u&&g++}if(g===0)return 3;if(g===1)return t.resetToVertex(o,i),C(t.nextSegment(),n)}let r=I(n,t,o,i);if(r.i1!==-1&&r.i2===-1)return r.bRight1?1:0;if(r.i1!==-1&&r.i2!==-1){if(r.bRight1===r.bRight2)return r.bRight1?1:0;{t.resetToVertex(r.i1,-1);let u=t.nextSegment().getTangent(1);t.resetToVertex(r.i2,-1);let g=t.nextSegment().getTangent(0);return u.crossProduct(g)>=0?1:0}}return t.resetToVertex(o,i),C(t.nextSegment(),n)}function N(e,n,o){for(e.resetToVertex(n,o);e.hasNextSegment();)if(!e.nextSegment().isDegenerate(0))return e.getStartPointIndex();for(e.resetToVertex(n,o);e.hasPreviousSegment();)if(!e.previousSegment().isDegenerate(0))return e.getStartPointIndex();return-1}function X(e,n){for(e.resetToVertex(n,-1),e.nextSegment();e.hasNextSegment();)if(!e.nextSegment().isDegenerate(0))return e.getStartPointIndex();return-1}function E(e,n){for(e.resetToVertex(n,-1);e.hasPreviousSegment();)if(!e.previousSegment().isDegenerate(0))return e.getStartPointIndex();return-1}function I(e,n,o,i){let t={i1:-1,i2:-1,bRight1:!1,bRight2:!1};if(t.i1=N(n,o,i),t.i1!==-1){n.resetToVertex(t.i1,-1);let r=n.nextSegment(),u=r.getClosestCoordinate(e,!1),g=r.getCoord2D(u),a=m.sqrDistance(g,e);{let s=g.clone();s.subThis(r.getStartXY());let f=e.clone();f.subThis(r.getStartXY()),t.bRight1=s.crossProduct(f)<0}if(t.i2=X(n,t.i1),t.i2!==-1){n.resetToVertex(t.i2,-1);let s=n.nextSegment(),f=s.getClosestCoordinate(e,!1),c=s.getCoord2D(f);if(m.sqrDistance(c,e)>a)t.i2=-1;else{let x=c.clone();x.subThis(s.getStartXY());let S=e.clone();S.subThis(s.getStartXY()),t.bRight2=x.crossProduct(S)<0}}if(t.i2===-1&&(t.i2=E(n,t.i1),t.i2!==-1)){n.resetToVertex(t.i2,-1);let s=n.nextSegment(),f=s.getClosestCoordinate(e,!1),c=s.getCoord2D(f);if(m.sqrDistance(c,e)>a)t.i2=-1;else{let x=c.clone();x.subThis(s.getStartXY());let S=e.clone();S.subThis(s.getStartXY()),t.bRight2=x.crossProduct(S)<0;let P=t.i1;t.i1=t.i2,t.i2=P;let R=t.bRight1;t.bRight1=t.bRight2,t.bRight2=R}}}return t}export{A as a,D as b,C as c};
