import{a as F}from"./chunk-UYIQ34PS.js";import"./chunk-T5AAFENX.js";import"./chunk-JBXVV7GG.js";import"./chunk-BWTQAP7U.js";import"./chunk-JHYPNXRL.js";import"./chunk-AMMITYYL.js";import{a as H}from"./chunk-S5YZZGJC.js";import"./chunk-7ECGJFJY.js";import"./chunk-OS4DF7SY.js";import"./chunk-XPTSGTNZ.js";import{a as x,b as f,c as B,d as ee}from"./chunk-M575ORV2.js";import{a as Y}from"./chunk-PTPAL5OV.js";import"./chunk-UHGNYJVJ.js";import"./chunk-A6PSIE5S.js";import"./chunk-ETLJEDNA.js";import"./chunk-AKDISSFR.js";import"./chunk-QW25UBG2.js";import"./chunk-HSKV7JWT.js";import"./chunk-JK6ANXJE.js";import"./chunk-SWT4UIOH.js";import"./chunk-E6JHCD7G.js";import"./chunk-EFTNLZSK.js";import"./chunk-Q3T7LRXL.js";import"./chunk-DYNR3EAF.js";import"./chunk-W3TWKYGN.js";import"./chunk-72TNJFVF.js";import"./chunk-OC2XJJQU.js";import"./chunk-IDSQ2YJ4.js";import{a as X}from"./chunk-AC55GQHL.js";import{a as T}from"./chunk-FHBFWDFD.js";import"./chunk-2XCEJBGD.js";import"./chunk-UZ6PRO67.js";import"./chunk-APBBABYM.js";import"./chunk-PCYNPIKE.js";import"./chunk-AM4QFKZT.js";import"./chunk-DT6D5YZT.js";import"./chunk-CSSRRM4C.js";import"./chunk-RVXDLN3U.js";import{a as Q}from"./chunk-4OC4J3KU.js";import"./chunk-QCN4VUQF.js";import"./chunk-CJL3HAFX.js";import"./chunk-S3MATJKX.js";import"./chunk-NWJCHWGR.js";import"./chunk-FM2MN524.js";import"./chunk-XEJVICTW.js";import"./chunk-ESAKNWVF.js";import"./chunk-H26LGRNQ.js";import"./chunk-2JW3DUYT.js";import"./chunk-4JIR4MZV.js";import"./chunk-ZO3S2OWI.js";import"./chunk-63BBKXWS.js";import"./chunk-5KMJDB5T.js";import"./chunk-NYVDVEEV.js";import"./chunk-UF3HHTD3.js";import{b as N,n as R}from"./chunk-6OWZRPJO.js";import"./chunk-67GIWMYL.js";import"./chunk-Q5KIWWVU.js";import"./chunk-2I3LIA7G.js";import"./chunk-CISTQZ5X.js";import"./chunk-C5Z6B7V6.js";import"./chunk-QRRKH6UX.js";import"./chunk-KJEG6KH2.js";import"./chunk-6BOYEX6F.js";import"./chunk-26PJXQHD.js";import"./chunk-XAJ5ULUR.js";import"./chunk-MIJLPOZZ.js";import"./chunk-QBDGQCUP.js";import"./chunk-7XYYDAZO.js";import"./chunk-DXT3NBO5.js";import"./chunk-H2NTHPNN.js";import"./chunk-Z7TBAZRW.js";import"./chunk-BKWQOCBC.js";import"./chunk-LCFWGHLF.js";import"./chunk-5YS73I3T.js";import"./chunk-3ZJ4NMBE.js";import"./chunk-4S7THJAS.js";import"./chunk-J5AEP4US.js";import"./chunk-YHRLMRSO.js";import"./chunk-KPT44MCK.js";import"./chunk-XKFJ6GWH.js";import"./chunk-L7NOU4T2.js";import"./chunk-G2JMPZCN.js";import"./chunk-UKAGN54W.js";import"./chunk-342NGUMP.js";import"./chunk-NIYDRLW4.js";import"./chunk-QSQIQSC6.js";import"./chunk-AYNBEMCC.js";import"./chunk-LNYBTIG7.js";import"./chunk-N62DQME2.js";import"./chunk-Y7XRSFOZ.js";import"./chunk-YQNUGDFH.js";import"./chunk-QCZ3ZIGQ.js";import"./chunk-7SDNM7YV.js";import"./chunk-4NUW747S.js";import"./chunk-T6WMVIUG.js";import"./chunk-PHODKV66.js";import"./chunk-JPMGMA4B.js";import"./chunk-YZJDOXQC.js";import"./chunk-XR5FT7TQ.js";import"./chunk-LAX5536Z.js";import"./chunk-N3HRYLNW.js";import"./chunk-4DBMALZW.js";import"./chunk-CVWWHM2V.js";import"./chunk-6OQYVEQJ.js";import"./chunk-YOXOWGT6.js";import"./chunk-EFZOSMYP.js";import"./chunk-WI7F4ZKJ.js";import"./chunk-MJ7M24NH.js";import"./chunk-GJH4QFRX.js";import"./chunk-T63F7663.js";import"./chunk-O4V2VBSK.js";import"./chunk-5TKRKB5E.js";import"./chunk-XAGMDNNR.js";import"./chunk-OP2TLIUN.js";import"./chunk-T2THIR6K.js";import"./chunk-LORHDXEB.js";import"./chunk-BBBPJI4H.js";import"./chunk-45BTW5EG.js";import"./chunk-TPFBHGDM.js";import"./chunk-73NLRHJD.js";import"./chunk-PNFEUBDF.js";import"./chunk-6RCCEJDL.js";import"./chunk-PQ2TNDUX.js";import"./chunk-6X6MKRQ3.js";import"./chunk-FQFHMHYU.js";import"./chunk-SZMEI3WL.js";import"./chunk-KKVGD67U.js";import"./chunk-MYOJWRDU.js";import"./chunk-L7UKJKHG.js";import"./chunk-V2IENAEU.js";import"./chunk-QAGQFNF2.js";import"./chunk-SY7JS2VW.js";import"./chunk-WK57SDN6.js";import"./chunk-AG4V3ZUO.js";import"./chunk-YWLMJ26A.js";import"./chunk-QAWNU3UJ.js";import"./chunk-HRQT4R6X.js";import"./chunk-44BHLWQ4.js";import"./chunk-5BPM64SU.js";import"./chunk-PMVHHMQJ.js";import"./chunk-NAFOM5UA.js";import"./chunk-DO7UF2F2.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import"./chunk-K57Z4J34.js";import"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-YW3L7OMP.js";import"./chunk-JQAW4OB5.js";import"./chunk-TC77DYTW.js";import"./chunk-F2BQ2GD6.js";import"./chunk-R3XLNYYB.js";import"./chunk-2HYVVLKS.js";import"./chunk-XRTA5GHC.js";import"./chunk-Y6XW36QP.js";import"./chunk-ZXKU6WBY.js";import"./chunk-BMYVPMAK.js";import"./chunk-6F25LG6O.js";import"./chunk-XLL67PCY.js";import"./chunk-MCO7DSFO.js";import"./chunk-IIROCMOY.js";import"./chunk-GJ2QRXGN.js";import"./chunk-RWCIDBNQ.js";import"./chunk-EM35R6FY.js";import"./chunk-HKJZ7WI6.js";import"./chunk-CXOFHVIF.js";import"./chunk-EO2H4LIH.js";import"./chunk-DJW5LMRG.js";import"./chunk-DEH76MSI.js";import"./chunk-ALWV3RJ2.js";import"./chunk-QXXXCEV5.js";import"./chunk-6B5XFA6F.js";import"./chunk-TJ6P6NLD.js";import"./chunk-3JGYBNJA.js";import"./chunk-DA3SDKGO.js";import"./chunk-ZOEPYNM4.js";import"./chunk-57VFBGF3.js";import"./chunk-GWBRHLNH.js";import"./chunk-BJH4F4SM.js";import"./chunk-Z3RBZHAK.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-ZC6EBRE4.js";import"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-E7AX56GD.js";import"./chunk-IDVLLREH.js";import"./chunk-DWLSVYOY.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-7QNKS2X6.js";import"./chunk-VCCMJ6BV.js";import"./chunk-QK56OQGR.js";import"./chunk-FXCL7YYQ.js";import"./chunk-QKO56XO6.js";import"./chunk-JRGT3GTH.js";import"./chunk-K75TK42V.js";import"./chunk-CELWVZPW.js";import"./chunk-VV5G7VY5.js";import"./chunk-OLOKUDVI.js";import"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-V2JYXY4D.js";import"./chunk-KVM6SHDX.js";import"./chunk-POX73EYJ.js";import"./chunk-NKUXRYJG.js";import"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-DKGGDYJI.js";import"./chunk-5LA3PVK5.js";import"./chunk-IR6XCBC4.js";import"./chunk-C6JPAW54.js";import"./chunk-WD3OPXCN.js";import"./chunk-FA3WGIU4.js";import"./chunk-WWVPA6PE.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-O3EGNJTY.js";import"./chunk-GHKL3NOH.js";import"./chunk-WGAOVKGR.js";import{a as w}from"./chunk-AXYQJCCX.js";import{a as r,b as L}from"./chunk-5XCFNEYX.js";import{a as v}from"./chunk-GQL2MBZT.js";import{b as y}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import{a as J}from"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as P,j as A}from"./chunk-TG45K3WR.js";import{f as K}from"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as s}from"./chunk-QGVBCWUY.js";import{H as q}from"./chunk-MYO4NP2N.js";import{e as o}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as u}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import{b as M,e as z,o as W,p as j}from"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{a as D,f as G}from"./chunk-VTHXE323.js";var h="esri-elevation-profile",p={base:`${h}`,portrait:`${h}--portrait`,refined:`${h}--refined`,mainContainer:`${h}__main-container`,promptContainer:`${h}__prompt-container`,header:`${h}__header`,zoomOutButton:`${h}__zoom-out-button`,clearButton:`${h}__clear-button`,actionButton:`${h}__action-button`,sketchButton:`${h}__sketch-button`,sketchCancelButton:`${h}__sketch-cancel-button`,sketchDoneButton:`${h}__sketch-done-button`,selectButton:`${h}__select-button`,selectCancelButton:`${h}__select-cancel-button`,chartContainer:`${h}__chart-container`,chartSpinner:`${h}__chart-spinner`,chartSpinnerVisible:`${h}__chart-spinner--visible`,chartSpinnerSmall:`${h}__chart-spinner--small`,footer:`${h}__footer`},te={base:"esri-elevation-profile-legend"},b="esri-elevation-profile-legend-item",C={base:b,disabled:`${b}--disabled`,expanded:`${b}--expanded`,colorIndicator:`${b}__color-indicator`,header:`${b}__header`,content:`${b}__content`,collapseToggle:`${b}__collapse-toggle`,label:`${b}__label`,checkbox:`${b}__checkbox`},U="esri-elevation-profile-statistics",E={base:U,statistic:`${U}__statistic`,statisticLabel:`${U}__statistic__label`,statisticValue:`${U}__statistic__value`,slopeValue:`${U}__slope-value`},O="esri-elevation-profile-settings",$={base:`${O}`,popoverContent:`${O}__popover-content`,uniformChartScalingLabel:`${O}__uniform-scaling-label`,uniformChartScalingCheckbox:`${O}__uniform-scaling-checkbox`};var g=class extends q{constructor(){super(...arguments),this.legend=!0,this.chart=!0,this.clearButton=!0,this.settingsButton=!0,this.sketchButton=!0,this.selectButton=!0,this.unitSelector=!0,this.uniformChartScalingToggle=!0}};s([o()],g.prototype,"legend",void 0),s([o()],g.prototype,"chart",void 0),s([o()],g.prototype,"clearButton",void 0),s([o()],g.prototype,"settingsButton",void 0),s([o()],g.prototype,"sketchButton",void 0),s([o()],g.prototype,"selectButton",void 0),s([o()],g.prototype,"unitSelector",void 0),s([o()],g.prototype,"uniformChartScalingToggle",void 0),g=s([u("esri.widgets.ElevationProfile.ElevationProfileVisibleElements")],g);var Z=g;var ie=100,S=class extends v{constructor(e,i){super(e,i),this._updateLayout=t=>{let n=t.parentElement,a=t.style.display;n?.removeChild(t),document.body.appendChild(t),t.style.display="block";let c=80;for(let V of t.childNodes)V instanceof HTMLElement&&(c=Math.max(c,V.offsetWidth));document.body.removeChild(t),n?.appendChild(t),t.style.display=a,t.style.setProperty("--max-width",`${c}px`)},this._updateLayoutThrottled=X(this._updateLayout,ie)}loadDependencies(){return y({icon:()=>import("./chunk-7Z2RNQA3.js")})}initialize(){this.addHandles(this._updateLayoutThrottled)}render(){return r("div",{afterCreate:this._updateLayout,afterUpdate:this._updateLayoutThrottled,bind:this,class:E.base},this._renderStatistics())}_renderStatistics(){let e=this._messages?.statistics;return e?[this._renderDistanceStatistic("maxDistance",e.maxDistance),this._renderElevationStatistic("elevationGain",e.gain),this._renderElevationStatistic("elevationLoss",e.loss),this._renderElevationStatistic("minElevation",e.minElevation),this._renderElevationStatistic("maxElevation",e.maxElevation),this._renderElevationStatistic("avgElevation",e.avgElevation),this._renderSlopeStatistic("maxPositiveSlope","maxNegativeSlope",e.maxSlope),this._renderSlopeStatistic("avgPositiveSlope","avgNegativeSlope",e.avgSlope)]:[]}_renderDistanceStatistic(e,i){let t=B().formatPrecision,n=this._renderValue(e,a=>{let c=this.effectiveUnits.distance;return N(this._messagesUnits,a,c,t)});return this._renderStatistic(i,n)}_renderElevationStatistic(e,i){let t=B().formatPrecision,n=this._renderValue(e,a=>{let c=this.effectiveUnits.elevation;return N(this._messagesUnits,a,c,t)});return this._renderStatistic(i,n)}_renderSlopeStatistic(e,i,t){let n=B().formatPrecision,a=r("div",{class:E.slopeValue,key:"slope-up"},r("calcite-icon",{icon:"arrow-up",scale:"s"}),this._renderValue(e,c=>R(c,"degrees","geographic","geographic",n)),r("calcite-icon",{icon:"arrow-down",scale:"s"}),this._renderValue(i,c=>R(c,"degrees","geographic","geographic",n)));return this._renderStatistic(t,a)}_renderStatistic(e,i){return r("div",{class:E.statistic},r("label",{class:E.statisticLabel},e),r("div",{class:E.statisticValue},i))}_renderValue(e,i){let t=this.line,n=t.progress===1?t.statistics:null,a=n?.[e];return a!=null?i(a):ee}};s([o()],S.prototype,"effectiveUnits",void 0),s([o()],S.prototype,"line",void 0),s([o(),w("esri/widgets/ElevationProfile/t9n/ElevationProfile")],S.prototype,"_messages",void 0),s([o(),w("esri/core/t9n/Units")],S.prototype,"_messagesUnits",void 0),S=s([u("esri.widgets.ElevationProfile.components.Statistics")],S);var _=class extends v{constructor(e,i){super(e,i),this.checkboxVisible=!0,this.expanded=!1}loadDependencies(){return y({action:()=>import("./chunk-X23M5IZ6.js"),checkbox:()=>import("./chunk-NV4IBMC5.js"),label:()=>import("./chunk-S24JESVO.js")})}initialize(){this._statistics=new S(this._statisticsProps),this.addHandles(P(()=>this._statisticsProps,e=>this._statistics.set(e)))}destroy(){this._statistics=M(this._statistics)}render(){let e=this.expanded;return r("div",{class:this.classes(C.base,{[C.disabled]:this.disabled,[C.expanded]:e}),key:this},this._renderColorIndicator(),r("div",{class:C.header,key:"header"},this._renderLabelWithCheckbox(),this._renderCollapseToggleButton()),e?r("div",{class:C.content,key:"content"},this._statistics.render()):null)}get disabled(){return!this.line.available}get _statisticsProps(){return{line:this.line,effectiveUnits:this.effectiveUnits}}_renderColorIndicator(){return r("div",{class:C.colorIndicator,key:"color-indicator",styles:{backgroundColor:this.line.color.toCss()}})}_renderCollapseToggleButton(){let{expanded:e,messages:i}=this,t=e?i.hideDetails:i.showDetails;return r("calcite-action",{appearance:"transparent",bind:this,class:C.collapseToggle,"data-testid":"legend-toggle",icon:e?"chevron-up":"chevron-down",key:"collapse-toggle",onclick:this._onCollapseToggleClick,scale:"s",text:t,title:t})}_onCollapseToggleClick(){this.onExpandedToggle()}_renderLabelWithCheckbox(){let{line:e,checkboxVisible:i,disabled:t,messages:n}=this;return r("calcite-label",{class:C.label,disabled:t,key:`label-${e.id}`,layout:"inline"},i?this._renderCheckbox():null,H(e,n))}_renderCheckbox(){let{disabled:e,line:i,messages:t}=this,n=i.visible,a=n?t.hideProfile:t.showProfile,c=J(a,{name:H(i,t)});return r("calcite-checkbox",{checked:n,class:C.checkbox,disabled:e,title:c,onCalciteCheckboxChange:()=>i.toggleVisibility()})}};s([o()],_.prototype,"checkboxVisible",void 0),s([o()],_.prototype,"disabled",null),s([o({nonNullable:!0})],_.prototype,"effectiveUnits",void 0),s([o()],_.prototype,"expanded",void 0),s([o({nonNullable:!0})],_.prototype,"line",void 0),s([o()],_.prototype,"messages",void 0),s([o()],_.prototype,"onExpandedToggle",void 0),s([o()],_.prototype,"_statistics",void 0),_=s([u("esri.widgets.ElevationProfile.components.LegendItem")],_);var k=class extends v{constructor(){super(...arguments),this._expandedLine=null}render(){let{profiles:e,messages:i,effectiveUnits:t,_expandedLine:n}=this;return r("div",{class:te.base},e.map(a=>r(_,{checkboxVisible:e.length>1,effectiveUnits:t,expanded:a===n,line:a,messages:i,onExpandedToggle:()=>this._onExpandedToggle(a)})))}_onExpandedToggle(e){this._expandedLine=e===this._expandedLine?null:e}};s([o()],k.prototype,"effectiveUnits",void 0),s([o()],k.prototype,"messages",void 0),s([o()],k.prototype,"profiles",void 0),s([o()],k.prototype,"_expandedLine",void 0),k=s([u("esri.widgets.ElevationProfile.components.Legend")],k);var m=class extends v{constructor(){super(...arguments),this.messages=null,this._popoverIsOpen=!1,this._referenceElement=null,this._onUniformChartScalingChange=e=>{this.onUniformChartScalingChange(e.currentTarget.checked)}}loadDependencies(){return y({action:()=>import("./chunk-X23M5IZ6.js"),checkbox:()=>import("./chunk-NV4IBMC5.js"),label:()=>import("./chunk-S24JESVO.js"),popover:()=>import("./chunk-J5HY7FQ5.js")})}render(){let{id:e,messages:i,visibleElements:t}=this,{unitSelector:n,uniformChartScalingToggle:a}=t;if(!i||!n&&!a)return r("div",{key:`${e}-empty`});let c=this._popoverIsOpen?i.hideSettings:i.showSettings;return r("div",{class:$.base,key:this},r("calcite-action",{afterCreate:V=>{this._referenceElement=V},appearance:"transparent","data-testid":"settings-button",icon:"gear",scale:"s",text:c,title:c}),this._referenceElement?r("calcite-popover",{autoClose:!0,label:c,placement:"bottom-end",referenceElement:this._referenceElement,onCalcitePopoverClose:()=>{this._popoverIsOpen=!1},onCalcitePopoverOpen:()=>{this._popoverIsOpen=!0}},this._renderPopoverContent()):null)}_renderPopoverContent(){let{unitSelector:e,uniformChartScalingToggle:i}=this.visibleElements;return r("div",{class:$.popoverContent},e?this._renderUnitSelector():null,i?this._renderUniformChartScalingToggle():null)}_renderUnitSelector(){let{messages:e}=this;return r(Y,{key:"unit-selector-label",options:this.unitOptions,selectLabel:e?.unitSelectLabel??"",value:this.unit,onChange:this.onUnitChange})}_renderUniformChartScalingToggle(){let{messages:e}=this,i=this.uniformChartScaling,t=e?.[i?"uniformChartScalingDisable":"uniformChartScalingEnable"]??"";return r("calcite-label",{class:$.uniformChartScalingLabel,key:"uniform-chart-scaling-label",layout:"inline"},r("calcite-checkbox",{checked:i,class:$.uniformChartScalingCheckbox,title:t,onCalciteCheckboxChange:this._onUniformChartScalingChange}),e?.uniformChartScalingLabel)}};s([o()],m.prototype,"messages",void 0),s([o()],m.prototype,"onUniformChartScalingChange",void 0),s([o()],m.prototype,"onUnitChange",void 0),s([o()],m.prototype,"uniformChartScaling",void 0),s([o()],m.prototype,"unit",void 0),s([o()],m.prototype,"unitOptions",void 0),s([o()],m.prototype,"visibleElements",void 0),s([o()],m.prototype,"_popoverIsOpen",void 0),s([o()],m.prototype,"_referenceElement",void 0),m=s([u("esri.widgets.ElevationProfile.components.SettingsButton")],m);var d;(function(e){e.Sketch="sketch",e.SketchCancel="sketch-cancel",e.SketchDone="sketch-done",e.Select="select",e.SelectCancel="select-cancel"})(d||(d={}));var I=[{type:d.Select},{type:d.Sketch}],se={[f.None]:null,[f.NoValidInput]:"noProfile",[f.NoVisibleProfiles]:"noProfile",[f.RefinedButNoChartData]:"noProfile",[f.TooComplex]:"tooComplex",[f.UnknownError]:"unknown",[f.InvalidGeometry]:"invalidGeometry",[f.InvalidElevationInfo]:"invalidElevationInfo"},l=class extends v{constructor(e,i){super(e,i),this.viewModel=null,this.visibleElements=new Z,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this._chartContainer=null,this._chart=null,this._chartInitTask=null,this._chartIsRefined=!1,this._zoomOutButtonVisible=!1,this._getChartUpdateParamsMemoized=Q((t,n,a,c)=>({chart:t,data:n,stationary:a,messages:c})),this._onZoomOutButtonClick=()=>{this._chart?.zoomOut()},this._onClearButtonClick=()=>{this.viewModel.clear()},e?.viewModel||(this._defaultViewModel=new F({view:e?.view}),this.viewModel=this._defaultViewModel)}loadDependencies(){return y({action:()=>import("./chunk-X23M5IZ6.js"),button:()=>import("./chunk-K3RCADAN.js"),loader:()=>import("./chunk-4Z3TWS6O.js")})}postInitialize(){this.addHandles([P(()=>({container:this._chartContainer}),({container:e})=>{this._destroyChart(),e!=null&&this._initializeChart(e)},A),P(()=>this._chartUpdateParams,()=>this._updateChart(this._chartUpdateParams),A)])}destroy(){this._destroyChart(),this._defaultViewModel!=null&&this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get input(){return this.viewModel.input}set input(e){this.viewModel.input=e}get profiles(){return this.viewModel.profiles}set profiles(e){this.viewModel.profiles=e}get unitOptions(){return this.viewModel.unitOptions}set unitOptions(e){this.viewModel.unitOptions=e}get unit(){return this.viewModel.unit}set unit(e){this.viewModel.unit=e}get icon(){return"altitude"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}get test(){return{chart:this._chart}}get _selectButtonVisible(){return this.visibleElements.selectButton===!0&&this.viewModel.selectAvailable}get _chartUpdateParams(){let e=this.view;return this._getChartUpdateParamsMemoized(this._chart,this.viewModel.chartData,e==null||e.stationary,this._chartMessages)}get _chartMessages(){return D(D({},this.messagesUnits),this.messages)}get _profilesArray(){return this.profiles.toArray()}render(){let{viewModel:e,visible:i}=this;return r("div",{"aria-label":this.messages.widgetLabel,class:this.classes({[p.base]:i,[T.widget]:i,[T.panel]:i,[T.widgetDisabled]:i&&e.state==="disabled",[p.refined]:e.progress===1}),key:this},r("div",{bind:this,key:"content-wrapper"},i?this._renderContentForState():null))}_renderContentForState(){switch(this.viewModel.state){case x.Ready:return this._renderContentForReadyState();case x.Selecting:return this._renderContentForSelectingState();case x.Creating:return this._renderContentForCreatingState();case x.Selected:return this._renderContentForSelectedState();case x.Created:return this._renderContentForCreatedState();case x.Disabled:return this._renderContentForReadyState()}}_renderContentForReadyState(){let{messages:e,visibleElements:i,_selectButtonVisible:t}=this,{sketchButton:n}=i,a;return a=n&&t?e.readyPrompt:n?e.readyPromptCreateOnly:t?e.readyPromptSelectOnly:e.errors?.noProfile,this._renderContent({prompt:a,chart:!1,actions:I})}_renderContentForSelectingState(){let{view:e}=this;if(e==null)return null;let i=this.messages[`selectingPrompt-${e.type}`];return this._renderContent({prompt:i,chart:!1,actions:[{type:d.SelectCancel}]})}_renderContentForCreatingState(){let{view:e,viewModel:i}=this;if(e==null)return null;let t=i.hasVertices?[{type:d.SketchCancel},{type:d.SketchDone,disabled:!i.tool.interaction.canStopCreating}]:[{type:d.Select},{type:d.Sketch,disabled:!0}];if(i.errorState===f.NoValidInput){let a=this.messages[`creatingPrompt-${e.type}`];return this._renderContent({chart:!1,actions:t,prompt:a})}let n=this._getErrorMessage();return n?this._renderContent({chart:!1,actions:t,prompt:n}):this._renderContent({chart:!0,actions:t})}_renderContentForSelectedState(){let e=this._getErrorMessage();return e?this._renderContent({chart:!1,actions:I,prompt:e}):this._renderContent({chart:!0,actions:I})}_renderContentForCreatedState(){let e=this._getErrorMessage();return e?this._renderContent({chart:!1,actions:I,prompt:e}):this._renderContent({chart:!0,actions:I})}_getErrorMessage(){let e=se[this.viewModel.errorState];return e?this.messages?.errors?.[e]:null}_renderContent(e){let i=e.prompt!=null?this._renderPrompt(e.prompt):e.chart&&this._renderChart(),{viewModel:t}=this,n=t.input!=null;return r(L,null,r("header",{class:p.header,key:"header"},this._zoomOutButtonVisible?this._renderZoomOutButton():null,this.visibleElements.clearButton&&n?this._renderClearButton():null,this.visibleElements.settingsButton?r(m,{messages:this.messages,uniformChartScaling:t.uniformChartScaling,unit:t.unit,unitOptions:t.unitOptions,visibleElements:this.visibleElements,onUniformChartScalingChange:a=>t.uniformChartScaling=a,onUnitChange:a=>t.unit=a}):null),r("div",{class:p.mainContainer,key:"main-container"},i),this.visibleElements.legend?r(k,{effectiveUnits:t.effectiveUnits,messages:this.messages,profiles:this._profilesArray}):null,this._renderActions(e))}_renderZoomOutButton(){let e=this.messages.zoomOut;return r("calcite-action",{appearance:"transparent",class:p.zoomOutButton,"data-testid":"zoom-out-button",icon:"magnifying-glass-minus",key:"zoom-out",onclick:this._onZoomOutButtonClick,scale:"s",text:e,title:e})}_renderClearButton(){let e=this.messages.clearProfile;return r("calcite-action",{appearance:"transparent",class:p.clearButton,"data-testid":"clear-button",icon:"trash",key:"clear-profile",onclick:this._onClearButtonClick,scale:"s",text:e,title:e})}_renderPrompt(e){return[r("div",{bind:this,class:p.promptContainer,key:"prompt-container"},r("p",null,e))]}_renderChart(){if(!this.visibleElements.chart)return r("div",{class:p.chartContainer,key:"empty-chart-container"});let{chartData:e,progress:i}=this.viewModel,t=this._chartIsRefined||this._canRenderChart(),n=e!=null&&i<1;return t?r(L,null,this._renderSpinner({size:t?"small":"large",visible:n}),r("div",{afterCreate:this._onChartContainerUpdate,afterRemoved:this._onChartContainerRemoved,afterUpdate:this._onChartContainerUpdate,bind:this,class:p.chartContainer,key:"chart-container"})):r(L,null,this._renderSpinner({size:"large",visible:n}),r("div",{class:p.chartContainer,key:"chart-container-empty"}))}_renderSpinner(e){let i=e.size==="small",t=e.visible??!0;return r("calcite-loader",{class:this.classes(p.chartSpinner,i&&p.chartSpinnerSmall,t&&p.chartSpinnerVisible),"data-testid":"chart-spinner",inline:i,key:"spinner",label:"",scale:"s"})}_canRenderChart(){let e=this.viewModel.chartData;if(e==null)return!1;if(!this.viewModel.inputIsSketched)return e.refined;let i=0;for(let{samples:t}of e.lines)i+=t!=null?t.length:0;return e.refined||i<=B().largeChartSamples}_renderActions({actions:e}){let i=e.map(t=>{switch(t.type){case d.Sketch:return this.visibleElements.sketchButton&&this._renderAction({action:t,className:p.sketchButton,label:this.messages.sketchButtonLabel,onClick:this._onSketchButtonClick,primary:!0});case d.SketchCancel:return this.visibleElements.sketchButton&&this._renderAction({action:t,onClick:this._onCancelButtonClick,className:p.sketchCancelButton,label:this.messagesCommon.cancel,primary:!1});case d.SketchDone:return this.visibleElements.sketchButton&&this._renderAction({action:t,onClick:this._onDoneButtonClick,className:p.sketchDoneButton,label:this.messagesCommon.done,primary:!0});case d.Select:return this._selectButtonVisible&&this._renderAction({action:t,onClick:this._onSelectButtonClick,className:p.selectButton,label:this.messages.selectButtonLabel,primary:!1});case d.SelectCancel:return this._selectButtonVisible&&this._renderAction({action:t,onClick:this._onCancelButtonClick,className:p.selectCancelButton,label:this.messagesCommon.cancel,primary:!1})}}).filter(Boolean);return i.length?r("footer",{class:p.footer,key:"footer"},i):null}_renderAction({action:e,className:i,label:t,onClick:n,primary:a}){return r("calcite-button",{appearance:a?"solid":"outline-fill",bind:this,class:this.classes(p.actionButton,i),disabled:e.disabled,key:`action-${e.type}`,onclick:n},t)}_onSketchButtonClick(){this.viewModel.start({mode:"sketch"})}_onSelectButtonClick(){this.viewModel.start({mode:"select"})}_onCancelButtonClick(){this.viewModel.cancel()}_onDoneButtonClick(){this.viewModel.stop()}_updateChart(e){let{data:i,chart:t,messages:n,stationary:a}=e;t!=null&&n!=null&&a&&this._canRenderChart()&&(t.update(e),this._chartIsRefined=i!=null&&i.refined)}_onChartContainerUpdate(e){this._chartContainer=e}_onChartContainerRemoved(){this._chartContainer=null}_initializeChart(e){z(this._chartInitTask),this._chartInitTask=K(i=>G(this,null,function*(){let{createChart:t}=yield import("./chunk-XUZQJ4QJ.js");j(i);let n=yield t({container:e,abortOptions:{signal:i},onRangeChange:(a,c)=>{this._zoomOutButtonVisible=a!==1||c!==1},onCursorPositionChange:a=>{this.viewModel.hoveredChartPosition=a}});if(i.aborted)throw M(n),W();this._chart=n,this._updateChart(this._chartUpdateParams)}))}_destroyChart(){this._chartInitTask=z(this._chartInitTask),this._chart=M(this._chart),this._chartIsRefined=!1}};s([o({type:F})],l.prototype,"viewModel",void 0),s([o()],l.prototype,"view",null),s([o()],l.prototype,"input",null),s([o()],l.prototype,"profiles",null),s([o()],l.prototype,"unitOptions",null),s([o()],l.prototype,"unit",null),s([o({type:Z,nonNullable:!0})],l.prototype,"visibleElements",void 0),s([o()],l.prototype,"icon",null),s([o()],l.prototype,"label",null),s([o()],l.prototype,"visible",null),s([o(),w("esri/widgets/ElevationProfile/t9n/ElevationProfile")],l.prototype,"messages",void 0),s([o(),w("esri/t9n/common")],l.prototype,"messagesCommon",void 0),s([o(),w("esri/core/t9n/Units")],l.prototype,"messagesUnits",void 0),s([o()],l.prototype,"_chartContainer",void 0),s([o()],l.prototype,"_chart",void 0),s([o()],l.prototype,"_chartInitTask",void 0),s([o()],l.prototype,"_chartIsRefined",void 0),s([o()],l.prototype,"_zoomOutButtonVisible",void 0),s([o()],l.prototype,"_selectButtonVisible",null),s([o()],l.prototype,"_chartUpdateParams",null),s([o()],l.prototype,"_chartMessages",null),s([o()],l.prototype,"_profilesArray",null),l=s([u("esri.widgets.ElevationProfile")],l);var Wt=l;export{Wt as default};
