import{a as r}from"./chunk-ULOK73M2.js";var o=class{constructor(e,t,s,a){this._hasNoDataValues=null,this._minValue=null,this._maxValue=null,"pixelData"in e?(this.values=e.pixelData,this.width=e.width,this.height=e.height,this.noDataValue=e.noDataValue):(this.values=e,this.width=t,this.height=s,this.noDataValue=a)}get hasNoDataValues(){if(this._hasNoDataValues==null){let e=this.noDataValue;this._hasNoDataValues=this.values.includes(e)}return this._hasNoDataValues}get minValue(){return this._ensureBounds(),this._minValue}get maxValue(){return this._ensureBounds(),this._maxValue}get cachedMemory(){return this.values.byteLength+256}_ensureBounds(){if(this._minValue!=null)return;let{noDataValue:e,values:t}=this,s=1/0,a=-1/0,n=!0;for(let l of t)l===e?this._hasNoDataValues=!0:(s=l<s?l:s,a=l>a?l:a,n=!1);n?(this._minValue=0,this._maxValue=0):(this._minValue=s,this._maxValue=a>-3e38?a:0)}};var h=class extends r{constructor(e=null){super("LercWorker","_decode",{_decode:t=>[t.buffer]},e,{strategy:"dedicated"}),this.schedule=e,this.ref=0}decode(e,t,s){return e&&e.byteLength!==0?this.invoke({buffer:e,options:t},s):Promise.resolve(null)}release(){--this.ref<=0&&(u.forEach((e,t)=>{e===this&&u.delete(t)}),this.destroy())}},u=new Map;function V(i=null){let e=u.get(i);return e||(i!=null?(e=new h(t=>i.immediate.schedule(t)),u.set(i,e)):(e=new h,u.set(null,e))),++e.ref,e}export{o as a,V as b};
