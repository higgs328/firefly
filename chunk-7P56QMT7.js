import{b as u}from"./chunk-KQZGMGWR.js";import{b as f}from"./chunk-YOFFGXOB.js";import{g as c}from"./chunk-XRGPJ3QY.js";var a=()=>c.getLogger("esri.layers.support.labelingInfo"),p=/\[([^[\]]+)\]/gi;function w(r,o,n){return r?r.map(t=>{let e=new u;if(e.read(t,n),e.labelExpression){let l=o.fields||o.layerDefinition?.fields||this.fields;e.labelExpression=e.labelExpression.replaceAll(p,(s,i)=>`[${b(i,l)}]`)}return e}):null}function b(r,o){if(!o)return r;let n=r.toLowerCase();for(let t=0;t<o.length;t++){let e=o[t].name;if(e.toLowerCase()===n)return e}return r}var m={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function h(r,o){let n=[];for(let t of r){let e=t.labelPlacement,l=m[o];if(!t.symbol)return a().warn("No ILabelClass symbol specified."),[];if(!l)return a().error(new f("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${o}' is not supported`)),[];if(l.includes(e))n.push(t);else{let s=l[0];e&&a().warn(`Found invalid label placement type ${e} for ${o}. Defaulting to ${s}`);let i=t.clone();i.labelPlacement=s,n.push(i)}}return n}export{w as a,h as b};
