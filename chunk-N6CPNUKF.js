import{a as C}from"./chunk-MVV7BPOJ.js";import{a as k}from"./chunk-4SB27PWV.js";import{H as M,I as E,J as D,a as R,b as V,c as b,d as P,e as I,f as v,g as W,h as F,i as T,j as G,o as A}from"./chunk-3VRDAJCX.js";import{a as S}from"./chunk-TG45K3WR.js";import{c as g,f as a}from"./chunk-VTHXE323.js";var K=D({defaultAssetPath:"https://js.arcgis.com/map-components/4.32/",hydratedAttribute:"hydrated"}),{customElement:O,getAssetPath:rt,setAssetPath:et}=K;var z=typeof window<"u"&&"$arcgis"in window&&typeof window.$arcgis=="object"&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function H(r){return r.default!==void 0}function B(){return a(this,null,function*(){if(z)return yield window.$arcgis.import("esri/core/reactiveUtils");let r=yield import("./chunk-ITXKKKAH.js");return H(r)?r.default:r})}var h;function x(){return a(this,null,function*(){return h??(h=B()),yield h})}var $=(r,e)=>(t,n)=>j(t,r,n),Q=class extends I{constructor(r,e,t){super(r),this._loadAccessor=e,this._options=t,this._watchedProperties=new Map,this._isBinding={value:!0},this.setProvisionalExports(f.makeGetterProxy(r,this._watchedProperties,this._isBinding,this.constructor.allowedPropNameMismatches)),v(r,n=>{n&&(this._instancePropName=n)},this.exports)}hostConnected(){this._isBinding.value=!1}hostLoad(){return a(this,null,function*(){this.reactiveUtils=yield x();let r=this.component,e=this._gatherParameters(),t=this._options?.editConstructorProperties?.call(r,e)??e,n=t instanceof Promise?yield t:t,c=r,i=typeof this._instancePropName=="string"?c[this._instancePropName]:void 0;i!=null&&i!==this.exports?(this._instance=i,i.set(n)):this._instance=yield this._createInstance(n),!r.manager.destroyed&&(f.watchComponentUpdates(this,this._instance,this._watchedProperties),f.watchAccessorUpdates(this,this._instance,this._watchedProperties),this.exports=this._instance)})}_gatherParameters(){return Object.fromEntries(Array.from(this._watchedProperties,([t,n])=>[n,this.component[t]]).filter(([,t])=>t!==void 0))}_createInstance(r){return a(this,null,function*(){return this._isAccessorConstructor(this._loadAccessor)?new this._loadAccessor(r):yield this._loadAccessor(r)})}_isAccessorConstructor(r){return"prototype"in r&&"declaredClass"in r.prototype}hostDestroy(){this._instance&&this._instance.destroy()}reCreate(){return a(this,null,function*(){this.hostDestroy(),yield this.hostLoad()})}},j=G(Q),f={makeGetterProxy:(r,e,t,n)=>new Proxy({},{has:(c,i)=>typeof i=="string"||i in c,get:(c,i)=>{let d=Reflect.get(c,i);if(typeof i=="symbol"||i in Promise.prototype)return d;let s=i in c,o=t?.value??!0;if(s||!o)return d;if(!e.has(i))return W(r,u=>{u!==void 0&&e.set(u.key,i)},d)}}),watchComponentUpdates(r,e,t){function n(s,o){let u=t.get(o),w=e[u];return typeof w=="boolean"&&u!==o&&o.toLowerCase().includes("disable")?!w:w}let c=(s,o,u)=>{let w=t.get(u),m=e[w],l=typeof m=="boolean"&&w!==u&&u.toLowerCase().includes("disable");if((l?!m:i.manager.isLit?m??void 0:m)===s)return s;e[w]=l?!s:s;let y=e[w];return l?!y:y},i=r.component,d=i.manager.internals;t.forEach((s,o)=>{d.accessorGetter[o]=n,d.accessorSetter[o]=c})},watchAccessorUpdates(r,e,t){let{component:n}=r,c=n,i=e,d=q(e);T(()=>t.forEach((s,o)=>{if(d.has(s))return;let u=c[o],w=i[s];n.manager.isLit&&(w??(w=void 0));let l=typeof u=="boolean"&&s!==o&&o.toLowerCase().includes("disable")?!u:u;l!=null&&w!==l&&(i[s]=l)})),r.onLifecycle(()=>{if(!e.destroyed)return Array.from(t,([s,o])=>r.reactiveUtils.watch(()=>i[o],()=>{let u=i[o],m=typeof u=="boolean"&&o!==s&&s.toLowerCase().includes("disable")?!u:u;F(()=>{c[s]=m})},{initial:!0}))})},reEmitAccessorEvents(r,e,t,n){if(!("on"in e&&typeof e.on=="function"))return;let i=Object.entries(r.component).map(([o,u])=>{let w=u;if(!o.startsWith(n)||o===n||typeof w!="object"||w===null||!("emit"in w)||typeof w.emit!="function")return;let m=w.emit,l=o.slice(n.length);return[R(l).toLowerCase(),m]}).filter(V);if(i.length===0)return;let d=e,s=()=>d;r.onLifecycle(()=>{if(!e.destroyed)return i.map(([o,u])=>t.on(s,o,u))})},reCreate(r,e){return a(this,null,function*(){let t=e.manager.useRefSync(r);t!==void 0&&(yield t.reCreate())})}};function q(r){let t=Object.entries(r.__accessor__?.metadata??{});return new Set(t.filter(([n,c])=>c?.readOnly===!0).map(([n])=>n))}function p(r,e){let t=P(),n=t.manager,c=x();n.onLoaded(()=>{c.then(d=>n.onLifecycle(()=>d.on(r,e,i.emit)))});let i=t.constructor.$createEvent();return i}function U(r,e){return e===void 0||r?.targetGeometry!==e?.targetGeometry||r?.rotation!==e?.rotation||r?.scale!==e?.scale}function L(r,e){return N(e?.center,r)}function N(r,e){if(typeof e=="string")return N(r,e.split(",").map(Number));if(!r)return e;if(Array.isArray(e)){let t=e[0],n=e[1],c=e.length>2?e[2]:void 0;if(t!==r.longitude||n!==r.latitude||c!==r.z)return e}else if(e&&!r?.equals(e))return e}var J=A`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,Z=$(C,{}),X=$(k,{}),Y=(()=>{class r extends E{constructor(){super(...arguments),this._center=void 0,this._extent=void 0,this._itemId=void 0,this._scale=void 0,this._viewpoint=void 0,this._zoom=void 0,this._map=Z(this,{editConstructorProperties:this._editMapProperties}),this.view=X(this,{editConstructorProperties:this._editViewProperties}),this.allLayerViews=this.view.allLayerViews,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.arcgisViewChange=M(),this.arcgisViewClick=p(()=>this.view,"click"),this.arcgisViewDoubleClick=p(()=>this.view,"double-click"),this.arcgisViewDrag=p(()=>this.view,"drag"),this.arcgisViewHold=p(()=>this.view,"hold"),this.arcgisViewImmediateClick=p(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=p(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=p(()=>this.view,"key-down"),this.arcgisViewKeyUp=p(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=p(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=p(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=p(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=p(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=p(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=p(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=p(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=p(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=p(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=M()}static{this.properties={_map:16,view:32,allLayerViews:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:7,viewpoint:0,zoom:9}}static{this.shadowRootOptions=b}static{this.styles=J}get center(){return this.view.center??this._center}set center(t){let n=L(t,this.ready?this.view:void 0);n&&(this.ready&&(this.view.center=n),this._center=n)}get extent(){return this.view.extent??this._extent}set extent(t){this.view.ready||(this._extent=t),t&&!this.extent?.equals(t)&&(this.view.extent=t)}get gamepad(){return this.ready?this.view.input.gamepad:void 0}get interacting(){return this.view.interacting}get itemId(){return this._map.portalItem?.id??this._itemId}set itemId(t){this._itemId=t,this.ready?f.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error):this.view.ready!=null&&(this._map.destroy(),this._map=new C(this._editMapProperties({portalItem:{id:this._itemId}})),this.view.map=this._map)}get navigating(){return this.view.navigating}get scale(){return this.view.scale??this._scale}set scale(t){this.ready&&(this.view.scale=t),this._scale=t}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint??this._viewpoint}set viewpoint(t){this.ready&&U(this.viewpoint,t)&&(this.view.viewpoint=t),this._viewpoint=t}get zoom(){return this.view.zoom??this._zoom}set zoom(t){this.ready&&(this.view.zoom=t),this._zoom=t}addLayer(t,n){return a(this,null,function*(){this.map?.add(t,n)})}addLayers(t,n){return a(this,null,function*(){this.map?.addMany(t,n)})}addTable(t){return a(this,null,function*(){this.map?.tables.add(t)})}addTables(t,n){return a(this,null,function*(){this.map?.tables.addMany(t,n)})}closePopup(){return a(this,null,function*(){this.view?.closePopup()})}destroy(){return a(this,null,function*(){yield this.manager.destroy()})}goTo(t,n){return a(this,null,function*(){return yield this.view?.goTo(t,n)})}hitTest(t,n){return a(this,null,function*(){return yield this.view?.hitTest(t,n)})}openPopup(t){return a(this,null,function*(){yield this.view?.openPopup(t)})}takeScreenshot(t){return a(this,null,function*(){return yield this.view?.takeScreenshot(t)})}toMap(t){return this.view.toMap(t)}toScreen(t,n){return this.view.toScreen(t,n)}tryFatalErrorRecovery(){return a(this,null,function*(){this.view?.tryFatalErrorRecovery()})}whenLayerView(t){return a(this,null,function*(){return yield this.view?.whenLayerView(t)})}load(){this.el.childElem=document.createElement("div"),this.el.append(this.el.childElem),this.view.container??=this.el.childElem}loaded(){this.manager.onLifecycle(()=>[S(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),S(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}_editMapProperties(t){this.map&&(this._map=this.map),this.itemId&&(t.portalItem={id:this.itemId});let s=t,{basemap:n}=s,c=g(s,["basemap"]);n||(t=c);let o=t,{ground:i}=o,d=g(o,["ground"]);return i||(t=d),t}_editViewProperties(t){return a(this,null,function*(){yield this.manager.use(this._map),this.view.ui||(t.ui={components:["attribution"]}),t.map??=this._map;let n=L(this.center,void 0);return n&&(t.center=n),this.viewpoint&&(t.viewpoint=this.viewpoint),this.scale!==void 0&&(t.scale=this.scale),this.extent&&(t.extent=this.extent),this.zoom!==void 0&&(t.zoom=this.zoom),t})}}return r})();O("arcgis-map",Y);
