import{a as f}from"./chunk-E7AX56GD.js";var P="Raster.",s="Raster.Dim.",v=".Max",u={servicePixelValue:"Raster.ServicePixelValue",rawServicePixelValue:"Raster.ServicePixelValue.Raw",itemPixelValue:"Raster.ItemPixelValue",magnitude:"Raster.Magnitude",direction:"Raster.Direction",variable:"Raster.Variable"},p=new Map([["quarters","Quarter"],["months","Month"],["weeks","Week of the year"],["days","Day of the year"]]);function c(e,a){return new f({name:e,alias:a,domain:null,editable:!1,length:50,type:"string"})}function $(e,a){return new f({name:e,alias:a,domain:null,editable:!1,type:"double"})}function h(e,a){return new f({name:e,alias:a,domain:null,editable:!1,type:"date"})}function S(e){return c(u.servicePixelValue,e??"Service Pixel Value")}function R(e){return c(u.rawServicePixelValue,e??"Raw Service Pixel Value")}function F(){return c(u.itemPixelValue,"Item Pixel Value")}function y(e){return c(`${u.servicePixelValue}.${e}`,e)}function M(e){return $(`${u.magnitude}`,"Magnitude"+(e?` (${e})`:""))}function D(){return $(`${u.direction}`,"Direction (\xB0)")}function I(e){return e.fields.filter(a=>a.type!=="oid"&&a.name.toLowerCase()!=="value").map(a=>{let t=a.clone();return t.name=`${P}${a.name}`,t})}function N(e){let a=new Set,t=new Set,i=new Map;return e.variables.forEach(({dimensions:n})=>{n.forEach(r=>{if(r.recurring)i.set(r.name,r.unit);else{let o=r.unit?.trim()==="ISO8601"?a:t;o.add(r.name),r.hasRanges&&o.add(`${r.name}${v}`)}})}),[c(u.variable,"Variable"),...[...a].map(n=>h(`${s}${n}`,V(n))),...[...t].map(n=>$(`${s}${n}`,V(n))),...[...i].map(([n,r])=>$(`${s}${n}`,w(n,r)))]}function w(e,a){return a=a?.toLowerCase(),a&&p.has(a)?p.get(a):V(e)}function V(e){let a=e.endsWith(v),t=a?e.slice(0,-4):e,i=t==="StdTime"?"Standard Time":t==="StdZ"?"Standard Z":t;return a?`${i} Max`:i}function g(e,a){return a?new Date(e):e}function E(e,a,t){t?.length&&(a[u.variable]=t[0].variableName,t.forEach(({dimensionName:i,values:n})=>{if(i&&n?.length){let r=`${s}${i}`,o=e.find(({name:m})=>m===r);if(!o)return;let d=o.type==="date",l=n[0];if(Array.isArray(l)){if(a[`${s}${i}`]=g(l[0],d),l[1]!=null){let m=`${s}${i}${v}`;if(e.some(({name:x})=>x===m)){let x=g(l[1],d);a[m]=x}}}else a[`${s}${i}`]=g(l,d)}}))}function T(e,a){if(a.pixelType.startsWith("f")&&e.forEach(({format:t,fieldName:i})=>{t&&i&&/^raster\.(item|service)pixelvalue/i.test(i)&&(t.places=2)}),a.multidimensionalInfo){let t=a.multidimensionalInfo.variables.flatMap(({dimensions:i})=>i);e.forEach(({format:i,fieldName:n})=>{if(i&&n?.startsWith(s)){let r=n.slice(s.length),o=`${r}${v}`;t.find(({name:l})=>l===r||l===o)?.values?.every(l=>Number.isInteger(l))&&(i.places=0)}})}}export{P as a,s as b,u as c,S as d,R as e,F as f,y as g,M as h,D as i,I as j,N as k,E as l,T as m};
