import{c as m,e as p,f,h}from"./chunk-7XT4ARBK.js";import{a as s}from"./chunk-QGVBCWUY.js";import{e as o}from"./chunk-NFIPKH6V.js";import{l as d}from"./chunk-5QEXLALV.js";var c="bldglevel",t=class extends f{constructor(e){super(e),this._levelFieldName=null,this._parseValueFromFilter=a=>{let i=new RegExp(`${this._levelFieldName}\\s*=\\s*(\\d+)`,"gi"),n=new RegExp(`${this._levelFieldName}\\s*<\\s*(\\d+)`,"gi");for(let{filterMode:l,filterExpression:u}of a.filterBlocks?.items??[]){if(u==null)continue;let r=null;if(l.type==="solid"?r=i.exec(u):l.type==="x-ray"&&(r=n.exec(u)),r)return parseInt(r[1],10)}return null}}get filterExpressions(){return this.enabled&&this._levelFieldName?{xRay:`${this._levelFieldName} < ${this.value}`,solid:`${this._levelFieldName} = ${this.value}`}:{solid:null,xRay:null}}get _firstValue(){let e=this.allowedValues;return e.length>0?e[0]:0}_setup(){let e=[];this.layers.forEach(n=>{let l=m(n,c);l!=null&&(this._levelFieldName=l.fieldName,e.push(l))}),this._domainInfo=p(e);let a=this._valueBeforeReady;this._set("state","ready"),this._valueBeforeReady=null;let i=a??h(this.layers,this._parseValueFromFilter);i!=null?this.select(i):(this.enabled=!1,this.value=this._firstValue)}};s([o({readOnly:!0})],t.prototype,"filterExpressions",null),s([o()],t.prototype,"_levelFieldName",void 0),s([o({readOnly:!0})],t.prototype,"_firstValue",null),t=s([d("esri.widgets.BuildingExplorer.BuildingLevel")],t);var R=t;export{R as a};
