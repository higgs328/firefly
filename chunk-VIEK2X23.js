import{a as j}from"./chunk-XKIFGPJO.js";import{a as P}from"./chunk-PEW2PLAN.js";import{g as m,h as f}from"./chunk-Q6Y4JG7Q.js";import{a as R}from"./chunk-7F5DJLJT.js";import{a as N}from"./chunk-CX5IFQZJ.js";import{f as v,h as L,m as M}from"./chunk-NJWTSROP.js";import{a as b}from"./chunk-G4DZJMGT.js";import{a}from"./chunk-QGVBCWUY.js";import{H as _}from"./chunk-MYO4NP2N.js";import{e as u}from"./chunk-NFIPKH6V.js";import{l as z}from"./chunk-5QEXLALV.js";import{f as w}from"./chunk-P6QFA5MM.js";import{g as c}from"./chunk-XRGPJ3QY.js";function S(e,t){let i=e.x-t.x,s=e.y-t.y,o=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(i*i+s*s+o*o)}function W(e){return Z(e,G)?.[0]??null}function X(e){return Z(e,G)?.[1]??null}function Z({x:e,y:t,spatialReference:i},s=[0,0]){if(i){if(M(i))return f(e,t,s);if(L(i))return s[0]=e,s[1]=t,s}return null}var G=[0,0];var g,x=[0,0];function q(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}var n=g=class extends j{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));let i=e._get("spatialReference");t._set("spatialReference",_.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,s,o){let r;if(Array.isArray(e))r=e,o=t,e=r[0],t=r[1],i=r[2],s=r[3];else if(e&&typeof e=="object"){if(r=e,e=r.x!=null?r.x:r.longitude,t=r.y!=null?r.y:r.latitude,i=r.z,s=r.m,(o=r.spatialReference)&&o.declaredClass!=="esri.geometry.SpatialReference"&&(o=new R(o)),r.longitude!=null||r.latitude!=null){if(r.longitude==null)c.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(r.latitude==null)c.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!r.declaredClass&&o?.isWebMercator){let y=m(r.longitude,r.latitude,x);e=y[0],t=y[1]}}}else q(i)?(o=i,i=null):q(s)&&(o=s,s=null);let l={x:e,y:t};return l.x==null&&l.y!=null?c.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):l.y==null&&l.x!=null&&c.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),o!=null&&(l.spatialReference=o),i!=null&&(l.z=i),s!=null&&(l.m=s),l}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return X(this)}set latitude(e){let{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",m(i,e,x)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return W(this)}set longitude(e){let{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",m(e,t,x)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){let e=new g;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return g.copy(e,this),this}equals(e){if(e==null)return!1;let{x:t,y:i,z:s,m:o,spatialReference:r}=this,{z:l,m:y}=e,{x:p,y:d,spatialReference:h}=e;if(!r.equals(h))if(r.isWebMercator&&h.isWGS84)[p,d]=m(p,d),h=r;else{if(!r.isWGS84||!h.isWebMercator)return!1;[p,d]=f(p,d),h=r}return t===p&&i===d&&s===l&&o===y&&r.wkid===h.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;let e=v(this.spatialReference);if(!e)return this;let t=this.x,[i,s]=e.valid,o=2*s,r;return t>s?(r=Math.ceil(Math.abs(t-s)/o),t-=r*o):t<i&&(r=Math.ceil(Math.abs(t-i)/o),t+=r*o),this._set("x",t),this}distance(e){return S(this,e)}toArray(){let e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};a([u({readOnly:!0})],n.prototype,"cache",null),a([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],n.prototype,"hasM",null),a([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],n.prototype,"hasZ",null),a([u({type:Number})],n.prototype,"latitude",null),a([u({type:Number})],n.prototype,"longitude",null),a([u({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),b(e=>isNaN(e)?e:w(e))],n.prototype,"x",void 0),a([N("x")],n.prototype,"writeX",null),a([P("x")],n.prototype,"readX",null),a([u({type:Number,json:{write:!0}})],n.prototype,"y",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],n.prototype,"z",void 0),a([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],n.prototype,"m",void 0),n=g=a([z("esri.geometry.Point")],n),n.prototype.toJSON.isDefaultToJSON=!0;var te=n;export{S as a,Z as b,te as c};
