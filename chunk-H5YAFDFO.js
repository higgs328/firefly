import{a as w}from"./chunk-LQEFWCY6.js";import{i as v}from"./chunk-DA3SDKGO.js";import{h as j}from"./chunk-RNC4P66O.js";import{d as M}from"./chunk-OLOKUDVI.js";import{c as b}from"./chunk-RSDQHAJX.js";import{h as y,j as g}from"./chunk-EQZWYK27.js";import{m as h}from"./chunk-ZQIC5NFT.js";import{a as x}from"./chunk-QGVBCWUY.js";import{e as f}from"./chunk-NFIPKH6V.js";import{l as R}from"./chunk-5QEXLALV.js";var m=class extends w{constructor(t){super(t),this.extent=null,this.rotation=0,this.type="extent-and-rotation"}get coords(){if(this.extent==null)return null;let{xmin:t,ymin:e,xmax:n,ymax:r,spatialReference:s}=this.extent,o;if(this.rotation){let{x:l,y:i}=this.extent.center,a=d(l,i,this.rotation);o=[a(t,e),a(t,r),a(n,r),a(n,e)],o.push(o[0])}else o=[[t,e],[t,r],[n,r],[n,e],[t,e]];return new j({rings:[o],spatialReference:s})}set coords(t){if(t==null||this.extent==null)return;let e=this.extent.spatialReference;if(t=this.projectOrWarn(t,e),t?.extent==null)return;let{rings:[[n,r,s]],extent:{center:{x:o,y:l}}}=t,i=g(Math.PI/2-Math.atan2(r[1]-n[1],r[0]-n[0])),a=d(o,l,-i),[p,c]=a(n[0],n[1]),[u,z]=a(s[0],s[1]);this.extent=new h({xmin:p,ymin:c,xmax:u,ymax:z,spatialReference:e}),this.rotation=i}toSourceNormalized(t){let{extent:e,rotation:n}=this;if(t==null||e==null)return null;let{xmin:r,ymin:s,xmax:o,ymax:l,center:i,spatialReference:a}=e;t=t.normalize();let p=v(t,a).geometry;if(p==null)return null;let c=p.x,u=p.y;return n&&([c,u]=d(i.x,i.y,-n)(c,u)),M(y(c,r,o,0,1),y(u,l,s,0,1))}};function d(t,e,n){let r=b(n),s=Math.cos(r),o=Math.sin(r);return(l,i)=>[s*(l-t)+o*(i-e)+t,s*(i-e)-o*(l-t)+e]}x([f({clonable:!1})],m.prototype,"coords",null),x([f({type:h})],m.prototype,"extent",void 0),x([f({type:Number})],m.prototype,"rotation",void 0),m=x([R("esri.layers.support.ExtentAndRotationGeoreference")],m);var B=m;export{B as a};
