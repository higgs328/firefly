import{a as le}from"./chunk-LPHQQI5O.js";import{a as P,b as D,d as G,e as N,f as se,g as H,i as te,k as me,n as E,o as qe}from"./chunk-MOUPZWB7.js";import{a as C,b as Se,c as Ie,d as Me,g as Be,h as ke,i as F,j as q,k as R,l as $,m as ae,n as W,p as ie,q as re,r as ne,s as Oe,t as z,u as oe}from"./chunk-TVZYM2NN.js";import{a as ee,b as Ee}from"./chunk-U445SEXM.js";import{k as Ce,n as Fe,o as M}from"./chunk-7D2XOS24.js";import{a as O}from"./chunk-47NA5MWW.js";import{a as _,c as B,d as j,e as S,g as I}from"./chunk-GYQWYHEG.js";import{b as A}from"./chunk-JC4DQSN3.js";import{f as ze,h as Z}from"./chunk-B3VPRADQ.js";import{a as xe}from"./chunk-MOIILKGQ.js";import{a as Ve}from"./chunk-ST5H7ZTW.js";import{a as Y}from"./chunk-GAVFKWSK.js";import{t as k}from"./chunk-ZM24RY22.js";import{c as X}from"./chunk-UMJIJLDA.js";import{a as Te}from"./chunk-AIKKGGPG.js";import{a as ge}from"./chunk-RDGG4TVD.js";import{a as be}from"./chunk-I4CY6X6S.js";import{b as we}from"./chunk-4KXJ537H.js";import{f as Q,g as L,h as he}from"./chunk-F5AJITOA.js";import{b as K}from"./chunk-UST6HCE7.js";import{i as ve}from"./chunk-P6QFA5MM.js";import{b as u}from"./chunk-YOFFGXOB.js";import{b as ye}from"./chunk-2LI2GKBQ.js";import{a as g,b as T,f as h}from"./chunk-VTHXE323.js";var Ge="high-to-low",Ne=2**53-1,U=5;function Re(a){return h(this,null,function*(){if(!(a&&a.layer&&(a.field||a.valueExpression||a.sqlExpression)))throw new u("color-visual-variable:missing-parameters","'layer' and 'field', 'valueExpression' or 'sqlExpression' parameters are required");if(a.valueExpression&&!a.sqlExpression&&!a.view)throw new u("color-visual-variable:missing-parameters","View is required when 'valueExpression' is specified");a.forBinning&&A(a,"color-visual-variable");let e=g({},a),i=a.forBinning?j:B,r=I(e.layer,i,a.forBinning);if(!r)throw new u("color-visual-variable:invalid-parameters","'layer' must be one of these types: "+S(i).join(", "));let n=e.signal!=null?{signal:e.signal}:null;if(yield r.load(n),r.geometryType!=="mesh"&&e.worldScale&&(!e.view||e.view.type!=="3d"))throw new u("color-visual-variable:invalid-parameters","'view' parameter should be an instance of SceneView when 'worldScale' parameter is true");let o=yield L({field:e.field,normalizationField:e.normalizationField,valueExpression:e.valueExpression}),l=$(r,o,"color-visual-variable:invalid-parameters");if(l)throw l;return T(g({},e),{layer:r})})}function Pe(a){return h(this,null,function*(){if(!(a&&a.layer&&(a.field||a.valueExpression||a.sqlExpression)))throw new u("color-continuous-renderer:missing-parameters","'layer' and 'field', 'valueExpression' or 'sqlExpression' parameters are required");if(a.valueExpression&&!a.sqlExpression&&!a.view)throw new u("color-continuous-renderer:missing-parameters","View is required when 'valueExpression' is specified");a.forBinning&&A(a,"color-continuous-renderer");let e=g({},a);e.symbolType=e.symbolType||"2d",e.defaultSymbolEnabled??=!0;let i=a.forBinning?j:B,r=I(e.layer,i,a.forBinning);if(!r)throw new u("color-continuous-renderer:invalid-parameters","'layer' must be one of these types: "+S(i).join(", "));let n=e.signal!=null?{signal:e.signal}:null;yield r.load(n);let o=r.geometryType;if(e.outlineOptimizationEnabled=o==="polygon"&&e.outlineOptimizationEnabled,e.sizeOptimizationEnabled=(o==="point"||o==="multipoint"||o==="polyline")&&e.sizeOptimizationEnabled,o==="mesh")e.symbolType="3d-volumetric",e.colorMixMode=e.colorMixMode||"replace",e.edgesType=e.edgesType||"none";else{if(e.symbolType==="3d-volumetric-uniform"&&o!=="point")throw new u("color-continuous-renderer:not-supported","3d-volumetric-uniform symbols are supported for point layers only");if(e.symbolType.includes("3d-volumetric")&&(!e.view||e.view.type!=="3d"))throw new u("color-continuous-renderer:invalid-parameters","'view' parameter should be an instance of SceneView when 'symbolType' parameter is '3d-volumetric' or '3d-volumetric-uniform'")}let l=yield L({field:e.field,normalizationField:e.normalizationField,valueExpression:e.valueExpression}),s=$(r,l,"color-continuous-renderer:invalid-parameters");if(s)throw s;return T(g({},e),{layer:r})})}function De(a){return h(this,null,function*(){if(!a||!a.layer||!a.field&&!a.valueExpression)throw new u("color-class-breaks-renderer:missing-parameters","'layer' and 'field' or 'valueExpression' parameters are required");if(a.valueExpression&&!a.view)throw new u("color-class-breaks-renderer:missing-parameters","View is required when 'valueExpression' is specified");a.forBinning&&A(a,"color-class-breaks-renderer");let e=g({},a);e.symbolType=e.symbolType||"2d",e.defaultSymbolEnabled??=!0,e.classificationMethod??="equal-interval",e.normalizationType=he(e);let i=a.forBinning?j:B,r=I(e.layer,i,a.forBinning);if(!r)throw new u("color-class-breaks-renderer:invalid-parameters","'layer' must be one of these types: "+S(i).join(", "));if(!(e.minValue!=null&&e.maxValue!=null)&&(e.minValue!=null||e.maxValue!=null))throw new u("color-class-breaks-renderer:missing-parameters","Both 'minValue' and 'maxValue' are required when specifying custom data range");let n=e.signal!=null?{signal:e.signal}:null;yield r.load(n);let o=r.geometryType;if(e.outlineOptimizationEnabled=o==="polygon"&&e.outlineOptimizationEnabled,o==="mesh")e.symbolType="3d-volumetric",e.colorMixMode=e.colorMixMode||"replace",e.edgesType=e.edgesType||"none";else{if(e.symbolType==="3d-volumetric-uniform"&&o!=="point")throw new u("color-class-breaks-renderer:not-supported","3d-volumetric-uniform symbols are supported for point layers only");if(e.symbolType.includes("3d-volumetric")&&(!e.view||e.view.type!=="3d"))throw new u("color-class-breaks-renderer:invalid-parameters","'view' parameter should be an instance of SceneView when 'symbolType' parameter is '3d-volumetric' or '3d-volumetric-uniform'")}let l=yield L({field:e.field,normalizationField:e.normalizationField}),s=$(r,l,"color-class-breaks-renderer:invalid-parameters");if(s)throw s;return T(g({},e),{layer:r})})}function Ue(a){let e=g({},a);delete e.basemap,delete e.colorScheme,delete e.legendOptions,delete e.symbolType,delete e.defaultSymbolEnabled,delete e.colorMixMode,delete e.edgesType;let i=e;return i.analyzeData=!(e.minValue!=null&&e.maxValue!=null),i}function He(a){return h(this,null,function*(){if(!a?.layer)throw new u("color-point-cloud-true-color-renderer:missing-parameters","'layer' parameter is required");let e=T(g({},a),{layer:a.layer}),i=[_.PointCloudLayer],r=I(e.layer,i);if(!r)throw new u("color-point-cloud-true-color-renderer:invalid-parameters","'layer' must be one of these types: "+S(i).join(", "));if(e.layer=r,e.density=e.density||25,e.size=e.size||"100%",!ie(e.size))throw new u("color-point-cloud-true-color-renderer:invalid-parameters","Invalid 'size' parameter. It should be a string of the form '100%'");let n=e.signal!=null?{signal:e.signal}:null;return yield r.load(n),e})}function Je(a){return h(this,null,function*(){if(!a?.layer||!a.field)throw new u("color-point-cloud-continuous-renderer:missing-parameters","'layer' and 'field' parameters are required");let e=a.field.toLowerCase();if(e!=="intensity"&&e!=="elevation")throw new u("color-point-cloud-continuous-renderer:invalid-parameters","'field' should be either 'intensity' or 'elevation'");let i=T(g({},a),{layer:a.layer,field:a.field}),r=[_.PointCloudLayer],n=I(i.layer,r);if(!n)throw new u("color-point-cloud-continuous-renderer:invalid-parameters","'layer' must be one of these types: "+S(r).join(", "));if(i.layer=n,i.density=i.density||25,i.size=i.size||"100%",!ie(i.size))throw new u("color-point-cloud-continuous-renderer:invalid-parameters","Invalid 'size' parameter. It should be a string of the form '100%'");let o=i.signal!=null?{signal:i.signal}:null;return yield n.load(o),i})}function ue(a){let e=g({},a),i=!!e.symbolType?.includes("3d-volumetric");delete e.symbolType,delete e.defaultSymbolEnabled,delete e.colorMixMode,delete e.edgesType;let r=e;return r.worldScale=i,r}function Le(a){return h(this,null,function*(){if(!(a&&a.layer&&a.view&&a.startTime&&a.endTime))throw new u("color-age-renderer:missing-parameters","'layer', 'view', startTime', 'endTime' parameters are required");let e=g({},a);e.symbolType=e.symbolType||"2d",e.defaultSymbolEnabled??=!0;let i=I(e.layer,B);if(!i)throw new u("color-age-renderer:invalid-parameters","'layer' must be one of these types: "+S(B).join(", "));let r=e.signal!=null?{signal:e.signal}:null;yield i.load(r);let n=i.geometryType;if(e.outlineOptimizationEnabled=n==="polygon"&&e.outlineOptimizationEnabled,e.sizeOptimizationEnabled=(n==="point"||n==="multipoint"||n==="polyline")&&e.sizeOptimizationEnabled,n==="mesh")e.symbolType="3d-volumetric",e.colorMixMode=e.colorMixMode||"replace",e.edgesType=e.edgesType||"none";else if(e.symbolType==="3d-volumetric-uniform"&&n!=="point")throw new u("color-continuous-renderer:not-supported","3d-volumetric-uniform symbols are supported for point layers only");if(e.symbolType.includes("3d-volumetric")&&(!e.view||e.view.type!=="3d"))throw new u("color-age-renderer:invalid-parameters","'view' parameter should be an instance of SceneView when 'symbolType' parameter is '3d-volumetric' or '3d-volumetric-uniform'");let o=Ee(i,e.startTime,e.endTime,"color-age-renderer:invalid-parameters");if(o)throw o;if(e.unit&&!ee.includes(e.unit))throw new u("color-age-renderer:invalid-unit",`Supported units are: ${ee.join(", ")}`);return T(g({},e),{layer:i})})}function Ke(a){return h(this,null,function*(){let e="regenerate-color-visual-variable";yield P(a,e);let i=yield D(a);if(i?.type!=="class-breaks")throw new u(`${e}:invalid-parameters`,"Renderer must be a ClassBreaksRenderer to regenerate a color visual variable");let r=i.authoringInfo,n=r?.visualVariables.find(y=>y.type==="color"),o=i.visualVariables?.find(y=>y.type==="color");if(!o)throw new u(`${e}:invalid-parameters`,"Renderer does not have a color visual variable");let{field:l,normalizationField:s,valueExpression:m,valueExpressionTitle:t}=o,d=r?.type==="univariate-color-size"?r?.univariateTheme:n?.theme,{layer:c,forBinning:p,filter:f,view:v,signal:w}=a,b=yield Re({layer:c,field:l,valueExpression:m,valueExpressionTitle:t,normalizationField:s,theme:d,forBinning:p,filter:f,view:v,signal:w});return T(g({},a),{creatorParameters:b,renderer:i})})}function Qe(a){return h(this,null,function*(){let e="regenerate-color-continuous-renderer";yield P(a,e);let i=yield D(a),r=G(i);if(!r||!["color-continuous","color-size"].includes(r))throw new u(`${e}:invalid-renderer`,"Renderer is invalid");let{authoringInfo:n,field:o,normalizationField:l,valueExpression:s,valueExpressionTitle:m}=i,t=n?.visualVariables.find(x=>x.type==="color"),d=t?.theme,{layer:c,forBinning:p,filter:f,view:v,signal:w}=a,b=N(i),y=se(i),V=yield Pe({layer:c,field:o,valueExpression:s,valueExpressionTitle:m,normalizationField:l,theme:d,outlineOptimizationEnabled:b,sizeOptimizationEnabled:y,forBinning:p,filter:f,view:v,signal:w});return T(g({},a),{creatorParameters:V,renderer:i})})}function Xe(a){return h(this,null,function*(){let e="regenerate-color-class-breaks-renderer";yield P(a,e);let i=yield D(a);if(G(i)!=="color-class-breaks")throw new u(`${e}:invalid-parameters`,"Renderer is invalid");let{authoringInfo:r,field:n,normalizationField:o,normalizationType:l,normalizationTotal:s,valueExpression:m,valueExpressionTitle:t}=i,{classificationMethod:d,standardDeviationInterval:c}=r,p=i.classBreakInfos.length,{layer:f,forBinning:v,filter:w,view:b,signal:y}=a,V=N(i),x=yield De({layer:f,field:n,valueExpression:m,valueExpressionTitle:t,normalizationType:l,normalizationField:o,normalizationTotal:s,classificationMethod:d,standardDeviationInterval:c,numClasses:p,outlineOptimizationEnabled:V,forBinning:v,filter:w,view:b,signal:y});return T(g({},a),{creatorParameters:x,renderer:i})})}function Ye(a){return h(this,null,function*(){let e="regenerate-color-age-renderer";yield P(a,e);let i=yield D(a);if(G(i)!=="color-age")throw new u(`${e}:invalid-parameters`,"Renderer is invalid");let{authoringInfo:r}=i,n=r?.visualVariables.find(b=>b.type==="color"),o=n.startTime,l=n.endTime,s=n.units,m=n.theme,{layer:t,filter:d,view:c,signal:p}=a,f=N(i),v=se(i),w=yield Le({layer:t,startTime:o,endTime:l,unit:s,theme:m,outlineOptimizationEnabled:f,sizeOptimizationEnabled:v,filter:d,view:c,signal:p});return T(g({},a),{creatorParameters:w,renderer:i})})}function de(a,e){return h(this,null,function*(){let i=a.colorScheme,r=null,n=null,{view:o}=a,l=yield Oe(a.basemap,o);if(r=l.basemapId!=null?l.basemapId:null,n=l.basemapTheme!=null?l.basemapTheme:null,i)return{scheme:M(i),basemapId:r,basemapTheme:n};let s=a.theme||Ge,m=Ce({theme:s,basemapTheme:n,geometryType:a.geometryType,worldScale:a.worldScale,view:o});if(m)if(r=m.basemapId,n=m.basemapTheme,a.schemeId){let t=s+"/"+r+"/"+a.schemeId;i=Fe({id:t,geometryType:a.geometryType})}else i=m.primaryScheme;return{scheme:i,basemapId:r,basemapTheme:n}})}function Ze(a,e){return h(this,null,function*(){let i=e.layer,r=yield de({basemap:e.basemap,colorScheme:e.colorScheme,geometryType:i.geometryType,schemeId:e.field.toLowerCase()==="elevation"?"point-cloud-elevation-scheme":"point-cloud-intensity-scheme"}),n=r.scheme;if(!n)throw new u("color-point-cloud-continuous-renderer:insufficient-info","Unable to find color scheme");let o=k(n.colors,U);if(o.length<U)throw new u("color-point-cloud-continuous-renderer:insufficient-info","Color scheme does not have enough colors");let l=Ie(a,!1,!0),s=l?Be(l[0],l[1],5):ke(a);return{stops:ze({values:s,isDate:!1,colors:o,labelIndexes:[0,2,4]}),basemapId:r.basemapId,basemapTheme:r.basemapTheme,statistics:a,defaultValuesUsed:!!l,colorScheme:M(n)}})}function Ae(a,e,i,r){let n=Se(a,e,i,!0);return{values:Me(n,a,e,r),defaultValuesUsed:n.defaultValuesUsed}}function _e(a,e,i,r){return h(this,null,function*(){let{field:n,theme:o}=a,l=yield de({basemap:a.basemap,theme:a.theme,geometryType:i,colorScheme:a.colorScheme,worldScale:a.worldScale,view:a.view}),s=l.scheme;if(!s)throw new u("color-visual-variable:insufficient-info","Unable to find color scheme");let m=k(s.colors,U);if(m.length<U)throw new u("color-visual-variable:insufficient-info","Color scheme does not have enough colors");let t=s.id.includes("seq-"),{values:d,defaultValuesUsed:c}=Ae(e,o,r,t),p=k(m,U),f=new Te({field:n??void 0,valueExpression:a.valueExpression,valueExpressionTitle:a.valueExpressionTitle,normalizationField:a.normalizationField,stops:d.map((b,y)=>new ge({value:b,color:p[y]})),legendOptions:ve(be,a.legendOptions)}),v=new we({type:"color",minSliderValue:a.minValue!=null?a.minValue:e.min,maxSliderValue:a.maxValue!=null?a.maxValue:e.max,theme:s.theme}),w=new X({visualVariables:[v]});return{basemapId:l.basemapId,basemapTheme:l.basemapTheme,visualVariable:f,statistics:e,defaultValuesUsed:c,colorScheme:M(s),authoringInfo:w}})}function je(a,e,i,r,n,o,l){return h(this,null,function*(){let s=yield K("esri/smartMapping/t9n/smartMapping"),{field:m,defaultSymbolEnabled:t}=l,d=M(a.colorScheme),c=e?.opacity,p=[a.visualVariable.clone()];return e?.visualVariables?.length&&p.push(...e.visualVariables.map(f=>f.clone())),i?.minSize&&p.push(i.minSize),{renderer:new Y({classBreakInfos:[{minValue:-9007199254740991,maxValue:Ne,symbol:R(o,{type:l.symbolType,color:d.noDataColor,size:F(d,o),outline:q(d,o,c),meshInfo:{colorMixMode:l.colorMixMode,edgesType:l.edgesType}})}],defaultLabel:t?s.other:null,defaultSymbol:t?R(o,{type:l.symbolType,color:d.noDataColor,size:F(d,o),outline:q(d,o,c),meshInfo:{colorMixMode:l.colorMixMode,edgesType:l.edgesType}}):null,field:m,normalizationType:r,normalizationField:n,valueExpression:l.valueExpression,valueExpressionTitle:l.valueExpressionTitle,visualVariables:p,authoringInfo:a.authoringInfo&&a.authoringInfo.clone()}),visualVariable:a.visualVariable.clone(),statistics:a.statistics,defaultValuesUsed:a.defaultValuesUsed,colorScheme:M(a.colorScheme),basemapId:a.basemapId,basemapTheme:a.basemapTheme}})}function ce(a){return h(this,null,function*(){let e=yield Re(a),{view:i,field:r,valueExpression:n,minValue:o,maxValue:l,layer:s,normalizationField:m,signal:t,filter:d,statistics:c}=e,p=m?"field":void 0,f=yield c??W({layer:s,field:r,valueExpression:n,sqlExpression:e.sqlExpression,sqlWhere:e.sqlWhere,normalizationType:p,normalizationField:m,minValue:o,maxValue:l,filter:d,view:i,signal:t}),v=s,w=r&&typeof r!="function"?v.getField(r):null;return _e(e,f,v.geometryType,Q(w))})}function ea(a){return h(this,null,function*(){let{view:e,filter:i,creatorParameters:r,renderer:n,signal:o}=yield Ke(a),l=n.authoringInfo?.clone(),s=l?.visualVariables.find(y=>y.type==="color"),m=n.visualVariables?.find(y=>y.type==="color"),{field:t,normalizationField:d,valueExpression:c,theme:p,layer:f}=r,v=yield W({layer:f,field:t,valueExpression:c,normalizationField:d,filter:i,view:e,signal:o}),w=t&&typeof t!="function"?f.getField(t):null,{values:b}=Ae(v,p,Q(w),p==="high-to-low");if(b.length!==m.stops.length)throw new u("regenerate-color-visual-variable:invalid-parameters","Visual variable is invalid");return m.stops.forEach((y,V)=>y.value=b[V]),s&&(s.minSliderValue=v.min,s.maxSliderValue=v.max),{visualVariable:m,authoringInfo:l,statistics:v}})}function aa(a,e){let i=a.colorsForClassBreaks;if(i?.length){for(let r of i)if(r.numClasses===e)return ye(r.colors)}return k(a.colors,e)}function ia(a,e){return h(this,null,function*(){let i=yield K("esri/smartMapping/t9n/smartMapping"),r=a.layer,n=a.defaultSymbolEnabled,o=r.geometryType,l=a.classificationMethod,s=l==="standard-deviation",m=yield de({basemap:a.basemap,geometryType:o,theme:s?"above-and-below":null,colorScheme:a.colorScheme,worldScale:!!a.symbolType?.includes("3d-volumetric"),view:a.view}),t=m.scheme,{result:d,outlineResult:c}=e,p=d.classBreakInfos,f=a.normalizationType;if(!t)throw new u("color-class-breaks-renderer:insufficient-info","Unable to find color scheme");let v=aa(t,p.length);if(!v||v.length!==p.length)throw new u("color-class-breaks-renderer:insufficient-info","Color scheme does not have enough colors");let w=c?.opacity,b=new Y({classBreakInfos:p.map((y,V)=>({minValue:y.minValue,maxValue:y.maxValue,symbol:R(o,{type:a.symbolType,color:v[V],size:F(t,o),outline:q(t,o,w),meshInfo:{colorMixMode:a.colorMixMode,edgesType:a.edgesType}}),label:y.label})),defaultLabel:n?i.other:null,defaultSymbol:n?R(o,{type:a.symbolType,color:t.noDataColor,size:F(t,o),outline:q(t,o,w),meshInfo:{colorMixMode:a.colorMixMode,edgesType:a.edgesType}}):null,field:a.field,valueExpression:a.valueExpression,valueExpressionTitle:a.valueExpressionTitle,normalizationType:f,normalizationField:a.normalizationField,normalizationTotal:f==="percent-of-total"?d.normalizationTotal:void 0,legendOptions:a.legendOptions,authoringInfo:new X({type:"class-breaks-color",classificationMethod:l,standardDeviationInterval:a.standardDeviationInterval})});return s||Z({classBreakInfos:b.classBreakInfos,classificationMethod:l,normalizationType:f,round:!0}),c?.visualVariables?.length&&(b.visualVariables=c.visualVariables.map(y=>y.clone())),{renderer:b,colorScheme:M(t),classBreaksResult:d,defaultValuesUsed:e.defaultValuesUsed,basemapId:m.basemapId,basemapTheme:m.basemapTheme}})}function Ma(a){return h(this,null,function*(){let e=yield Pe(a),{layer:i,view:r,signal:n,filter:o}=e,[l,s,m]=yield Promise.all([ce(ue(e)),e.outlineOptimizationEnabled?C({layer:i,view:r,signal:n,filter:o}).catch(z):null,e.sizeOptimizationEnabled?O({layer:i,view:r,signal:n,filter:o}).catch(z):null]),t=e.normalizationField;return je(l,s,m,t?"field":void 0,t,i.geometryType,e)})}function Ba(a){return h(this,null,function*(){let{renderer:e,view:i,signal:r,filter:n,creatorParameters:o}=yield Qe(a),{layer:l,outlineOptimizationEnabled:s,sizeOptimizationEnabled:m}=o,[t,d,c]=yield Promise.all([ea(a),s?C({layer:l,view:i,signal:r,filter:n}).catch(z):null,m?O({layer:l,view:i,signal:r,filter:n}).catch(z):null]);return E(e,t.visualVariable,te),E(e,d?.visualVariables,H),E(e,c?.minSize,me),qe(e,t.authoringInfo,"color"),{renderer:e}})}function ka(a){return h(this,null,function*(){let e=yield De(a);return ia(e,yield ae(Ue(e),e.outlineOptimizationEnabled))})}function Oa(a){return h(this,null,function*(){let{renderer:e,creatorParameters:i}=yield Xe(a),{normalizationType:r,outlineOptimizationEnabled:n,classificationMethod:o}=i,{result:l,outlineResult:s}=yield ae(Ue(i),n),m=l.classBreakInfos;if(i.numClasses!==m.length)throw new u("regenerate-color-class-breaks-renderer:insufficient-info","The number of class breaks generated does not match the number of class breaks in the renderer.");return e.classBreakInfos.forEach((t,d)=>{t.minValue=m[d].minValue,t.maxValue=m[d].maxValue,t.label=m[d].label}),e.normalizationTotal=r==="percent-of-total"?l.normalizationTotal:void 0,o!=="standard-deviation"&&Z({classBreakInfos:e.classBreakInfos,classificationMethod:o,normalizationType:r,round:!0}),E(e,s?.visualVariables,H),{renderer:e}})}function Ca(a){return He(a).then(e=>({renderer:new xe({field:"RGB",pointsPerInch:e.density??void 0,pointSizeAlgorithm:re(e.size)})}))}function Fa(a){return h(this,null,function*(){let e=yield Je(a),i=e.statistics??(yield W({layer:e.layer,field:e.field,signal:e.signal})),r=yield Ze(i,e);return{renderer:new Ve({field:e.field,pointsPerInch:e.density??void 0,pointSizeAlgorithm:re(e.size),stops:r.stops}),basemapId:r.basemapId,basemapTheme:r.basemapTheme,statistics:r.statistics,defaultValuesUsed:r.defaultValuesUsed,colorScheme:r.colorScheme}})}function qa(a){return h(this,null,function*(){let e=yield Le(a),{defaultSymbolEnabled:i,view:r,startTime:n,endTime:o,symbolType:l,colorMixMode:s,edgesType:m,minValue:t,maxValue:d,signal:c,filter:p}=e,f=e.layer,[v,w,b]=yield Promise.all([e.unit?{unit:e.unit,statistics:null}:le({view:r,layer:f,startTime:n,endTime:o,minValue:t,maxValue:d,signal:c,filter:p}),e.outlineOptimizationEnabled?C({layer:f,view:r,signal:c,filter:p}).catch(z):null,e.sizeOptimizationEnabled?O({layer:f,view:r,signal:c,filter:p}).catch(z):null]),{unit:y,statistics:V}=v,{valueExpression:x,title:pe}=yield oe(e,y),J=yield ce(ue({layer:f,basemap:e.basemap,valueExpression:x,symbolType:l,statistics:V,legendOptions:{title:pe},colorScheme:e.colorScheme,theme:e.theme,view:r,minValue:e.minValue,maxValue:e.maxValue,filter:p,signal:c})),$e={layer:f,valueExpression:x,defaultSymbolEnabled:i,symbolType:l,colorMixMode:s,edgesType:m},fe=yield je(J,w,b,null,null,f.geometryType,$e);return fe.renderer.authoringInfo?.visualVariables?.forEach(We=>ne(We,n,o,y)),T(g({},fe),{unit:y})})}function Ra(a){return h(this,null,function*(){let{renderer:e,creatorParameters:i}=yield Ye(a),{layer:r,outlineOptimizationEnabled:n,sizeOptimizationEnabled:o,startTime:l,endTime:s,theme:m,view:t,signal:d,filter:c}=i,[p,f,v]=yield Promise.all([le({view:t,layer:r,startTime:l,endTime:s,signal:d,filter:c}),n?C({layer:r,view:t,signal:d,filter:c}).catch(z):null,o?O({layer:r,view:t,signal:d,filter:c}).catch(z):null]),{unit:w,statistics:b}=p,{valueExpression:y,title:V}=yield oe(i,w),x=yield ce(ue({layer:r,valueExpression:y,statistics:b,legendOptions:{title:V},theme:m,view:t,filter:c,signal:d}));return E(e,x.visualVariable,te),E(e,f?.visualVariables,H),E(e,v?.minSize,me),e.authoringInfo=x.authoringInfo.clone(),e.authoringInfo?.visualVariables?.forEach(J=>ne(J,l,s,w)),{renderer:e}})}export{ce as a,ea as b,Ma as c,Ba as d,ka as e,Oa as f,Ca as g,Fa as h,qa as i,Ra as j};
