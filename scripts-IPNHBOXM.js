var e,t;e=this,t=function(){const gt=function(o,n){const r={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},a={on(i,l,p){if(r[i]===void 0)throw new Error(`Invalid event type: ${i}`);r[i].push({selector:l,fn:p})},render(i){n.store.featureChanged(i)}},s=function(i,l){const p=r[i];let d=p.length;for(;d--;){const u=p[d];if(u.selector(l)){u.fn.call(a,l)||n.store.render(),n.ui.updateMapClasses();break}}};return o.start.call(a),{render:o.render,stop(){o.stop&&o.stop()},trash(){o.trash&&(o.trash(),n.store.render())},combineFeatures(){o.combineFeatures&&o.combineFeatures()},uncombineFeatures(){o.uncombineFeatures&&o.uncombineFeatures()},drag(i){s("drag",i)},click(i){s("click",i)},mousemove(i){s("mousemove",i)},mousedown(i){s("mousedown",i)},mouseup(i){s("mouseup",i)},mouseout(i){s("mouseout",i)},keydown(i){s("keydown",i)},keyup(i){s("keyup",i)},touchstart(i){s("touchstart",i)},touchmove(i){s("touchmove",i)},touchend(i){s("touchend",i)},tap(i){s("tap",i)}}};function mt(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var xt,At,tt={},et={};function re(){return xt||(xt=1,et.RADIUS=6378137,et.FLATTENING=1/298.257223563,et.POLAR_RADIUS=63567523142e-4),et}var ie=function(){if(At)return tt;At=1;var o=re();function n(s){var i=0;if(s&&s.length>0){i+=Math.abs(r(s[0]));for(var l=1;l<s.length;l++)i-=Math.abs(r(s[l]))}return i}function r(s){var i,l,p,d,u,g,m=0,T=s.length;if(T>2){for(g=0;g<T;g++)g===T-2?(p=T-2,d=T-1,u=0):g===T-1?(p=T-1,d=0,u=1):(p=g,d=g+1,u=g+2),i=s[p],l=s[d],m+=(a(s[u][0])-a(i[0]))*Math.sin(a(l[1]));m=m*o.RADIUS*o.RADIUS/2}return m}function a(s){return s*Math.PI/180}return tt.geometry=function s(i){var l,p=0;switch(i.type){case"Polygon":return n(i.coordinates);case"MultiPolygon":for(l=0;l<i.coordinates.length;l++)p+=n(i.coordinates[l]);return p;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(l=0;l<i.geometries.length;l++)p+=s(i.geometries[l]);return p}},tt.ring=r,tt}(),se=mt(ie);const N={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},R={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},v={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},b={POLYGON:"polygon",LINE:"line_string",POINT:"point"},f={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},E={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},L={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},W={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},O={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},S={ACTIVE:"true",INACTIVE:"false"},Pt=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],yt=-85,Et=85;var Ft=Object.freeze({__proto__:null,LAT_MAX:90,LAT_MIN:-90,LAT_RENDERED_MAX:Et,LAT_RENDERED_MIN:yt,LNG_MAX:270,LNG_MIN:-270,activeStates:S,classes:N,cursors:v,events:L,geojsonTypes:f,interactions:Pt,meta:O,modes:E,sources:R,types:b,updateActions:W});const Rt={Point:0,LineString:1,MultiLineString:1,Polygon:2};function ae(o,n){const r=Rt[o.geometry.type]-Rt[n.geometry.type];return r===0&&o.geometry.type===f.POLYGON?o.area-n.area:r}function wt(o){return o.map(n=>(n.geometry.type===f.POLYGON&&(n.area=se.geometry({type:f.FEATURE,property:{},geometry:n.geometry})),n)).sort(ae).map(n=>(delete n.area,n))}function Dt(o,n=0){return[[o.point.x-n,o.point.y-n],[o.point.x+n,o.point.y+n]]}function w(o){if(this._items={},this._nums={},this._length=o?o.length:0,o)for(let n=0,r=o.length;n<r;n++)this.add(o[n]),o[n]!==void 0&&(typeof o[n]=="string"?this._items[o[n]]=n:this._nums[o[n]]=n)}w.prototype.add=function(o){return this.has(o)||(this._length++,typeof o=="string"?this._items[o]=this._length:this._nums[o]=this._length),this},w.prototype.delete=function(o){return this.has(o)===!1||(this._length--,delete this._items[o],delete this._nums[o]),this},w.prototype.has=function(o){return!(typeof o!="string"&&typeof o!="number"||this._items[o]===void 0&&this._nums[o]===void 0)},w.prototype.values=function(){const o=[];return Object.keys(this._items).forEach(n=>{o.push({k:n,v:this._items[n]})}),Object.keys(this._nums).forEach(n=>{o.push({k:JSON.parse(n),v:this._nums[n]})}),o.sort((n,r)=>n.v-r.v).map(n=>n.k)},w.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const ce=[O.FEATURE,O.MIDPOINT,O.VERTEX];var q={click:function(o,n,r){return Ut(o,n,r,r.options.clickBuffer)},touch:function(o,n,r){return Ut(o,n,r,r.options.touchBuffer)}};function Ut(o,n,r,a){if(r.map===null)return[];const s=o?Dt(o,a):n,i={};r.options.styles&&(i.layers=r.options.styles.map(u=>u.id).filter(u=>r.map.getLayer(u)!=null));const l=r.map.queryRenderedFeatures(s,i).filter(u=>ce.indexOf(u.properties.meta)!==-1),p=new w,d=[];return l.forEach(u=>{const g=u.properties.id;p.has(g)||(p.add(g),d.push(u))}),wt(d)}function ot(o,n){const r=q.click(o,null,n),a={mouse:v.NONE};return r[0]&&(a.mouse=r[0].properties.active===S.ACTIVE?v.MOVE:v.POINTER,a.feature=r[0].properties.meta),n.events.currentModeName().indexOf("draw")!==-1&&(a.mouse=v.ADD),n.ui.queueMapClasses(a),n.ui.updateMapClasses(),r[0]}function Tt(o,n){const r=o.x-n.x,a=o.y-n.y;return Math.sqrt(r*r+a*a)}const ue=4,le=12,de=500;function Ct(o,n,r={}){const a=r.fineTolerance!=null?r.fineTolerance:ue,s=r.grossTolerance!=null?r.grossTolerance:le,i=r.interval!=null?r.interval:de;o.point=o.point||n.point,o.time=o.time||n.time;const l=Tt(o.point,n.point);return l<a||l<s&&n.time-o.time<i}const pe=25,he=250;function _t(o,n,r={}){const a=r.tolerance!=null?r.tolerance:pe,s=r.interval!=null?r.interval:he;return o.point=o.point||n.point,o.time=o.time||n.time,Tt(o.point,n.point)<a&&n.time-o.time<s}const fe=((o,n=21)=>(r=n)=>{let a="",s=0|r;for(;s--;)a+=o[Math.random()*o.length|0];return a})("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function vt(){return fe()}const M=function(o,n){this.ctx=o,this.properties=n.properties||{},this.coordinates=n.geometry.coordinates,this.id=n.id||vt(),this.type=n.geometry.type};M.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},M.prototype.incomingCoords=function(o){this.setCoordinates(o)},M.prototype.setCoordinates=function(o){this.coordinates=o,this.changed()},M.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},M.prototype.setProperty=function(o,n){this.properties[o]=n},M.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:f.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},M.prototype.internal=function(o){const n={id:this.id,meta:O.FEATURE,"meta:type":this.type,active:S.INACTIVE,mode:o};if(this.ctx.options.userProperties)for(const r in this.properties)n[`user_${r}`]=this.properties[r];return{type:f.FEATURE,properties:n,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const j=function(o,n){M.call(this,o,n)};(j.prototype=Object.create(M.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},j.prototype.updateCoordinate=function(o,n,r){this.coordinates=arguments.length===3?[n,r]:[o,n],this.changed()},j.prototype.getCoordinate=function(){return this.getCoordinates()};const V=function(o,n){M.call(this,o,n)};(V.prototype=Object.create(M.prototype)).isValid=function(){return this.coordinates.length>1},V.prototype.addCoordinate=function(o,n,r){this.changed();const a=parseInt(o,10);this.coordinates.splice(a,0,[n,r])},V.prototype.getCoordinate=function(o){const n=parseInt(o,10);return JSON.parse(JSON.stringify(this.coordinates[n]))},V.prototype.removeCoordinate=function(o){this.changed(),this.coordinates.splice(parseInt(o,10),1)},V.prototype.updateCoordinate=function(o,n,r){const a=parseInt(o,10);this.coordinates[a]=[n,r],this.changed()};const D=function(o,n){M.call(this,o,n),this.coordinates=this.coordinates.map(r=>r.slice(0,-1))};(D.prototype=Object.create(M.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(o=>o.length>2)},D.prototype.incomingCoords=function(o){this.coordinates=o.map(n=>n.slice(0,-1)),this.changed()},D.prototype.setCoordinates=function(o){this.coordinates=o,this.changed()},D.prototype.addCoordinate=function(o,n,r){this.changed();const a=o.split(".").map(s=>parseInt(s,10));this.coordinates[a[0]].splice(a[1],0,[n,r])},D.prototype.removeCoordinate=function(o){this.changed();const n=o.split(".").map(a=>parseInt(a,10)),r=this.coordinates[n[0]];r&&(r.splice(n[1],1),r.length<3&&this.coordinates.splice(n[0],1))},D.prototype.getCoordinate=function(o){const n=o.split(".").map(a=>parseInt(a,10)),r=this.coordinates[n[0]];return JSON.parse(JSON.stringify(r[n[1]]))},D.prototype.getCoordinates=function(){return this.coordinates.map(o=>o.concat([o[0]]))},D.prototype.updateCoordinate=function(o,n,r){this.changed();const a=o.split("."),s=parseInt(a[0],10),i=parseInt(a[1],10);this.coordinates[s]===void 0&&(this.coordinates[s]=[]),this.coordinates[s][i]=[n,r]};const ge={MultiPoint:j,MultiLineString:V,MultiPolygon:D},nt=(o,n,r,a,s)=>{const i=r.split("."),l=parseInt(i[0],10),p=i[1]?i.slice(1).join("."):null;return o[l][n](p,a,s)},x=function(o,n){if(M.call(this,o,n),delete this.coordinates,this.model=ge[n.geometry.type],this.model===void 0)throw new TypeError(`${n.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(n.geometry.coordinates)};function y(o){this.map=o.map,this.drawConfig=JSON.parse(JSON.stringify(o.options||{})),this._ctx=o}(x.prototype=Object.create(M.prototype))._coordinatesToFeatures=function(o){const n=this.model.bind(this);return o.map(r=>new n(this.ctx,{id:vt(),type:f.FEATURE,properties:{},geometry:{coordinates:r,type:this.type.replace("Multi","")}}))},x.prototype.isValid=function(){return this.features.every(o=>o.isValid())},x.prototype.setCoordinates=function(o){this.features=this._coordinatesToFeatures(o),this.changed()},x.prototype.getCoordinate=function(o){return nt(this.features,"getCoordinate",o)},x.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(o=>o.type===f.POLYGON?o.getCoordinates():o.coordinates)))},x.prototype.updateCoordinate=function(o,n,r){nt(this.features,"updateCoordinate",o,n,r),this.changed()},x.prototype.addCoordinate=function(o,n,r){nt(this.features,"addCoordinate",o,n,r),this.changed()},x.prototype.removeCoordinate=function(o){nt(this.features,"removeCoordinate",o),this.changed()},x.prototype.getFeatures=function(){return this.features},y.prototype.setSelected=function(o){return this._ctx.store.setSelected(o)},y.prototype.setSelectedCoordinates=function(o){this._ctx.store.setSelectedCoordinates(o),o.reduce((n,r)=>(n[r.feature_id]===void 0&&(n[r.feature_id]=!0,this._ctx.store.get(r.feature_id).changed()),n),{})},y.prototype.getSelected=function(){return this._ctx.store.getSelected()},y.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},y.prototype.isSelected=function(o){return this._ctx.store.isSelected(o)},y.prototype.getFeature=function(o){return this._ctx.store.get(o)},y.prototype.select=function(o){return this._ctx.store.select(o)},y.prototype.deselect=function(o){return this._ctx.store.deselect(o)},y.prototype.deleteFeature=function(o,n={}){return this._ctx.store.delete(o,n)},y.prototype.addFeature=function(o,n={}){return this._ctx.store.add(o,n)},y.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},y.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},y.prototype.setActionableState=function(o={}){const n={trash:o.trash||!1,combineFeatures:o.combineFeatures||!1,uncombineFeatures:o.uncombineFeatures||!1};return this._ctx.events.actionable(n)},y.prototype.changeMode=function(o,n={},r={}){return this._ctx.events.changeMode(o,n,r)},y.prototype.fire=function(o,n){return this._ctx.events.fire(o,n)},y.prototype.updateUIClasses=function(o){return this._ctx.ui.queueMapClasses(o)},y.prototype.activateUIButton=function(o){return this._ctx.ui.setActiveButton(o)},y.prototype.featuresAt=function(o,n,r="click"){if(r!=="click"&&r!=="touch")throw new Error("invalid buffer type");return q[r](o,n,this._ctx)},y.prototype.newFeature=function(o){const n=o.geometry.type;return n===f.POINT?new j(this._ctx,o):n===f.LINE_STRING?new V(this._ctx,o):n===f.POLYGON?new D(this._ctx,o):new x(this._ctx,o)},y.prototype.isInstanceOf=function(o,n){if(o===f.POINT)return n instanceof j;if(o===f.LINE_STRING)return n instanceof V;if(o===f.POLYGON)return n instanceof D;if(o==="MultiFeature")return n instanceof x;throw new Error(`Unknown feature class: ${o}`)},y.prototype.doRender=function(o){return this._ctx.store.featureChanged(o)},y.prototype.onSetup=function(){},y.prototype.onDrag=function(){},y.prototype.onClick=function(){},y.prototype.onMouseMove=function(){},y.prototype.onMouseDown=function(){},y.prototype.onMouseUp=function(){},y.prototype.onMouseOut=function(){},y.prototype.onKeyUp=function(){},y.prototype.onKeyDown=function(){},y.prototype.onTouchStart=function(){},y.prototype.onTouchMove=function(){},y.prototype.onTouchEnd=function(){},y.prototype.onTap=function(){},y.prototype.onStop=function(){},y.prototype.onTrash=function(){},y.prototype.onCombineFeature=function(){},y.prototype.onUncombineFeature=function(){},y.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const kt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},me=Object.keys(kt);function ye(o){const n=Object.keys(o);return function(r,a={}){let s={};const i=n.reduce((l,p)=>(l[p]=o[p],l),new y(r));return{start(){s=i.onSetup(a),me.forEach(l=>{const p=kt[l];let d=()=>!1;var u;o[p]&&(d=()=>!0),this.on(l,d,(u=p,g=>i[u](s,g)))})},stop(){i.onStop(s)},trash(){i.onTrash(s)},combineFeatures(){i.onCombineFeatures(s)},uncombineFeatures(){i.onUncombineFeatures(s)},render(l,p){i.toDisplayFeatures(s,l,p)}}}}function K(o){return[].concat(o).filter(n=>n!==void 0)}function Ee(){const o=this;if(!o.ctx.map||o.ctx.map.getSource(R.HOT)===void 0)return p();const n=o.ctx.events.currentModeName();o.ctx.ui.queueMapClasses({mode:n});let r=[],a=[];o.isDirty?a=o.getAllIds():(r=o.getChangedIds().filter(d=>o.get(d)!==void 0),a=o.sources.hot.filter(d=>d.properties.id&&r.indexOf(d.properties.id)===-1&&o.get(d.properties.id)!==void 0).map(d=>d.properties.id)),o.sources.hot=[];const s=o.sources.cold.length;o.sources.cold=o.isDirty?[]:o.sources.cold.filter(d=>{const u=d.properties.id||d.properties.parent;return r.indexOf(u)===-1});const i=s!==o.sources.cold.length||a.length>0;function l(d,u){const g=o.get(d).internal(n);o.ctx.events.currentModeRender(g,m=>{m.properties.mode=n,o.sources[u].push(m)})}function p(){o.isDirty=!1,o.clearChangedIds()}r.forEach(d=>l(d,"hot")),a.forEach(d=>l(d,"cold")),i&&o.ctx.map.getSource(R.COLD).setData({type:f.FEATURE_COLLECTION,features:o.sources.cold}),o.ctx.map.getSource(R.HOT).setData({type:f.FEATURE_COLLECTION,features:o.sources.hot}),p()}function _(o){let n;this._features={},this._featureIds=new w,this._selectedFeatureIds=new w,this._selectedCoordinates=[],this._changedFeatureIds=new w,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=o,this.sources={hot:[],cold:[]},this.render=()=>{n||(n=requestAnimationFrame(()=>{n=null,Ee.call(this),this._emitSelectionChange&&(this.ctx.events.fire(L.SELECTION_CHANGE,{features:this.getSelected().map(r=>r.toGeoJSON()),points:this.getSelectedCoordinates().map(r=>({type:f.FEATURE,properties:{},geometry:{type:f.POINT,coordinates:r.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(L.RENDER,{})}))},this.isDirty=!1}function Vt(o,n={}){const r=o._selectedCoordinates.filter(a=>o._selectedFeatureIds.has(a.feature_id));o._selectedCoordinates.length===r.length||n.silent||(o._emitSelectionChange=!0),o._selectedCoordinates=r}_.prototype.createRenderBatch=function(){const o=this.render;let n=0;return this.render=function(){n++},()=>{this.render=o,n>0&&this.render()}},_.prototype.setDirty=function(){return this.isDirty=!0,this},_.prototype.featureCreated=function(o,n={}){if(this._changedFeatureIds.add(o),(n.silent!=null?n.silent:this.ctx.options.suppressAPIEvents)!==!0){const r=this.get(o);this.ctx.events.fire(L.CREATE,{features:[r.toGeoJSON()]})}return this},_.prototype.featureChanged=function(o,n={}){return this._changedFeatureIds.add(o),(n.silent!=null?n.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(L.UPDATE,{action:n.action?n.action:W.CHANGE_COORDINATES,features:[this.get(o).toGeoJSON()]}),this},_.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},_.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},_.prototype.getAllIds=function(){return this._featureIds.values()},_.prototype.add=function(o,n={}){return this._features[o.id]=o,this._featureIds.add(o.id),this.featureCreated(o.id,{silent:n.silent}),this},_.prototype.delete=function(o,n={}){const r=[];return K(o).forEach(a=>{this._featureIds.has(a)&&(this._featureIds.delete(a),this._selectedFeatureIds.delete(a),n.silent||r.indexOf(this._features[a])===-1&&r.push(this._features[a].toGeoJSON()),delete this._features[a],this.isDirty=!0)}),r.length&&this.ctx.events.fire(L.DELETE,{features:r}),Vt(this,n),this},_.prototype.get=function(o){return this._features[o]},_.prototype.getAll=function(){return Object.keys(this._features).map(o=>this._features[o])},_.prototype.select=function(o,n={}){return K(o).forEach(r=>{this._selectedFeatureIds.has(r)||(this._selectedFeatureIds.add(r),this._changedFeatureIds.add(r),n.silent||(this._emitSelectionChange=!0))}),this},_.prototype.deselect=function(o,n={}){return K(o).forEach(r=>{this._selectedFeatureIds.has(r)&&(this._selectedFeatureIds.delete(r),this._changedFeatureIds.add(r),n.silent||(this._emitSelectionChange=!0))}),Vt(this,n),this},_.prototype.clearSelected=function(o={}){return this.deselect(this._selectedFeatureIds.values(),{silent:o.silent}),this},_.prototype.setSelected=function(o,n={}){return o=K(o),this.deselect(this._selectedFeatureIds.values().filter(r=>o.indexOf(r)===-1),{silent:n.silent}),this.select(o.filter(r=>!this._selectedFeatureIds.has(r)),{silent:n.silent}),this},_.prototype.setSelectedCoordinates=function(o){return this._selectedCoordinates=o,this._emitSelectionChange=!0,this},_.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},_.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},_.prototype.getSelected=function(){return this.getSelectedIds().map(o=>this.get(o))},_.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(o=>({coordinates:this.get(o.feature_id).getCoordinate(o.coord_path)}))},_.prototype.isSelected=function(o){return this._selectedFeatureIds.has(o)},_.prototype.setFeatureProperty=function(o,n,r,a={}){this.get(o).setProperty(n,r),this.featureChanged(o,{silent:a.silent,action:W.CHANGE_PROPERTIES})},_.prototype.storeMapConfig=function(){Pt.forEach(o=>{this.ctx.map[o]&&(this._mapInitialConfig[o]=this.ctx.map[o].isEnabled())})},_.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(o=>{this._mapInitialConfig[o]?this.ctx.map[o].enable():this.ctx.map[o].disable()})},_.prototype.getInitialConfigValue=function(o){return this._mapInitialConfig[o]===void 0||this._mapInitialConfig[o]};const Te=["mode","feature","mouse"];function Ce(o){let n=null,r=null;const a={onRemove(){return o.map.off("load",a.connect),clearInterval(r),a.removeLayers(),o.store.restoreMapConfig(),o.ui.removeButtons(),o.events.removeEventListeners(),o.ui.clearMapClasses(),o.boxZoomInitial&&o.map.boxZoom.enable(),o.map=null,o.container=null,o.store=null,n&&n.parentNode&&n.parentNode.removeChild(n),n=null,this},connect(){o.map.off("load",a.connect),clearInterval(r),a.addLayers(),o.store.storeMapConfig(),o.events.addEventListeners()},onAdd(s){if(o.map=s,o.events=function(i){const l=Object.keys(i.options.modes).reduce((c,h)=>(c[h]=ye(i.options.modes[h]),c),{});let p={},d={};const u={};let g=null,m=null;u.drag=function(c,h){h({point:c.point,time:new Date().getTime()})?(i.ui.queueMapClasses({mouse:v.DRAG}),m.drag(c)):c.originalEvent.stopPropagation()},u.mousedrag=function(c){u.drag(c,h=>!Ct(p,h))},u.touchdrag=function(c){u.drag(c,h=>!_t(d,h))},u.mousemove=function(c){if((c.originalEvent.buttons!==void 0?c.originalEvent.buttons:c.originalEvent.which)===1)return u.mousedrag(c);const h=ot(c,i);c.featureTarget=h,m.mousemove(c)},u.mousedown=function(c){p={time:new Date().getTime(),point:c.point};const h=ot(c,i);c.featureTarget=h,m.mousedown(c)},u.mouseup=function(c){const h=ot(c,i);c.featureTarget=h,Ct(p,{point:c.point,time:new Date().getTime()})?m.click(c):m.mouseup(c)},u.mouseout=function(c){m.mouseout(c)},u.touchstart=function(c){if(!i.options.touchEnabled)return;d={time:new Date().getTime(),point:c.point};const h=q.touch(c,null,i)[0];c.featureTarget=h,m.touchstart(c)},u.touchmove=function(c){if(i.options.touchEnabled)return m.touchmove(c),u.touchdrag(c)},u.touchend=function(c){if(c.originalEvent.preventDefault(),!i.options.touchEnabled)return;const h=q.touch(c,null,i)[0];c.featureTarget=h,_t(d,{time:new Date().getTime(),point:c.point})?m.tap(c):m.touchend(c)};const T=c=>!(c===8||c===46||c>=48&&c<=57);function F(c,h,C={}){m.stop();const P=l[c];if(P===void 0)throw new Error(`${c} is not valid`);g=c;const H=P(i,h);m=gt(H,i),C.silent||i.map.fire(L.MODE_CHANGE,{mode:c}),i.store.setDirty(),i.store.render()}u.keydown=function(c){(c.srcElement||c.target).classList.contains(N.CANVAS)&&(c.keyCode!==8&&c.keyCode!==46||!i.options.controls.trash?T(c.keyCode)?m.keydown(c):c.keyCode===49&&i.options.controls.point?F(E.DRAW_POINT):c.keyCode===50&&i.options.controls.line_string?F(E.DRAW_LINE_STRING):c.keyCode===51&&i.options.controls.polygon&&F(E.DRAW_POLYGON):(c.preventDefault(),m.trash()))},u.keyup=function(c){T(c.keyCode)&&m.keyup(c)},u.zoomend=function(){i.store.changeZoom()},u.data=function(c){if(c.dataType==="style"){const{setup:h,map:C,options:P,store:H}=i;P.styles.some(ft=>C.getLayer(ft.id))||(h.addLayers(),H.setDirty(),H.render())}};const A={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start(){g=i.options.defaultMode,m=gt(l[g](i),i)},changeMode:F,actionable:function(c){let h=!1;Object.keys(c).forEach(C=>{if(A[C]===void 0)throw new Error("Invalid action type");A[C]!==c[C]&&(h=!0),A[C]=c[C]}),h&&i.map.fire(L.ACTIONABLE,{actions:A})},currentModeName:()=>g,currentModeRender:(c,h)=>m.render(c,h),fire(c,h){i.map&&i.map.fire(c,h)},addEventListeners(){i.map.on("mousemove",u.mousemove),i.map.on("mousedown",u.mousedown),i.map.on("mouseup",u.mouseup),i.map.on("data",u.data),i.map.on("touchmove",u.touchmove),i.map.on("touchstart",u.touchstart),i.map.on("touchend",u.touchend),i.container.addEventListener("mouseout",u.mouseout),i.options.keybindings&&(i.container.addEventListener("keydown",u.keydown),i.container.addEventListener("keyup",u.keyup))},removeEventListeners(){i.map.off("mousemove",u.mousemove),i.map.off("mousedown",u.mousedown),i.map.off("mouseup",u.mouseup),i.map.off("data",u.data),i.map.off("touchmove",u.touchmove),i.map.off("touchstart",u.touchstart),i.map.off("touchend",u.touchend),i.container.removeEventListener("mouseout",u.mouseout),i.options.keybindings&&(i.container.removeEventListener("keydown",u.keydown),i.container.removeEventListener("keyup",u.keyup))},trash(c){m.trash(c)},combineFeatures(){m.combineFeatures()},uncombineFeatures(){m.uncombineFeatures()},getMode:()=>g}}(o),o.ui=function(i){const l={};let p=null,d={mode:null,feature:null,mouse:null},u={mode:null,feature:null,mouse:null};function g(c){u=Object.assign(u,c)}function m(){if(!i.container)return;const c=[],h=[];Te.forEach(C=>{u[C]!==d[C]&&(c.push(`${C}-${d[C]}`),u[C]!==null&&h.push(`${C}-${u[C]}`))}),c.length>0&&i.container.classList.remove(...c),h.length>0&&i.container.classList.add(...h),d=Object.assign(d,u)}function T(c,h={}){const C=document.createElement("button");return C.className=`${N.CONTROL_BUTTON} ${h.className}`,C.setAttribute("title",h.title),h.container.appendChild(C),C.addEventListener("click",P=>{if(P.preventDefault(),P.stopPropagation(),P.target===p)return F(),void h.onDeactivate();A(c),h.onActivate()},!0),C}function F(){p&&(p.classList.remove(N.ACTIVE_BUTTON),p=null)}function A(c){F();const h=l[c];h&&h&&c!=="trash"&&(h.classList.add(N.ACTIVE_BUTTON),p=h)}return{setActiveButton:A,queueMapClasses:g,updateMapClasses:m,clearMapClasses:function(){g({mode:null,feature:null,mouse:null}),m()},addButtons:function(){const c=i.options.controls,h=document.createElement("div");return h.className=`${N.CONTROL_GROUP} ${N.CONTROL_BASE}`,c&&(c[b.LINE]&&(l[b.LINE]=T(b.LINE,{container:h,className:N.CONTROL_BUTTON_LINE,title:"LineString tool "+(i.options.keybindings?"(l)":""),onActivate:()=>i.events.changeMode(E.DRAW_LINE_STRING),onDeactivate:()=>i.events.trash()})),c[b.POLYGON]&&(l[b.POLYGON]=T(b.POLYGON,{container:h,className:N.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(i.options.keybindings?"(p)":""),onActivate:()=>i.events.changeMode(E.DRAW_POLYGON),onDeactivate:()=>i.events.trash()})),c[b.POINT]&&(l[b.POINT]=T(b.POINT,{container:h,className:N.CONTROL_BUTTON_POINT,title:"Marker tool "+(i.options.keybindings?"(m)":""),onActivate:()=>i.events.changeMode(E.DRAW_POINT),onDeactivate:()=>i.events.trash()})),c.trash&&(l.trash=T("trash",{container:h,className:N.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{i.events.trash()}})),c.combine_features&&(l.combine_features=T("combineFeatures",{container:h,className:N.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{i.events.combineFeatures()}})),c.uncombine_features&&(l.uncombine_features=T("uncombineFeatures",{container:h,className:N.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{i.events.uncombineFeatures()}}))),h},removeButtons:function(){Object.keys(l).forEach(c=>{const h=l[c];h.parentNode&&h.parentNode.removeChild(h),delete l[c]})}}}(o),o.container=s.getContainer(),o.store=new _(o),n=o.ui.addButtons(),o.options.boxSelect){o.boxZoomInitial=s.boxZoom.isEnabled(),s.boxZoom.disable();const i=s.dragPan.isEnabled();s.dragPan.disable(),s.dragPan.enable(),i||s.dragPan.disable()}return s.loaded()?a.connect():(s.on("load",a.connect),r=setInterval(()=>{s.loaded()&&a.connect()},16)),o.events.start(),n},addLayers(){o.map.addSource(R.COLD,{data:{type:f.FEATURE_COLLECTION,features:[]},type:"geojson"}),o.map.addSource(R.HOT,{data:{type:f.FEATURE_COLLECTION,features:[]},type:"geojson"}),o.options.styles.forEach(s=>{o.map.addLayer(s)}),o.store.setDirty(!0),o.store.render()},removeLayers(){o.options.styles.forEach(s=>{o.map.getLayer(s.id)&&o.map.removeLayer(s.id)}),o.map.getSource(R.COLD)&&o.map.removeSource(R.COLD),o.map.getSource(R.HOT)&&o.map.removeSource(R.HOT)}};return o.setup=a,a}const It="#3bb2d0",z="#fbb03b",Gt="#fff";var Bt=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],z,It],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],z,It],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Gt}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],z,It]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Gt}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":z}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":z}}];function rt(o){return function(n){const r=n.featureTarget;return!!r&&!!r.properties&&r.properties.meta===o}}function jt(o){return!!o.originalEvent&&!!o.originalEvent.shiftKey&&o.originalEvent.button===0}function J(o){return!!o.featureTarget&&!!o.featureTarget.properties&&o.featureTarget.properties.active===S.ACTIVE&&o.featureTarget.properties.meta===O.FEATURE}function St(o){return!!o.featureTarget&&!!o.featureTarget.properties&&o.featureTarget.properties.active===S.INACTIVE&&o.featureTarget.properties.meta===O.FEATURE}function it(o){return o.featureTarget===void 0}function Ot(o){return!!o.featureTarget&&!!o.featureTarget.properties&&o.featureTarget.properties.meta===O.FEATURE}function Q(o){const n=o.featureTarget;return!!n&&!!n.properties&&n.properties.meta===O.VERTEX}function st(o){return!!o.originalEvent&&o.originalEvent.shiftKey===!0}function at(o){return o.keyCode===27}function ct(o){return o.keyCode===13}var _e=Object.freeze({__proto__:null,isActiveFeature:J,isEnterKey:ct,isEscapeKey:at,isFeature:Ot,isInactiveFeature:St,isOfMetaType:rt,isShiftDown:st,isShiftMousedown:jt,isTrue:function(){return!0},isVertex:Q,noTarget:it});function G(o,n){this.x=o,this.y=n}function Lt(o,n){const r=n.getBoundingClientRect();return new G(o.clientX-r.left-(n.clientLeft||0),o.clientY-r.top-(n.clientTop||0))}function Z(o,n,r,a){return{type:f.FEATURE,properties:{meta:O.VERTEX,parent:o,coord_path:r,active:a?S.ACTIVE:S.INACTIVE},geometry:{type:f.POINT,coordinates:n}}}function Jt(o,n,r){const a=n.geometry.coordinates,s=r.geometry.coordinates;if(a[1]>Et||a[1]<yt||s[1]>Et||s[1]<yt)return null;const i={lng:(a[0]+s[0])/2,lat:(a[1]+s[1])/2};return{type:f.FEATURE,properties:{meta:O.MIDPOINT,parent:o,lng:i.lng,lat:i.lat,coord_path:r.properties.coord_path},geometry:{type:f.POINT,coordinates:[i.lng,i.lat]}}}function ut(o,n={},r=null){const{type:a,coordinates:s}=o.geometry,i=o.properties&&o.properties.id;let l=[];function p(u,g){let m="",T=null;u.forEach((F,A)=>{const c=g!=null?`${g}.${A}`:String(A),h=Z(i,F,c,d(c));if(n.midpoints&&T){const P=Jt(i,T,h);P&&l.push(P)}T=h;const C=JSON.stringify(F);m!==C&&l.push(h),A===0&&(m=C)})}function d(u){return!!n.selectedPaths&&n.selectedPaths.indexOf(u)!==-1}return a===f.POINT?l.push(Z(i,s,r,d(r))):a===f.POLYGON?s.forEach((u,g)=>{p(u,r!==null?`${r}.${g}`:String(g))}):a===f.LINE_STRING?p(s,r):a.indexOf(f.MULTI_PREFIX)===0&&function(){const u=a.replace(f.MULTI_PREFIX,"");s.forEach((g,m)=>{const T={type:f.FEATURE,properties:o.properties,geometry:{type:u,coordinates:g}};l=l.concat(ut(T,n,m))})}(),l}G.prototype={clone(){return new G(this.x,this.y)},add(o){return this.clone()._add(o)},sub(o){return this.clone()._sub(o)},multByPoint(o){return this.clone()._multByPoint(o)},divByPoint(o){return this.clone()._divByPoint(o)},mult(o){return this.clone()._mult(o)},div(o){return this.clone()._div(o)},rotate(o){return this.clone()._rotate(o)},rotateAround(o,n){return this.clone()._rotateAround(o,n)},matMult(o){return this.clone()._matMult(o)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(o){return this.x===o.x&&this.y===o.y},dist(o){return Math.sqrt(this.distSqr(o))},distSqr(o){const n=o.x-this.x,r=o.y-this.y;return n*n+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith(o){return this.angleWithSep(o.x,o.y)},angleWithSep(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult(o){const n=o[0]*this.x+o[1]*this.y,r=o[2]*this.x+o[3]*this.y;return this.x=n,this.y=r,this},_add(o){return this.x+=o.x,this.y+=o.y,this},_sub(o){return this.x-=o.x,this.y-=o.y,this},_mult(o){return this.x*=o,this.y*=o,this},_div(o){return this.x/=o,this.y/=o,this},_multByPoint(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint(o){return this.x/=o.x,this.y/=o.y,this},_unit(){return this._div(this.mag()),this},_perp(){const o=this.y;return this.y=this.x,this.x=-o,this},_rotate(o){const n=Math.cos(o),r=Math.sin(o),a=n*this.x-r*this.y,s=r*this.x+n*this.y;return this.x=a,this.y=s,this},_rotateAround(o,n){const r=Math.cos(o),a=Math.sin(o),s=n.x+r*(this.x-n.x)-a*(this.y-n.y),i=n.y+a*(this.x-n.x)+r*(this.y-n.y);return this.x=s,this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:G},G.convert=function(o){if(o instanceof G)return o;if(Array.isArray(o))return new G(+o[0],+o[1]);if(o.x!==void 0&&o.y!==void 0)return new G(+o.x,+o.y);throw new Error("Expected [x, y] or {x, y} point format")};var U={enable(o){setTimeout(()=>{o.map&&o.map.doubleClickZoom&&o._ctx&&o._ctx.store&&o._ctx.store.getInitialConfigValue&&o._ctx.store.getInitialConfigValue("doubleClickZoom")&&o.map.doubleClickZoom.enable()},0)},disable(o){setTimeout(()=>{o.map&&o.map.doubleClickZoom&&o.map.doubleClickZoom.disable()},0)}};const{LAT_MIN:lt,LAT_MAX:dt,LAT_RENDERED_MIN:$t,LAT_RENDERED_MAX:Yt,LNG_MIN:Ht,LNG_MAX:Xt}=Ft;function Mt(o,n){let r=lt,a=dt,s=lt,i=dt,l=Xt,p=Ht;o.forEach(u=>{const g=function(c){const h={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[c.geometry.type],C=[c.geometry.coordinates].flat(h),P=C.map(X=>X[0]),H=C.map(X=>X[1]),ft=X=>Math.min.apply(null,X),ne=X=>Math.max.apply(null,X);return[ft(P),ft(H),ne(P),ne(H)]}(u),m=g[1],T=g[3],F=g[0],A=g[2];m>r&&(r=m),T<a&&(a=T),T>s&&(s=T),m<i&&(i=m),F<l&&(l=F),A>p&&(p=A)});const d=n;return r+d.lat>Yt&&(d.lat=Yt-r),s+d.lat>dt&&(d.lat=dt-s),a+d.lat<$t&&(d.lat=$t-a),i+d.lat<lt&&(d.lat=lt-i),l+d.lng<=Ht&&(d.lng+=360*Math.ceil(Math.abs(d.lng)/360)),p+d.lng>=Xt&&(d.lng-=360*Math.ceil(Math.abs(d.lng)/360)),d}function Nt(o,n){const r=Mt(o.map(a=>a.toGeoJSON()),n);o.forEach(a=>{const s=a.getCoordinates(),i=u=>{const g={lng:u[0]+r.lng,lat:u[1]+r.lat};return[g.lng,g.lat]},l=u=>u.map(g=>i(g)),p=u=>u.map(g=>l(g));let d;a.type===f.POINT?d=i(s):a.type===f.LINE_STRING||a.type===f.MULTI_POINT?d=s.map(i):a.type===f.POLYGON||a.type===f.MULTI_LINE_STRING?d=s.map(l):a.type===f.MULTI_POLYGON&&(d=s.map(p)),a.incomingCoords(d)})}const I={onSetup:function(o){const n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:o.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter(r=>this.getFeature(r)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.fire(L.UPDATE,{action:W.MOVE,features:this.getSelected().map(o=>o.toGeoJSON())})},fireActionable:function(){const o=this.getSelected(),n=o.filter(i=>this.isInstanceOf("MultiFeature",i));let r=!1;if(o.length>1){r=!0;const i=o[0].type.replace("Multi","");o.forEach(l=>{l.type.replace("Multi","")!==i&&(r=!1)})}const a=n.length>0,s=o.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:a,trash:s})},getUniqueIds:function(o){return o.length?o.map(n=>n.properties.id).filter(n=>n!==void 0).reduce((n,r)=>(n.add(r),n),new w).values():[]},stopExtendedInteractions:function(o){o.boxSelectElement&&(o.boxSelectElement.parentNode&&o.boxSelectElement.parentNode.removeChild(o.boxSelectElement),o.boxSelectElement=null),(o.canDragMove||o.canBoxSelect)&&o.initialDragPanState===!0&&this.map.dragPan.enable(),o.boxSelecting=!1,o.canBoxSelect=!1,o.dragMoving=!1,o.canDragMove=!1},onStop:function(){U.enable(this)},onMouseMove:function(o,n){return Ot(n)&&o.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(o),!0},onMouseOut:function(o){return!o.dragMoving||this.fireUpdate()}};I.onTap=I.onClick=function(o,n){return it(n)?this.clickAnywhere(o,n):rt(O.VERTEX)(n)?this.clickOnVertex(o,n):Ot(n)?this.clickOnFeature(o,n):void 0},I.clickAnywhere=function(o){const n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach(r=>this.doRender(r))),U.enable(this),this.stopExtendedInteractions(o)},I.clickOnVertex=function(o,n){this.changeMode(E.DIRECT_SELECT,{featureId:n.featureTarget.properties.parent,coordPath:n.featureTarget.properties.coord_path,startPos:n.lngLat}),this.updateUIClasses({mouse:v.MOVE})},I.startOnActiveFeature=function(o,n){this.stopExtendedInteractions(o),this.map.dragPan.disable(),this.doRender(n.featureTarget.properties.id),o.canDragMove=!0,o.dragMoveLocation=n.lngLat},I.clickOnFeature=function(o,n){U.disable(this),this.stopExtendedInteractions(o);const r=st(n),a=this.getSelectedIds(),s=n.featureTarget.properties.id,i=this.isSelected(s);if(!r&&i&&this.getFeature(s).type!==f.POINT)return this.changeMode(E.DIRECT_SELECT,{featureId:s});i&&r?(this.deselect(s),this.updateUIClasses({mouse:v.POINTER}),a.length===1&&U.enable(this)):!i&&r?(this.select(s),this.updateUIClasses({mouse:v.MOVE})):i||r||(a.forEach(l=>this.doRender(l)),this.setSelected(s),this.updateUIClasses({mouse:v.MOVE})),this.doRender(s)},I.onMouseDown=function(o,n){return o.initialDragPanState=this.map.dragPan.isEnabled(),J(n)?this.startOnActiveFeature(o,n):this.drawConfig.boxSelect&&jt(n)?this.startBoxSelect(o,n):void 0},I.startBoxSelect=function(o,n){this.stopExtendedInteractions(o),this.map.dragPan.disable(),o.boxSelectStartLocation=Lt(n.originalEvent,this.map.getContainer()),o.canBoxSelect=!0},I.onTouchStart=function(o,n){if(J(n))return this.startOnActiveFeature(o,n)},I.onDrag=function(o,n){return o.canDragMove?this.dragMove(o,n):this.drawConfig.boxSelect&&o.canBoxSelect?this.whileBoxSelect(o,n):void 0},I.whileBoxSelect=function(o,n){o.boxSelecting=!0,this.updateUIClasses({mouse:v.ADD}),o.boxSelectElement||(o.boxSelectElement=document.createElement("div"),o.boxSelectElement.classList.add(N.BOX_SELECT),this.map.getContainer().appendChild(o.boxSelectElement));const r=Lt(n.originalEvent,this.map.getContainer()),a=Math.min(o.boxSelectStartLocation.x,r.x),s=Math.max(o.boxSelectStartLocation.x,r.x),i=Math.min(o.boxSelectStartLocation.y,r.y),l=Math.max(o.boxSelectStartLocation.y,r.y),p=`translate(${a}px, ${i}px)`;o.boxSelectElement.style.transform=p,o.boxSelectElement.style.WebkitTransform=p,o.boxSelectElement.style.width=s-a+"px",o.boxSelectElement.style.height=l-i+"px"},I.dragMove=function(o,n){o.dragMoving=!0,n.originalEvent.stopPropagation();const r={lng:n.lngLat.lng-o.dragMoveLocation.lng,lat:n.lngLat.lat-o.dragMoveLocation.lat};Nt(this.getSelected(),r),o.dragMoveLocation=n.lngLat},I.onTouchEnd=I.onMouseUp=function(o,n){if(o.dragMoving)this.fireUpdate();else if(o.boxSelecting){const r=[o.boxSelectStartLocation,Lt(n.originalEvent,this.map.getContainer())],a=this.featuresAt(null,r,"click"),s=this.getUniqueIds(a).filter(i=>!this.isSelected(i));s.length&&(this.select(s),s.forEach(i=>this.doRender(i)),this.updateUIClasses({mouse:v.MOVE}))}this.stopExtendedInteractions(o)},I.toDisplayFeatures=function(o,n,r){n.properties.active=this.isSelected(n.properties.id)?S.ACTIVE:S.INACTIVE,r(n),this.fireActionable(),n.properties.active===S.ACTIVE&&n.geometry.type!==f.POINT&&ut(n).forEach(r)},I.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},I.onCombineFeatures=function(){const o=this.getSelected();if(o.length===0||o.length<2)return;const n=[],r=[],a=o[0].type.replace("Multi","");for(let s=0;s<o.length;s++){const i=o[s];if(i.type.replace("Multi","")!==a)return;i.type.includes("Multi")?i.getCoordinates().forEach(l=>{n.push(l)}):n.push(i.getCoordinates()),r.push(i.toGeoJSON())}if(r.length>1){const s=this.newFeature({type:f.FEATURE,properties:r[0].properties,geometry:{type:`Multi${a}`,coordinates:n}});this.addFeature(s),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([s.id]),this.fire(L.COMBINE_FEATURES,{createdFeatures:[s.toGeoJSON()],deletedFeatures:r})}this.fireActionable()},I.onUncombineFeatures=function(){const o=this.getSelected();if(o.length===0)return;const n=[],r=[];for(let a=0;a<o.length;a++){const s=o[a];this.isInstanceOf("MultiFeature",s)&&(s.getFeatures().forEach(i=>{this.addFeature(i),i.properties=s.properties,n.push(i.toGeoJSON()),this.select([i.id])}),this.deleteFeature(s.id,{silent:!0}),r.push(s.toGeoJSON()))}n.length>1&&this.fire(L.UNCOMBINE_FEATURES,{createdFeatures:n,deletedFeatures:r}),this.fireActionable()};const qt=rt(O.VERTEX),Zt=rt(O.MIDPOINT),B={fireUpdate:function(){this.fire(L.UPDATE,{action:W.CHANGE_COORDINATES,features:this.getSelected().map(o=>o.toGeoJSON())})},fireActionable:function(o){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:o.selectedCoordPaths.length>0})},startDragging:function(o,n){o.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),o.canDragMove=!0,o.dragMoveLocation=n.lngLat},stopDragging:function(o){o.canDragMove&&o.initialDragPanState===!0&&this.map.dragPan.enable(),o.dragMoving=!1,o.canDragMove=!1,o.dragMoveLocation=null},onVertex:function(o,n){this.startDragging(o,n);const r=n.featureTarget.properties,a=o.selectedCoordPaths.indexOf(r.coord_path);st(n)||a!==-1?st(n)&&a===-1&&o.selectedCoordPaths.push(r.coord_path):o.selectedCoordPaths=[r.coord_path];const s=this.pathsToCoordinates(o.featureId,o.selectedCoordPaths);this.setSelectedCoordinates(s)},onMidpoint:function(o,n){this.startDragging(o,n);const r=n.featureTarget.properties;o.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),o.selectedCoordPaths=[r.coord_path]},pathsToCoordinates:function(o,n){return n.map(r=>({feature_id:o,coord_path:r}))},onFeature:function(o,n){o.selectedCoordPaths.length===0?this.startDragging(o,n):this.stopDragging(o)},dragFeature:function(o,n,r){Nt(this.getSelected(),r),o.dragMoveLocation=n.lngLat},dragVertex:function(o,n,r){const a=o.selectedCoordPaths.map(i=>o.feature.getCoordinate(i)),s=Mt(a.map(i=>({type:f.FEATURE,properties:{},geometry:{type:f.POINT,coordinates:i}})),r);for(let i=0;i<a.length;i++){const l=a[i];o.feature.updateCoordinate(o.selectedCoordPaths[i],l[0]+s.lng,l[1]+s.lat)}},clickNoTarget:function(){this.changeMode(E.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(E.SIMPLE_SELECT)},clickActiveFeature:function(o){o.selectedCoordPaths=[],this.clearSelectedCoordinates(),o.feature.changed()},onSetup:function(o){const n=o.featureId,r=this.getFeature(n);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===f.POINT)throw new TypeError("direct_select mode doesn't handle point features");const a={featureId:n,feature:r,dragMoveLocation:o.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:o.coordPath?[o.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(n,a.selectedCoordPaths)),this.setSelected(n),U.disable(this),this.setActionableState({trash:!0}),a},onStop:function(){U.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(o,n,r){o.featureId===n.properties.id?(n.properties.active=S.ACTIVE,r(n),ut(n,{map:this.map,midpoints:!0,selectedPaths:o.selectedCoordPaths}).forEach(r)):(n.properties.active=S.INACTIVE,r(n)),this.fireActionable(o)},onTrash:function(o){o.selectedCoordPaths.sort((n,r)=>r.localeCompare(n,"en",{numeric:!0})).forEach(n=>o.feature.removeCoordinate(n)),this.fireUpdate(),o.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(o),o.feature.isValid()===!1&&(this.deleteFeature([o.featureId]),this.changeMode(E.SIMPLE_SELECT,{}))},onMouseMove:function(o,n){const r=J(n),a=qt(n),s=Zt(n),i=o.selectedCoordPaths.length===0;return r&&i||a&&!i?this.updateUIClasses({mouse:v.MOVE}):this.updateUIClasses({mouse:v.NONE}),(a||r||s)&&o.dragMoving&&this.fireUpdate(),this.stopDragging(o),!0},onMouseOut:function(o){return o.dragMoving&&this.fireUpdate(),!0}};B.onTouchStart=B.onMouseDown=function(o,n){return qt(n)?this.onVertex(o,n):J(n)?this.onFeature(o,n):Zt(n)?this.onMidpoint(o,n):void 0},B.onDrag=function(o,n){if(o.canDragMove!==!0)return;o.dragMoving=!0,n.originalEvent.stopPropagation();const r={lng:n.lngLat.lng-o.dragMoveLocation.lng,lat:n.lngLat.lat-o.dragMoveLocation.lat};o.selectedCoordPaths.length>0?this.dragVertex(o,n,r):this.dragFeature(o,n,r),o.dragMoveLocation=n.lngLat},B.onClick=function(o,n){return it(n)?this.clickNoTarget(o,n):J(n)?this.clickActiveFeature(o,n):St(n)?this.clickInactive(o,n):void this.stopDragging(o)},B.onTap=function(o,n){return it(n)?this.clickNoTarget(o,n):J(n)?this.clickActiveFeature(o,n):St(n)?this.clickInactive(o,n):void 0},B.onTouchEnd=B.onMouseUp=function(o){o.dragMoving&&this.fireUpdate(),this.stopDragging(o)};const k={};function pt(o,n){return!!o.lngLat&&o.lngLat.lng===n[0]&&o.lngLat.lat===n[1]}k.onSetup=function(){const o=this.newFeature({type:f.FEATURE,properties:{},geometry:{type:f.POINT,coordinates:[]}});return this.addFeature(o),this.clearSelectedFeatures(),this.updateUIClasses({mouse:v.ADD}),this.activateUIButton(b.POINT),this.setActionableState({trash:!0}),{point:o}},k.stopDrawingAndRemove=function(o){this.deleteFeature([o.point.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT)},k.onTap=k.onClick=function(o,n){this.updateUIClasses({mouse:v.MOVE}),o.point.updateCoordinate("",n.lngLat.lng,n.lngLat.lat),this.fire(L.CREATE,{features:[o.point.toGeoJSON()]}),this.changeMode(E.SIMPLE_SELECT,{featureIds:[o.point.id]})},k.onStop=function(o){this.activateUIButton(),o.point.getCoordinate().length||this.deleteFeature([o.point.id],{silent:!0})},k.toDisplayFeatures=function(o,n,r){const a=n.properties.id===o.point.id;if(n.properties.active=a?S.ACTIVE:S.INACTIVE,!a)return r(n)},k.onTrash=k.stopDrawingAndRemove,k.onKeyUp=function(o,n){if(at(n)||ct(n))return this.stopDrawingAndRemove(o,n)};const $={onSetup:function(){const o=this.newFeature({type:f.FEATURE,properties:{},geometry:{type:f.POLYGON,coordinates:[[]]}});return this.addFeature(o),this.clearSelectedFeatures(),U.disable(this),this.updateUIClasses({mouse:v.ADD}),this.activateUIButton(b.POLYGON),this.setActionableState({trash:!0}),{polygon:o,currentVertexPosition:0}},clickAnywhere:function(o,n){if(o.currentVertexPosition>0&&pt(n,o.polygon.coordinates[0][o.currentVertexPosition-1]))return this.changeMode(E.SIMPLE_SELECT,{featureIds:[o.polygon.id]});this.updateUIClasses({mouse:v.ADD}),o.polygon.updateCoordinate(`0.${o.currentVertexPosition}`,n.lngLat.lng,n.lngLat.lat),o.currentVertexPosition++,o.polygon.updateCoordinate(`0.${o.currentVertexPosition}`,n.lngLat.lng,n.lngLat.lat)},clickOnVertex:function(o){return this.changeMode(E.SIMPLE_SELECT,{featureIds:[o.polygon.id]})},onMouseMove:function(o,n){o.polygon.updateCoordinate(`0.${o.currentVertexPosition}`,n.lngLat.lng,n.lngLat.lat),Q(n)&&this.updateUIClasses({mouse:v.POINTER})}};$.onTap=$.onClick=function(o,n){return Q(n)?this.clickOnVertex(o,n):this.clickAnywhere(o,n)},$.onKeyUp=function(o,n){at(n)?(this.deleteFeature([o.polygon.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT)):ct(n)&&this.changeMode(E.SIMPLE_SELECT,{featureIds:[o.polygon.id]})},$.onStop=function(o){this.updateUIClasses({mouse:v.NONE}),U.enable(this),this.activateUIButton(),this.getFeature(o.polygon.id)!==void 0&&(o.polygon.removeCoordinate(`0.${o.currentVertexPosition}`),o.polygon.isValid()?this.fire(L.CREATE,{features:[o.polygon.toGeoJSON()]}):(this.deleteFeature([o.polygon.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT,{},{silent:!0})))},$.toDisplayFeatures=function(o,n,r){const a=n.properties.id===o.polygon.id;if(n.properties.active=a?S.ACTIVE:S.INACTIVE,!a)return r(n);if(n.geometry.coordinates.length===0)return;const s=n.geometry.coordinates[0].length;if(!(s<3)){if(n.properties.meta=O.FEATURE,r(Z(o.polygon.id,n.geometry.coordinates[0][0],"0.0",!1)),s>3){const i=n.geometry.coordinates[0].length-3;r(Z(o.polygon.id,n.geometry.coordinates[0][i],`0.${i}`,!1))}if(s<=4){const i=[[n.geometry.coordinates[0][0][0],n.geometry.coordinates[0][0][1]],[n.geometry.coordinates[0][1][0],n.geometry.coordinates[0][1][1]]];if(r({type:f.FEATURE,properties:n.properties,geometry:{coordinates:i,type:f.LINE_STRING}}),s===3)return}return r(n)}},$.onTrash=function(o){this.deleteFeature([o.polygon.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT)};const Y={onSetup:function(o){const n=(o=o||{}).featureId;let r,a,s="forward";if(n){if(r=this.getFeature(n),!r)throw new Error("Could not find a feature with the provided featureId");let i=o.from;if(i&&i.type==="Feature"&&i.geometry&&i.geometry.type==="Point"&&(i=i.geometry),i&&i.type==="Point"&&i.coordinates&&i.coordinates.length===2&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const l=r.coordinates.length-1;if(r.coordinates[l][0]===i[0]&&r.coordinates[l][1]===i[1])a=l+1,r.addCoordinate(a,...r.coordinates[l]);else{if(r.coordinates[0][0]!==i[0]||r.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");s="backwards",a=0,r.addCoordinate(a,...r.coordinates[0])}}else r=this.newFeature({type:f.FEATURE,properties:{},geometry:{type:f.LINE_STRING,coordinates:[]}}),a=0,this.addFeature(r);return this.clearSelectedFeatures(),U.disable(this),this.updateUIClasses({mouse:v.ADD}),this.activateUIButton(b.LINE),this.setActionableState({trash:!0}),{line:r,currentVertexPosition:a,direction:s}},clickAnywhere:function(o,n){if(o.currentVertexPosition>0&&pt(n,o.line.coordinates[o.currentVertexPosition-1])||o.direction==="backwards"&&pt(n,o.line.coordinates[o.currentVertexPosition+1]))return this.changeMode(E.SIMPLE_SELECT,{featureIds:[o.line.id]});this.updateUIClasses({mouse:v.ADD}),o.line.updateCoordinate(o.currentVertexPosition,n.lngLat.lng,n.lngLat.lat),o.direction==="forward"?(o.currentVertexPosition++,o.line.updateCoordinate(o.currentVertexPosition,n.lngLat.lng,n.lngLat.lat)):o.line.addCoordinate(0,n.lngLat.lng,n.lngLat.lat)},clickOnVertex:function(o){return this.changeMode(E.SIMPLE_SELECT,{featureIds:[o.line.id]})},onMouseMove:function(o,n){o.line.updateCoordinate(o.currentVertexPosition,n.lngLat.lng,n.lngLat.lat),Q(n)&&this.updateUIClasses({mouse:v.POINTER})}};Y.onTap=Y.onClick=function(o,n){if(Q(n))return this.clickOnVertex(o,n);this.clickAnywhere(o,n)},Y.onKeyUp=function(o,n){ct(n)?this.changeMode(E.SIMPLE_SELECT,{featureIds:[o.line.id]}):at(n)&&(this.deleteFeature([o.line.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT))},Y.onStop=function(o){U.enable(this),this.activateUIButton(),this.getFeature(o.line.id)!==void 0&&(o.line.removeCoordinate(`${o.currentVertexPosition}`),o.line.isValid()?this.fire(L.CREATE,{features:[o.line.toGeoJSON()]}):(this.deleteFeature([o.line.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT,{},{silent:!0})))},Y.onTrash=function(o){this.deleteFeature([o.line.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT)},Y.toDisplayFeatures=function(o,n,r){const a=n.properties.id===o.line.id;if(n.properties.active=a?S.ACTIVE:S.INACTIVE,!a)return r(n);n.geometry.coordinates.length<2||(n.properties.meta=O.FEATURE,r(Z(o.line.id,n.geometry.coordinates[o.direction==="forward"?n.geometry.coordinates.length-2:1],""+(o.direction==="forward"?n.geometry.coordinates.length-2:1),!1)),r(n))};var Wt={simple_select:I,direct_select:B,draw_point:k,draw_polygon:$,draw_line_string:Y};const ve={defaultMode:E.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Bt,modes:Wt,controls:{},userProperties:!1,suppressAPIEvents:!0},Ie={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Se={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Kt(o,n){return o.map(r=>r.source?r:Object.assign({},r,{id:`${r.id}.${n}`,source:n==="hot"?R.HOT:R.COLD}))}var zt,Qt,bt,te,ee=mt(Qt?zt:(Qt=1,zt=function o(n,r){if(n===r)return!0;if(n&&r&&typeof n=="object"&&typeof r=="object"){if(n.constructor!==r.constructor)return!1;var a,s,i;if(Array.isArray(n)){if((a=n.length)!=r.length)return!1;for(s=a;s--!=0;)if(!o(n[s],r[s]))return!1;return!0}if(n.constructor===RegExp)return n.source===r.source&&n.flags===r.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===r.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===r.toString();if((a=(i=Object.keys(n)).length)!==Object.keys(r).length)return!1;for(s=a;s--!=0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=a;s--!=0;){var l=i[s];if(!o(n[l],r[l]))return!1}return!0}return n!=n&&r!=r})),Oe=function(){if(te)return bt;te=1,bt=function(n){if(!n||!n.type)return null;var r=o[n.type];return r?r==="geometry"?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]}:r==="feature"?{type:"FeatureCollection",features:[n]}:r==="featurecollection"?n:void 0:null};var o={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};return bt}(),Le=mt(Oe);function oe(o,n){return o.length===n.length&&JSON.stringify(o.map(r=>r).sort())===JSON.stringify(n.map(r=>r).sort())}const Me={Polygon:D,LineString:V,Point:j,MultiPolygon:x,MultiLineString:x,MultiPoint:x};var Ne=Object.freeze({__proto__:null,CommonSelectors:_e,ModeHandler:gt,StringSet:w,constrainFeatureMovement:Mt,createMidPoint:Jt,createSupplementaryPoints:ut,createVertex:Z,doubleClickZoom:U,euclideanDistance:Tt,featuresAt:q,getFeatureAtAndSetCursors:ot,isClick:Ct,isEventAtCoordinates:pt,isTap:_t,mapEventToBoundingBox:Dt,moveFeatures:Nt,sortFeatures:wt,stringSetsAreEqual:oe,theme:Bt,toDenseArray:K});const be=function(o,n){const r={options:o=function(s={}){let i=Object.assign({},s);return s.controls||(i.controls={}),s.displayControlsDefault===!1?i.controls=Object.assign({},Se,s.controls):i.controls=Object.assign({},Ie,s.controls),i=Object.assign({},ve,i),i.styles=Kt(i.styles,"cold").concat(Kt(i.styles,"hot")),i}(o)};n=function(s,i){i.modes=E;const l=s.options.suppressAPIEvents===void 0||!!s.options.suppressAPIEvents;return i.getFeatureIdsAt=function(p){return q.click({point:p},null,s).map(d=>d.properties.id)},i.getSelectedIds=function(){return s.store.getSelectedIds()},i.getSelected=function(){return{type:f.FEATURE_COLLECTION,features:s.store.getSelectedIds().map(p=>s.store.get(p)).map(p=>p.toGeoJSON())}},i.getSelectedPoints=function(){return{type:f.FEATURE_COLLECTION,features:s.store.getSelectedCoordinates().map(p=>({type:f.FEATURE,properties:{},geometry:{type:f.POINT,coordinates:p.coordinates}}))}},i.set=function(p){if(p.type===void 0||p.type!==f.FEATURE_COLLECTION||!Array.isArray(p.features))throw new Error("Invalid FeatureCollection");const d=s.store.createRenderBatch();let u=s.store.getAllIds().slice();const g=i.add(p),m=new w(g);return u=u.filter(T=>!m.has(T)),u.length&&i.delete(u),d(),g},i.add=function(p){const d=JSON.parse(JSON.stringify(Le(p))).features.map(u=>{if(u.id=u.id||vt(),u.geometry===null)throw new Error("Invalid geometry: null");if(s.store.get(u.id)===void 0||s.store.get(u.id).type!==u.geometry.type){const g=Me[u.geometry.type];if(g===void 0)throw new Error(`Invalid geometry type: ${u.geometry.type}.`);const m=new g(s,u);s.store.add(m,{silent:l})}else{const g=s.store.get(u.id),m=g.properties;g.properties=u.properties,ee(m,u.properties)||s.store.featureChanged(g.id,{silent:l}),ee(g.getCoordinates(),u.geometry.coordinates)||g.incomingCoords(u.geometry.coordinates)}return u.id});return s.store.render(),d},i.get=function(p){const d=s.store.get(p);if(d)return d.toGeoJSON()},i.getAll=function(){return{type:f.FEATURE_COLLECTION,features:s.store.getAll().map(p=>p.toGeoJSON())}},i.delete=function(p){return s.store.delete(p,{silent:l}),i.getMode()!==E.DIRECT_SELECT||s.store.getSelectedIds().length?s.store.render():s.events.changeMode(E.SIMPLE_SELECT,void 0,{silent:l}),i},i.deleteAll=function(){return s.store.delete(s.store.getAllIds(),{silent:l}),i.getMode()===E.DIRECT_SELECT?s.events.changeMode(E.SIMPLE_SELECT,void 0,{silent:l}):s.store.render(),i},i.changeMode=function(p,d={}){return p===E.SIMPLE_SELECT&&i.getMode()===E.SIMPLE_SELECT?(oe(d.featureIds||[],s.store.getSelectedIds())||(s.store.setSelected(d.featureIds,{silent:l}),s.store.render()),i):(p===E.DIRECT_SELECT&&i.getMode()===E.DIRECT_SELECT&&d.featureId===s.store.getSelectedIds()[0]||s.events.changeMode(p,d,{silent:l}),i)},i.getMode=function(){return s.events.getMode()},i.trash=function(){return s.events.trash({silent:l}),i},i.combineFeatures=function(){return s.events.combineFeatures({silent:l}),i},i.uncombineFeatures=function(){return s.events.uncombineFeatures({silent:l}),i},i.setFeatureProperty=function(p,d,u){return s.store.setFeatureProperty(p,d,u,{silent:l}),i},i}(r,n),r.api=n;const a=Ce(r);return n.onAdd=a.onAdd,n.onRemove=a.onRemove,n.types=b,n.options=o,n};function ht(o){be(o,this)}return ht.modes=Wt,ht.constants=Ft,ht.lib=Ne,ht},typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).MapboxDraw=t();
