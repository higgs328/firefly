import{a as de,b as L,c as T,d as me}from"./chunk-JUHBLAZ7.js";import"./chunk-XPTSGTNZ.js";import{a as le}from"./chunk-AP7VLAWJ.js";import{a as se,b as re,c as ae,d as ne}from"./chunk-7WESBCZZ.js";import{a as A}from"./chunk-C6GAOMLO.js";import"./chunk-BNOCJUWF.js";import"./chunk-FZV4JEHO.js";import"./chunk-OW4BGWW5.js";import"./chunk-52JRYXZN.js";import{a as j}from"./chunk-PT2T74VZ.js";import"./chunk-AC55GQHL.js";import{a as R}from"./chunk-FHBFWDFD.js";import"./chunk-D4ULQQN7.js";import"./chunk-QAHTJVUZ.js";import"./chunk-L7NOU4T2.js";import"./chunk-QCZ3ZIGQ.js";import"./chunk-T6WMVIUG.js";import"./chunk-LORHDXEB.js";import{a as H}from"./chunk-6F25LG6O.js";import"./chunk-EM35R6FY.js";import"./chunk-ALWV3RJ2.js";import"./chunk-QXXXCEV5.js";import"./chunk-6B5XFA6F.js";import"./chunk-OLOKUDVI.js";import{i as v}from"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import{c as ie}from"./chunk-EQZWYK27.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import{a as h}from"./chunk-AXYQJCCX.js";import{a as s}from"./chunk-5XCFNEYX.js";import{a as u}from"./chunk-GQL2MBZT.js";import{b as C}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import{e as oe}from"./chunk-FB4M3WPV.js";import{a as y}from"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import{a as E}from"./chunk-7P44K2YD.js";import{b as te}from"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import{d as ee}from"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import{d as N}from"./chunk-VDO6JJ3Y.js";import{a as Y,c as Z}from"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as _,k as g}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as o}from"./chunk-QGVBCWUY.js";import{H as $}from"./chunk-MYO4NP2N.js";import{e as r}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as d}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import{b as P,d as X}from"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{a as S,b as Q,c as O}from"./chunk-VTHXE323.js";var m="esri-shadow-cast",b={base:m,timeRange:`${m}__time-range`,timeRangeIndicator:`${m}__time-range__indicator`,datePickerContainer:`${m}__date-picker-container`,datePicker:`${m}__date-picker`,visualization:`${m}__visualization`,visualizationSelect:`${m}__visualization__select`,visualizationConfigHidden:`${m}__visualization__config--hidden`},he=`${m}__label`,pe=`${m}__threshold-config`,G={base:pe,valueLabel:`${pe}__value-label`},ce=`${m}__duration-config`,q={base:ce,radioGroup:`${ce}__radio-group`},be=`${m}__discrete-config`,ve={base:be},ue=`${m}__tooltip`,J={base:ue,content:`${ue}__content`};var w=class extends ${constructor(){super(...arguments),this.timeRangeSlider=!0,this.timezone=!0,this.datePicker=!0,this.visualizationOptions=!0,this.colorPicker=!0,this.tooltip=!0}};o([r()],w.prototype,"timeRangeSlider",void 0),o([r()],w.prototype,"timezone",void 0),o([r()],w.prototype,"datePicker",void 0),o([r()],w.prototype,"visualizationOptions",void 0),o([r()],w.prototype,"colorPicker",void 0),o([r()],w.prototype,"tooltip",void 0),w=o([d("esri.widgets.ShadowCast.ShadowCastVisibleElements")],w);var K=w;function B(e,t="milliseconds",i={}){let a={locale:Ce(),numberingSystem:"latn"},n;return n=e?N.fromMillis(v(e,t,"milliseconds"),a).rescale():N.fromObject({seconds:0},a),n.toHuman(S({listStyle:"narrow",unitDisplay:"long"},i))}function Ce(){return Z()==="bs"?"hr":Y()}function D(e,t){let c=e,{for:i,label:a,tabIndex:n}=c,l=O(c,["for","label","tabIndex"]);return s("div",S({class:oe(he,l?.class),key:i},l),s("calcite-label",{for:i,scale:"s",tabIndex:n},a),t)}var F="esri-color-picker",U={base:F,backgroundPattern:`${F}__bg-pattern`,toggleButton:`${F}__toggle-button`,popover:`${F}__popover`},f=class extends u{constructor(e,t){super(e,t),this.value=new H,this.alphaEnabled=!0,this._containerElement=null,this._button=null,this._open=!1,this._onColorInput=i=>{let a=i.currentTarget.value,n=typeof a=="string"?new H(a):new H;this.value=n,this.onChange?.(n)}}initialize(){this.addHandles(_(()=>({container:this._containerElement,value:this.value}),({container:e,value:t})=>{e?.style.setProperty("--esri-color-picker-value",t.toCss(!0))},g))}loadDependencies(){return C({button:()=>import("./chunk-K3RCADAN.js"),"color-picker":()=>import("./chunk-6MTEQTDK.js"),popover:()=>import("./chunk-J5HY7FQ5.js")})}render(){let e=this._messages,t=this._open?e.close:e.open;return s("div",{afterCreate:i=>this._containerElement=i,class:this.classes(U.base,this.class)},s("div",{class:U.backgroundPattern,key:"background-pattern"}),s("calcite-button",{afterCreate:i=>this._button=i,appearance:"transparent",class:U.toggleButton,key:"popover-trigger",kind:"neutral",label:t,scale:"s",tabIndex:-1,title:t}),s("calcite-popover",{autoClose:!0,class:U.popover,key:"popover",label:e.label,overlayPositioning:"fixed",referenceElement:this._button,onCalcitePopoverClose:()=>this._open=!1,onCalcitePopoverOpen:()=>this._open=!0},s("calcite-color-picker",{alphaChannel:this.alphaEnabled,channelsDisabled:!0,key:"color-picker",savedDisabled:!0,value:this.value.toCss(!0),onCalciteColorPickerInput:this._onColorInput})))}};o([r()],f.prototype,"class",void 0),o([r()],f.prototype,"value",void 0),o([r()],f.prototype,"alphaEnabled",void 0),o([r()],f.prototype,"onChange",void 0),o([r()],f.prototype,"_containerElement",void 0),o([r()],f.prototype,"_button",void 0),o([r()],f.prototype,"_open",void 0),o([r(),h("esri/widgets/support/t9n/ColorPicker")],f.prototype,"_messages",void 0),f=o([d("esri.widgets.support.ColorPicker")],f);function I(e){return s(D,{for:e.id,label:e.label,tabIndex:-1},s(f,{id:e.id,value:e.value,onChange:e.onChange}))}var V=class extends u{constructor(e){super(e),this.colorPickerVisible=!0,this._selectId=`select-${y()}`,this._colorPickerId=`color-picker-${y()}`,this._onColorChange=t=>{this.options.color=t}}loadDependencies(){return C({label:()=>import("./chunk-S24JESVO.js"),option:()=>import("./chunk-MKZWVLGJ.js"),select:()=>import("./chunk-YZG2OI4V.js")})}render(){let e=this._messages.discrete,t=e.intervalLabel,{color:i,interval:a,intervalOptions:n}=this.options;return s("div",{class:ve.base},s(D,{for:this._selectId,label:t},s("calcite-select",{bind:this,id:this._selectId,label:t,onCalciteSelectChange:this._onIntervalChange},n.toArray().map(l=>s("calcite-option",{key:l,selected:l===a,value:String(l)},B(l))))),this.colorPickerVisible?s(I,{id:this._colorPickerId,label:e.colorLabel,value:i,onChange:this._onColorChange}):null)}_onIntervalChange(e){let t=parseInt(e.currentTarget.selectedOption?.value,10);Number.isFinite(t)&&(this.options.interval=t)}};o([r()],V.prototype,"options",void 0),o([r()],V.prototype,"colorPickerVisible",void 0),o([r(),h("esri/widgets/ShadowCast/t9n/ShadowCast")],V.prototype,"_messages",void 0),V=o([d("esri.widgets.ShadowCast.components.DiscreteConfigurator")],V);var z=class extends u{constructor(e){super(e),this.colorPickerVisible=!0,this._modeSelectorId=`mode-selector-${y()}`,this._colorPickerId=`color-picker-${y()}`,this._onColorChange=t=>{this.options.color=t},this._setContinuous=()=>{this.options.mode=L.Continuous},this._setHourly=()=>{this.options.mode=L.Hourly}}loadDependencies(){return C({button:()=>import("./chunk-K3RCADAN.js"),label:()=>import("./chunk-S24JESVO.js")})}render(){let e=this._messages.duration,{color:t,mode:i}=this.options;return s("div",{class:q.base},s(D,{for:this._modeSelectorId,label:e.modeLabel},s("div",{class:q.radioGroup},s(fe,{active:i===L.Continuous,label:e.continuousLabel,onclick:this._setContinuous}),s(fe,{active:i===L.Hourly,label:e.hourlyLabel,onclick:this._setHourly}))),this.colorPickerVisible?s(I,{id:this._colorPickerId,label:e.colorLabel,value:t,onChange:this._onColorChange}):null)}};function fe(a){var n=a,{active:e,label:t}=n,i=O(n,["active","label"]);return s("calcite-button",S({alignment:"center",appearance:e?"solid":"outline",scale:"s",width:"full"},i),t)}o([r()],z.prototype,"options",void 0),o([r()],z.prototype,"colorPickerVisible",void 0),o([r(),h("esri/widgets/ShadowCast/t9n/ShadowCast")],z.prototype,"_messages",void 0),z=o([d("esri.widgets.ShadowCast.components.DurationConfigurator")],z);var ye=v(1,"minutes","milliseconds"),_e=v(15,"minutes","milliseconds"),x=class extends u{constructor(e,t){super(e,t),this.accumulatedShadowTime=null,this._messages=null}render(){let e=this._formattedContent;return s("div",{class:J.base},e?s("div",{class:J.content},e):null)}get _formattedContent(){let e=this._messages,t=this.accumulatedShadowTime;if(e==null||t==null)return null;let i=ie(t,t<_e?ye:_e);return E(e.timeInShadow,{duration:B(i)})}};o([r()],x.prototype,"accumulatedShadowTime",void 0),o([r()],x.prototype,"view",void 0),o([r(),h("esri/widgets/ShadowCast/t9n/ShadowCast")],x.prototype,"_messages",void 0),o([r({readOnly:!0})],x.prototype,"_formattedContent",null),x=o([d("esri.widgets.ShadowCast.components.ShadowTooltipContent")],x);var M=class extends ${constructor(e){super(e),this._updateHandle=null,this._contentContainer=this._createContainer()}initialize(){this.container.appendChild(this._contentContainer),this._contentWidget=new x({},this._contentContainer),this._updateHandle=_(()=>{let e=this._contentContainer,{screenPoint:t,accumulatedShadowTime:i}=this.viewModel.tooltip;return{contentContainer:e,screenPoint:t,accumulatedShadowTime:i}},e=>this._update(e),g)}destroy(){this._updateHandle=X(this._updateHandle),this._contentWidget=P(this._contentWidget),this.container.contains(this._contentContainer)&&this.container.removeChild(this._contentContainer)}get testData(){}_update({contentContainer:e,screenPoint:t,accumulatedShadowTime:i}){let{style:a}=e;t!=null?(a.display="block",a.transform=`translate(${t.x}px, ${t.y}px)`,this._contentWidget.accumulatedShadowTime=i):a.display="none"}_createContainer(){let e=document.createElement("div"),{style:t}=e;return t.position="absolute",t.top="0",t.left="0",e}};o([r()],M.prototype,"viewModel",void 0),o([r()],M.prototype,"container",void 0),o([r()],M.prototype,"_contentContainer",void 0),o([r()],M.prototype,"_contentWidget",void 0),M=o([d("esri.widgets.ShadowCast.components.ShadowTooltip")],M);var k=class extends u{constructor(e){super(e),this.colorPickerVisible=!0,this._valueSliderId=`value-slider-${y()}`,this._colorPickerId=`color-picker-${y()}`,this._valueSlider=new A({visibleElements:{labels:!1,rangeLabels:!1},steps:v(30,"minutes","milliseconds"),labelFormatFunction:(t,i)=>{let a=v(t,"milliseconds","hours");return i==="tick"?te(a,{maximumFractionDigits:0}):""}}),this._onColorChange=t=>{this.options.color=t}}initialize(){let e=({value:t})=>{this.options.value=t};this.addHandles([_(()=>{let{value:t,minValue:i,maxValue:a}=this.options;return{value:t,minValue:i,maxValue:a}},({value:t,minValue:i,maxValue:a})=>{let n=this._valueSlider;n.min=i,n.max=a,n.values=[t];let l=a-i,c=Math.floor(v(l,"milliseconds","hours"));n.tickConfigs=[{mode:"count",values:2*c+1,labelsVisible:!1},{mode:"count",values:c+1,labelsVisible:!0}]},g),this._valueSlider.on("thumb-change",e),this._valueSlider.on("thumb-drag",e)])}loadDependencies(){return C({label:()=>import("./chunk-S24JESVO.js")})}destroy(){this._valueSlider=P(this._valueSlider)}render(){let e=this._messages.threshold,{color:t}=this.options;return s("div",{class:G.base},s(D,{class:G.valueLabel,for:this._valueSliderId,label:e.valueLabel},this._valueSlider.render()),this.colorPickerVisible?s(I,{id:this._colorPickerId,label:e.colorLabel,value:t,onChange:this._onColorChange}):null)}get testData(){}};o([r()],k.prototype,"options",void 0),o([r()],k.prototype,"colorPickerVisible",void 0),o([r()],k.prototype,"testData",null),o([r()],k.prototype,"_valueSlider",void 0),o([r(),h("esri/widgets/ShadowCast/t9n/ShadowCast")],k.prototype,"_messages",void 0),k=o([d("esri.widgets.ShadowCast.components.ThresholdConfigurator")],k);var W;(function(e){e.Slider="slider"})(W||(W={}));var we={labelFormatFunction:re,min:0,max:1439,steps:15,rangeLabelInputsEnabled:!1,visibleElements:{labels:!1,rangeLabels:!1},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:(e,t,i)=>ae({tickElement:t,labelElement:i})},{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:(e,t)=>ne({tickElement:t})}]},p=class extends u{constructor(e,t){super(e,t),this.viewModel=null,this.headingLevel=4,this.visibleElements=new K,this._defaultViewModel=null,this._timeSlider=new A(Q(S({},we),{container:document.createElement("div")})),this._tooltip=null,this._onTimezoneChange=i=>{this.viewModel.utcOffset=i},this._onDateChange=i=>{let a=i.currentTarget.valueAsDate;this.viewModel.date=Array.isArray(a)?a[0]:a},e?.viewModel||(this._defaultViewModel=new me({view:e?.view}),this.viewModel=this._defaultViewModel)}initialize(){this.addHandles([_(()=>({viewModel:this.viewModel,slider:this._timeSlider}),e=>this._connectTimeSlider(e),g),_(()=>({container:this.view?.surface,viewModel:this.viewModel,tooltipVisible:this.visibleElements.tooltip}),({container:e,viewModel:t,tooltipVisible:i})=>{this._tooltip=P(this._tooltip),e!=null&&i&&(this._tooltip=new M({viewModel:t,container:e}))},g),_(()=>({viewModel:this.viewModel,visible:this.visible}),({viewModel:e,visible:t})=>e.setRunning(t),g)])}destroy(){this._timeSlider=P(this._timeSlider),this._tooltip=P(this._tooltip),this._defaultViewModel!=null&&this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}loadDependencies(){return C({"input-date-picker":()=>import("./chunk-GYG7SVRX.js"),option:()=>import("./chunk-MKZWVLGJ.js"),select:()=>import("./chunk-YZG2OI4V.js")})}render(){let{visibleElements:e,viewModel:t}=this,i=t.state===de.Disabled;return s("div",{class:this.classes(b.base,R.widget,R.panel,{[R.widgetDisabled]:i}),key:this},this._renderTimeRangeSection(),e.visualizationOptions?this._renderVisualizationOptionsSection():null)}get view(){return this.viewModel?.view}set view(e){this.viewModel&&(this.viewModel.view=e)}get icon(){return"measure-building-height-shadow"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get testData(){}_connectTimeSlider({viewModel:e,slider:t}){if(this.removeHandles(W.Slider),t==null)return;let i=l=>v(l,"milliseconds","minutes"),a=l=>v(l,"minutes","milliseconds"),n=({index:l,value:c})=>{l===0?e.startTimeOfDay=a(c):e.endTimeOfDay=a(c)};this.addHandles([_(()=>[e.startTimeOfDay,e.endTimeOfDay],l=>{t.values=l.map(i)},g),t.on("thumb-change",n),t.on("thumb-drag",n),t.on("segment-drag",()=>{[e.startTimeOfDay,e.endTimeOfDay]=t.values.map(a)})],W.Slider)}_renderTimeRangeSection(){let{visibleElements:e}=this;return e.timeRangeSlider||e.datePicker?s("section",{class:b.timeRange,key:"time-range"},s(j,{level:this.headingLevel},this.messages.timeLabel),e.timeRangeSlider?this._renderTimeRange():null,e.datePicker?this._renderDatePicker():null):null}_renderTimeRange(){let{messages:e,viewModel:t,visibleElements:i}=this,{startTimeOfDay:a,endTimeOfDay:n}=t,[l,c]=[a,n].map(ge=>ee(new Date(ge),se));return[s("div",{class:b.timeRangeIndicator,key:"time-range-indicator"},E(e.timeRange,{start:l,end:c}),i.timezone?s(le,{disabled:this._timeSlider?.disabled,value:t.utcOffset,onChange:this._onTimezoneChange}):null),s("div",{afterCreate:this._timeSliderContainerAfterCreate,afterRemoved:this._timeSliderContainerAfterRemoved,bind:this,key:"time-slider-container"})]}_timeSliderContainerAfterCreate(e){let t=this._timeSlider?.container;t&&e.appendChild(t)}_timeSliderContainerAfterRemoved(e){let t=this._timeSlider?.container;t&&e.removeChild(t)}_renderDatePicker(){return s("div",{class:b.datePickerContainer,key:b.datePickerContainer},s("calcite-input-date-picker",{class:b.datePicker,"data-testid":"date-picker",key:b.datePicker,overlayPositioning:"fixed",placement:"bottom",valueAsDate:this.viewModel.date,onCalciteInputDatePickerChange:this._onDateChange}))}_renderVisualizationOptionsSection(){let{headingLevel:e,messages:t,viewModel:i,visibleElements:a}=this,n=a.colorPicker,l=c=>this.classes(i.visualizationType===c?null:b.visualizationConfigHidden);return s("section",{class:b.visualization,key:"visualization"},s(j,{level:e},t.visualizationLabel),this._renderVisualizationSelect(),s("div",{class:l(T.Threshold),key:"threshold-configurator"},s(k,{colorPickerVisible:n,options:i.thresholdOptions})),s("div",{class:l(T.Duration),key:"duration-configurator"},s(z,{colorPickerVisible:n,options:i.durationOptions})),s("div",{class:l(T.Discrete),key:"discrete-configurator"},s(V,{colorPickerVisible:n,options:i.discreteOptions})))}_renderVisualizationSelect(){let e=this.messages,t=this.viewModel.visualizationType;return s("calcite-select",{bind:this,class:b.visualizationSelect,key:"visualization-select",label:e.visualizationLabel,onCalciteSelectChange:this._onVisualizationTypeChange},[{type:T.Threshold,label:e.threshold.label},{type:T.Duration,label:e.duration.label},{type:T.Discrete,label:e.discrete.label}].map(({type:i,label:a})=>s("calcite-option",{selected:i===t,value:i},a)))}_onVisualizationTypeChange(e){let t=e.currentTarget.selectedOption?.value;this.viewModel.visualizationType=t??T.Threshold}};o([r()],p.prototype,"viewModel",void 0),o([r()],p.prototype,"view",null),o([r()],p.prototype,"headingLevel",void 0),o([r()],p.prototype,"icon",null),o([r()],p.prototype,"label",null),o([r({type:K,nonNullable:!0})],p.prototype,"visibleElements",void 0),o([r(),h("esri/widgets/ShadowCast/t9n/ShadowCast")],p.prototype,"messages",void 0),o([r()],p.prototype,"_defaultViewModel",void 0),o([r()],p.prototype,"_timeSlider",void 0),o([r()],p.prototype,"_tooltip",void 0),p=o([d("esri.widgets.ShadowCast")],p);var wi=p;export{wi as default};
