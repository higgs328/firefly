import{a as ie}from"./chunk-S5YZZGJC.js";import{i as te}from"./chunk-OS4DF7SY.js";import"./chunk-XPTSGTNZ.js";import{c as x,d as ee}from"./chunk-M575ORV2.js";import{a as q,b as J,e as P,f as K,g as Q,h as _}from"./chunk-KCKAEIDJ.js";import{a as N,b as j}from"./chunk-FW46ST6K.js";import{a as Z,b as F}from"./chunk-W33V666B.js";import"./chunk-YWDWC6KV.js";import{a as S}from"./chunk-YKKZOWZ6.js";import"./chunk-EU7L5KPI.js";import"./chunk-F6V2IWE6.js";import"./chunk-RHR7CL4R.js";import{c as A,d as U,oa as u,pa as $}from"./chunk-Q7MLP54D.js";import{a as V,b as M}from"./chunk-6OWZRPJO.js";import"./chunk-67GIWMYL.js";import"./chunk-CISTQZ5X.js";import"./chunk-H2NTHPNN.js";import"./chunk-Z7TBAZRW.js";import"./chunk-J5AEP4US.js";import"./chunk-KPT44MCK.js";import"./chunk-XKFJ6GWH.js";import"./chunk-L7NOU4T2.js";import"./chunk-G2JMPZCN.js";import"./chunk-UKAGN54W.js";import"./chunk-QSQIQSC6.js";import"./chunk-AYNBEMCC.js";import"./chunk-LNYBTIG7.js";import"./chunk-N62DQME2.js";import"./chunk-QCZ3ZIGQ.js";import"./chunk-7SDNM7YV.js";import"./chunk-4NUW747S.js";import"./chunk-T6WMVIUG.js";import"./chunk-JPMGMA4B.js";import"./chunk-YW3L7OMP.js";import"./chunk-F2BQ2GD6.js";import"./chunk-R3XLNYYB.js";import"./chunk-XLL67PCY.js";import"./chunk-MCO7DSFO.js";import"./chunk-IIROCMOY.js";import"./chunk-RWCIDBNQ.js";import"./chunk-EM35R6FY.js";import"./chunk-DJW5LMRG.js";import"./chunk-DEH76MSI.js";import"./chunk-ALWV3RJ2.js";import"./chunk-QXXXCEV5.js";import"./chunk-6B5XFA6F.js";import"./chunk-DA3SDKGO.js";import"./chunk-ZOEPYNM4.js";import"./chunk-57VFBGF3.js";import"./chunk-GWBRHLNH.js";import"./chunk-BJH4F4SM.js";import"./chunk-Z3RBZHAK.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-ZTOZWLEE.js";import{a as I}from"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-KVM6SHDX.js";import"./chunk-EQZWYK27.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import{L}from"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-O3EGNJTY.js";import"./chunk-GHKL3NOH.js";import{a as T}from"./chunk-WGAOVKGR.js";import{a as E}from"./chunk-MDSLION2.js";import{g as W}from"./chunk-FB4M3WPV.js";import"./chunk-G4DZJMGT.js";import"./chunk-WTB3O6DJ.js";import{a as O}from"./chunk-7P44K2YD.js";import{b as G}from"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import{p as R}from"./chunk-4PTIEWMT.js";import{a as D,d as y}from"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{a as w,b as H,f as B}from"./chunk-VTHXE323.js";function oe(e,i,n=10){let t=ne(i-e,!1);if(t===0)return[e,i];let o=ne(t/(n-1),!0);return[Math.floor(e/o)*o,Math.ceil(i/o)*o]}function ne(e,i){let n=Math.floor(Math.log10(e)),t=e/10**n,o;return o=i?t<1.5?1:t<3?2:t<5?2.5:t<7?5:10:t<=1?1:t<=2?2:t<=3?2.5:t<=5?5:10,o*10**n}var b="#f8f8f8",me="#a9a9a9",h="#323232",Ae="line",ve="fill",v=15,g=12,ae=.001,be=.1,ye=.02,ue={fontFamily:"Avenir Next",paddingBottom:g/2,paddingLeft:0,paddingRight:0,paddingTop:0,axisGridStroke:"#f4f4f4",axisLabelsFontSize:9,axisLabelsFontWeight:"400",axisLabelsColor:me,axisTooltipFontSize:12,axisTooltipBackgroundColor:h,axisTooltipLabelColor:b,axisTooltipPaddingTop:Math.round(g/4),axisTooltipPaddingBottom:Math.round(g/4),axisTooltipPaddingHorizontal:Math.round(v/4),xAxisMinGridDistance:50,xAxisLabelsSpacing:Math.round(g/2),xAxisMinLabelPosition:.05,xAxisMaxLabelPosition:.9,yAxisMinGridDistance:30,yAxisLabelSpacing:Math.round(v/4),yAxisMinLabelPosition:0,yAxisMaxLabelPosition:.8,seriesTooltipFontSize:12,seriesTooltipBackgroundColor:b,seriesTooltipLabelColor:h,seriesFillLighten:.9,seriesTooltipSpacing:g/2,seriesTooltipPaddingVertical:Math.round(v/4),seriesTooltipPaddingHorizontal:Math.round(v/4)},Te=H(w({},ue),{axisGridStroke:h,axisLabelsColor:me,axisTooltipBackgroundColor:h,axisTooltipLabelColor:b,seriesTooltipBackgroundColor:h,seriesTooltipLabelColor:b,seriesFillLighten:-.75}),X={minX:void 0,maxX:void 0,minY:void 0,maxY:void 0};function rt(e){return B(this,null,function*(){let i=yield j(e.container);R(e.abortOptions);let n=E(),t=n?Te:ue;i.setThemes(n?[F.new(i),Z.new(i)]:[F.new(i)]);let o=W(e.container),a=i.container.children.push(q.new(i,{panX:!0,panY:!0,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,paddingLeft:o?t.paddingRight:t.paddingLeft,paddingRight:o?t.paddingLeft:t.paddingRight,maxTooltipDistance:-1}));a.zoomOutButton.set("forceHidden",!0);let s=a.xAxes.push(P.new(i,{renderer:K.new(i,{})})),l=a.yAxes.push(P.new(i,{renderer:Q.new(i,{})})),d=T(null),r=T("loading"),c={params:e,chart:a,xAxis:s,yAxis:l,seriesInfos:new Map,messages:null,theme:t,pointerIsOver:!1,rtl:o,get state(){return r.value},get data(){return d.value},set data(f){d.value=f}};Me(c),Se(c),Le(c);let p=y([He(c,e.onRangeChange),Be(c,e.onCursorPositionChange),Y(i.events.once("frameended",()=>{r.value="ready"})),Y(i)]);return{destroy:()=>{p.remove(),r.value="destroyed"},update:f=>{f.data===c.data&&f.messages===c.messages||k(c)||Fe(c,f)},zoomOut:()=>fe(c),test:void 0}})}function k(e){return e.state==="destroyed"}function Le({chart:e,xAxis:i,yAxis:n}){let t=J.new(e.root,{behavior:"none",xAxis:i,yAxis:n,snapToSeriesBy:"y"});t.lineY.set("visible",!1),e.set("cursor",t)}function Me(e){let{chart:i,xAxis:n,theme:t}=e;n.setAll({extraMax:0,extraMin:0,maxDeviation:0,numberFormatter:xe(e,"distance"),strictMinMax:!0,strictMinMaxSelection:!0}),n.axisHeader.set("forceHidden",!0);let o=n.get("renderer");o.setAll({inside:!1,minGridDistance:t.xAxisMinGridDistance}),o.labels.template.setAll({centerX:A,centerY:A,fill:u(t.axisLabelsColor),fontFamily:t.fontFamily,fontSize:t.axisLabelsFontSize,fontWeight:t.axisLabelsFontWeight,maxPosition:t.xAxisMaxLabelPosition,minPosition:t.xAxisMinLabelPosition,paddingLeft:0,paddingRight:0,paddingTop:t.xAxisLabelsSpacing});let a=n.set("tooltip",S.new(i.root,{paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0}));a.get("background")?.setAll({fill:u(t.axisTooltipBackgroundColor),stroke:void 0}),a.label.setAll({fill:u(t.axisTooltipLabelColor),fontFamily:t.fontFamily,fontSize:t.axisTooltipFontSize,paddingBottom:t.axisTooltipPaddingBottom,paddingLeft:t.axisTooltipPaddingHorizontal,paddingRight:t.axisTooltipPaddingHorizontal,paddingTop:t.axisTooltipPaddingTop,direction:e.rtl?"rtl":"ltr"}),o.grid.template.setAll({strokeOpacity:1,stroke:u(t.axisGridStroke)})}function Se(e){let{yAxis:i,theme:n,rtl:t}=e;i.setAll({baseValue:x().noDataValue,extraMax:0,extraMin:0,maxDeviation:0,numberFormatter:xe(e,"elevation"),strictMinMax:!0,strictMinMaxSelection:!0,tooltip:void 0}),i.axisHeader.set("visible",!1);let o=i.get("renderer");o.setAll({minGridDistance:n.yAxisMinGridDistance,opposite:t,inside:!0}),o.labels.template.setAll({centerX:A,centerY:U,fill:u(n.axisLabelsColor),fontFamily:n.fontFamily,fontSize:n.axisLabelsFontSize,fontWeight:n.axisLabelsFontWeight,maxPosition:n.yAxisMaxLabelPosition,minPosition:n.yAxisMinLabelPosition,paddingBottom:0,paddingLeft:t?0:n.yAxisLabelSpacing,paddingRight:t?n.yAxisLabelSpacing:0,paddingTop:0,textAlign:"start"}),o.grid.template.setAll({strokeOpacity:1,stroke:u(n.axisGridStroke)})}function Fe(e,i){if(k(e))return;let n=e.data??void 0,t=i.data??void 0;e.chart.get("cursor")?.set("forceHidden",!t?.refined);let o=n!==t,a=n?.effectiveUnits!==t?.effectiveUnits,s=n?.uniformScaling!==t?.uniformScaling;e.data=t,e.messages=i.messages,(o||a)&&(Pe(e),Ye(e)),s&&fe(e),C(e)}function fe(e){k(e)||(e.xAxis.zoom(0,1),e.yAxis.zoom(0,1))}function Pe(e){let{chart:i,data:n,xAxis:t,yAxis:o}=e,{minX:a,maxX:s,minY:l,maxY:d}=Xe({data:n,pixelWidth:t.width(),pixelHeight:o.height()}),r=!!n?.uniformScaling,c=!!n?.refined;i.setAll({panX:!0,panY:r,pinchZoomX:c,pinchZoomY:c&&r,wheelX:"panX",wheelY:c?r?"zoomXY":"zoomX":"none"}),t.setAll({max:s,min:a,panX:!0,panY:!1,zoomX:!0,zoomY:r}),o.setAll({max:d,min:l,panX:!1,panY:r,zoomX:r,zoomY:r})}function Xe({data:e,pixelWidth:i,pixelHeight:n}){if(e==null)return X;let t=e.statistics,o=0,a=t?.maxDistance,s=t?.minElevation,l=t?.maxElevation;if(a==null||s==null||l==null)return X;let d=Math.max(a-o,ae),r=Math.max(l-s,ae),c=e.effectiveUnits;if(e.dynamicElevationRange){let p=L(d,c.distance,c.elevation);r=Math.max(r,p/x().maxChartRatio)}return s-=ye*r,l=s+r+be*r,[s,l]=oe(s,l,10),r=l-s,e.uniformScaling?Ce({data:e,bounds:{minX:o,maxX:a,minY:s,maxY:l},pixelWidth:i,pixelHeight:n,centered:!0}):{minX:o,maxX:o+d,minY:s,maxY:s+r}}function Ce({data:e,bounds:i,pixelWidth:n,pixelHeight:t,centered:o}){if(e==null)return i;let{minX:a,maxX:s,minY:l,maxY:d}=i;if(a==null||s==null||l==null||d==null)return X;let r=s-a,c=d-l,p=e.effectiveUnits,m=L(c,p.elevation,p.distance)/t/(r/n);return m>=1?[a,s]=se([a,s],m,o):[l,d]=se([l,d],1/m,o),{minX:a,maxX:s,minY:l,maxY:d}}function se([e,i],n,t){let o=(i-e)*n;if(t){let a=(e+i)/2-o/2;return[a,a+o]}return[e,e+o]}function Ye(e){let{chart:i,data:n,seriesInfos:t,xAxis:o,yAxis:a}=e;if(n==null||n.lines.length===0)return void i.series.clear();let s=new Map,l=new Set(i.series.values),d=n.lines.length;for(let r=0;r<d;r++){let c=n.lines[r],p=t.get(c.id);p?(p.fill&&l.delete(p.fill),l.delete(p.line)):(p=ze(e,c),p.fill&&i.series.push(p.fill),i.series.push(p.line)),s.set(p.id,p);let m=d-r-1;p.fill?.set("layer",m),p.line.set("layer",d+m),ke(e,p,c)}e.seriesInfos=s;for(let r of l)i.series.removeValue(r);o.set("layer",d+1),a.set("layer",d+2)}function ke({theme:e},i,n){let t=u(n.color.toCss()),o=n.samples??[],a=o.length>0,{line:s,fill:l}=i;s.set("visible",a),s.set("stroke",t),l?.set("visible",a),l?.set("fill",$.lighten(t,e.seriesFillLighten)),s.data.setAll(o),l?.data.setAll(o)}function ze(e,i){let{id:n}=i,t=le(e,`${Ae}-${n}`),o=we(e);t.setAll({dy:i.chartStrokeOffsetY,tooltip:o}),t.strokes.template.setAll({strokeWidth:i.chartStrokeWidth});let a=null;return i.chartFillEnabled&&(a=le(e,`${ve}-${n}`),a.fills.template.setAll({fillOpacity:1,visible:!0})),{id:n,line:t,fill:a}}function le(e,i){return _.new(e.chart.root,{connect:!1,excludeFromTotal:!0,fill:void 0,id:i,stroke:void 0,valueXField:"distance",valueYField:"elevation",xAxis:e.xAxis,yAxis:e.yAxis})}function we({theme:e,chart:i,rtl:n}){let t=S.new(i.root,{autoTextColor:!1,forceHidden:!0,getFillFromSprite:!1,getLabelFillFromSprite:!1,pointerOrientation:"vertical",visible:!1}),o=e.seriesTooltipPaddingHorizontal,a=e.seriesTooltipPaddingVertical;return t.label.setAll({fill:u(e.seriesTooltipLabelColor),fontFamily:e.fontFamily,fontSize:e.seriesTooltipFontSize,paddingBottom:a,paddingLeft:o,paddingRight:o,paddingTop:a,textAlign:n?"end":"start",direction:"ltr"}),t.get("background")?.setAll({stroke:void 0,fill:u(e.seriesTooltipBackgroundColor)}),t.adapters.add("dy",s=>{let l=e.seriesTooltipSpacing,d=t.get("pointTo")?.y??0;return(s??0)+(t.y()>d?l:-l)}),t}function He(e,i){let{xAxis:n,yAxis:t}=e,o=()=>{i(re(n),re(t))},a=s=>[s.on("start",o),s.on("end",o)];return he([...a(n),...a(t)])}function re(e){let i=Math.abs((e.get("end")??0)-(e.get("start")??0)),n=i!==0?1/i:1;return Math.abs(1-n)<I()?1:n}function Be(e,i){let{chart:n,xAxis:t,yAxis:o}=e,a=n.get("cursor"),s=n.plotContainer.events,l=r=>{e.pointerIsOver=r,C(e)},d=()=>{l(!1),i(null,null)};return he([a?.events.on("cursormoved",()=>{if(!e.pointerIsOver)return;C(e);let r=a?.getPrivate("positionX")??0,c=a?.getPrivate("positionY")??0,p=e.data;if(p?.statistics!=null){let{maxDistance:m,minElevation:f,maxElevation:z}=p.statistics;m!=null&&(r=de(r,ce(t),pe(t),0,m)),f!=null&&z!=null&&(c=de(c,ce(o),pe(o),f,z))}i(r,c)}),s.on("pointerover",()=>l(!0)),s.on("pointerout",d),s.on("blur",d)])}function de(e,i,n,t,o){return(i+e*(n-i)-t)/(o-t)}function C(e){let i=De(e);if(!i)return void e.seriesInfos.forEach(n=>{n.line.get("tooltip")?.set("forceHidden",!0)});e.seriesInfos.forEach(n=>{let t=n.line.get("tooltip");t.set("forceHidden",!1),t.label.set("text",i)}),e.xAxis.getTooltip().setAll({tooltipText:Oe(e)})}function De(e){let{data:i}=e,n=i?.lines.map(t=>({line:t,y:ge(e,t)?.elevation})).sort(Re);return n&&n.length!==0&&n[0].y!=null?n.map(({y:t,line:o})=>Ge(e,o,t)).join(`
`):null}function Re({y:e},{y:i}){return e==null?1:i==null?-1:i-e}function Ge(e,i,n){let{data:t,messages:o}=e;if(t==null||o==null)return"";let a=`[${i.color.toHex()}]\u25CF[/]`,s="  ",l=x().formatPrecision,d=O(o.chartTooltip,{name:ie(i,o),elevation:n!=null?M(o,n,t.effectiveUnits.elevation,l):ee});return e.rtl?d+s+a:a+s+d}function Oe(e){let{data:i,messages:n}=e;if(i==null||n==null)return"";let t=i.lines[0],o=t?ge(e,t):null,a=x().formatPrecision;return o!=null?M(n,o.distance,i.effectiveUnits.distance,a):"-"}function xe(e,i){let n=N.new(e.chart.root,{});return n.format=(t,o,a)=>{let{data:s,messages:l}=e;return l==null||s==null||typeof t=="string"?"":`${G(t,{maximumFractionDigits:a})} ${V(l,s.effectiveUnits[i],"abbr")}`},n}function ge({chart:e,xAxis:i},n){let t=n.samples??[];if(t.length===0)return null;let o=e.get("cursor"),a=o?.getPrivate("positionX")??0,s=i.toAxisPosition(a),l=i.positionToValue(s);return te(t,l,d=>d.distance)}function ce(e){return e.positionToValue(e.get("start")??0)}function pe(e){return e.positionToValue(e.get("end")??1)}function he(e){return y(e.map(Y))}function Y(e){return D(()=>{e?.dispose()})}export{rt as createChart,Xe as getAdjustedBounds};
