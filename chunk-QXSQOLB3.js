import{c as F}from"./chunk-2XTO2IAR.js";import{b as Ot}from"./chunk-KPT44MCK.js";import{c as Gt}from"./chunk-AYNBEMCC.js";import{a as v,b as wt,c as b}from"./chunk-XAHD7XBV.js";import{b as T}from"./chunk-YQNUGDFH.js";import{e as St,j as dt,r as Rt}from"./chunk-7SDNM7YV.js";import{a as Nt}from"./chunk-GJ2QRXGN.js";import{a as D,c as mt}from"./chunk-6QXEFK4U.js";import{d as Tt,e as it}from"./chunk-5L2EJ5RT.js";import{a as H}from"./chunk-PDQQY7RQ.js";import{a as I}from"./chunk-RWCIDBNQ.js";import{b as Z,c as $,d as V,e as q,n as U,u as x,v as ft,w as j,y as Pt}from"./chunk-6B5XFA6F.js";import{a as C,b as ut,c as It}from"./chunk-BOVYXYHK.js";var et;(function(c){function s(r,l){let f=r[l],e=r[l+1],a=r[l+2];return Math.sqrt(f*f+e*e+a*a)}function n(r,l){let f=r[l],e=r[l+1],a=r[l+2],m=1/Math.sqrt(f*f+e*e+a*a);r[l]*=m,r[l+1]*=m,r[l+2]*=m}function t(r,l,f){r[l]*=f,r[l+1]*=f,r[l+2]*=f}function o(r,l,f,e,a,m=l){(a=a||r)[m]=r[l]+f[e],a[m+1]=r[l+1]+f[e+1],a[m+2]=r[l+2]+f[e+2]}function w(r,l,f,e,a,m=l){(a=a||r)[m]=r[l]-f[e],a[m+1]=r[l+1]-f[e+1],a[m+2]=r[l+2]-f[e+2]}c.length=s,c.normalize=n,c.scale=t,c.add=o,c.subtract=w})(et||(et={}));var J=et,yt=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],Ft=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],Ut=[0,0,1,0,1,1,0,1],Dt=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],Ct=new Array(36);for(let c=0;c<6;c++)for(let s=0;s<6;s++)Ct[6*c+s]=c;var k=new Array(36);for(let c=0;c<6;c++)k[6*c]=0,k[6*c+1]=1,k[6*c+2]=2,k[6*c+3]=2,k[6*c+4]=3,k[6*c+5]=0;function ce(c,s){Array.isArray(s)||(s=[s,s,s]);let n=new Array(24);for(let t=0;t<8;t++)n[3*t]=yt[t][0]*s[0],n[3*t+1]=yt[t][1]*s[1],n[3*t+2]=yt[t][2]*s[2];return new F(c,[[I.POSITION,new T(n,Dt,3,!0)],[I.NORMAL,new T(Ft,Ct,3)],[I.UV0,new T(Ut,k,2)]])}var pt=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],vt=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],qt=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],jt=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function ue(c,s){Array.isArray(s)||(s=[s,s,s]);let n=new Array(18);for(let t=0;t<6;t++)n[3*t]=pt[t][0]*s[0],n[3*t+1]=pt[t][1]*s[1],n[3*t+2]=pt[t][2]*s[2];return new F(c,[[I.POSITION,new T(n,qt,3,!0)],[I.NORMAL,new T(vt,jt,3)]])}var nt=b(-.5,0,-.5),ot=b(.5,0,-.5),rt=b(0,0,.5),st=b(0,.5,0),K=v(),Q=v(),X=v(),Y=v(),_=v();q(K,nt,st),q(Q,nt,ot),j(X,K,Q),x(X,X),q(K,ot,st),q(Q,ot,rt),j(Y,K,Q),x(Y,Y),q(K,rt,st),q(Q,rt,nt),j(_,K,Q),x(_,_);var gt=[nt,ot,rt,st],zt=[0,-1,0,X[0],X[1],X[2],Y[0],Y[1],Y[2],_[0],_[1],_[2]],Bt=[0,1,2,3,1,0,3,2,1,3,0,2],kt=[0,0,0,1,1,1,2,2,2,3,3,3];function fe(c,s){Array.isArray(s)||(s=[s,s,s]);let n=new Array(12);for(let t=0;t<4;t++)n[3*t]=gt[t][0]*s[0],n[3*t+1]=gt[t][1]*s[1],n[3*t+2]=gt[t][2]*s[2];return new F(c,[[I.POSITION,new T(n,Bt,3,!0)],[I.NORMAL,new T(zt,kt,3)]])}function ie(c,s,n,t,o={uv:!0}){let w=-Math.PI,r=2*Math.PI,l=-Math.PI/2,f=Math.PI,e=Math.max(3,Math.floor(n)),a=Math.max(2,Math.floor(t)),m=(e+1)*(a+1),M=D(3*m),P=D(3*m),N=D(2*m),p=[],u=0;for(let i=0;i<=a;i++){let G=[],h=i/a,S=l+h*f,d=Math.cos(S);for(let L=0;L<=e;L++){let z=L/e,g=w+z*r,E=Math.cos(g)*d,R=Math.sin(S),tt=-Math.sin(g)*d;M[3*u]=E*s,M[3*u+1]=R*s,M[3*u+2]=tt*s,P[3*u]=E,P[3*u+1]=R,P[3*u+2]=tt,N[2*u]=z,N[2*u+1]=h,G.push(u),++u}p.push(G)}let O=new Array;for(let i=0;i<a;i++)for(let G=0;G<e;G++){let h=p[i][G],S=p[i][G+1],d=p[i+1][G+1],L=p[i+1][G];i===0?(O.push(h),O.push(d),O.push(L)):i===a-1?(O.push(h),O.push(S),O.push(d)):(O.push(h),O.push(S),O.push(d),O.push(d),O.push(L),O.push(h))}let y=[[I.POSITION,new T(M,O,3,!0)],[I.NORMAL,new T(P,O,3,!0)]];return o.uv&&y.push([I.UV0,new T(N,O,2,!0)]),o.offset&&(y[0][0]=I.OFFSET,y.push([I.POSITION,new T(Float64Array.from(o.offset),it(O.length),3,!0)])),new F(c,y)}function me(c,s,n,t){let o=Zt(s,n,t);return new F(c,o)}function Zt(c,s,n){let t=c,o,w;if(n)o=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],w=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{let e=t*(1+Math.sqrt(5))/2;o=[-t,e,0,t,e,0,-t,-e,0,t,-e,0,0,-t,e,0,t,e,0,-t,-e,0,t,-e,e,0,-t,e,0,t,-e,0,-t,-e,0,t],w=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let e=0;e<o.length;e+=3)J.scale(o,e,c/J.length(o,e));let r={};function l(e,a){e>a&&([e,a]=[a,e]);let m=e.toString()+"."+a.toString();if(r[m])return r[m];let M=o.length;return o.length+=3,J.add(o,3*e,o,3*a,o,M),J.scale(o,M,c/J.length(o,M)),M/=3,r[m]=M,M}for(let e=0;e<s;e++){let a=w.length,m=new Array(4*a);for(let M=0;M<a;M+=3){let P=w[M],N=w[M+1],p=w[M+2],u=l(P,N),O=l(N,p),y=l(p,P),i=4*M;m[i]=P,m[i+1]=u,m[i+2]=y,m[i+3]=N,m[i+4]=O,m[i+5]=u,m[i+6]=p,m[i+7]=y,m[i+8]=O,m[i+9]=u,m[i+10]=O,m[i+11]=y}w=m,r={}}let f=mt(o);for(let e=0;e<f.length;e+=3)J.normalize(f,e);return[[I.POSITION,new T(mt(o),w,3,!0)],[I.NORMAL,new T(f,w,3,!0)]]}function we(c,s={}){let{normal:n,position:t,color:o,rotation:w,size:r,centerOffsetAndDistance:l,uvs:f,featureAttribute:e,objectAndLayerIdColor:a=null}=s,m=t?ut(t):C(),M=n?ut(n):It(0,0,1),P=o?[255*o[0],255*o[1],255*o[2],o.length>3?255*o[3]:255]:[255,255,255,255],N=r!=null&&r.length===2?r:[1,1],p=w!=null?[w]:[0],u=it(1),O=[[I.POSITION,new T(m,u,3,!0)],[I.NORMAL,new T(M,u,3,!0)],[I.COLOR,new T(P,u,4,!0)],[I.SIZE,new T(N,u,2)],[I.ROTATION,new T(p,u,1,!0)]];if(f&&O.push([I.UV0,new T(f,u,f.length)]),l!=null){let y=[l[0],l[1],l[2],l[3]];O.push([I.CENTEROFFSETANDDISTANCE,new T(y,u,4)])}if(e){let y=[e[0],e[1],e[2],e[3]];O.push([I.FEATUREATTRIBUTE,new T(y,u,4)])}return new F(c,O,null,Ot.Point,a)}var Ht=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function Oe(c,s=Ht){let n=new Array(12);for(let e=0;e<4;e++)for(let a=0;a<3;a++)n[3*e+a]=s[e][a];let t=[0,1,2,2,3,0],o=[0,0,1],w=[0,0,0,0,0,0],r=[0,0,1,0,1,1,0,1],l=[255,255,255,255],f=[[I.POSITION,new T(n,t,3,!0)],[I.NORMAL,new T(o,w,3,!0)],[I.UV0,new T(r,t,2,!0)],[I.COLOR,new T(l,w,4,!0)]];return new F(c,f)}function Jt(c,s,n,t,o=!0,w=!0){let r=0,l=s,f=c,e=b(0,r,0),a=b(0,r+f,0),m=b(0,-1,0),M=b(0,1,0);t&&(r=f,a=b(0,0,0),e=b(0,r,0),m=b(0,1,0),M=b(0,-1,0));let P=[a,e],N=[m,M],p=n+2,u=Math.sqrt(f*f+l*l);if(t)for(let h=n-1;h>=0;h--){let S=h*(2*Math.PI/n),d=b(Math.cos(S)*l,r,Math.sin(S)*l);P.push(d);let L=b(f*Math.cos(S)/u,-l/u,f*Math.sin(S)/u);N.push(L)}else for(let h=0;h<n;h++){let S=h*(2*Math.PI/n),d=b(Math.cos(S)*l,r,Math.sin(S)*l);P.push(d);let L=b(f*Math.cos(S)/u,l/u,f*Math.sin(S)/u);N.push(L)}let O=new Array,y=new Array;if(o){for(let h=3;h<P.length;h++)O.push(1),O.push(h-1),O.push(h),y.push(0),y.push(0),y.push(0);O.push(P.length-1),O.push(2),O.push(1),y.push(0),y.push(0),y.push(0)}if(w){for(let h=3;h<P.length;h++)O.push(h),O.push(h-1),O.push(0),y.push(h),y.push(h-1),y.push(1);O.push(0),O.push(2),O.push(P.length-1),y.push(1),y.push(2),y.push(N.length-1)}let i=D(3*p);for(let h=0;h<p;h++)i[3*h]=P[h][0],i[3*h+1]=P[h][1],i[3*h+2]=P[h][2];let G=D(3*p);for(let h=0;h<p;h++)G[3*h]=N[h][0],G[3*h+1]=N[h][1],G[3*h+2]=N[h][2];return[[I.POSITION,new T(i,O,3,!0)],[I.NORMAL,new T(G,y,3,!0)]]}function ye(c,s,n,t,o,w=!0,r=!0){return new F(c,Jt(s,n,t,o,w,r))}function pe(c,s,n,t,o,w,r){let l=o?wt(o):b(1,0,0),f=w?wt(w):b(0,0,0);r??=!0;let e=v();x(e,l);let a=v();U(a,e,Math.abs(s));let m=v();U(m,a,-.5),V(m,m,f);let M=b(0,1,0);Math.abs(1-ft(e,M))<.2&&$(M,0,0,1);let P=v();j(P,e,M),x(P,P),j(M,P,e);let N=2*t+(r?2:0),p=t+(r?2:0),u=D(3*N),O=D(3*p),y=D(2*N),i=new Array(3*t*(r?4:2)),G=new Array(3*t*(r?4:2));r&&(u[3*(N-2)]=m[0],u[3*(N-2)+1]=m[1],u[3*(N-2)+2]=m[2],y[2*(N-2)]=0,y[2*(N-2)+1]=0,u[3*(N-1)]=u[3*(N-2)]+a[0],u[3*(N-1)+1]=u[3*(N-2)+1]+a[1],u[3*(N-1)+2]=u[3*(N-2)+2]+a[2],y[2*(N-1)]=1,y[2*(N-1)+1]=1,O[3*(p-2)]=-e[0],O[3*(p-2)+1]=-e[1],O[3*(p-2)+2]=-e[2],O[3*(p-1)]=e[0],O[3*(p-1)+1]=e[1],O[3*(p-1)+2]=e[2]);let h=(g,E,R)=>{i[g]=E,G[g]=R},S=0,d=v(),L=v();for(let g=0;g<t;g++){let E=g*(2*Math.PI/t);U(d,M,Math.sin(E)),U(L,P,Math.cos(E)),V(d,d,L),O[3*g]=d[0],O[3*g+1]=d[1],O[3*g+2]=d[2],U(d,d,n),V(d,d,m),u[3*g]=d[0],u[3*g+1]=d[1],u[3*g+2]=d[2],y[2*g]=g/t,y[2*g+1]=0,u[3*(g+t)]=u[3*g]+a[0],u[3*(g+t)+1]=u[3*g+1]+a[1],u[3*(g+t)+2]=u[3*g+2]+a[2],y[2*(g+t)]=g/t,y[2*g+1]=1;let R=(g+1)%t;h(S++,g,g),h(S++,g+t,g),h(S++,R,R),h(S++,R,R),h(S++,g+t,g),h(S++,R+t,R)}if(r){for(let g=0;g<t;g++){let E=(g+1)%t;h(S++,N-2,p-2),h(S++,g,p-2),h(S++,E,p-2)}for(let g=0;g<t;g++){let E=(g+1)%t;h(S++,g+t,p-1),h(S++,N-1,p-1),h(S++,E+t,p-1)}}let z=[[I.POSITION,new T(u,i,3,!0)],[I.NORMAL,new T(O,G,3,!0)],[I.UV0,new T(y,i,2,!0)]];return new F(c,z)}function ge(c,s,n,t,o,w){t=t||10,o=o==null||o,H(s.length>1);let r=[[0,0,0]],l=[],f=[];for(let e=0;e<t;e++){l.push([0,-e-1,-(e+1)%t-1]);let a=e/t*2*Math.PI;f.push([Math.cos(a)*n,Math.sin(a)*n])}return Kt(c,f,s,r,l,o,w)}function Kt(c,s,n,t,o,w,r=b(0,0,0)){let l=s.length,f=D(n.length*l*3+(6*t.length||0)),e=D(n.length*l*3+(t?6:0)),a=new Array,m=new Array,M=0,P=0,N=C(),p=C(),u=C(),O=C(),y=C(),i=C(),G=C(),h=C(),S=C(),d=C(),L=C(),z=C(),g=C(),E=St();$(S,0,1,0),q(p,n[1],n[0]),x(p,p),w?(V(h,n[0],r),x(u,h)):$(u,0,0,1),bt(p,u,S,S,y,u,Lt),Z(O,u),Z(z,y);for(let A=0;A<t.length;A++)U(i,y,t[A][0]),U(h,u,t[A][2]),V(i,i,h),V(i,i,n[0]),f[M++]=i[0],f[M++]=i[1],f[M++]=i[2];e[P++]=-p[0],e[P++]=-p[1],e[P++]=-p[2];for(let A=0;A<o.length;A++)a.push(o[A][0]>0?o[A][0]:-o[A][0]-1+t.length),a.push(o[A][1]>0?o[A][1]:-o[A][1]-1+t.length),a.push(o[A][2]>0?o[A][2]:-o[A][2]-1+t.length),m.push(0),m.push(0),m.push(0);let R=t.length,tt=t.length-1;for(let A=0;A<n.length;A++){let Mt=!1;A>0&&(Z(N,p),A<n.length-1?(q(p,n[A+1],n[A]),x(p,p)):Mt=!0,V(d,N,p),x(d,d),V(L,n[A-1],O),dt(n[A],d,E),Rt(E,Gt(L,N),h)?(q(h,h,n[A]),x(u,h),j(y,d,u),x(y,y)):bt(d,O,z,S,y,u,Lt),Z(O,u),Z(z,y)),w&&(V(h,n[A],r),x(g,h));for(let B=0;B<l;B++)if(U(i,y,s[B][0]),U(h,u,s[B][1]),V(i,i,h),x(G,i),e[P++]=G[0],e[P++]=G[1],e[P++]=G[2],V(i,i,n[A]),f[M++]=i[0],f[M++]=i[1],f[M++]=i[2],!Mt){let ht=(B+1)%l;a.push(R+B),a.push(R+l+B),a.push(R+ht),a.push(R+ht),a.push(R+l+B),a.push(R+l+ht);for(let ct=0;ct<6;ct++){let Vt=a.length-6;m.push(a[Vt+ct]-tt)}}R+=l}let xt=n[n.length-1];for(let A=0;A<t.length;A++)U(i,y,t[A][0]),U(h,u,t[A][1]),V(i,i,h),V(i,i,xt),f[M++]=i[0],f[M++]=i[1],f[M++]=i[2];let at=P/3;e[P++]=p[0],e[P++]=p[1],e[P++]=p[2];let lt=R-l;for(let A=0;A<o.length;A++)a.push(o[A][0]>=0?R+o[A][0]:-o[A][0]-1+lt),a.push(o[A][2]>=0?R+o[A][2]:-o[A][2]-1+lt),a.push(o[A][1]>=0?R+o[A][1]:-o[A][1]-1+lt),m.push(at),m.push(at),m.push(at);let Et=[[I.POSITION,new T(f,a,3,!0)],[I.NORMAL,new T(e,m,3,!0)]];return new F(c,Et)}function Ae(c,s,n,t){H(s.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),H(s[0].length===3,"createPolylineGeometry(): malformed vertex"),H(n==null||n.length===s.length,"createPolylineGeometry: need same number of points and normals"),H(n==null||n[0].length===3,"createPolylineGeometry(): malformed normal");let o=Nt(3*s.length),w=new Array(2*(s.length-1)),r=0,l=0;for(let e=0;e<s.length;e++){for(let a=0;a<3;a++)o[r++]=s[e][a];e>0&&(w[l++]=e-1,w[l++]=e)}let f=[[I.POSITION,new T(o,w,3,!0)]];if(n){let e=D(3*n.length),a=0;for(let m=0;m<s.length;m++)for(let M=0;M<3;M++)e[a++]=n[m][M];f.push([I.NORMAL,new T(e,w,3,!0)])}return t&&f.push([I.COLOR,new T(t,Tt(t.length/4),4)]),new F(c,f,null,Ot.Line)}function Me(c,s,n,t,o,w=0){let r=new Array(18),l=[[-n,w,o/2],[t,w,o/2],[0,s+w,o/2],[-n,w,-o/2],[t,w,-o/2],[0,s+w,-o/2]],f=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let e=0;e<6;e++)r[3*e]=l[e][0],r[3*e+1]=l[e][1],r[3*e+2]=l[e][2];return new F(c,[[I.POSITION,new T(r,f,3,!0)]])}function Ie(c,s){let n=c.getMutableAttribute(I.POSITION).data;for(let t=0;t<n.length;t+=3){let o=n[t],w=n[t+1],r=n[t+2];$(W,o,w,r),Pt(W,W,s),n[t]=W[0],n[t+1]=W[1],n[t+2]=W[2]}}function Ne(c,s=c){let n=c.attributes,t=n.get(I.POSITION).data,o=n.get(I.NORMAL).data;if(o){let w=s.getMutableAttribute(I.NORMAL).data;for(let r=0;r<o.length;r+=3){let l=o[r+1];w[r+1]=-o[r+2],w[r+2]=l}}if(t){let w=s.getMutableAttribute(I.POSITION).data;for(let r=0;r<t.length;r+=3){let l=t[r+1];w[r+1]=-t[r+2],w[r+2]=l}}}function At(c,s,n,t,o){return!(Math.abs(ft(s,c))>o)&&(j(n,c,s),x(n,n),j(t,n,c),x(t,t),!0)}function bt(c,s,n,t,o,w,r){return At(c,s,o,w,r)||At(c,n,o,w,r)||At(c,t,o,w,r)}var Lt=.99619469809,W=C();export{ce as a,ue as b,fe as c,ie as d,me as e,Zt as f,we as g,Oe as h,Jt as i,ye as j,pe as k,ge as l,Kt as m,Ae as n,Me as o,Ie as p,Ne as q,bt as r};
