import{a as c,b as S,c as g}from"./chunk-BBM5BVWD.js";import{a as p}from"./chunk-QCZ3ZIGQ.js";import{x as R}from"./chunk-XR5FT7TQ.js";import{a as w,e as _}from"./chunk-KVM6SHDX.js";import{i as I,j as H,l as T,p as b,r as W}from"./chunk-NJWTSROP.js";import{b as O}from"./chunk-ACP3S2CH.js";import{b as a}from"./chunk-YOFFGXOB.js";var t;(function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"})(t||(t={}));function x(e){return e!=null&&"type"in e&&e.type==="vector-tile"}function L(e){return e!=null&&"type"in e&&e.type==="raster-tile"}function A(e){return e!=null&&"type"in e&&e.type==="tile-texture"}function N(e){return e!=null&&"type"in e&&e.type==="image+type"}function M(e){return E(e)||b(e)||W(e)}function E(e){return H(e)||T(e)}function j(e,i,o,r){if(e==null)return S();let n=e.spatialReference;if(n.isGeographic&&!E(n))return new a("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");let s=c.checkUnsupported(e);return s??(o==null?new a("tilingscheme:extent-not-exist","The layer does not provide a layer extent."):P(e,o)||(i==null||n.equals(i)||i.isWGS84&&n.isWebMercator?null:new a("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")))}function P(e,i){let o=e.lods,r=o[0].resolution*2**o[0].level,n=[r*e.size[0],r*e.size[1]],s=[e.origin.x,e.origin.y],l=_(i),u=w();c.computeRowColExtent(l,n,s,u);let d=(u[2]-u[0])*(u[3]-u[1]);if(d>g){let h=o[0].scale*2**o[0].level,f=Math.max((l[3]-l[1])/e.size[1],(l[2]-l[0])/e.size[0])*h/r,y=Math.floor(Math.log(f)/Math.log(10));return f=Math.ceil(f/10**y)*10**y,new a("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(h).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+f.toLocaleString()+".",{level0Scale:h,suggestedLevel0Scale:f,requiredNumRootTiles:d,allowedNumRootTiles:g})}return null}var C=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:j},Symbol.toStringTag,{value:"Module"}));function q(e,i,o,r){if(e==null)return S();let n=e?.lods.length-1,s=e.spatialReference;if(s.isWebMercator){if(!c.makeWebMercatorAuxiliarySphere(n).compatibleWith(e,r))return new a("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!M(s))return new a("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!c.makeGCSWithTileSize(e.spatialReference,e.size[0],n).compatibleWith(e,r))return e.spatialReference.isWGS84?new a("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new a("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return i==null||e.spatialReference.equals(i)?null:new a("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}var v=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:q},Symbol.toStringTag,{value:"Module"}));var D={[p.Global]:v,[p.Local]:C};function Ie(e,i){e||console.warn("Terrain: "+i)}var m=!1,B=!1;function He(e){B=e,m=m||e}function be(e){m=e}function We(e,i){if(m&&!e){let o=new Error().stack?.slice(5);throw console.warn("Terrain internal: "+(i??"")+" at "+o),new Error("Assertion failed"+(i?": "+i:""))}}function V(e){return e?.type==="imagery-tile"||e?.type==="wcs"}function U(e){return e?.type==="imagery-tile-3d"}function G(e){return e?.type==="tile-3d"}function k(e){return e?.type==="vector-tile-3d"}function F(e){return e?.type==="wmts-3d"}function J(e){return e?.type==="elevation-3d"}function Re(e){return e?.type==="group"}function we(e){return e&&(G(e)||F(e)||U(e)||k(e))}function K(e){return e&&(G(e)||U(e)||k(e)||F(e))}function _e(e){return K(e)||J(e)}function xe(e){return L(e?.sourceLayerInfo?.data)}function Le(e){return Q(e?.sourceLayerInfo)||!!e?.isVTLBackground}function Ae(e){return A(e?.sourceLayerInfo?.data)}function Ne(e){let i=e?.sourceLayerInfo?.data;return N(i)||i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof ImageData}function Q(e){return x(e?.data)}function Me(e){return e!=null&&"release"in e&&e.release(),null}function Ce(e){return e.fetchTile&&e.hasOverriddenFetchTile!==!1}function z(e,i,o,r,n){return D[r].checkIfTileInfoSupportedForViewSR(e,o,i,n)}function ve(e,i,o){let r=null,n=null;if(e?.type==="wmts"){let l=X(e,i,o);r=l.tileInfo,n=l.fullExtent}else{n=V(e)?e.getCompatibleFullExtent(i):e.fullExtent;let l=o===p.Local;V(e)?r=e.getCompatibleTileInfo(i,n,l):e?.type==="vector-tile"?r=l&&!Y(i)||Z.force512VTL?e.tileInfo:e.tileInfo.getCompatibleForVTL(256):r=e.tileInfo}let s="tilemapCache"in e?e.tilemapCache?.effectiveMaxLOD:void 0;return r!=null&&n!=null&&z(r,n,i,o,s)==null?{tileInfo:r,fullExtent:n}:null}function X(e,i,o){let r=R(e);if(r!=null){if(!O.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{let n=r.find(s=>z(s.tileInfo,s.fullExtent,i,o)==null);if(n)return{tileInfo:n.tileInfo,fullExtent:n.fullExtent}}}return{tileInfo:null,fullExtent:null}}function Y(e){return e.isWGS84||e.isWebMercator||T(e)||!I(e)}var Z={force512VTL:!1};function Ve(e){return"["+e[0]+","+e[1]+","+e[2]+"]"}function Ue(e){return"("+e[0]+","+e[1]+","+e[2]+")"}function Ge(e,i,o=$){return Math.abs(e-i)<o}function ke(e){return e===t.NORTH_EAST?t.SOUTH_WEST:e===t.NORTH_WEST?t.SOUTH_EAST:e===t.SOUTH_WEST?t.NORTH_EAST:t.NORTH_WEST}function Fe(e){return e===t.NORTH?t.SOUTH:e===t.EAST?t.WEST:e===t.SOUTH?t.NORTH:t.EAST}function ze(e){return e===t.NORTH_WEST||e===t.SOUTH_WEST}function je(e){return e===t.NORTH_WEST||e===t.NORTH_EAST}function Pe(e){return e===t.NORTH_WEST||e===t.WEST||e===t.SOUTH_WEST}function qe(e){return e===t.NORTH_EAST||e===t.EAST||e===t.SOUTH_EAST}function De(e){return e===t.SOUTH_EAST||e===t.SOUTH||e===t.SOUTH_WEST}function Be(e){return e===t.NORTH_EAST||e===t.NORTH||e===t.NORTH_WEST}var Je=[t.NORTH,t.EAST,t.SOUTH,t.WEST],Ke=[t.NORTH_EAST,t.SOUTH_EAST,t.SOUTH_WEST,t.NORTH_WEST],$=1e-5;export{t as a,x as b,L as c,A as d,N as e,M as f,E as g,Ie as h,m as i,B as j,He as k,be as l,We as m,V as n,U as o,k as p,J as q,Re as r,we as s,K as t,_e as u,xe as v,Le as w,Ae as x,Ne as y,Q as z,Me as A,Ce as B,z as C,ve as D,X as E,Y as F,Z as G,Ve as H,Ue as I,Ge as J,ke as K,Fe as L,ze as M,je as N,Pe as O,qe as P,De as Q,Be as R,Je as S,Ke as T};
