import{b as N}from"./chunk-ZCXB2W4M.js";import{B as D,C as F,D as T,M as J,N as L,Q as g,R as j,S as x,fa as h,ga as E,n as v,p as k,s as C}from"./chunk-GF36OIHY.js";import{a,b as u}from"./chunk-OUBCFKOM.js";import{a as y,c as w,d as p,f as A}from"./chunk-HX2VGIR2.js";import{d as f}from"./chunk-ERDKAICI.js";import{a as m}from"./chunk-XKIFGPJO.js";import{f as l}from"./chunk-VTHXE323.js";function c(r,t,s=!1,e=!1){if(r==null)return null;if(y(r))return g(r);if(w(r))return x(r);if(p(r))return L(r);if(D(r))return j(r,t);if(F(r)||T(r))return r;if(A(r)){let n=[];for(let o of r)n.push(c(o,t,s,e));return n}if(e&&C(r))return r;let i=new b;i.immutable=!1;for(let n of Object.keys(r)){let o=r[n];o!==void 0&&i.setField(n,c(o,t,s,e))}return i.immutable=s,i}var b=class r{constructor(t){this.declaredClass="esri.arcade.Dictionary",this.plain=!1,this.immutable=!0,this.attributes=t instanceof r?t.attributes:t??{}}field(t){let s=t.toLowerCase(),e=this.attributes[t];if(e!==void 0)return e;for(let i in this.attributes)if(i.toLowerCase()===s)return this.attributes[i];throw new u(null,a.FieldNotFound,null,{key:t})}setField(t,s){if(this.immutable)throw new u(null,a.Immutable,null);if(v(s))throw new u(null,a.NoFunctionInDictionary,null);let e=t.toLowerCase();if(s instanceof Date&&(s=f.dateJSToArcadeDate(s)),this.attributes[t]===void 0){for(let i in this.attributes)if(i.toLowerCase()===e)return void(this.attributes[i]=s);this.attributes[t]=s}else this.attributes[t]=s}hasField(t){let s=t.toLowerCase();if(this.attributes[t]!==void 0)return!0;for(let e in this.attributes)if(e.toLowerCase()===s)return!0;return!1}keys(){let t=[];for(let s in this.attributes)t.push(s);return t=t.sort(),t}castToText(t=!1){return J(this.attributes,{useNumbersForDates:t})}static convertObjectToArcadeDictionary(t,s,e=!0,i=!1){let n=new r;n.immutable=!1;for(let o in t){let d=t[o];d!==void 0&&n.setField(o.toString(),c(d,s,e,i))}return n.immutable=e,n}static convertJsonToArcade(t,s,e=!1,i=!1){return c(t,s,e,i)}castAsJson(t=null){let s={};for(let e in this.attributes){let i=this.attributes[e];i!==void 0&&(t?.keyTranslate&&(e=t.keyTranslate(e)),s[e]=h(i,t))}return s}castDictionaryValueAsJsonAsync(t,s,e,i=null,n){return l(this,null,function*(){let o=yield E(e,i,n);return t[s]=o,o})}castAsJsonAsync(t=null,s=null){return l(this,null,function*(){let e={},i=[];for(let n in this.attributes){let o=this.attributes[n];s?.keyTranslate&&(n=s.keyTranslate(n)),o!==void 0&&(k(o)||o instanceof m||o instanceof f?e[n]=h(o,s):i.push(this.castDictionaryValueAsJsonAsync(e,n,o,t,s)))}return i.length>0&&(yield Promise.all(i)),e})}deepClone(){let t=new r;t.immutable=!1;for(let s of this.keys())t.setField(s,N(this.field(s)));return t}};export{b as a};
