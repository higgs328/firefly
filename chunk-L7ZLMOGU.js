import{a as D,b as L}from"./chunk-SD7YCRLG.js";import{a as v}from"./chunk-D4VZRD7Q.js";import"./chunk-BMQMHMNH.js";import{a as T}from"./chunk-U4YCXFAL.js";import{a as F}from"./chunk-4GIPQCCB.js";import{a as w}from"./chunk-7MO4BRD3.js";import"./chunk-UOTXMYTS.js";import"./chunk-YNGT6ASM.js";import"./chunk-FH4ZV652.js";import{d as h,g as b,p as I}from"./chunk-CTPO46HK.js";import"./chunk-MGFIAYXF.js";import{e as u}from"./chunk-P4JHTV62.js";import{a as y}from"./chunk-XIZ7IH6M.js";import"./chunk-JD66UCS7.js";import{a as N}from"./chunk-FU7RO3AR.js";import{a as A}from"./chunk-4YRY3D3A.js";import{a as E}from"./chunk-ZZ5UYT7M.js";import"./chunk-U4XVPHQU.js";import"./chunk-B526OXED.js";import"./chunk-XPTKDFYS.js";import"./chunk-ZYTQ7T5Q.js";import"./chunk-MZC42HHY.js";import"./chunk-DREO3ZIC.js";import"./chunk-L7OBQ2MX.js";import"./chunk-2SEACSJ7.js";import"./chunk-FTMCRRWI.js";import"./chunk-VU2QHSDR.js";import"./chunk-QHZWU2K5.js";import"./chunk-JMNB6CKE.js";import"./chunk-L3RS33Q4.js";import"./chunk-ZUPR4L6O.js";import"./chunk-DO7UF2F2.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import"./chunk-K57Z4J34.js";import"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-6F25LG6O.js";import"./chunk-3JGYBNJA.js";import"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-IDVLLREH.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-K75TK42V.js";import"./chunk-RJWOVI3M.js";import"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-PEW2PLAN.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-EBIFNV2H.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import"./chunk-QGVBCWUY.js";import"./chunk-MYO4NP2N.js";import"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import{a as p,b as c,f}from"./chunk-VTHXE323.js";function z(s,a,n=!0){let{allColumns:r,columns:o}=s,l=[],t=L(o.toArray());return s.activeSortOrders.forEach(({fieldName:e,direction:i})=>{e&&i&&l.push({field:e,order:i})}),r.filter(e=>e.direction!=null&&(!e.hidden||n)).forEach(({fieldName:e,direction:i})=>{let d=l.find(m=>m.field===e);i&&!d&&l.push({field:e,order:i})}),a.elements=t,a.orderByFields=l,a}function G(s){return f(this,null,function*(){let{excludeAttachments:a,excludeRelationships:n,layer:r,excludedFieldTypesOverride:o}=s,l=[],t=[];r||Promise.resolve(new y),yield r.load();let e=u(r,c(p({},o&&{ignoreFieldTypes:o}),{sortDisabled:!0}));for(let{visible:i,fieldName:d,label:m}of e)i&&l.push(new A({fieldName:d,label:m}));return h(r)&&a!==!0&&l.push(new N),b(r)&&n!==!0&&r.relationships?.forEach(i=>{l.push(new E({relationshipId:i.id,label:i.name}))}),new y({elements:l,orderByFields:t})})}function J(s){return f(this,null,function*(){let{excludeAttachments:a,excludeRelationships:n,layer:r,excludedFieldTypesOverride:o}=s,l=[];return yield r.load(),u(r,c(p({},o&&{ignoreFieldTypes:o}),{sortDisabled:!0})).forEach(({fieldName:t,format:e,label:i,visible:d})=>{t!=null&&l.push(new F({fieldName:t,format:e,label:i,visible:d}))}),h(r)&&a!==!0&&l.push(new T),b(r)&&n!==!0&&r.relationships?.forEach(({id:t})=>{l.push(new w({relationshipId:t}))}),new v({columnTemplates:l})})}function K(s){return f(this,null,function*(){let{layer:a,template:n,includeHiddenFields:r,excludedFieldTypesOverride:o}=s,l=n.orderByFields??[],t=D(n.elements,l);return r&&(yield a.load(),u(a,c(p({},o&&{ignoreFieldTypes:o}),{sortDisabled:!0})).forEach(e=>{if(!e.fieldName)return;let{fieldName:i,label:d}=e;if(!I(i,t)){let m=l.findIndex(x=>x.field&&x.field===i),O=m>-1?l.at(m)?.order:void 0;t.push(new F({direction:O,fieldName:i,initialSortPriority:m,label:d,visible:!1}))}}),h(a)&&!t.some(e=>e.type==="attachment")&&t.push(new T({visible:!1})),b(a)&&a.relationships?.forEach(({id:e})=>{t.some(i=>i.type==="relationship"&&i.relationshipId===e)||t.push(new w({relationshipId:e,visible:!1}))})),new v({columnTemplates:t})})}export{G as createDefaultAttributeTableTemplateFromLayer,J as createDefaultTableTemplateFromLayer,K as createTableTemplateFromAttributeTableTemplate,z as syncAttributeTableTemplate};
