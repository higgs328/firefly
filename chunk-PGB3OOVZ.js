import{c as B,e as H,h as I,k as J,l as K,m as P,n as Q,o as U}from"./chunk-BC7GBJHB.js";import{a as y}from"./chunk-WBPLJNRU.js";import{a as g}from"./chunk-EBLTZITF.js";import{a as w}from"./chunk-4TIUXNXO.js";import{a as q}from"./chunk-4D3QHJI2.js";import{c as F,e as L,g as X,j as k}from"./chunk-E2J2V7JN.js";import{b as _}from"./chunk-37H4LYIE.js";import{a as j}from"./chunk-EM35R6FY.js";import{b as C,c as G,h as O,i as x,j as E}from"./chunk-DJW5LMRG.js";import{a as v,s as m}from"./chunk-QXXXCEV5.js";import{d as D}from"./chunk-NX5B6XBR.js";import{c as N}from"./chunk-RSDQHAJX.js";import{m as A}from"./chunk-ZQIC5NFT.js";import{c as b}from"./chunk-VIEK2X23.js";import{f as W}from"./chunk-CCJU4DSH.js";import{a as p}from"./chunk-QGVBCWUY.js";import{e as l}from"./chunk-NFIPKH6V.js";import{l as V}from"./chunk-5QEXLALV.js";function Y(t){return t instanceof Float32Array&&t.length>=2}function Z(t){return Array.isArray(t)&&t.length>=2}function R(t){return Y(t)||Z(t)}var M,a=[0,0],n=M=class extends W{constructor(t){super(t),this._viewpoint2D={center:j(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new A,this.id=0,this.inverseTransform=y(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=y(),this.transformNoRotation=y(),this.displayMat3=w(),this.displayViewMat3=w(),this.viewMat3=w(),this.viewMat2d=q(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){let e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){let[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){let e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=B(i,t.viewpoint),this._set("size",v(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new M({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return R(e)?m(t,e,this.inverseTransform):(a[0]=e,a[1]=i,m(t,a,this.inverseTransform))}toScreen(t,e,i){return R(e)?m(t,e,this.transform):(a[0]=e,a[1]=i,m(t,a,this.transform))}toScreenNoRotation(t,e,i){return R(e)?m(t,e,this.transformNoRotation):(a[0]=e,a[1]=i,m(t,a,this.transformNoRotation))}wrapMapCoordinate(t,e){v(t,e);let[i]=e,[o]=this.center,{extent:c,spatialReference:s}=this,{xmin:r,xmax:f}=c;if(s.isWrappable){let d=Q(s)/2;r=Math.max(r,o-d),f=Math.min(f,o+d)}return(i<r||i>f)&&(t[0]=D(i,o,s)),t}getScreenTransform(t,e){let{center:i}=this._viewpoint2D,o=this._get("pixelRatio")||1,c=this._get("size");return J(t,i,c,e,0,o),t}_update(){let{center:t,spatialReference:e,scale:i,rotation:o}=this._viewpoint2D,c=this._get("pixelRatio")||1,s=this._get("size"),r=new g({targetGeometry:new b(t[0],t[1],e),scale:i,rotation:o});if(this._set("viewpoint",r),!s||!e||!i)return;this.resolution=I(r),this.rotation=o,this.scale=i,this.spatialReference=e,v(this.center,t);let f=s[0]!==0?2/s[0]:0,d=s[1]!==0?-2/s[1]:0;C(this.displayMat3,f,0,0,0,d,0,-1,1,1);let h=G(this.viewMat3),z=_(s[0]/2,s[1]/2),T=_(-s[0]/2,-s[1]/2),S=N(o);x(h,h,z),E(h,h,S),x(h,h,T),O(this.displayViewMat3,this.displayMat3,h);let u=k(this.viewMat2d,z);return L(u,u,S),X(u,u,T),H(this.extent,r,s),K(this.transform,r,s,c),F(this.inverseTransform,this.transform),P(this.transformNoRotation,r,s,c),this.worldScreenWidth=U(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};p([l({readOnly:!0})],n.prototype,"id",void 0),p([l({value:1,json:{write:!0}})],n.prototype,"pixelRatio",null),p([l({json:{write:!0}})],n.prototype,"size",null),p([l()],n.prototype,"spatialReference",void 0),p([l({type:g,json:{write:!0}})],n.prototype,"viewpoint",null),p([l({readOnly:!0})],n.prototype,"visibleArea",null),n=M=p([V("esri.views.2d.ViewState")],n);var gt=n;export{gt as a};
