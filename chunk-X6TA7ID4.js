import{a as Y,c as $,d as ee}from"./chunk-UAFVHOHT.js";import{c as Z,d as O}from"./chunk-JK6BWFR4.js";import{h as X}from"./chunk-SJAM4JSC.js";import{a as Q}from"./chunk-PT2T74VZ.js";import{a as W}from"./chunk-EPKVBNFW.js";import{a as K}from"./chunk-FHBFWDFD.js";import{A as q}from"./chunk-XR5FT7TQ.js";import{a as J}from"./chunk-LAX5536Z.js";import{b as k}from"./chunk-OLOKUDVI.js";import{g}from"./chunk-HX2VGIR2.js";import{a as F}from"./chunk-AXYQJCCX.js";import{a as d}from"./chunk-5XCFNEYX.js";import{a as V}from"./chunk-GQL2MBZT.js";import{b as j}from"./chunk-EBIFNV2H.js";import{e as E}from"./chunk-FB4M3WPV.js";import{a as R,j as N}from"./chunk-TG45K3WR.js";import{a as n}from"./chunk-QGVBCWUY.js";import{H as P}from"./chunk-MYO4NP2N.js";import{e as s}from"./chunk-NFIPKH6V.js";import{l as L}from"./chunk-5QEXLALV.js";import{a as I,b as C,c as _,f as v}from"./chunk-VTHXE323.js";var T=class extends P{constructor(e){super(e),this.filter=!0}};n([s({type:Boolean,nonNullable:!0})],T.prototype,"filter",void 0),T=n([L("esri.widgets.FeatureTemplates.VisibleElements")],T);var D=T;var y="esri-item-list",S=`${y}__list-item`,u={base:y,filterContainerSticky:`${y}__filter-container--sticky`,group:`${y}__group`,groupHeader:`${y}__group__header`,item:S,itemDisabled:`${S}--disabled`,itemIcon:`${S}-icon`,itemContentEnd:`${S}-content-end`,noMatchesMessage:`${y}__no-matches-message`,scroller:`${y}__scroller`,scrollerEnabled:`${y}__scroller--enabled`},ue=4;function re(e){let p=e,{disabled:t,filterText:r="",id:a,messages:i,onFilterChange:o}=p,m=_(p,["disabled","filterText","id","messages","onFilterChange"]);return d("div",{key:a},e.filterEnabled??1?be({disabled:t,filterText:r,id:a,messages:i,onFilterChange:o}):null,he(C(I({},m),{disabled:t,enableListScroll:e.enableListScroll??!0,filterText:r,messages:i})))}function fe(e){return!!e.items}function he(e){let i=e,{headingLevel:t,items:r}=i,a=_(i,["headingLevel","items"]);return r.length===0?d("div",{class:u.noMatchesMessage,key:"no-matches"},e.messages.noMatches):d("div",{class:E({[u.scroller]:!0,[u.scrollerEnabled]:!!e.enableListScroll}),key:"item-container"},r.map(o=>fe(o)?ye(C(I({},a),{group:o,headingLevel:t})):ie(C(I({},a),{grouped:!0,item:o}))))}function be(e){let{disabled:t,messages:r,filterText:a,enableListScroll:i}=e;return d("div",{class:i?void 0:u.filterContainerSticky,key:"filter"},d("calcite-input",{disabled:t,placeholder:r.filterPlaceholder,type:"search",value:a,onCalciteInputInput:o=>{let m=o.currentTarget;e.onFilterChange&&e.onFilterChange(m.value)}}))}function ie(e){let{disabled:t,grouped:r,identify:a,item:i,onItemMouseEnter:o,onItemMouseLeave:m,onItemSelect:p,renderIcon:f,renderCustomItem:b,renderItemContent:h,renderItemContentEnd:x,renderItemLabel:le,renderItemDescription:ae,renderItemActionEnd:de,renderItemTitle:me,selectedItem:ce}=e,G=te(i,a),B=G===te(ce,a),z=b?.(e);if(z)return z;let M=h?.(i),H=x?.(i),pe=de?.(i),U=!(!i.disabled&&!t),A=f?.(i);return d("calcite-list-item",{afterUpdate:c=>{c.selected=B},"aria-level":r?"2":"",class:E({[u.item]:!0,[u.itemDisabled]:U}),"data-item":i,description:M?void 0:ae?.(i)??void 0,disabled:U,key:G,label:M?void 0:le?.(i)??i.label??void 0,onblur:c=>m?.(w(c)),onfocus:c=>o?.(w(c)),onmouseenter:c=>o?.(w(c)),onmouseleave:c=>m?.(w(c)),selected:B,title:me?.(i)??void 0,onCalciteListItemSelect:c=>{c.preventDefault(),p?.(w(c))}},A?d("div",{class:u.itemIcon,key:"content-start",slot:"content-start"},A):void 0,M?d("div",{key:"content",slot:"content"},M):null,H?d("div",{class:u.itemContentEnd,key:"content-end",slot:"content-end"},H):null,pe??null)}function te(e,t){return e?`${t?.(e)||e.id}__${e.label}`:""}function w(e){return e.currentTarget["data-item"]}function ye(e){let f=e,{disabled:t,group:r,headingLevel:a=ue,selectionMode:i="none",renderCustomGroupContent:o}=f,m=_(f,["disabled","group","headingLevel","selectionMode","renderCustomGroupContent"]),p=o?.(e);return d("div",{class:u.group,key:r.label??void 0},d(Q,{class:u.groupHeader,level:a},r.label),p||d("calcite-list",{disabled:t,label:r.label??"",selectionAppearance:"border",selectionMode:i},r.items.map(b=>ie(C(I({},m),{disabled:t,item:b,grouped:!0})))))}function ne(e,t,r){return v(this,null,function*(){if(!g(e)&&O(e)&&e.thumbnail){let o=`data:image/png;base64,${e.thumbnail.imageData}`,m=document.createElement("div");return m.classList.add("esri-thumbnail-preview"),"geometryType"in t&&t.geometryType&&m.classList.add(`esri-thumbnail-preview--${t.geometryType}`),m.style.backgroundImage=`url(${o})`,m}let a=yield ge(t,e);if(a==null)return null;let i={maxSize:k(r?.maxSize??32)};if((g(e)||Z(e))&&"renderer"in t&&t.renderer?.type==="dictionary"&&(i.fieldMap=t.renderer.fieldMap??void 0,i.feature=g(e)?e:{attributes:e.prototype.attributes??{}}),g(e)&&e.geometry&&r?.useGeometry!==!1&&!e.geometry.type.includes("point")){i.geometry=e.geometry,i.useMarkerSymbolSize=!1;let o=k(r?.maxSize??22);i.size={width:o,height:o}}return yield X(a,i)})}function ge(e,t){return v(this,null,function*(){if(!g(t)&&O(t))return oe(e);if("renderer"in e&&e.renderer){let{renderer:r}=e,a=g(t)?t:new J({attributes:t.prototype.attributes});if("getSymbolAsync"in r){let i=yield r.getSymbolAsync(a);if(i)return i}}return oe(e)})}function oe(e){return v(this,null,function*(){if(!("geometryType"in e))return null;let{geometryType:t}=e,r=t==="point"||t==="multipoint"?yield import("./chunk-ES2DNXEO.js"):t==="polyline"?yield import("./chunk-HKHBLYZT.js"):t==="polygon"||t==="mesh"||t==="multipatch"?yield import("./chunk-ZMFUMHH3.js"):null;return r?new r.default:null})}var ve={base:"esri-feature-templates"};function Ie(e){return e.length>0&&$(e[0])}function Ce(e){return e.id}var l=class extends V{constructor(e,t){super(e,t),this.enableListScroll=!0,this.filterText="",this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.selectionMode="none",this.viewModel=new ee,this.visibleElements=new D,this.renderCustomItem=r=>null,this.renderCustomGroupContent=r=>null,this.renderItemLabel=()=>null,this.renderItemDescription=()=>null,this.renderItemContent=r=>null,this.renderItemContentEnd=r=>null,this._iconIntersectionObserver=new IntersectionObserver((r,a)=>{r.forEach(i=>v(this,null,function*(){if(i.isIntersecting){let o=i.target;if(Me(o))return void a.unobserve(o);let m=we(o),{layer:p,template:f}=m;se(o,!0);let b=yield ne(f,p).catch(()=>(se(o,!1),null));if(b==null)return;o.appendChild(b)}}))}),this._renderItemIcon=r=>q(r.layer)?d("span",{"data-has-icon":!0,"data-item":r,key:"icon"},d("calcite-icon",{icon:"table"})):d("span",{afterCreate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,afterUpdate:this._afterItemCreateOrUpdate,"data-has-icon":!1,"data-item":r,key:"icon"}),this._afterItemCreateOrUpdate=r=>{this._iconIntersectionObserver?.observe(r)},this._afterItemRemoved=r=>{this._iconIntersectionObserver?.unobserve(r)}}initialize(){let e=({label:t})=>!this.filterText||!!t?.toLowerCase().includes(this.filterText.toLowerCase());this.addHandles(R(()=>this.viewModel,(t,r)=>{t&&!t.filterFunction&&(this.filterFunction=e),r&&r!==t&&r.filterFunction===e&&(r.filterFunction=null)},N))}destroy(){this._iconIntersectionObserver?.disconnect(),this._iconIntersectionObserver=null}loadDependencies(){return j({icon:()=>import("./chunk-7Z2RNQA3.js"),loader:()=>import("./chunk-4Z3TWS6O.js"),input:()=>import("./chunk-SS6GQCI6.js"),list:()=>import("./chunk-4MPCQ5DO.js"),"list-item":()=>import("./chunk-MRM6JRFU.js"),notice:()=>import("./chunk-PEKK3NZO.js")})}get disabled(){return this.viewModel.disabled}set disabled(e){this.viewModel.disabled=e}get filterFunction(){return this.viewModel.filterFunction}set filterFunction(e){this.viewModel.filterFunction=e}get groupBy(){return this.viewModel.groupBy}set groupBy(e){this.viewModel.groupBy=e}get icon(){return"list-rectangle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}get selectedItem(){return this.viewModel.selectedItem}select(e,t){return this.viewModel.select(e,t)}render(){let{disabled:e,enableListScroll:t,filterText:r,headingLevel:a,messages:i,viewModel:{items:o,numberOfFeatureTemplates:m,selectedItem:p,state:f}}=this,b=this.visibleElements.filter&&m>1;if(Ie(o)){let h=o.find(x=>x.label===Y.label);h&&(h.label=i.other)}return d("div",{"aria-label":i.widgetLabel,class:this.classes(ve.base,K.widget)},f==="loading"?d("calcite-loader",{key:"loader",label:this.messagesCommon.loading,type:"indeterminate"}):f==="ready"?d(re,{disabled:e,enableListScroll:t,filterEnabled:b,filterText:r,headingLevel:a,id:this.id,identify:Ce,items:o,messages:{filterPlaceholder:i.filterPlaceholder,noItems:i.noItems,noMatches:i.noMatches},renderCustomGroupContent:this.renderCustomGroupContent,renderCustomItem:this.renderCustomItem,renderIcon:this._renderItemIcon,renderItemContent:this.renderItemContent,renderItemContentEnd:this.renderItemContentEnd,renderItemDescription:this.renderItemDescription,renderItemLabel:this.renderItemLabel,selectedItem:p??void 0,selectionMode:this.selectionMode??void 0,onFilterChange:h=>{this.filterText=h},onItemSelect:h=>!$(h)&&this.viewModel.select(h)}):null)}};function we(e){return e?.["data-item"]}function Me(e){return!!e?.["data-has-icon"]}function se(e,t){e&&(e["data-has-icon"]=t)}n([s()],l.prototype,"disabled",null),n([s()],l.prototype,"enableListScroll",void 0),n([s()],l.prototype,"filterFunction",null),n([s()],l.prototype,"filterText",void 0),n([s()],l.prototype,"groupBy",null),n([s()],l.prototype,"headingLevel",void 0),n([s()],l.prototype,"icon",null),n([s()],l.prototype,"label",null),n([s()],l.prototype,"layers",null),n([s(),F("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],l.prototype,"messages",void 0),n([s(),F("esri/t9n/common")],l.prototype,"messagesCommon",void 0),n([s({readOnly:!0})],l.prototype,"selectedItem",null),n([s()],l.prototype,"selectionMode",void 0),n([s(),W("select")],l.prototype,"viewModel",void 0),n([s({type:D,nonNullable:!0})],l.prototype,"visibleElements",void 0),n([s()],l.prototype,"renderCustomItem",void 0),n([s()],l.prototype,"renderCustomGroupContent",void 0),n([s()],l.prototype,"renderItemLabel",void 0),n([s()],l.prototype,"renderItemDescription",void 0),n([s()],l.prototype,"renderItemContent",void 0),n([s()],l.prototype,"renderItemContentEnd",void 0),l=n([L("esri.widgets.FeatureTemplates")],l);var ct=l;export{re as a,ie as b,ne as c,ct as d};
