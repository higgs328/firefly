import{a as w}from"./chunk-KQOHOOEB.js";import{b as f}from"./chunk-Y7IXEVFJ.js";import{b as g}from"./chunk-CSSRRM4C.js";import{a as d}from"./chunk-RVXDLN3U.js";import{a as s}from"./chunk-JJMX5NYN.js";import{a as u}from"./chunk-6JH2KEAE.js";import{a as C}from"./chunk-X5ITXU7F.js";import{a as p}from"./chunk-6LW5LY2X.js";import{o as k,p as L}from"./chunk-ZHEBYHJM.js";import{a as e}from"./chunk-QGVBCWUY.js";import{e as o}from"./chunk-NFIPKH6V.js";import{l as c}from"./chunk-5QEXLALV.js";import{b as r}from"./chunk-YOFFGXOB.js";import{f as n}from"./chunk-VTHXE323.js";var l,m={currentVersion:g,createInitialViewProperties:()=>new f,parseVersion:d.parse,itemType:"Web Link Chart",name:"linkchart",origin:"link-chart"},i=l=class extends w{constructor(t){super(t),this.mapType="webLinkChart",this.linkChartProperties=new s}get activeLinkChartLayer(){return this.layers.find(({type:t})=>t==="link-chart")}get context(){return m}applyLayout(t="organic-standard",a){return n(this,null,function*(){if(yield this.load(),!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return t!=="geographic-organic-standard"||this.basemap?.baseLayers?.length||(this.basemap=p.fromId("topo-vector"),yield this.basemap?.load()),this.linkChartProperties.layoutType=t,a?.layoutSettings?.chronologicalLayoutSettings&&a.layoutSettings.organicLayoutSettings||!this.linkChartProperties.layoutSettings?this.linkChartProperties.layoutSettings=a?.layoutSettings:this.linkChartProperties.layoutSettings=new u({organicLayoutSettings:a?.layoutSettings?.organicLayoutSettings??this.linkChartProperties.layoutSettings?.organicLayoutSettings,chronologicalLayoutSettings:a?.layoutSettings?.chronologicalLayoutSettings??this.linkChartProperties.layoutSettings?.chronologicalLayoutSettings}),this.activeLinkChartLayer.applyNewLinkChartLayout(t,a)})}changeNonspatialDataDisplay(t){if(!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");this.linkChartProperties.nonspatialDataDisplay||(this.linkChartProperties.nonspatialDataDisplay=new C),this.linkChartProperties.nonspatialDataDisplay.mode=t}addRecords(t,a){return n(this,null,function*(){if(yield this.load(),!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return this.activeLinkChartLayer.addRecords(t,a)})}removeRecords(t){return n(this,null,function*(){if(yield this.load(),!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return this.activeLinkChartLayer.removeRecords(t)})}expand(t,a){return n(this,null,function*(){if(yield this.load(),!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return(yield this.activeLinkChartLayer.expand(t,a))?.records??[]})}refreshLinkChartData(t){return n(this,null,function*(){if(yield this.load(),!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return this.activeLinkChartLayer.refreshLinkChartCache(t)})}connectBetweenEntities(t,a){return n(this,null,function*(){if(yield this.load(),!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return(yield this.activeLinkChartLayer.connectBetweenEntities(t,a))?.records??[]})}connectFromEntities(t,a){return n(this,null,function*(){if(yield this.load(),!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return(yield this.activeLinkChartLayer.connectFromEntities(t,a))?.records??[]})}getMemberIdsByType(t){if(!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return Array.from(this.activeLinkChartLayer?.dataManager.sublayerCaches.get(t)?.keys()??[])}get diagramNodesExtent(){if(!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return this.activeLinkChartLayer.linkChartExtent}get entityCount(){if(!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return this.activeLinkChartLayer.entityLinkChartDiagramLookup.size}get relationshipCount(){if(!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return this.activeLinkChartLayer.relationshipLinkChartDiagramLookup.size}get knowledgeGraph(){if(!this.activeLinkChartLayer)throw new r("WebLinkChart:no-link-chart-layer","No link chart layer found");return this.activeLinkChartLayer?.knowledgeGraph}add(t,a){if(this.activeLinkChartLayer&&"type"in t&&t.type==="link-chart")throw new r("linkchart:one-link-chart-layer","Web Link Charts can only have one Link Chart Layer, another cannot be added");if(super.add(t,a),"type"in t&&t.type==="link-chart"){let h=t.initializationLinkChartConfig?.layoutMode;h&&(this.linkChartProperties.layoutType=h);let y=t.initializationLinkChartConfig?.layoutSettings;y&&(this.linkChartProperties.layoutSettings=y)}}static fromJSON(t){if(t)return new l({resourceInfo:t});throw new r("linkchart:empty-resource","Expected a JSON resource but got nothing")}handleChronologicalOverlay(){if(!this.activeLinkChartLayer)return;let t=this.activeLinkChartLayer,a=this.findLayerById(k());if(a&&this.remove(a),this.linkChartProperties.layoutType==="chronological-mono-timeline"||this.linkChartProperties.layoutType==="chronological-multi-timeline"){let h=L(t);this.add(h,0)}}};e([o({readOnly:!0})],i.prototype,"activeLinkChartLayer",null),e([o({json:{write:{ignoreOrigin:!0}}})],i.prototype,"mapType",void 0),e([o({type:s,nonNullable:!0,json:{write:{ignoreOrigin:!0}}})],i.prototype,"linkChartProperties",void 0),e([o({readOnly:!0})],i.prototype,"diagramNodesExtent",null),e([o({readOnly:!0})],i.prototype,"entityCount",null),e([o({readOnly:!0})],i.prototype,"relationshipCount",null),e([o({readOnly:!0})],i.prototype,"knowledgeGraph",null),i=l=e([c("esri.WebLinkChart")],i);var G=i;export{G as a};
