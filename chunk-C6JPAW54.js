import{a as p}from"./chunk-WD3OPXCN.js";import{f as d}from"./chunk-CCJU4DSH.js";import{a as o}from"./chunk-QGVBCWUY.js";import{e as n}from"./chunk-NFIPKH6V.js";import{l as c}from"./chunk-5QEXLALV.js";import{j as y}from"./chunk-P6QFA5MM.js";import{b as a}from"./chunk-YOFFGXOB.js";var h,r=h=class extends d{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){let t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){let t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{let s=e.categorySchema||[];return s.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):s})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new a("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");let e=new h({sourceJSON:t});return e.read(t),e}queryItems(t,e){let s=y(p,t),i=this.portal;return parseFloat(i.currentVersion)>5?(s=s||new p,i.queryPortal(`/content/groups/${this.id}/search`,s,"PortalItem",e)):(s=s?s.clone():new p,s.query="group:"+this.id+(s.query?" "+s.query:""),i.queryItems(s,e))}_fetchCategorySchemaSet(t,e){let s=this.portal;return s.fetchSelf(s.authMode,!0,e).then(i=>{let l=i.contentCategorySetsGroupQuery;if(l){let u=new p({disableExtraQuery:!0,num:1,query:l});return s.queryGroups(u,e)}throw new a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){let l=i.results[0],u=new p({num:1,query:`typekeywords:"${t}"`});return l.queryItems(u,e)}throw new a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",e).then(l=>{let u=l?.categorySchema;return u?.length?u:[]}):[])}};o([n()],r.prototype,"access",void 0),o([n({type:Date})],r.prototype,"created",void 0),o([n()],r.prototype,"description",void 0),o([n()],r.prototype,"id",void 0),o([n()],r.prototype,"isInvitationOnly",void 0),o([n({type:Date})],r.prototype,"modified",void 0),o([n()],r.prototype,"owner",void 0),o([n()],r.prototype,"portal",void 0),o([n()],r.prototype,"snippet",void 0),o([n()],r.prototype,"sortField",void 0),o([n()],r.prototype,"sortOrder",void 0),o([n()],r.prototype,"sourceJSON",void 0),o([n()],r.prototype,"tags",void 0),o([n()],r.prototype,"thumbnail",void 0),o([n({readOnly:!0})],r.prototype,"thumbnailUrl",null),o([n()],r.prototype,"title",void 0),o([n({readOnly:!0})],r.prototype,"url",null),r=h=o([c("esri.portal.PortalGroup")],r);var C=r;export{C as a};
