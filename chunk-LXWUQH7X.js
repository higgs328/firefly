import{o as t}from"./chunk-AUAZP44J.js";import{b as m}from"./chunk-YOFFGXOB.js";import{a as n,b as r,f as x}from"./chunk-VTHXE323.js";function w(a,s,e,d,i,l,p){return x(this,null,function*(){let c=null;if(e!=null){let o=`${a}/nodepages/`,f=o+Math.floor(e.rootIndex/e.nodesPerPage);try{return{type:"page",rootPage:(yield t(f,{query:r(n({f:"json"},d),{token:i}),responseType:"json",signal:p})).data,rootIndex:e.rootIndex,pageSize:e.nodesPerPage,lodMetric:e.lodSelectionMetricType,urlPrefix:o}}catch(y){l?.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",f,y),c=y}}if(!s)return null;let I=s?.split("/").pop(),g=`${a}/nodes/`,u=g+I;try{return{type:"node",rootNode:(yield t(u,{query:r(n({f:"json"},d),{token:i}),responseType:"json",signal:p})).data,urlPrefix:g}}catch(o){throw new m("sceneservice:root-node-missing","Root node missing.",{pageError:c,nodeError:o,url:u})}})}export{w as a};
