import{a as k}from"./chunk-6JH2KEAE.js";import{a as C}from"./chunk-X5ITXU7F.js";import{b as E,c as M}from"./chunk-F5MZ643P.js";import{n as T}from"./chunk-ZHEBYHJM.js";import{c as N}from"./chunk-C6DX4KYY.js";import{b as D}from"./chunk-H25DKJGS.js";import{a as j}from"./chunk-3JGYBNJA.js";import{a as f}from"./chunk-PEW2PLAN.js";import{a as c}from"./chunk-CX5IFQZJ.js";import{a as R}from"./chunk-SLAWDKDA.js";import{a as y,b as g}from"./chunk-PVDFCTA4.js";import{A as v}from"./chunk-76ATOSLU.js";import{a as s}from"./chunk-QGVBCWUY.js";import{j as h}from"./chunk-MYO4NP2N.js";import{e as p}from"./chunk-NFIPKH6V.js";import{l as b}from"./chunk-5QEXLALV.js";import{f as w}from"./chunk-VTHXE323.js";var o=class extends j.ClonableMixin(D){constructor(t){super(t),this.aggregatedEntitiesUrl=null,this.aggregatedRelationshipsUrl=null,this.autoCollapseRelationships=!0,this.centralityIsUpToDate=!0,this.entitiesUrl=null,this.layoutSettings=null,this.layoutType="organic-standard",this.nonspatialDataDisplay=null,this.relationshipsUrl=null}readEntitiesUrl(t,i,r){return y(t,r)}writeEntitiesUrl(t,i,r,e){let n=e?.portalItem,m=e?.resources,l=h(e?.origin),a=e?.webmap?.activeLinkChartLayer;n&&m&&l!=null&&a&&a.membershipModified?this._saveUrlAsNewResource(i,r,m,n,a):t&&(i[r]=g(t,e))}readRelationshipsUrl(t,i,r){return y(t,r)}writeRelationshipsUrl(t,i,r,e){let n=e?.portalItem,m=e?.resources,l=h(e?.origin),a=e?.webmap?.activeLinkChartLayer;n&&m&&l!=null&&a&&a.membershipModified?this._saveUrlAsNewResource(i,r,m,n,a):t&&(i[r]=g(t,e))}_saveUrlAsNewResource(t,i,r,e,n){t[i]="<pending>";let m=(n.knowledgeGraph.dataModel.relationshipTypes??[]).map(l=>l.name).reduce((l,a)=>{if(!a)return l;let{members:u}=n.dataManager.inclusionModeDefinition.namedTypeDefinitions.get(a)||{members:void 0};if(!u)return l;for(let[d]of u)l.push({id:d,typeName:a});return l},[]);r.pendingOperations.push(new Promise(l=>{T(m,n.knowledgeGraph).then(a=>{S(n.dataManager.inclusionModeDefinition,i,n.knowledgeGraph,a).then(u=>{let d=I(e,i==="entitiesUrl"?"entitiesUrl":"relationshipsUrl");t[i]=d.itemRelativeUrl,r.toAdd.push({resource:d,content:{type:"blob",blob:u},compress:!1,finish:U=>{i==="entitiesUrl"?this.entitiesUrl=U.url:this.relationshipsUrl=U.url}}),l()})})}))}};s([p({type:String,json:{write:!0}})],o.prototype,"aggregatedEntitiesUrl",void 0),s([p({type:String,json:{write:!0}})],o.prototype,"aggregatedRelationshipsUrl",void 0),s([p({type:Boolean,json:{write:!0}})],o.prototype,"autoCollapseRelationships",void 0),s([p({type:Boolean,json:{write:!0}})],o.prototype,"centralityIsUpToDate",void 0),s([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],o.prototype,"entitiesUrl",void 0),s([f("entitiesUrl")],o.prototype,"readEntitiesUrl",null),s([c("entitiesUrl")],o.prototype,"writeEntitiesUrl",null),s([p({type:k,json:{write:!0}})],o.prototype,"layoutSettings",void 0),s([p({type:N,json:{write:!0}})],o.prototype,"layoutType",void 0),s([p({type:C,json:{write:!0}})],o.prototype,"nonspatialDataDisplay",void 0),s([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],o.prototype,"relationshipsUrl",void 0),s([f("relationshipsUrl")],o.prototype,"readRelationshipsUrl",null),s([c("relationshipsUrl")],o.prototype,"writeRelationshipsUrl",null),o=s([b("esri.linkChart.LinkChartProperties")],o);var Y=o;function I(t,i){let r=`${i}-${R()}.dat`,e=v("linkChart",r);return t.resourceFromPath(e)}function S(t,i,r,e){return w(this,null,function*(){let n;return n=i==="entitiesUrl"?yield E(t,r,e):yield M(t,r,e),new Blob([n],{type:"application/x-protobuf"})})}export{Y as a};
