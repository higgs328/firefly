import{a as H,b as v,c as J,d as S,e as D,f as g}from"./chunk-KALOJIUA.js";import{a as P,d as U}from"./chunk-HX2VGIR2.js";import{b as k}from"./chunk-EQZWYK27.js";import{c as h,d as A,e as R,f as j,g as L}from"./chunk-K5T5FD5C.js";import{c as w}from"./chunk-MVHHPJM7.js";import{c as N,e as s}from"./chunk-VDO6JJ3Y.js";import{a as z}from"./chunk-WFKZLI6F.js";import{b}from"./chunk-YOFFGXOB.js";import{a as Z,b as M}from"./chunk-VTHXE323.js";var K=w,x={date:null,time:null,timeZoneOffset:null},fe=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]),Q="latn",ce=new Set(["date-only","time-only","timestamp-offset"]),X=e=>"valueAsDate"in e;function u(e){return{locale:z(),numberingSystem:Q,zone:e??K}}function _(e,t){return e==null?null:s.fromMillis(e,u(t))}function Y(e,t){if(e==null||!U(e)||e===""){if(t){let a=s.local({zone:t});return{date:null,time:null,timeZoneOffset:a.isValid?a.offset.toString():null}}return x}let n=s.fromISO(e,{setZone:!0});return{date:n.toFormat(v,u()),time:n.toFormat(H.HMS_MS,u()),timeZoneOffset:n.offset.toString()}}function de(e,t){if(e==null||!P(e)||isNaN(e))return x;let n=_(e,t);return n?{date:n.toFormat(v,u(t)),time:n.toFormat(J,u(t))}:x}function pe(e){switch(e.type){case"date":default:return h("short-date-short-time");case"date-only":return h("short-date");case"time-only":return h("short-time");case"timestamp-offset":return M(Z({},h("short-date-short-time")),{timeZone:void 0,timeZoneName:"short"})}}function ye(e,t,n){if(!e||t==null)return null;switch(e.type){case"date":return A(t,n);case"date-only":return R(t,n);case"time-only":return j(t,n);case"timestamp-offset":return L(t,n);default:return null}}function Oe(e){let{dateComponent:t,defaultTimeZone:n,timeComponent:a,timeZoneComponent:o,oldValue:i}=e;if(!t?.value)return null;let{year:m,month:l,day:r}=s.fromFormat(t.value,v),{hour:f,minute:F,second:T,millisecond:c}=C(a,w)??s.now(),d=Y(i,n),p=o?.value?parseInt(o.value,10):d.timeZoneOffset!=null?parseInt(d.timeZoneOffset,10):new Date().getTimezoneOffset(),y=N.instance(p),O=s.fromObject({year:m,month:l,day:r,hour:f,minute:F,second:T,millisecond:c},{zone:y});return O.isValid?O.toISO({includeOffset:!0}):null}function Te(e){let{dateComponent:t,timeComponent:n,timeZone:a,max:o,min:i,oldValue:m}=e,l=C(t,a),r=!!e.applyRange;if(!l)return null;let f=null;if(n?.value!=null){let T=C(n,a),c=Date.now(),d=o!=null&&o<c?o:c,p=s.fromMillis(d,u(a)),y=l||p,{year:O,month:I,day:V}=y,{hour:$,minute:q,second:B,millisecond:G}=T||p;f=y.set({year:O,month:I,day:V,hour:$,minute:q,second:B,millisecond:G})}else{let T=_(W({value:m??Date.now(),max:o,min:i}),a),{year:c,month:d,day:p}=l,{hour:y,minute:O,second:I,millisecond:V}=T;r=!0,f=l.set({year:c,month:d,day:p,hour:y,minute:O,second:I,millisecond:V})}if(!f.isValid)return null;let F=f.toMillis();return r?W({value:F,max:o,min:i}):F}function C(e,t){if(e?.value==null||Array.isArray(e.value))return null;let n=null;return n=X(e)?s.fromFormat(e.value,v,u(t)):D(e.value),n?.isValid?n:null}function E(e){let{max:t,min:n,value:a}=e;return!isNaN(a)&&!(t!=null&&a>t)&&!(n!=null&&a<n)}function W(e){let{max:t,min:n,value:a}=e;return t!=null&&n!=null?k(a,n,t):t!=null&&a>t?t:n!=null&&a<n?n:a}function ee(e){if(!e)return"";let t=e.split(".").at(0);if(!t||t.length<1)throw new b("invalid time-only field",`Cannot parse valid time-only field value from ${e}`);let n=t.split(":"),a=new Array(3);for(let o=0;o<3;o++){let i=n.at(o)??"";a[o]=i.padStart(2,"0")}return a.join(":")}function he(e,t){switch(t){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return ee(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function ve(e){return!!e&&typeof e=="object"&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function De(e){let{type:t,range:n,value:a}=e;if(a==null||!n||a===n.min||a===n.max)return!0;if(t==="date")return E({value:a,min:n.min,max:n.max});let{rawMax:o,rawMin:i}=n,m=null,l=null,r=null;switch(t){case"date-only":m=S(o),l=S(i),r=S(a);break;case"time-only":m=D(o),l=D(i),r=D(a);break;case"timestamp-offset":m=g(o),l=g(i),r=g(a)}return!r||E({value:r.valueOf(),min:l?.valueOf(),max:m?.valueOf()})}export{fe as a,Q as b,ce as c,u as d,Y as e,de as f,pe as g,ye as h,Oe as i,Te as j,E as k,ee as l,he as m,ve as n,De as o};
