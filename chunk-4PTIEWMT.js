import{a as c}from"./chunk-TG2UTNEO.js";import{b as m}from"./chunk-YOFFGXOB.js";import{g as P}from"./chunk-XRGPJ3QY.js";import{a as T,b as g,f as a}from"./chunk-VTHXE323.js";function $(e){return{setTimeout:(r,t)=>{let n=e.setTimeout(r,t);return c(()=>e.clearTimeout(n))}}}var j=$(globalThis);function L(e){return q(e)||S(e)}function q(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function S(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function D(e,r,t){if(!L(e))throw new TypeError("target is not a Evented or EventTarget object");return S(e)?F(e,r,t):e.on(r,t)}function F(e,r,t,n){if(Array.isArray(r)){let i=r.slice();for(let o of i)e.addEventListener(o,t,n);return c(()=>{for(let o of i)e.removeEventListener(o,t,n)})}return e.addEventListener(r,t,n),c(()=>e.removeEventListener(r,t,n))}function y(e,r,t){if(!L(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(r,t);let n=D(e,r,i=>{n.remove(),t.call(e,i)});return n}function z(e,r){if(e==null)throw new Error(r??"value is None")}function B(e){return e?.destroy(),null}function G(e){return e?.dispose(),null}function k(e){return e?.remove(),null}function J(e){return e?.abort(),null}function K(e){return e?.release(),null}function Q(e,r,t){return e!=null&&r!=null?t!=null?t(e,r):e.equals(r):e===r}function X(e,r){return e?.[r]}function Y(e,r){let t;return e.some((n,i)=>(t=r(n,i),t!=null)),t??void 0}function oe(e,r){return a(this,null,function*(){let t=e.slice(),n=yield Promise.all(e.map((i,o)=>r(i,o)));return t.filter((i,o)=>n[o])})}function f(e="Aborted"){return new m("AbortError",e)}function x(e,r="Aborted"){if(H(e))throw f(r)}function w(e){return e instanceof AbortSignal?e:e?.signal??void 0}function H(e){let r=w(e);return r!=null&&r.aborted}function ie(e){if(d(e))throw e}function se(e){if(!d(e))throw e}function b(e,r){let t=w(e);if(t!=null){if(!t.aborted)return y(t,"abort",()=>r());r()}}function ae(e,r){let t=w(e);if(t!=null)return x(t),y(t,"abort",()=>r(f()))}function ue(e,r){return w(r)==null?e:new Promise((t,n)=>{let i=b(r,()=>n(f())),o=()=>{i=k(i)};e.then(o,o),e.then(t,n)})}function le(e,r,t){return Promise.race([e,I(r).then(()=>{throw new m("timeout",`Did not resolve within ${r} milliseconds (${t??"timeout"})`)})])}function d(e){return e?.name==="AbortError"}function ce(e){return a(this,null,function*(){try{return yield e}catch(r){if(!d(r))throw r;return}})}function fe(t){return a(this,arguments,function*(e,r=P.getLogger("esri")){try{return yield e}catch(n){d(n)||r.error(n)}})}function C(e){return a(this,null,function*(){if(!e)return;if(typeof e.forEach!="function"){let t=Object.keys(e),n=t.map(s=>e[s]),i=yield C(n),o={};return t.map((s,u)=>o[s]=i[u]),o}let r=e;return Promise.allSettled(r).then(t=>Array.from(r,(n,i)=>{let o=t[i];return o.status==="fulfilled"?{promise:n,value:o.value}:{promise:n,error:o.reason}}))})}function me(e){return a(this,null,function*(){return(yield C(e)).filter(r=>!!r.value).map(r=>r.value)})}function be(e){return a(this,null,function*(){return(yield Promise.allSettled(e)).filter(r=>r.status==="fulfilled").map(r=>r.value)})}function we(e){return a(this,null,function*(){return(yield Promise.allSettled(e)).filter(r=>r.status==="rejected").map(r=>r.reason)})}function I(e,r=void 0,t){let n=new AbortController;return b(t,()=>n.abort()),new Promise((i,o)=>{let s=setTimeout(()=>{s=0,i(r)},e);b(n,()=>{s&&(clearTimeout(s),o(f()))})})}function de(e,r,t,n){let i=t&&"abort"in t?t:null;n!=null||i||(n=t);let o=setTimeout(()=>{o=0,i?.abort()},r),s=()=>n||new m("promiseUtils:timeout","The wrapped promise did not resolve within "+r+" ms");return e.then(u=>{if(o===0)throw s();return clearTimeout(o),u},u=>{throw clearTimeout(o),o===0?s():u})}function pe(e,r){let t=new AbortController,n=setTimeout(()=>t.abort(),r);return b(e,()=>{t.abort(),clearTimeout(n)}),g(T({},e),{signal:t.signal})}function N(e){return e&&typeof e.then=="function"}function O(e){return N(e)?e:Promise.resolve(e)}function he(e,r=-1){let t,n,i,o,s=null,u=(...p)=>{if(t){n=p,o&&o.reject(f()),o=M();let l=o.promise;if(s){let v=s;s=null,v.abort()}return l}if(i=o||M(),o=null,r>0){let l=new AbortController;t=O(e(...p,l.signal));let v=t;I(r).then(()=>{t===v&&(o?l.abort():s=l)})}else t=1,t=O(e(...p));let E=()=>{let l=n;n=i=t=s=null,l!=null&&u(...l)},A=t,h=i;return A.then(E,E),A.then(h.resolve,h.reject),h.promise};return u}function M(){let e,r,t=new Promise((i,o)=>{e=i,r=o}),n=i=>{e(i)};return n.resolve=i=>e(i),n.reject=i=>r(i),n.timeout=(i,o)=>j.setTimeout(()=>n.reject(o),i),n.promise=t,n}function ve(e,r){return e.then(r,r)}function ye(e,r){r.then(e.resolve,e.reject)}function Ee(e){return a(this,null,function*(){yield Promise.resolve(),x(e)})}export{z as a,B as b,G as c,k as d,J as e,K as f,Q as g,X as h,Y as i,j,L as k,D as l,y as m,oe as n,f as o,x as p,w as q,H as r,ie as s,se as t,b as u,ae as v,ue as w,le as x,d as y,ce as z,fe as A,C as B,me as C,be as D,we as E,I as F,de as G,pe as H,N as I,O as J,he as K,M as L,ve as M,ye as N,Ee as O};
