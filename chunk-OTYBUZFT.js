import{a as K}from"./chunk-5K2Y3IYS.js";import"./chunk-SD7YCRLG.js";import"./chunk-D4VZRD7Q.js";import"./chunk-UYORU626.js";import"./chunk-26K2ZCXS.js";import"./chunk-BMQMHMNH.js";import"./chunk-U4YCXFAL.js";import"./chunk-4GIPQCCB.js";import"./chunk-7MO4BRD3.js";import"./chunk-UOTXMYTS.js";import"./chunk-YNGT6ASM.js";import"./chunk-FH4ZV652.js";import"./chunk-WRDLV4VD.js";import"./chunk-CVM2NUCZ.js";import"./chunk-SYXT2WRS.js";import"./chunk-KUE5X75D.js";import{b as we,c as q,d as ve,h as ye,m as fe,s as _e}from"./chunk-CTPO46HK.js";import{c as be}from"./chunk-MGFIAYXF.js";import{b as ue,c as ge}from"./chunk-SWC7BSPZ.js";import"./chunk-SBU7IJGM.js";import"./chunk-Y6AUTJNM.js";import"./chunk-DVZ4Z4F3.js";import"./chunk-PKB5DBGQ.js";import"./chunk-M3BFYJNF.js";import"./chunk-PT2T74VZ.js";import"./chunk-PKVI3POI.js";import"./chunk-NQ53MXMB.js";import"./chunk-4RK2B3SZ.js";import{a as pe}from"./chunk-EPKVBNFW.js";import{a as de,c as he}from"./chunk-JJ3DE5DS.js";import{a as me}from"./chunk-FHBFWDFD.js";import{o as W}from"./chunk-6OWZRPJO.js";import"./chunk-67GIWMYL.js";import"./chunk-7IOOWZFM.js";import{a as ce}from"./chunk-2HQALWZQ.js";import"./chunk-H2NTHPNN.js";import"./chunk-YTAJKLRN.js";import"./chunk-456M7HFK.js";import"./chunk-Y4PJQPM4.js";import"./chunk-P4JHTV62.js";import"./chunk-5A7AFZJT.js";import"./chunk-Z5EURZKA.js";import{a as re}from"./chunk-XIZ7IH6M.js";import"./chunk-JD66UCS7.js";import"./chunk-FU7RO3AR.js";import"./chunk-4YRY3D3A.js";import"./chunk-ZZ5UYT7M.js";import"./chunk-U4XVPHQU.js";import"./chunk-PE276TWH.js";import"./chunk-BMZ3PE5Y.js";import"./chunk-EHG7JRYJ.js";import"./chunk-FNY6LFKI.js";import"./chunk-IBVI7JQ7.js";import"./chunk-2DFFQEIV.js";import"./chunk-J2AEVBSH.js";import"./chunk-5ODXFRPI.js";import"./chunk-E5QCV5LT.js";import"./chunk-QS3EYJPF.js";import"./chunk-HJJZ2AXH.js";import"./chunk-TPNSUEHH.js";import"./chunk-SMVNQSZ4.js";import"./chunk-Z2QGLRDB.js";import"./chunk-7IDFDPA3.js";import"./chunk-VL2YL74P.js";import"./chunk-P2AJD2R2.js";import"./chunk-UMJIJLDA.js";import"./chunk-E5NFS3KN.js";import"./chunk-HQHD6BMN.js";import"./chunk-AIKKGGPG.js";import"./chunk-RDGG4TVD.js";import"./chunk-3IQFPOUU.js";import"./chunk-I4CY6X6S.js";import"./chunk-VQ4QGNRX.js";import"./chunk-4KXJ537H.js";import"./chunk-JIRULGDT.js";import"./chunk-QJGOWIJD.js";import"./chunk-QML26MQC.js";import"./chunk-RNZY2XUD.js";import"./chunk-JXPUHKCT.js";import{e as ae,g as Q}from"./chunk-XR5FT7TQ.js";import"./chunk-LAX5536Z.js";import"./chunk-N3HRYLNW.js";import"./chunk-4DBMALZW.js";import"./chunk-CVWWHM2V.js";import"./chunk-6OQYVEQJ.js";import"./chunk-YOXOWGT6.js";import"./chunk-EFZOSMYP.js";import"./chunk-WI7F4ZKJ.js";import"./chunk-MJ7M24NH.js";import"./chunk-GJH4QFRX.js";import"./chunk-T63F7663.js";import"./chunk-O4V2VBSK.js";import"./chunk-5TKRKB5E.js";import"./chunk-XAGMDNNR.js";import"./chunk-OP2TLIUN.js";import"./chunk-T2THIR6K.js";import"./chunk-LORHDXEB.js";import"./chunk-BBBPJI4H.js";import"./chunk-45BTW5EG.js";import"./chunk-TPFBHGDM.js";import"./chunk-73NLRHJD.js";import"./chunk-PNFEUBDF.js";import"./chunk-6RCCEJDL.js";import"./chunk-PQ2TNDUX.js";import"./chunk-6X6MKRQ3.js";import"./chunk-FQFHMHYU.js";import"./chunk-SZMEI3WL.js";import"./chunk-KKVGD67U.js";import"./chunk-MYOJWRDU.js";import"./chunk-L7UKJKHG.js";import"./chunk-V2IENAEU.js";import"./chunk-QAGQFNF2.js";import"./chunk-SY7JS2VW.js";import"./chunk-WK57SDN6.js";import"./chunk-AG4V3ZUO.js";import"./chunk-YWLMJ26A.js";import"./chunk-QAWNU3UJ.js";import"./chunk-HRQT4R6X.js";import"./chunk-44BHLWQ4.js";import"./chunk-5BPM64SU.js";import"./chunk-CZAUQJCN.js";import"./chunk-5GYPON2V.js";import"./chunk-TC4RVDI6.js";import"./chunk-WDY6ALC6.js";import"./chunk-KGFXFSTP.js";import"./chunk-PMVHHMQJ.js";import"./chunk-NAFOM5UA.js";import"./chunk-B526OXED.js";import"./chunk-XPTKDFYS.js";import"./chunk-ZYTQ7T5Q.js";import"./chunk-MZC42HHY.js";import"./chunk-DREO3ZIC.js";import"./chunk-L7OBQ2MX.js";import"./chunk-2SEACSJ7.js";import"./chunk-FTMCRRWI.js";import"./chunk-L54EYG5G.js";import"./chunk-DH7A4UPK.js";import"./chunk-JLE3XOUQ.js";import"./chunk-ERHGRSXY.js";import"./chunk-AMEUMZLJ.js";import"./chunk-VU2QHSDR.js";import"./chunk-QHZWU2K5.js";import"./chunk-JMNB6CKE.js";import"./chunk-L3RS33Q4.js";import"./chunk-ZUPR4L6O.js";import"./chunk-DO7UF2F2.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import"./chunk-4TAYW5IF.js";import"./chunk-AR2JEA37.js";import"./chunk-IPLEDIX4.js";import"./chunk-RB3POJ2P.js";import"./chunk-HV62ZNCD.js";import"./chunk-UTE3ASAZ.js";import"./chunk-2AFEAPEX.js";import"./chunk-GNGXUEWV.js";import"./chunk-QBI5NDCA.js";import"./chunk-NOHW2DKR.js";import"./chunk-HVJAAM3A.js";import"./chunk-ACPEJEHK.js";import"./chunk-I7B3LWNP.js";import"./chunk-YP2E5N4E.js";import"./chunk-QLMNLSCT.js";import"./chunk-P55G5ATK.js";import"./chunk-JT3K52KQ.js";import"./chunk-SPLEGG4R.js";import"./chunk-Y4TJDUGP.js";import"./chunk-6PAFOJ4W.js";import"./chunk-74SDGE57.js";import"./chunk-FRXWHX3T.js";import"./chunk-DTDQ5X42.js";import"./chunk-RX2HFR4X.js";import"./chunk-AZW7YPTQ.js";import"./chunk-NJLJX4X6.js";import"./chunk-DZHFTD24.js";import"./chunk-K57Z4J34.js";import"./chunk-VWG3KVOU.js";import"./chunk-JOEUVLAN.js";import"./chunk-JZQDGIDQ.js";import"./chunk-CZ6CGC7I.js";import"./chunk-7B6U3N62.js";import"./chunk-46WDO5LS.js";import"./chunk-G5EYK5KM.js";import"./chunk-YJKJQU3F.js";import"./chunk-OK4K3OQT.js";import"./chunk-BPWNCOXC.js";import"./chunk-VNS4CQ27.js";import"./chunk-AVMO6LCR.js";import"./chunk-TEGPMVWT.js";import"./chunk-CLQRQC3Y.js";import"./chunk-KSNU73LO.js";import"./chunk-FACEVGRE.js";import"./chunk-5XTCPT52.js";import"./chunk-YW3L7OMP.js";import"./chunk-R3XLNYYB.js";import"./chunk-2HYVVLKS.js";import"./chunk-XRTA5GHC.js";import"./chunk-Y6XW36QP.js";import"./chunk-ZXKU6WBY.js";import"./chunk-BMYVPMAK.js";import"./chunk-6F25LG6O.js";import"./chunk-6KRFVLII.js";import"./chunk-GJ2QRXGN.js";import"./chunk-TJ6P6NLD.js";import"./chunk-CSNRCIB5.js";import"./chunk-3JGYBNJA.js";import"./chunk-F5AJITOA.js";import"./chunk-IHATPE6U.js";import"./chunk-PU4AK46X.js";import"./chunk-ZC6EBRE4.js";import"./chunk-KALOJIUA.js";import"./chunk-KMMTNF7G.js";import"./chunk-E7AX56GD.js";import"./chunk-IDVLLREH.js";import"./chunk-DWLSVYOY.js";import"./chunk-PQGCNP5H.js";import"./chunk-UASS7NJI.js";import"./chunk-WZRAC35O.js";import"./chunk-KUYAWYSS.js";import"./chunk-MIS6QMFE.js";import"./chunk-MDZTV2VL.js";import"./chunk-RNC4P66O.js";import"./chunk-7LHOQXZT.js";import"./chunk-BCREO4Q5.js";import"./chunk-U4QEPZJ3.js";import"./chunk-KJUZWSCL.js";import"./chunk-3WO6D7MU.js";import"./chunk-BUZ3SPLE.js";import"./chunk-K75TK42V.js";import"./chunk-CELWVZPW.js";import"./chunk-VV5G7VY5.js";import"./chunk-OLOKUDVI.js";import"./chunk-DYTVXYAV.js";import"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-KVM6SHDX.js";import"./chunk-HX2VGIR2.js";import"./chunk-ERDKAICI.js";import"./chunk-EQZWYK27.js";import"./chunk-JLPLCY2B.js";import"./chunk-DKGGDYJI.js";import"./chunk-5LA3PVK5.js";import"./chunk-IR6XCBC4.js";import"./chunk-C6JPAW54.js";import"./chunk-WD3OPXCN.js";import"./chunk-FA3WGIU4.js";import"./chunk-WWVPA6PE.js";import"./chunk-ZQIC5NFT.js";import"./chunk-VIEK2X23.js";import"./chunk-XKIFGPJO.js";import"./chunk-PEW2PLAN.js";import"./chunk-Q6Y4JG7Q.js";import"./chunk-7F5DJLJT.js";import"./chunk-CX5IFQZJ.js";import"./chunk-NJWTSROP.js";import"./chunk-D3R25AF2.js";import"./chunk-ARRCN5K3.js";import"./chunk-GHKL3NOH.js";import{a as O}from"./chunk-AXYQJCCX.js";import{a as s}from"./chunk-5XCFNEYX.js";import{a as se}from"./chunk-GQL2MBZT.js";import{b as ne}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import{i as Z,j as z,m as B}from"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import{a as V}from"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as F,c as ie,i as le,j as oe}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as t}from"./chunk-QGVBCWUY.js";import{H as k}from"./chunk-MYO4NP2N.js";import{e as i}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as E}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import{y as te}from"./chunk-QBWJMFH5.js";import{a as Y,b as ee,f as A}from"./chunk-VTHXE323.js";var $=class extends k{constructor(e){super(e),this.sortAscending=!0,this.sortDescending=!0}};t([i({type:Boolean,nonNullable:!0})],$.prototype,"sortAscending",void 0),t([i({type:Boolean,nonNullable:!0})],$.prototype,"sortDescending",void 0),$=t([E("esri.widgets.FeatureTable.ColumnMenuVisibleElements")],$);var R=$;var f=class extends k{constructor(e){super(e),this.clearSelection=!0,this.deleteSelection=!0,this.exportSelectionToCSV=!0,this.refreshData=!0,this.selectedRecordsShowAllToggle=!0,this.selectedRecordsShowSelectedToggle=!0,this.toggleColumns=!0,this.zoomToSelection=!0}};t([i({type:Boolean,nonNullable:!0})],f.prototype,"clearSelection",void 0),t([i({type:Boolean,nonNullable:!0})],f.prototype,"deleteSelection",void 0),t([i({type:Boolean,nonNullable:!0})],f.prototype,"exportSelectionToCSV",void 0),t([i({type:Boolean,nonNullable:!0})],f.prototype,"refreshData",void 0),t([i({type:Boolean,nonNullable:!0})],f.prototype,"selectedRecordsShowAllToggle",void 0),t([i({type:Boolean,nonNullable:!0})],f.prototype,"selectedRecordsShowSelectedToggle",void 0),t([i({type:Boolean,nonNullable:!0})],f.prototype,"toggleColumns",void 0),t([i({type:Boolean,nonNullable:!0})],f.prototype,"zoomToSelection",void 0),f=t([E("esri.widgets.FeatureTable.TableMenuVisibleElements")],f);var J=f;var w=class extends k{constructor(e){super(e),this.columnDescriptions=!0,this.columnMenus=!0,this.columnMenuItems=new R,this.close=!1,this.header=!0,this.layerDropdown=!1,this.layerDropdownIcons=!0,this.menu=!0,this.menuItems=new J,this.progress=!0,this.selectionColumn=!0,this.tooltips=!0}};t([i({type:Boolean,nonNullable:!0})],w.prototype,"columnDescriptions",void 0),t([i({type:Boolean,nonNullable:!0})],w.prototype,"columnMenus",void 0),t([i({type:R,nonNullable:!0})],w.prototype,"columnMenuItems",void 0),t([i({type:Boolean,nonNullable:!0})],w.prototype,"close",void 0),t([i({type:Boolean,nonNullable:!0})],w.prototype,"header",void 0),t([i({type:Boolean,nonNullable:!0})],w.prototype,"layerDropdown",void 0),t([i({type:Boolean,nonNullable:!0})],w.prototype,"layerDropdownIcons",void 0),t([i({type:Boolean,nonNullable:!0})],w.prototype,"menu",void 0),t([i({type:J,nonNullable:!0})],w.prototype,"menuItems",void 0),t([i({type:Boolean,nonNullable:!0})],w.prototype,"progress",void 0),t([i({type:Boolean,nonNullable:!0})],w.prototype,"selectionColumn",void 0),t([i({type:Boolean,nonNullable:!0})],w.prototype,"tooltips",void 0),w=t([E("esri.widgets.FeatureTable.VisibleElements")],w);var x=w;var X,_="esri-feature-table",P=`${_}__prompt`,T=`${_}__attachments-view`,u={base:_,content:`${_}__content`,menuPopover:`${_}__menu-popover`,layerDropdownMenu:`${_}__layer-switcher-menu`,tableContainer:`${_}__table-container`,tableContainerWithAttachments:`${_}__table-container--attachments`,tableNavigation:`${_}__table-navigation`,attachmentsView:T,attachmentsViewContent:`${T}__content`,attachmentsViewDropArea:`${T}__drop-area`,attachmentsViewIcon:`${T}__icon`,attachmentsViewInformation:`${T}__information`,attachmentsViewList:`${T}__list`,attachmentsViewListFileSize:`${T}__list__filesize`,attachmentsViewListItemDelete:`${T}__list-item--delete`,attachmentsViewListThumbnail:`${T}__list__thumbnail`,expanded:`${_}__expanded`,collapsed:`${_}__collapsed`,promptContainer:P,promptHeader:`${P}__header`,promptHeading:`${P}__header__heading`,promptMessage:`${P}__message`,promptDivider:`${P}__divider`,promptActions:`${P}__actions`},m={attachment:"attachment",chevronDown:"chevron-down",chevronLeft:"chevron-left",chevronRight:"chevron-right",clearSelection:"clear-selection",downloadTo:"download-to",exclamationMarkTriangle:"exclamation-mark-triangle",exportToCSV:"file-csv",folderOpen:"folder-open",delete:"trash",launch:"launch",layers:"layers",moveUp:"move-up",plus:"plus",refresh:"refresh",replaceImage:"replace-image",save:"save",showAll:"selection-x",showColumn:"show-column",showSelected:"selection-filter",upload:"upload",zoomToSelection:"zoom-to-object"},o=X=class extends se{constructor(e,l){super(e,l),this._attachmentsInput=null,this._columnVisibilityActions=new Map,this.attachmentsList=null,this.description=null,this.disabled=!1,this.menuConfig=null,this.title=null,this.viewModel=new K,this.visibleElements=new x,this._showDeletePrompt=this._showDeletePrompt.bind(this),this._onDeleteSelectionClick=this._onDeleteSelectionClick.bind(this)}initialize(){this.addHandles([F(()=>[this.viewModel.store.querying,this.viewModel.store.syncing,this.editingEnabled],()=>this.scheduleRender()),F(()=>[this._effectiveVisibleElements,this._effectiveVisibleElements.columnDescriptions,this._effectiveVisibleElements.columnMenus,this._effectiveVisibleElements.columnMenuItems,this.columns.length],()=>{this.columns.forEach(e=>e.visibleElements=this._effectiveVisibleElements),this.refreshCellContent()},le),F(()=>this._effectiveVisibleElements.selectionColumn,e=>{this.grid&&(this.grid.selectionColumnEnabled=e)},oe),ie(()=>this.viewModel,"show-related-table",e=>this._onShowRelatedTable(e)),F(()=>this.editingEnabled,()=>{let{attachmentsViewOptions:e}=this;this.clearPrompt(),e&&(e.form?.reset(),e.candidates=null)})])}loadDependencies(){return Promise.all([ne({action:()=>import("./chunk-X23M5IZ6.js"),alert:()=>import("./chunk-NWOGDEQB.js"),button:()=>import("./chunk-K3RCADAN.js"),chip:()=>import("./chunk-YJHYFSU4.js"),dropdown:()=>import("./chunk-F6T2J7EG.js"),"dropdown-group":()=>import("./chunk-KPY43GC2.js"),"dropdown-item":()=>import("./chunk-XJK7VSUG.js"),icon:()=>import("./chunk-7Z2RNQA3.js"),label:()=>import("./chunk-S24JESVO.js"),list:()=>import("./chunk-4MPCQ5DO.js"),"list-item":()=>import("./chunk-MRM6JRFU.js"),pagination:()=>import("./chunk-BN55XOVI.js"),panel:()=>import("./chunk-GS5FRZ5P.js"),popover:()=>import("./chunk-J5HY7FQ5.js"),progress:()=>import("./chunk-5ONAAT6N.js"),switch:()=>import("./chunk-IIWK5IA5.js"),tooltip:()=>import("./chunk-24BDRL23.js")}),ue(),we()])}destroy(){this.drainRelatedTables(),this.clearPrompt()}get _effectiveDescription(){let{description:e}=this;return e!=null?B.sanitize(typeof e=="function"?e():e):void 0}get _effectiveLayers(){let{layer:e,layers:l}=this,n=l?.length?l.filter(q):[],a=n.length?n:[...this._viewLayers];return e&&!a.includes(e)&&a.push(e),a}get _effectiveTitle(){let{layer:e,messages:l,state:n,highlightIds:a,title:r,size:c}=this;if(r)return B.sanitize(typeof r=="function"?r():r);if(!e)return l.noLayer;switch(n){case"disabled":return l.errorLayer;case"ready":case"loading":return l.loading;case"error":return l.errorData}return V(l.header,{title:B.sanitize(e.title),count:c,selected:a.length})}get _effectiveVisibleElements(){return this.visibleElementsOverride??this.visibleElements}get _filteredTables(){let e=this.relatedTables.toArray(),l=e.length===1;return this.allRelatedTablesVisible?e:l?[e[0]]:this._shouldShowAttachmentsView?e.slice(-1):e.slice(-2)}get _hasAttachmentsViewError(){return this.attachmentsViewOptions.error!=null}get _hasCustomMenuItems(){return!!this.menuConfig?.items?.length}get _hasDefaultMenuItems(){return!!(this._showClearSelectionAction||this._showDeleteSelectionAction||this._showExportSelectionToCSVAction||this._showRefreshDataAction||this._showZoomToSelectionAction||this._showSelectedRecordsShowSelectedAction||this._showSelectedRecordsShowAllAction||this._showColumnsVisibilityAction)}get _shouldShowGrid(){return this.allRelatedTablesVisible||this.relatedTables.length===1&&!this._shouldShowAttachmentsView}get _shouldShowMenu(){let{header:e,menu:l}=this._effectiveVisibleElements;return!(!e||!l||!this._hasDefaultMenuItems&&!this._hasCustomMenuItems)}get _shouldShowAttachmentsView(){return!(this.attachmentsViewOptions.objectId==null&&!this.relatedTables.some(e=>e.attachmentsViewOptions.objectId!=null))}get _showClearSelectionAction(){return!(!this.highlightIds.length||!this._effectiveVisibleElements.menuItems?.clearSelection||this.relatedTables.length)}get _showColumnsVisibilityAction(){let{header:e,menu:l,menuItems:n}=this._effectiveVisibleElements;return!(!(e&&l&&n?.toggleColumns)||this.showRelatedTableCallback||this.allRelatedTablesVisible||this._shouldShowAttachmentsView)}get _showDeleteSelectionAction(){return!(!(this.editingEnabled&&this.highlightIds.length&&this._effectiveVisibleElements.menuItems?.deleteSelection&&this.layer?.capabilities?.operations?.supportsDelete)||this.relatedTables.length)}get _showExportSelectionToCSVAction(){return!(!(this._effectiveVisibleElements.menuItems.exportSelectionToCSV&&this.layer&&this.highlightIds.length)||this.relatedTables.length)}get _showLayerDropdown(){return!(!this._effectiveLayers.length||!this._effectiveVisibleElements.layerDropdown)}get _shouldShowNavigationBar(){let e=!!this.relatedTable||this._shouldShowAttachmentsView;return!this.tableParent&&e}get _showRefreshDataAction(){return!!this._effectiveVisibleElements.menuItems?.refreshData}get _showSelectedRecordsShowSelectedAction(){let e=this.objectIds.length,l=this.highlightIds.length;return!(!l||!this._effectiveVisibleElements.menuItems?.selectedRecordsShowSelectedToggle||e&&l===e||this.relatedTables.length)}get _showSelectedRecordsShowAllAction(){return!(!this._effectiveVisibleElements.menuItems?.selectedRecordsShowAllToggle||!this.objectIds.length||this.relatedTables.length)}get _showZoomToSelectionAction(){return!(!this.view||!this.highlightIds.length||this.effectiveTable.layer?.isTable||!this._effectiveVisibleElements.menuItems?.zoomToSelection)}get _viewLayers(){let e=this.view?.map;if(!e)return[];let l=new Set,n=r=>{!q(r)||Q(r)||l.has(r)||(r.load(),l.add(r))},a=r=>{ce(r)||r.type==="catalog-footprint"||(ae(r)?(r.load(),r.layers?.forEach(n),r.tables?.forEach(n)):ye(r)?(r.loadAll(),r.sublayers?.forEach(n),r.subtables?.forEach(n)):Q(r)?(r.loadAll(),r.sublayers?.forEach(n)):n(r))};return e.allLayers.forEach(a),e.allTables.forEach(a),[...l.values()]}get grid(){return this.viewModel.grid}get actionColumnConfig(){return this.viewModel.actionColumnConfig}set actionColumnConfig(e){this.viewModel.actionColumnConfig=e}get activeFilters(){return this.viewModel.activeFilters}get activeSortOrders(){return this.viewModel.activeSortOrders}get allColumns(){return this.viewModel.allColumns}get allRelatedTablesVisible(){return this.viewModel.allRelatedTablesVisible}get attachmentsEnabled(){return this.viewModel.attachmentsEnabled}set attachmentsEnabled(e){this.viewModel.attachmentsEnabled=e}get attachmentsViewOptions(){return this.viewModel.attachmentsViewOptions}set attachmentsViewOptions(e){this.viewModel.attachmentsViewOptions=e}get attributeTableTemplate(){return this.viewModel.attributeTableTemplate}set attributeTableTemplate(e){this.viewModel.attributeTableTemplate=e}get autoRefreshEnabled(){return this.viewModel.autoRefreshEnabled}set autoRefreshEnabled(e){this.viewModel.autoRefreshEnabled=e}get clearPrompt(){return this.viewModel.clearPrompt}set clearPrompt(e){this.viewModel.clearPrompt=e}get columnPerformanceModeEnabled(){return this.viewModel.columnPerformanceModeEnabled}set columnPerformanceModeEnabled(e){this.viewModel.columnPerformanceModeEnabled=e}get columnReorderingEnabled(){return this.viewModel.columnReorderingEnabled}set columnReorderingEnabled(e){this.viewModel.columnReorderingEnabled=e}get columns(){return this.viewModel.columns}get editingEnabled(){return this.viewModel.editingEnabled}set editingEnabled(e){this.viewModel.editingEnabled=e}get effectiveSize(){return this.viewModel.effectiveSize}get effectiveTable(){return this.relatedTable||this}get filterGeometry(){return this.viewModel.filterGeometry}set filterGeometry(e){this.viewModel.filterGeometry=e}get filterBySelectionEnabled(){return this.viewModel.filterBySelectionEnabled}set filterBySelectionEnabled(e){this.viewModel.filterBySelectionEnabled=e}get hiddenFields(){return this.viewModel.hiddenFields}set hiddenFields(e){this.viewModel.hiddenFields=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get highlightIds(){return this.viewModel.highlightIds}set highlightIds(e){this.viewModel.highlightIds=e}get icon(){return"table"}set icon(e){this._overrideIfSome("icon",e)}get initialSize(){return this.viewModel.initialSize}set initialSize(e){this.viewModel.initialSize=e}get isQueryingOrSyncing(){return this.viewModel.isQueryingOrSyncing}get isSyncingAttachments(){return this.viewModel.isSyncingAttachments}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}get layerView(){return this.viewModel.layerView}get maxSize(){return this.viewModel.maxSize}set maxSize(e){this.viewModel.maxSize=e}get messages(){return this.viewModel.messages}set messages(e){this.viewModel.messages=e}get messagesCommon(){return this.viewModel.messagesCommon}set messagesCommon(e){this.viewModel.messagesCommon=e}get messagesUnits(){return this.viewModel.messagesUnits}set messagesUnits(e){this.viewModel.messagesUnits=e}get messagesURIUtils(){return this.viewModel.messagesURIUtils}set messagesURIUtils(e){this.viewModel.messagesURIUtils=e}get multipleSelectionEnabled(){return this.viewModel.multipleSelectionEnabled}set multipleSelectionEnabled(e){this.viewModel.multipleSelectionEnabled=e}get multiSortEnabled(){return this.viewModel.multiSortEnabled}set multiSortEnabled(e){this.viewModel.multiSortEnabled=e}get objectIds(){return this.viewModel.objectIds}set objectIds(e){this.viewModel.objectIds=e}get outFields(){return this.viewModel.outFields}set outFields(e){this.viewModel.outFields=e}get pageCount(){return this.viewModel.pageCount}get pageIndex(){return this.viewModel.pageIndex}set pageIndex(e){this.viewModel.pageIndex=e}get pageSize(){return this.viewModel.pageSize}set pageSize(e){this.viewModel.pageSize=e}get paginationEnabled(){return this.viewModel.paginationEnabled}set paginationEnabled(e){this.viewModel.paginationEnabled=e}get prompt(){return this.viewModel.prompt}set prompt(e){this.viewModel.prompt=e}get relatedRecordsEnabled(){return this.viewModel.relatedRecordsEnabled}set relatedRecordsEnabled(e){this.viewModel.relatedRecordsEnabled=e}get relatedTable(){return this.viewModel.relatedTable}get relatedTables(){return this.viewModel.relatedTables}set relatedTables(e){this.viewModel.relatedTables=e}get relationship(){return this.viewModel.relationship}get relationshipColumnConfigs(){return this.viewModel.relationshipColumnConfigs}set relationshipColumnConfigs(e){this.viewModel.relationshipColumnConfigs=e}get relationshipConfig(){return this.viewModel.relationshipConfig}set relationshipConfig(e){this.viewModel.relationshipConfig=e}get relationshipInfos(){return this.viewModel.relationshipInfos}get returnGeometryEnabled(){return this.viewModel.returnGeometryEnabled}set returnGeometryEnabled(e){this.viewModel.returnGeometryEnabled=e}get returnMEnabled(){return this.viewModel.returnMEnabled}set returnMEnabled(e){this.viewModel.returnMEnabled=e}get returnZEnabled(){return this.viewModel.returnZEnabled}set returnZEnabled(e){this.viewModel.returnZEnabled=e}get rowHighlightIds(){return this.viewModel.rowHighlightIds}set rowHighlightIds(e){this.viewModel.rowHighlightIds=e}get selectionSource(){return this.viewModel.selectionSource}set selectionSource(e){this.viewModel.selectionSource=e}get showAllRelatedTables(){return this.viewModel.showAllRelatedTables}set showAllRelatedTables(e){this.viewModel.showAllRelatedTables=e}get showPrompt(){return this.viewModel.showPrompt}set showPrompt(e){this.viewModel.showPrompt=e}get showRelatedTableCallback(){return this.viewModel.showRelatedTableCallback}set showRelatedTableCallback(e){this.viewModel.showRelatedTableCallback=e}get size(){return this.viewModel.size}get state(){return this.viewModel.state}get tableController(){return this.viewModel.tableController}set tableController(e){this.viewModel.tableController=e}get tableParent(){return this.viewModel.tableParent}set tableParent(e){this.viewModel.tableParent=e}get tableTemplate(){return this.viewModel.tableTemplate}set tableTemplate(e){this.viewModel.tableTemplate=e}get tableTemplateOverride(){return this.viewModel.tableTemplateOverride}set tableTemplateOverride(e){this.viewModel.tableTemplateOverride=e}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(e){this.viewModel.timeExtent=e}get timeZone(){return this.viewModel.timeZone}set timeZone(e){this.viewModel.timeZone=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visibleElementsOverride(){let{attachmentsViewOptions:e,relatedTable:l,tableController:n,visibleElements:a}=this,{columnDescriptions:r,columnMenus:c,tooltips:p}=a,d=e.objectId!=null;if(l)return new x({columnDescriptions:r,columnMenus:c,tooltips:p,close:a.close,header:a.header,layerDropdown:a.layerDropdown,layerDropdownIcons:a.layerDropdownIcons,menu:a.menu,menuItems:a.menuItems,progress:a.progress,selectionColumn:!1,columnMenuItems:new R({sortAscending:!1,sortDescending:!1})});if(n){let g=n.relatedTable===this,h=n.allRelatedTablesVisible,v=g&&a.selectionColumn&&!h&&!d,b=g&&!h&&!d;return new x({columnDescriptions:r,columnMenus:c,tooltips:p,selectionColumn:v,close:!1,header:!1,layerDropdown:!1,menu:!1,progress:!1,columnMenuItems:new R({sortAscending:b,sortDescending:b})})}return d?new x({columnDescriptions:r,columnMenus:c,tooltips:p,close:a.close,header:a.header,layerDropdown:a.layerDropdown,layerDropdownIcons:a.layerDropdownIcons,menu:a.menu,menuItems:a.menuItems,progress:a.progress,selectionColumn:!1,columnMenuItems:new R({sortAscending:!1,sortDescending:!1})}):null}clearSelectionFilter(){this.viewModel.clearSelectionFilter()}deleteAttachments(e,l,n){return A(this,null,function*(){e!=null&&l?.length&&(n?this._showDeleteAttachmentPrompt(e,l):yield this.viewModel.deleteAttachments(e,l))})}deleteSelection(e){return this.highlightIds.length?e?(this._showDeletePrompt(),this.scheduleRender(),Promise.resolve()):this.viewModel.deleteSelection():Promise.resolve()}downloadAttachmentById(e,l){return A(this,null,function*(){return this.viewModel.downloadAttachmentById(e,l)})}drainRelatedTables(){this.viewModel.drainRelatedTables()}exportSelectionToCSV(e){return this.viewModel.exportSelectionToCSV(e)}filterBySelection(){this.viewModel.filterBySelection()}findColumn(e){return this.viewModel.findColumn(e)}goToPage(e){this.viewModel.goToPage(e)}hideColumn(e){this.grid?.hideColumn(e)}nextPage(){this.viewModel.nextPage()}previousPage(){this.viewModel.previousPage()}refresh(){return A(this,null,function*(){yield this.viewModel.refresh()})}refreshCellContent(){this.viewModel.refreshCellContent()}saveAttachmentsViewForm(){return A(this,null,function*(){yield this.viewModel.saveAttachmentsViewForm()})}showAllColumns(){this.viewModel.showAllColumns()}showColumn(e){this.grid?.showColumn(e)}sortColumn(e,l){this.viewModel.sortColumn(e,l)}scrollLeft(){this.viewModel.scrollLeft()}scrollToBottom(){this.viewModel.scrollToBottom()}scrollToIndex(e){this.viewModel.scrollToIndex(e)}scrollToRow(e){this.viewModel.scrollToRow(e)}scrollToTop(){this.viewModel.scrollToTop()}toggleColumnVisibility(e){this.viewModel.toggleColumnVisibility(e)}zoomToSelection(){this.effectiveTable.viewModel.zoomToSelection()}render(){let{_effectiveVisibleElements:e,isQueryingOrSyncing:l,menuConfig:n,state:a}=this;return s("div",{bind:this,class:this.classes(u.base,me.widget)},s("calcite-panel",{bind:this,class:u.content,closable:e.close,description:this._effectiveDescription,disabled:this.disabled||a==="disabled"&&!this._effectiveLayers?.length,heading:e.header?this._effectiveTitle:void 0,loading:a==="loading",menuOpen:!!n?.open,overlayPositioning:"fixed",onCalcitePanelClose:r=>{r.currentTarget.closed=!1,this.emit("close")}},e.progress?s("calcite-progress",{type:l?"indeterminate":"determinate"}):null,this._showLayerDropdown?this._renderLayerDropdown():null,this._renderColumnVisibilityAction(),this._renderHeaderMenuActions(),this._renderNavigationBar(),this._renderTables(),this._renderError()),this._renderColumnVisibilityPopover(),this._renderPrompt())}_renderTables(){let{grid:e,relatedTables:l}=this,n=this.classes(u.tableContainer);if(l.length){let a=this.classes(u.base,this.allRelatedTablesVisible?u.expanded:u.collapsed,this._shouldShowAttachmentsView?u.tableContainerWithAttachments:void 0);return s("div",{class:n},s("calcite-panel",{overlayPositioning:"fixed"},s("div",null,[this._shouldShowGrid?s("div",{class:a},e?.render(),this._renderPagination()):void 0,...this._filteredTables.map(r=>{let c=l.indexOf(r);return s("div",{class:a,key:`related-${c}`},r.render())}),,])))}return this.attachmentsViewOptions.objectId!=null?s("div",{class:n},s("calcite-panel",{overlayPositioning:"fixed"},s("div",null,[s("div",{class:this.classes(u.base,u.collapsed)},e?.render(),this._renderPagination()),this._renderAttachmentsView()]))):[s("div",{class:n},e?.render()),this._renderPagination()]}_renderPagination(){if(this.paginationEnabled)return s("calcite-pagination",{pageSize:1,startItem:this.pageIndex+1,totalItems:this.pageCount,onCalcitePaginationChange:e=>this.goToPage(e.currentTarget.startItem-1)})}_renderError(){let{messages:e}=this;return s("calcite-alert",{autoClose:!0,autoCloseDuration:"fast",icon:m.exclamationMarkTriangle,kind:"danger",label:e.errorOccured,open:this._hasAttachmentsViewError,slot:"alerts",onCalciteAlertClose:()=>{this.attachmentsViewOptions.error=null}},s("span",{slot:"message"},e.errorOccured))}_renderPrompt(){return this.prompt?s(ge,ee(Y({},this.prompt),{headingLevel:2})):void 0}_showDeletePrompt(){let{messages:e,messagesCommon:l}=this,n=V(e.deleteSelectionCount,{count:this.highlightIds.length});this.showPrompt({title:n,message:e.deleteRecordsRemoved,context:"danger",actions:{primary:{label:l.delete,action:this._onDeleteSelectionClick},secondary:{label:e.keepRecords,action:()=>this.clearPrompt()}}})}_showDeleteAttachmentPrompt(e,l){let{messages:n,messagesCommon:a}=this,r=V(n.deleteAttachmentCount,{count:l.length});this.showPrompt({title:r,message:n.deleteAttachmentConfirmation,context:"danger",actions:{primary:{label:a.delete,action:()=>A(this,null,function*(){try{yield this.deleteAttachments(e,l,!1)}finally{this.clearPrompt()}})},secondary:{label:a.cancel,action:()=>this.clearPrompt()}}})}_onDeleteSelectionClick(){return A(this,null,function*(){try{yield this.viewModel.deleteSelection()}finally{this.clearPrompt()}})}_renderHeaderMenuAction(e){let{disabled:l,hidden:n,icon:a,text:r,clickFunction:c}=e;if(!n)return s("calcite-action",{disabled:l??this.menuConfig?.disabled,icon:a??void 0,key:r,onclick:()=>c(),slot:"header-menu-actions",text:r,textEnabled:!0,title:r})}_renderHeaderMenuActions(){return this._shouldShowMenu?[this._renderDefaultHeaderMenuActions(),this._renderCustomHeaderMenuActions()]:[]}_renderDefaultHeaderMenuActions(){if(!this._hasDefaultMenuItems)return[];let{messages:e}=this;return[this._showRefreshDataAction&&{icon:m.refresh,text:e.refreshData,clickFunction:()=>this.refresh()},this._showDeleteSelectionAction&&{icon:m.delete,text:e.deleteSelection,clickFunction:()=>this.deleteSelection(!0)},this._showClearSelectionAction&&{icon:m.clearSelection,text:e.clearSelection,clickFunction:()=>this.highlightIds?.removeAll()},this._showZoomToSelectionAction&&{icon:m.zoomToSelection,text:e.zoomToSelection,clickFunction:()=>this.zoomToSelection()},this._showSelectedRecordsShowSelectedAction&&{icon:m.showSelected,text:e.showSelected,clickFunction:()=>{let{objectIds:l}=this;l.removeAll(),l.addMany(this.highlightIds.toArray())}},this._showSelectedRecordsShowAllAction&&{icon:m.showAll,text:e.showAllRecords,clickFunction:()=>this.objectIds.removeAll()},this._showExportSelectionToCSVAction&&{icon:m.exportToCSV,text:e.exportSelectionCSV,clickFunction:()=>this.exportSelectionToCSV()}].filter(te).map(l=>l&&this._renderHeaderMenuAction(l))}_renderCustomHeaderMenuActions(){return this.menuConfig?.items?.map(({disabled:e,hidden:l,icon:n,label:a,clickFunction:r})=>this._renderHeaderMenuAction({hidden:typeof l=="function"?l():l,icon:n,text:a,disabled:e,clickFunction:c=>r(c)}))??[]}_renderColumnVisibilityAction(){if(!this._showColumnsVisibilityAction)return[];let{_columnVisibilityActions:e,effectiveTable:l,id:n}=this,a=this.messages.toggleColumns;return s("calcite-action",{afterCreate:r=>e.set(n,r),afterRemoved:()=>e.delete(n),appearance:"transparent",bind:this,disabled:l.menuConfig?.disabled,icon:m.showColumn,id:`${n}__toggle-columns-action`,slot:"header-actions-end",text:a},this._effectiveVisibleElements.tooltips?s("calcite-tooltip",{closeOnClick:!0,overlayPositioning:"fixed",placement:"bottom-end",slot:"tooltip"},a):null)}_renderColumnVisibilityPopover(){if(!this._showColumnsVisibilityAction||this.effectiveTable.menuConfig?.disabled)return;let{effectiveTable:e}=this,l=this.messages.toggleColumns;return s("calcite-popover",{autoClose:!0,class:u.menuPopover,label:l,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:this._columnVisibilityActions.get(this.id)},s("calcite-list",{displayMode:"nested",filterEnabled:!0,filterPlaceholder:l,label:l,selectionMode:"multiple"},e.columns.toArray().map(n=>{let a=be(n)?n.columns?.map(r=>this._renderColumnListItem({column:r,table:e,ignoreSelect:!0})):void 0;return this._renderColumnListItem({column:n,table:e,items:a})})))}_renderColumnListItem(e){let{column:l,table:n,items:a,ignoreSelect:r}=e,{effectiveLabel:c,fieldName:p,hidden:d}=l;return s("calcite-list-item",{key:`toggle-columns__item-${p}`,label:c,open:!(!a?.length||d)||void 0,selected:!d,value:p,onCalciteListItemSelect:g=>{r&&g.stopPropagation(),n.toggleColumnVisibility(g.currentTarget.value)}},a)}_renderLayerDropdown(){let e=this.messages.selectALayer;return s("div",{class:u.layerDropdownMenu,key:`${this.id}-layerDropdown`,slot:"header-actions-start"},s("calcite-dropdown",{bind:this,maxItems:5,overlayPositioning:"fixed",placement:"bottom-start"},s("calcite-action",{icon:m.layers,slot:"trigger",text:e,title:e}),s("calcite-dropdown-group",{selectionMode:"single"},this._effectiveLayers.map((l,n)=>this._renderLayerDropdownItem(l,n))??null)))}_renderLayerDropdownItem(e,l){let n=this.visibleElements.layerDropdownIcons;return s("calcite-dropdown-item",{iconStart:n?_e(e):void 0,key:`dropdown-item-${l}`,label:e.title??"",selected:e===this.layer,value:e.id,onCalciteDropdownItemSelect:()=>{this.layer=e}},e.title)}_onRelatedNavigationItemClick(e){this.viewModel.drainRelatedTablesAboveIndex(e)}_collapseRelatedTable(e){this.viewModel.collapseRelatedTable(this.effectiveTable,e)}_onShowRelatedTable(e){this.showRelatedTableCallback||(this._collapseRelatedTable(e),this._createRelatedTable(e))}_createRelatedTable(e){return A(this,null,function*(){let{editingEnabled:l,effectiveTable:n,paginationEnabled:a,pageSize:r,view:c,viewModel:p}=this,{layer:d,objectId:g,relatedLayer:h,relationshipId:v}=e;yield d.load();let b=this.attachmentsEnabled&&ve(d),y=new X({layer:d,attachmentsEnabled:b,editingEnabled:l,paginationEnabled:a,pageSize:r,relatedRecordsEnabled:!0,relationshipConfig:{objectId:g,relatedLayer:h,relationshipId:v},relationshipColumnConfigs:fe(d,v),tableController:this,tableParent:n,view:c,showRelatedTableCallback:M=>p.emit("show-related-table",M)});this.relatedTables.add(y),this.scheduleRender()})}_renderAttachmentsView(){let{attachmentInfos:e,mode:l,objectId:n}=this.attachmentsViewOptions;return l!=="file"&&e.length&&n!=null?this._renderAttachmentsViewList():this._renderAttachmentsViewFilePane()}_renderAttachmentsViewFilePane(){let{attachmentsViewOptions:e,isSyncingAttachments:l,messages:n,messagesUnits:a,viewModel:{supportsAddAttachments:r}}=this,{attachmentId:c,attachmentInfos:p,candidates:d,objectId:g}=e,h=p.find(S=>S.id===c),v=p.length,b=d?.length,y=h?s("calcite-label",{alignment:"center",key:"replace-file-node",scale:"l"},n.replaceFile):void 0,M=b?void 0:s("calcite-label",{alignment:"center",key:"message-node",scale:"m"},r?g==null?n.noFeature:n.dragAndDropToUpload:n.editingRestricted),C=Array.from(d??[]).pop(),N=C?s("calcite-label",{key:"filename-node"},C.name):void 0,D=r&&g!=null,L=D&&b,U=s("input",{afterCreate:z,afterRemoved:Z,afterUpdate:z,bind:this,"data-node-ref":"_attachmentsInput",files:d,hidden:!0,name:"attachment",onchange:S=>this._onAttachmentsViewCandidateChange(S),type:"file"}),j=D?s("calcite-button",{appearance:"outline-fill",bind:this,disabled:l,iconStart:m.folderOpen,key:"select-node",loading:!1,onclick:()=>{this._attachmentsInput?.click()},width:"full"},n.selectFile):void 0,H=L?s("calcite-button",{appearance:"outline-fill",bind:this,disabled:l,iconStart:m.save,key:"save-node",loading:l,onclick:()=>{this.saveAttachmentsViewForm()},width:"full"},h?n.updateAttachment:n.addAttachment):void 0,G=v||b?s("calcite-button",{appearance:"transparent",bind:this,disabled:l,key:"cancel-node",onclick:()=>{this._attachmentsInput&&(this._attachmentsInput.value=""),e.reset(),e.attachmentInfos?.length&&(e.mode="list")},width:"full"},this.messagesCommon.cancel):void 0;return[s("div",{class:u.attachmentsView,key:"attachments-view"},s("div",{class:u.attachmentsViewContent,key:"attachments-view-content"},s("div",{bind:this,class:u.attachmentsViewDropArea,ondragover:S=>S.preventDefault(),ondrop:this._onAttachmentsViewDrop},s("calcite-icon",{class:u.attachmentsViewIcon,icon:m.upload,scale:"l"}),y,M,s("form",{afterCreate:S=>e.form=S,afterRemoved:()=>e.form=null,bind:this,key:"attachments-form"},s("fieldset",null,N,U,j,H,G)))),g!=null&&h!=null?s("div",{class:u.attachmentsViewInformation,key:"information"},this._renderAttachmentsViewThumbnail(h,200),s("label",{key:"file-label"},n.fileName),s("span",{key:"file-span"},h.name),s("label",{key:"size-label"},n.size),s("span",{key:"size-span"},W(a,h.size??0))):void 0)]}_renderAttachmentsViewList(){let{attachmentsViewOptions:e,messages:l,messagesUnits:n,viewModel:{store:{syncingAttachmentEdits:a},supportsDeleteAttachments:r,supportsUpdateAttachments:c}}=this,{attachmentInfos:p,objectId:d}=e;return s("calcite-list",{afterCreate:z,afterRemoved:Z,afterUpdate:z,bind:this,class:u.attachmentsViewList,"data-node-ref":"attachmentsList",key:`attachments-list-${d}`,label:l?.attachments,loading:a,ondragover:g=>g.preventDefault(),ondrop:this._onAttachmentsViewDrop,selectionMode:"multiple",onCalciteListChange:()=>this.scheduleRender()},...p?.map(g=>{let{id:h,name:v,size:b,url:y}=g,M=W(n,b??0);return s("calcite-list-item",{afterRemoved:()=>this.scheduleRender(),key:`attachment-${h}`,label:v,value:h},this._renderAttachmentsViewListThumbnail(g),s("span",{class:u.attachmentsViewListFileSize,slot:"actions-end",title:M},M),s("calcite-action",{appearance:"transparent",icon:m.downloadTo,key:`download-attachment-${h}`,label:`${v}`,onclick:C=>{C.preventDefault(),this.downloadAttachmentById(d??-1,h)},slot:"actions-end",text:l.downloadAttachment,title:l.downloadAttachment}),c&&d!=null?s("calcite-action",{appearance:"transparent",disabled:!c,icon:m.replaceImage,key:`replace-attachment-${h}`,label:`${v}`,onclick:()=>{e.mode="file",e.attachmentId=h},slot:"actions-end",text:l.updateAttachment,title:l.updateAttachment}):void 0,s("calcite-action",{appearance:"transparent",icon:m.launch,key:`launch-attachment-${h}`,label:`${v}`,onclick:()=>{y&&window.open(y,"_blank")},slot:"actions-end",text:l.viewAttachment,title:l.viewAttachment}),r&&d!=null?s("calcite-action",{appearance:"transparent",class:u.attachmentsViewListItemDelete,disabled:!r,icon:m.delete,key:`delete-attachment-${h}`,label:`${v}`,onclick:()=>{this.deleteAttachments(d,[h],!0)},slot:"actions-end",text:l.deleteAttachment,title:l.deleteAttachment}):void 0)}))}_renderAttachmentsViewListThumbnail(e){return s("div",{class:u.attachmentsViewListThumbnail,slot:"content-start"},s("a",{href:e.url??"",rel:"noreferrer",target:"_blank"},this._renderAttachmentsViewThumbnail(e)))}_renderAttachmentsViewThumbnail(e,l=64){let{contentType:n,name:a,size:r,url:c}=e,p=`${c}${c?.includes("?")?"&":"?"}w=${l}&s=${r}`;return this.viewModel.supportsResizeAttachments&&de(n)?s("img",{alt:a,key:`thumbnail-image-${a}`,src:p,title:a}):s("calcite-icon",{icon:he(n),key:`thumbnail-icon-${a}`,scale:"l",textLabel:a,title:a})}_onAttachmentsViewCandidateChange({target:e}){this.attachmentsViewOptions.candidates=e?.files}_onAttachmentsViewDrop(e){let{viewModel:l}=this;e.preventDefault(),(l.supportsAddAttachments||l.supportsUpdateAttachments)&&this.attachmentsViewOptions.set({mode:"file",candidates:e.dataTransfer?.files})}_renderNavigationBar(){let{effectiveTable:e,messages:l,messagesCommon:n,relatedTable:a,relatedTables:r}=this;if(!this._shouldShowNavigationBar)return;let{attachmentsList:c,attachmentsViewOptions:p,layer:d,viewModel:{supportsAddAttachments:g,supportsDeleteAttachments:h}}=e;if(!d)return;let{attachmentInfos:v,objectId:b}=p,y=b!=null,M=v.length,C=c?.selectedItems?.length??0,N=`${d.objectIdField}: ${b}`,D=V(l.selectedCount,{count:C}),L=V(l.attachmentsCount,{count:M}),U=y?s("calcite-action",{bind:this,icon:m.chevronRight,iconFlipRtl:!0,key:"navigation-feature",onclick:()=>e.scrollToRow(b),text:N,textEnabled:!0,title:N}):void 0,j=y?s("calcite-action",{icon:m.chevronRight,iconFlipRtl:!0,key:"navigation-attachments-label",label:L,onclick:()=>{M>0&&(p.mode="list")},text:L,textEnabled:!0,title:L}):void 0,H=y?s("calcite-chip",{closable:!0,closed:C===0,key:"navigation-chip",kind:"inverse",label:D,selected:!0,title:D,value:"selected",onCalciteChipClose:()=>c?.selectedItems?.forEach(I=>I.selected=!1)},D):void 0,G=a?s("calcite-label",{layout:"inline"},l.showAllTables,s("calcite-switch",{checked:this.allRelatedTablesVisible,onCalciteSwitchChange:I=>this.showAllRelatedTables=!!I.currentTarget.checked})):void 0,S=y&&p.mode==="list"&&b!=null&&C&&h?s("calcite-action",{icon:m.delete,iconFlipRtl:!0,key:"attachments-trash-all",onclick:()=>{e.deleteAttachments(b,c?.selectedItems?.map(I=>I.value)??[],!0)},text:n.delete,textEnabled:!0,title:V(l.deleteAttachmentCount,{count:C})}):void 0,Me=y&&p.mode==="list"&&g?s("calcite-action",{bind:this,icon:m.plus,iconFlipRtl:!0,key:"attachments-add",onclick:()=>{p.attachmentId=null,p.mode="file"},text:l.addAttachment,textEnabled:!0,title:l.addAttachment}):void 0;return s("div",{class:u.tableNavigation,key:"table-nav"},s("calcite-action",{icon:m.moveUp,iconFlipRtl:!0,key:"go-back",onclick:()=>{a&&this.drainRelatedTables(),e.attachmentsViewOptions.objectId=null},text:this.layer?.title??"",textEnabled:!1,title:a?l.exitRelatedRecords:l.exitAttachments}),r.toArray().map((I,Ce)=>this._renderRelatedTableNavigationAction(I,Ce)),U,j,s("div",null,H,G,S,Me))}_renderRelatedTableNavigationAction(e,l){let n=this._getLabelForRelatedTableNavigationAction(e);return s("calcite-action",{icon:m.chevronRight,iconFlipRtl:!0,key:l,onclick:()=>this._onRelatedNavigationItemClick(l),text:n,textEnabled:!0,title:e.layer?.title||""})}_getLabelForRelatedTableNavigationAction(e){let l=e.layer?.title;if(!l)return"";let{relatedTables:n}=this;return n.length<=1?l:n.indexOf(e)!==n.length-1&&l.length>20?`${l.slice(0,20)}...`:l}};t([i()],o.prototype,"_attachmentsInput",void 0),t([i()],o.prototype,"_columnVisibilityActions",void 0),t([i()],o.prototype,"_effectiveDescription",null),t([i()],o.prototype,"_effectiveLayers",null),t([i()],o.prototype,"_effectiveTitle",null),t([i()],o.prototype,"_effectiveVisibleElements",null),t([i()],o.prototype,"_filteredTables",null),t([i()],o.prototype,"_hasAttachmentsViewError",null),t([i()],o.prototype,"_hasCustomMenuItems",null),t([i()],o.prototype,"_hasDefaultMenuItems",null),t([i()],o.prototype,"_shouldShowGrid",null),t([i()],o.prototype,"_shouldShowMenu",null),t([i()],o.prototype,"_shouldShowAttachmentsView",null),t([i()],o.prototype,"_showClearSelectionAction",null),t([i()],o.prototype,"_showColumnsVisibilityAction",null),t([i()],o.prototype,"_showDeleteSelectionAction",null),t([i()],o.prototype,"_showExportSelectionToCSVAction",null),t([i()],o.prototype,"_showLayerDropdown",null),t([i()],o.prototype,"_shouldShowNavigationBar",null),t([i()],o.prototype,"_showRefreshDataAction",null),t([i()],o.prototype,"_showSelectedRecordsShowSelectedAction",null),t([i()],o.prototype,"_showSelectedRecordsShowAllAction",null),t([i()],o.prototype,"_showZoomToSelectionAction",null),t([i()],o.prototype,"_viewLayers",null),t([i()],o.prototype,"attachmentsList",void 0),t([i({readOnly:!0})],o.prototype,"grid",null),t([i()],o.prototype,"actionColumnConfig",null),t([i({readOnly:!0})],o.prototype,"activeFilters",null),t([i({readOnly:!0})],o.prototype,"activeSortOrders",null),t([i()],o.prototype,"allColumns",null),t([i({readOnly:!0})],o.prototype,"allRelatedTablesVisible",null),t([i()],o.prototype,"attachmentsEnabled",null),t([i()],o.prototype,"attachmentsViewOptions",null),t([i({type:re})],o.prototype,"attributeTableTemplate",null),t([i()],o.prototype,"autoRefreshEnabled",null),t([i()],o.prototype,"clearPrompt",null),t([i()],o.prototype,"columnPerformanceModeEnabled",null),t([i()],o.prototype,"columnReorderingEnabled",null),t([i({readOnly:!0})],o.prototype,"columns",null),t([i()],o.prototype,"description",void 0),t([i()],o.prototype,"disabled",void 0),t([i()],o.prototype,"editingEnabled",null),t([i()],o.prototype,"effectiveSize",null),t([i()],o.prototype,"effectiveTable",null),t([i()],o.prototype,"filterGeometry",null),t([i()],o.prototype,"filterBySelectionEnabled",null),t([i()],o.prototype,"hiddenFields",null),t([i()],o.prototype,"highlightEnabled",null),t([i()],o.prototype,"highlightIds",null),t([i()],o.prototype,"icon",null),t([i()],o.prototype,"initialSize",null),t([i()],o.prototype,"isQueryingOrSyncing",null),t([i()],o.prototype,"isSyncingAttachments",null),t([i()],o.prototype,"label",null),t([i()],o.prototype,"layer",null),t([i()],o.prototype,"layers",null),t([i()],o.prototype,"layerView",null),t([i()],o.prototype,"maxSize",null),t([i(),O("esri/widgets/FeatureTable/t9n/FeatureTable")],o.prototype,"messages",null),t([i(),O("esri/t9n/common")],o.prototype,"messagesCommon",null),t([i(),O("esri/core/t9n/Units")],o.prototype,"messagesUnits",null),t([i(),O("esri/widgets/support/t9n/uriUtils")],o.prototype,"messagesURIUtils",null),t([i()],o.prototype,"menuConfig",void 0),t([i()],o.prototype,"multipleSelectionEnabled",null),t([i()],o.prototype,"multiSortEnabled",null),t([i()],o.prototype,"objectIds",null),t([i()],o.prototype,"outFields",null),t([i()],o.prototype,"pageCount",null),t([i()],o.prototype,"pageIndex",null),t([i()],o.prototype,"pageSize",null),t([i()],o.prototype,"paginationEnabled",null),t([i()],o.prototype,"prompt",null),t([i()],o.prototype,"relatedRecordsEnabled",null),t([i()],o.prototype,"relatedTable",null),t([i()],o.prototype,"relatedTables",null),t([i()],o.prototype,"relationship",null),t([i()],o.prototype,"relationshipColumnConfigs",null),t([i()],o.prototype,"relationshipConfig",null),t([i()],o.prototype,"relationshipInfos",null),t([i()],o.prototype,"returnGeometryEnabled",null),t([i()],o.prototype,"returnMEnabled",null),t([i()],o.prototype,"returnZEnabled",null),t([i()],o.prototype,"rowHighlightIds",null),t([i()],o.prototype,"selectionSource",null),t([i()],o.prototype,"showAllRelatedTables",null),t([i()],o.prototype,"showPrompt",null),t([i()],o.prototype,"showRelatedTableCallback",null),t([i()],o.prototype,"size",null),t([i({readOnly:!0})],o.prototype,"state",null),t([i({constructOnly:!0})],o.prototype,"tableController",null),t([i({constructOnly:!0})],o.prototype,"tableParent",null),t([i()],o.prototype,"tableTemplate",null),t([i()],o.prototype,"tableTemplateOverride",null),t([i()],o.prototype,"title",void 0),t([i()],o.prototype,"timeExtent",null),t([i()],o.prototype,"timeZone",null),t([i()],o.prototype,"view",null),t([i({type:K}),pe(["cell-click","cell-dblclick","cell-pointerover","cell-pointerout","cell-keydown","column-reorder","show-related-table"])],o.prototype,"viewModel",void 0),t([i({type:x,nonNullable:!0})],o.prototype,"visibleElements",void 0),t([i({type:x})],o.prototype,"visibleElementsOverride",null),o=X=t([E("esri.widgets.FeatureTable")],o);var At=o;export{At as default};
