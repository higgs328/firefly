import{g as M}from"./chunk-XRGPJ3QY.js";function W(r,t){for(let e of r.values())if(t(e))return!0;return!1}function E(r,t){for(let e of r.values())if(t(e))return e;return null}function N(r,t,e){let n=r.get(t);if(n!==void 0)return n;let o=e();return r.set(t,o),o}function G(r){let t=new Map;return e=>(t.has(e)||t.set(e,r(e)),t.get(e))}var f=()=>M.getLogger("esri.core.accessorSupport.ensureTypes");function C(r){return r==null?r:new Date(r)}function I(r){return r==null?r:!!r}function B(r){return r==null?r:r.toString()}function D(r,t=0){return r==null?r:(r=parseFloat(r),isNaN(r)?t:r)}function F(r){return r==null?r:Math.round(parseFloat(r))}function x(r){return null}function X(r,t){return e=>{let n=r(e);return t.step!=null&&(n=Math.round(n/t.step)*t.step),t.min!=null&&(n=Math.max(t.min,n)),t.max!=null&&(n=Math.min(t.max,n)),n}}function O(r){return r?.constructor&&r.constructor.__accessorMetadata__!==void 0}function v(r,t){return t!=null&&r&&!(t instanceof r)}function S(r){return r&&"isCollection"in r}function k(r){return r?.Type?typeof r.Type=="function"?r.Type:r.Type.base:null}function L(r,t){if(!t?.constructor||!S(t.constructor))return A(r,t)?t:new r(t);let e=k(r.prototype.itemType),n=k(t.constructor.prototype.itemType);return e?n?e===n?t:e.prototype.isPrototypeOf(n.prototype)?new r(t):(A(r,t),t):new r(t):t}function A(r,t){return!!O(t)&&(f().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+d(r)+"'"),!0)}function V(r,t){return t==null?t:S(r)?L(r,t):v(r,t)?A(r,t)?t:new r(t):t}function d(r){return r?.prototype?.declaredClass||"unknown"}var _=new WeakMap;function q(r){switch(r){case Number:return t=>D(t);case g:return F;case Boolean:return I;case String:return B;case Date:return C;case m:return x;default:return N(_,r,()=>V.bind(null,r))}}function p(r,t){let e=q(r);return arguments.length===1?e:e(t)}function h(r,t,e){return arguments.length===1?h.bind(null,r):t&&(Array.isArray(t)?t.map(n=>r(n,e)):[r(t,e)])}function Y(r,t){return arguments.length===1?h(e=>p(r,e)):h(e=>p(r,e),t)}function j(r,t,e){return t!==0&&Array.isArray(e)?e.map(n=>j(r,t-1,n)):r(e)}function w(r,t,e){if(arguments.length===2)return i=>w(r,t,i);if(!e)return e;e=j(r,t,e);let n=t,o=e;for(;n>0&&Array.isArray(o);)n--,o=o[0];if(o!==void 0)for(let i=0;i<n;i++)e=[e];return e}function Z(r,t,e){return arguments.length===2?w(n=>p(r,n),t):w(n=>p(r,n),t,e)}function rr(r){return!!Array.isArray(r)&&!r.some(t=>{let e=typeof t;return!(e==="string"||e==="number"||e==="function"&&r.length>1)})}function z(r,t){if(arguments.length===2)return z(r).call(null,t);let e=new Set,n=r.filter(u=>typeof u!="function"),o=r.filter(u=>typeof u=="function");for(let u of r)typeof u!="string"&&typeof u!="number"||e.add(u);let i=null,y=null;return(u,s)=>{if(u==null)return u;let l=typeof u,c=l==="string"||l==="number";return c&&(e.has(u)||o.some(a=>l==="string"&&a===String||l==="number"&&a===Number))||l==="object"&&o.some(a=>!v(u,a))?u:(c&&n.length?(i||(i=n.map(a=>typeof a=="string"?`'${a}'`:`${a}`).join(", ")),f().error("Accessor#set",`'${u}' is not a valid value for this property, only the following values are valid: ${i}`)):typeof u=="object"&&o.length?(y||(y=o.map(a=>d(a)).join(", ")),f().error("Accessor#set",`'${u}' is not a valid value for this property, value must be one of ${y}`)):f().error("Accessor#set",`'${u}' is not a valid value for this property`),s&&(s.valid=!1),null)}}function K(r,t){if(arguments.length===2)return K(r).call(null,t);let e={},n=[],o=[];for(let s in r.typeMap){let l=r.typeMap[s];e[s]=p(l),n.push(d(l)),o.push(s)}let i=()=>`'${n.join("', '")}'`,y=()=>`'${o.join("', '")}'`,u=typeof r.key=="string"?s=>s[r.key]:r.key;return s=>{if(r.base&&!v(r.base,s)||s==null)return s;let l=u(s)||r.defaultKeyValue,c=e[l];if(!c)return f().error("Accessor#set",`Invalid property value, value needs to be one of ${i()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!v(r.typeMap[l],s))return s;if(typeof r.key=="string"&&!O(s)){let a={};for(let b in s)b!==r.key&&(a[b]=s[b]);return c(a)}return c(s)}}var g=class{},m=class{},tr={native:r=>({type:"native",value:r}),array:r=>({type:"array",value:r}),oneOf:r=>({type:"one-of",values:r})};function er(r){if(!r||!("type"in r))return!1;switch(r.type){case"native":case"array":case"one-of":return!0}return!1}function P(r){switch(r.type){case"native":return p(r.value);case"array":return h(P(r.value));case"one-of":return R(r);default:return null}}function R(r){let t=null;return(e,n)=>$(e,r)?e:(t==null&&(t=T(r)),f().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),n&&(n.valid=!1),null)}function T(r){switch(r.type){case"native":switch(r.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case g:return"integer";case Date:return"date";case m:return"null";default:return d(r.value)}case"array":return`array of ${T(r.value)}`;case"one-of":{let t=r.values.map(e=>T(e));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function $(r,t){if(r==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case g:return typeof r=="number";case Boolean:return typeof r=="boolean";case String:return typeof r=="string";case m:return r===null}return r instanceof t.value;case"array":return!!Array.isArray(r)&&!r.some(e=>!$(e,t.value));case"one-of":return t.values.some(e=>$(r,e))}}export{W as a,E as b,N as c,G as d,B as e,D as f,F as g,X as h,V as i,p as j,h as k,Y as l,w as m,Z as n,rr as o,z as p,K as q,g as r,m as s,tr as t,er as u,P as v};
