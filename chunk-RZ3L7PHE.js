import{a as N}from"./chunk-6W43TCY6.js";import{a as K}from"./chunk-M6A73MNY.js";import"./chunk-5X33F26B.js";import{a as q}from"./chunk-OB7VB62O.js";import{a as J}from"./chunk-RUNI4ZN4.js";import{a as j,b as z,h as H,j as V,s as T}from"./chunk-ZEWUF6OQ.js";import"./chunk-JUJYL7GW.js";import"./chunk-ZQ2SHTTW.js";import{a as S}from"./chunk-EPKVBNFW.js";import"./chunk-TGSXSDDB.js";import{a as b}from"./chunk-FHBFWDFD.js";import"./chunk-2HQALWZQ.js";import"./chunk-ZTR6OS44.js";import"./chunk-VRTKAD2J.js";import"./chunk-DBLKLHK2.js";import{a as G}from"./chunk-K75TK42V.js";import"./chunk-MDSLION2.js";import{a as D}from"./chunk-AXYQJCCX.js";import{a as d}from"./chunk-5XCFNEYX.js";import{a as O}from"./chunk-GQL2MBZT.js";import{b as A}from"./chunk-EBIFNV2H.js";import"./chunk-MGGSCSBE.js";import"./chunk-Z6BYFM7E.js";import"./chunk-CFRDSUTM.js";import{o as P}from"./chunk-FB4M3WPV.js";import"./chunk-SLAWDKDA.js";import"./chunk-4N4D2YQX.js";import"./chunk-G4DZJMGT.js";import"./chunk-3VRDAJCX.js";import"./chunk-WTB3O6DJ.js";import"./chunk-7P44K2YD.js";import"./chunk-32OAXCA4.js";import"./chunk-UST6HCE7.js";import"./chunk-K5T5FD5C.js";import"./chunk-MVHHPJM7.js";import"./chunk-VDO6JJ3Y.js";import"./chunk-WFKZLI6F.js";import"./chunk-X2B63YVS.js";import"./chunk-BAEF3CT6.js";import"./chunk-AUAZP44J.js";import"./chunk-PVDFCTA4.js";import"./chunk-KNVXE32P.js";import"./chunk-76ATOSLU.js";import"./chunk-CCJU4DSH.js";import{a as U,c as $,j as k}from"./chunk-TG45K3WR.js";import"./chunk-RAI4DTMT.js";import{b as R}from"./chunk-ACP3S2CH.js";import"./chunk-HVAXZ2NA.js";import"./chunk-T7DXJKX7.js";import"./chunk-TYYVNQUR.js";import{a as t}from"./chunk-QGVBCWUY.js";import{H as x}from"./chunk-MYO4NP2N.js";import{e as o}from"./chunk-NFIPKH6V.js";import"./chunk-JPU2PQZC.js";import{l as C}from"./chunk-5QEXLALV.js";import"./chunk-P6QFA5MM.js";import"./chunk-DGTD7Y73.js";import"./chunk-LI2SX4T6.js";import"./chunk-BWO7LS2H.js";import"./chunk-HEVQSRJ2.js";import"./chunk-OVHPPCBL.js";import"./chunk-SNFOAZZQ.js";import"./chunk-AML4XSEF.js";import"./chunk-4PTIEWMT.js";import"./chunk-TG2UTNEO.js";import"./chunk-YOFFGXOB.js";import"./chunk-XRGPJ3QY.js";import"./chunk-6MRUJ2UW.js";import"./chunk-2LI2GKBQ.js";import"./chunk-QBWJMFH5.js";import"./chunk-VTHXE323.js";var f="esri-table-list",I=`${f}__item`,_={base:f,actionMenu:`${f}__action-menu`,actionGroup:`${f}__action-group`,filterNoResults:`${f}__filter-no-results`,item:I,itemContentBottom:`${I}-content-bottom`,itemMessage:`${I}-message`,itemActionIcon:`${I}-action-icon`,itemActionImage:`${I}-action-image`,itemTemporaryIcon:`${I}-temporary-icon`,publishing:`${f}__publishing`,statusIndicator:`${f}__status-indicator`};var c=class extends x{constructor(){super(...arguments),this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryTableIndicators=!1}};t([o({type:Boolean,nonNullable:!0})],c.prototype,"closeButton",void 0),t([o({type:Boolean,nonNullable:!0})],c.prototype,"collapseButton",void 0),t([o({type:Boolean,nonNullable:!0})],c.prototype,"errors",void 0),t([o({type:Boolean,nonNullable:!0})],c.prototype,"filter",void 0),t([o({type:Boolean,nonNullable:!0})],c.prototype,"flow",void 0),t([o({type:Boolean,nonNullable:!0})],c.prototype,"heading",void 0),t([o({type:Boolean,nonNullable:!0})],c.prototype,"statusIndicators",void 0),t([o({type:Boolean,nonNullable:!0})],c.prototype,"temporaryTableIndicators",void 0),c=t([C("esri.widgets.TableList.TableListVisibleElements")],c);var B=c;function v(e){return e["data-item"]}function Q(e,l){e?.sort((s,r)=>{let n=l.indexOf(s.uid),m=l.indexOf(r.uid);return n>m?-1:n<m?1:0})}var W="nested",X=R.ofType(K),i=class extends G.IdentifiableMixin(O){constructor(e,l){super(e,l),this._rootListEl=null,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`table-${this.uid}`,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=z,this.minFilterItems=j,this.selectedItems=new X,this.selectionMode="none",this.viewModel=new N,this.visibleElements=new B,this._canMove=({dragEl:s,fromEl:r,toEl:n},m)=>{let h=m==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,u=v(s);if(!u?.sortable)return!1;let g=v(r),p=T(r),L=v(n),y=T(n),w=!!p&&!!y&&p===y,F={selected:u,from:g,to:L},M=r.group,E=n.group;return M&&E&&typeof h=="function"?h.call(null,F):w},this._onCalciteListOrderChange=s=>{let{_lastDragDetail:r}=this,{toEl:n,fromEl:m,dragEl:h,newIndex:u}=s;if(!m||!n||r?.newIndex===u&&r?.dragEl===h&&r?.toEl===n&&r?.fromEl===m)return;this._lastDragDetail=s,this._selectedDragItemLayerUid=h.value;let g=Array.from(m.children).filter(p=>p?.matches("calcite-list-item")).map(p=>p.value);Q(this.map?.tables,g)},this._onSelectedDragItemLayerUidChange=s=>{this._selectedDragItemLayerUid=s},this._onTriggerAction=(s,r)=>{this.triggerAction(s,r)},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0}}initialize(){this.addHandles([$(()=>this.viewModel.tableItems,"change",()=>H(this.selectedItems),k),U(()=>[this.filterPredicate,this._rootListEl],()=>V(this._rootListEl,this.filterPredicate))])}loadDependencies(){return A({button:()=>import("./chunk-K3RCADAN.js"),flow:()=>import("./chunk-5V3M627Q.js"),"flow-item":()=>import("./chunk-OQ4LXJHQ.js"),list:()=>import("./chunk-4MPCQ5DO.js"),notice:()=>import("./chunk-PEKK3NZO.js")})}get _dragEnabled(){return this.viewModel.totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this.viewModel.totalItems>=this.minFilterItems&&this.visibleElements.filter}get _visibleItems(){return this.tableItems?.filter(e=>!e.hidden&&(this.visibleElements.errors||!e.error))}get _openedPanelItems(){return this._visibleItems.filter(({hidden:e,panel:l})=>!e&&l?.open&&!l.disabled&&l.flowEnabled)}get icon(){return"table"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get tableItems(){return this.viewModel.tableItems}get tables(){return this.viewModel.tables}set tables(e){this.viewModel.tables=e}triggerAction(e,l){return this.viewModel.triggerAction(e,l)}render(){let e=this.viewModel?.state,{_visibleItems:l}=this,s={[b.hidden]:e==="loading",[b.disabled]:e==="disabled"};return d("div",{class:this.classes(_.base,b.widget,b.panel,s)},l?.length?this._renderItems():this._renderNoItems())}_renderNoItemsMessage(){return d("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return d("div",{class:_.itemMessage,key:"esri-layer-list__no-items"},d("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}_renderPanelFlowItems(){let{_openedPanelItems:e}=this;return e.toArray().map(({title:l,panel:s},r)=>{let n=()=>this._handlePanelFlowItemBack(s);return d("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:l,heading:s.title,headingLevel:this.headingLevel,key:`flow-panel-${s.uid}`,selected:r===e.length-1,onCalciteFlowItemBack:m=>{m.preventDefault(),n()}},s.render(),d("calcite-button",{appearance:"transparent",onclick:n,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,P(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,P(e))}_renderItems(){let{visible:e,collapsed:l,visibleElements:{closeButton:s,collapseButton:r,heading:n,flow:m},_dragEnabled:h,_visibleItems:u,_filterEnabled:g,_rootGroupUid:p,_openedPanelItems:L,selectionMode:y,messages:w,filterPlaceholder:F,filterText:M}=this,E=[d("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:s,closed:!e,collapsed:l,collapsible:r,heading:n?w.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!L.length,onCalciteFlowItemClose:()=>this.visible=!1},d("calcite-list",{afterCreate:a=>{this._rootListEl=a},afterRemoved:()=>{this._rootListEl=null},canPull:a=>this._canMove(a,"pull"),canPut:a=>this._canMove(a,"put"),"data-layer-type":p,displayMode:W,dragEnabled:h,filterEnabled:g,filterPlaceholder:F,filterProps:J,filterText:g?M:"",group:p,key:"root-list",label:w.widgetLabel,selectionAppearance:"border",selectionMode:y,onCalciteListChange:a=>this._handleCalciteListChange(a),onCalciteListDragEnd:a=>this._handleCalciteListDragEnd(a.detail),onCalciteListFilter:a=>this.filterText=a.currentTarget?.filterText??"",onCalciteListOrderChange:a=>this._onCalciteListOrderChange(a.detail)},u?.toArray().map(a=>this._renderItem(a)),u?.length&&g?d("div",{class:_.filterNoResults,slot:"filter-no-results"},d("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems()];return e?m?d("calcite-flow",{key:"root-flow"},E):E:null}_handleCalciteListDragEnd(e){let{fromEl:l,dragEl:s,oldIndex:r}=e;l.insertBefore(s,l.children[r])}_renderItem(e){return d(q,{canMove:this._canMove,css:_,displayMode:W,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer.uid}`,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange})}_handleCalciteListChange(e){let{selectionMode:l,selectedItems:s}=this;if(l==="none")return;let r=e.target.selectedItems.map(n=>v(n)).filter(Boolean);s.removeAll(),s.addMany(r)}};t([o()],i.prototype,"_rootListEl",void 0),t([o()],i.prototype,"_focusRootFlowItem",void 0),t([o()],i.prototype,"_focusPanelFlowItem",void 0),t([o()],i.prototype,"_dragEnabled",null),t([o()],i.prototype,"_filterEnabled",null),t([o()],i.prototype,"_visibleItems",null),t([o()],i.prototype,"_openedPanelItems",null),t([o()],i.prototype,"collapsed",void 0),t([o()],i.prototype,"dragEnabled",void 0),t([o()],i.prototype,"filterPlaceholder",void 0),t([o()],i.prototype,"filterPredicate",void 0),t([o()],i.prototype,"filterText",void 0),t([o()],i.prototype,"headingLevel",void 0),t([o()],i.prototype,"icon",null),t([o()],i.prototype,"label",null),t([o()],i.prototype,"listItemCanGiveFunction",void 0),t([o()],i.prototype,"listItemCanReceiveFunction",void 0),t([o()],i.prototype,"listItemCreatedFunction",null),t([o()],i.prototype,"map",null),t([o(),D("esri/widgets/TableList/t9n/TableList")],i.prototype,"messages",void 0),t([o(),D("esri/t9n/common")],i.prototype,"messagesCommon",void 0),t([o()],i.prototype,"minDragEnabledItems",void 0),t([o()],i.prototype,"minFilterItems",void 0),t([o({type:X})],i.prototype,"selectedItems",void 0),t([o()],i.prototype,"selectionMode",void 0),t([o({readOnly:!0})],i.prototype,"tableItems",null),t([o()],i.prototype,"tables",null),t([S("trigger-action"),o({type:N})],i.prototype,"viewModel",void 0),t([o({type:B,nonNullable:!0})],i.prototype,"visibleElements",void 0),i=t([C("esri.widgets.TableList")],i);var xe=i;export{xe as default};
